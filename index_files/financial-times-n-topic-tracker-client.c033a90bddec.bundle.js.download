(window.webpackJsonp=window.webpackJsonp||[]).push([["financial-times-n-topic-tracker-client"],{"31d22b12":function(e,t,r){"use strict";var n,o=r("84415bd2"),c=(n=r("1a4b61f3"))&&"object"==typeof n&&"default"in n?n.default:n;function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t?e.reduce((r,n)=>(e[r.length-1]&&r[r.length-1].length<t?r[r.length-1].push(n):r.push([n]),r),[]):[e]}const{URLSearchParams:i,URL:d}=window,a=new Set(["POST","PUT","DELETE"]),u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.headers=t.headers||{},t.credentials="include",a.has(t.method.toUpperCase())&&(t.body=Object.assign(t.body||{},{token:c.get("FTSession_s")||c.get("FTSession")})),t.body&&(t.body=JSON.stringify(t.body),t.headers["Content-Type"]="application/json; charset=utf-8"),fetch(e,t)};function p(e){let{articleId:t,userId:r,preferredConceptId:n,fromRecommendation:o,source:c}=e;if(!t)throw new Error("ARTICLE_ID_MISSING: articleId argument must be defined");if(!r)throw new Error("USER_ID_MISSING: userId argument must be defined");const s=new i;let d=`/__topic-tracker/${r}/article/${t}`;return o&&s.set("is_rec","true"),n&&s.set("preferredConceptId",n),c&&s.set("source",c),s.toString()&&(d+="?"+s.toString()),d}var l={isValidTopic:async function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!t.length)return{};const n=await Promise.all(s(t,30).map(async e=>{const t="/__topic-tracker/validate-concept?"+e.sort().map(e=>"conceptIds="+e).join("&");try{return await u(t,{method:"GET"}).then(o.json)}catch(t){const r={};return e.forEach(e=>{r[e]=!1}),r}}));return n.reduce((e,t)=>Object.assign(e,t),{})},getScoresForMultipleConcepts:async function(e){let{conceptIds:t=[],maxRecommendations:r,userId:n}=e;if(!t.length)throw new Error("NO_CONCEPT_IDS: At least one concept id must be provided");if(!n)throw new Error("NO_USER_ID: user id cannot be undefined");return(await Promise.all(s(t,10).map(e=>{const t=new i;r&&Number.isInteger(r)&&t.set("num_recs",r);for(const r of e)t.append("conceptIds",r);return u(`/__topic-tracker/${n}/concepts/scores?${t.toString()}`,{method:"GET",cache:"no-cache"}).then(o.json)}))).reduce((e,t)=>Object.assign(e,t),{})},getArticleScore:function(e){let{articleId:t,userId:r,preferredConceptId:n,fromRecommendation:c,source:s}=e;const i=p({articleId:t,userId:r,preferredConceptId:n,fromRecommendation:c,source:s});return u(i,{method:"GET"}).then(o.json)},postArticleRead:function(e){let{articleId:t,userId:r,preferredConceptId:n,fromRecommendation:o,source:c}=e;const s=p({articleId:t,userId:r,preferredConceptId:n,fromRecommendation:o,source:c});return u(s,{method:"POST"}).then(e=>{if(e.status>=400&&404!==e.status)throw new Error(e.statusText)})},getEmailDigestScores:async function(e){let{conceptIds:t=[],maxRecommendations:r,userId:n}=e;if(!t.length)throw new Error("NO_CONCEPT_IDS: At least one concept id must be provided");if(!n)throw new Error("NO_USER_ID: user id cannot be undefined");return(await Promise.all(s(t,10).map(e=>{const t=new i;r&&Number.isInteger(r)&&t.set("num_recs",r);for(const r of e)t.append("conceptIds",r);return u(`/__topic-tracker/${n}/concepts/digest?${t.toString()}`,{method:"GET",cache:"no-cache"}).then(o.json)}))).reduce((e,t)=>Object.assign(e,t),{})}};e.exports=l}}]);
//# sourceMappingURL=financial-times-n-topic-tracker-client.c033a90bddec.bundle.js.map