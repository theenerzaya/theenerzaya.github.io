/*! permutive-javascript-sdk v19.38.0 (web) (built 2022-11-01T15:42:38.514Z) */(()=>{"use strict";var __webpack_modules__={2688:(e,t,n)=>{function i(e){return e instanceof Error?e:new Error("string"==typeof e?e:JSON.stringify(e))}n.d(t,{w:()=>i})},787:(e,t,n)=>{n.d(t,{A:()=>o});var i=n(3735),r=n(6567);function o(e){return(0,i.zG)((0,r.Y3)((()=>JSON.parse(e))),(0,r.fS)(i.gn))}},7183:(e,t,n)=>{n.d(t,{h:()=>i});const i=e=>new r(e);class r{constructor(e){const t=this;this._worker=e,this._callbacks={},this._id=0,e.addEventListener("message",(function(e){r.onMessage(t,e)}))}set id(e){this._id=e}get id(){return this._id}newId(){const e=this.id;return this.id=this.id+1,e}static onMessage(e,t){if(n=t.data,!(Array.isArray(n)&&n.length>=2))return;var n;const[i,r,o]=t.data,s=e._callbacks[i];s&&(delete e._callbacks[i],s(r,o))}static isServiceWorker(e){return void 0!==e.controller}postMessage(e){const t=this,n=this.newId(),i=[n,e];return new Promise((function(e,o){var s;if(t._callbacks[n]=function(t,n){if(t)return o(new Error(t.message));e(n)},r.isServiceWorker(t._worker)){const e=new MessageChannel;e.port1.onmessage=function(e){r.onMessage(t,e)},null===(s=t._worker.controller)||void 0===s||s.postMessage(i,[e.port2])}else t._worker.postMessage(i)}))}}},1828:(e,t,n)=>{n.d(t,{ap:()=>o,gz:()=>u});var i=n(3735),r=n(9384);function o(e,t){return function(n){return function(i){return e.ap(e.map(i,(function(e){return function(n){return t.ap(e,n)}})),n)}}}function s(e,t,n){return function(i){for(var r=Array(n.length+1),o=0;o<n.length;o++)r[o]=n[o];return r[n.length]=i,0===t?e.apply(null,r):s(e,t-1,r)}}var a={1:function(e){return[e]},2:function(e){return function(t){return[e,t]}},3:function(e){return function(t){return function(n){return[e,t,n]}}},4:function(e){return function(t){return function(n){return function(i){return[e,t,n,i]}}}},5:function(e){return function(t){return function(n){return function(i){return function(r){return[e,t,n,i,r]}}}}}};function c(e){return r.e$.call(a,e)||(a[e]=s(i.bc,e-1,[])),a[e]}function u(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var i=t.length,r=c(i),o=e.map(t[0],r),s=1;s<i;s++)o=e.ap(o,t[s]);return o}}},5846:(e,t,n)=>{n.d(t,{oA:()=>U,e5:()=>A,t9:()=>P,hX:()=>R,DZ:()=>T,Ew:()=>E,xH:()=>x,jV:()=>S,xb:()=>y,UI:()=>M,uK:()=>G,u4:()=>j,vP:()=>N,DY:()=>C,G0:()=>q});var i=n(3735),r=(n(7341),n(9384)),o=n(4814),s=function(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},a=function(e){return e.length>0},c=function(e){return function(t){return s(s([],t,!0),[e],!1)}},u=c,l=function(e){var t=function(e){return function(t){if(1===t.length)return f(t);for(var n=[m(t)],i=function(t){n.every((function(n){return!e.equals(n,t)}))&&n.push(t)},r=0,o=h(t);r<o.length;r++)i(o[r]);return n}}(e);return function(e){return function(n){return t((0,i.zG)(n,g(e)))}}},d=r.r1;function g(e,t){return t?e.concat(t):function(t){return t.concat(e)}}var f=d,p=function(e){return[e]};o.xP,o.Lx,o.u4,o.OE,o.nq,o.iw,o.YM,o.ZN,o.Eh,r.F4;var m=o.YM,h=function(e){return e.slice(1)};o.Z$,o.VV,o.Fp,o.j0;o.ur;var w=n(3328),_=n(4870),y=(n(5605),function(e){return 0===e.length}),v=a,b=u;w.P5,w.YM,w.Z$;w.cx;function E(e){return w.Ew(e)}w.f2;w.JO,w.qr;var k=function(e){return e.slice()},C=function(e){return function(t){return t.length<=1?k(t):t.slice().sort(e.compare)}};var P=w.t9;function q(e){var t=l(e);return function(n,i){if(void 0===i){var r=q(e);return function(e){return r(e,n)}}return v(n)&&v(i)?t(i)(n):v(n)?k(n):k(i)}}function S(e){var t=P(e);return function(n,i){if(void 0===i){var r=S(e);return function(e){return r(e,n)}}return n.filter((function(e){return t(e,i)}))}}function A(e){var t=P(e);return function(n,i){if(void 0===i){var r=A(e);return function(e){return r(e,n)}}return n.filter((function(e){return!t(e,i)}))}}var L=function(e,t,n){return(0,i.zG)(e,j(t,n))},I=(w.kp,w.Eq,p),M=function(e){return function(t){return t.map((function(t){return e(t)}))}},D=function(e){return function(t){return(0,i.zG)(t,function(e){return function(t){for(var n=[],i=0;i<t.length;i++)n.push.apply(n,e(i,t[i]));return n}}((function(t,n){return e(n)})))}},x=D(i.yR),O=function(e){return function(t){for(var n=[],i=0;i<t.length;i++){var o=e(i,t[i]);r.pC(o)&&n.push(o.value)}return n}},T=function(e){return O((function(t,n){return e(n)}))},U=T(i.yR),R=function(e){return function(t){return t.filter(e)}},G=function(e){return B((function(t,n){return e(n)}))},B=function(e){return function(t){for(var n=[],i=[],r=0;r<t.length;r++){var o=t[r];e(r,o)?i.push(o):n.push(o)}return(0,_.s4)(n,i)}},j=(w.Lx,w.xP,w.u4),N=(w.OE,w.nq,w.iw,function(e){return function(t){return L(t,e.of([]),(function(t,n){return e.ap(e.map(t,(function(e){return function(t){return(0,i.zG)(e,b(t))}})),n)}))}});w.ZN,w.Eh,w.pR,w.pJ,w.oR,w.yW,w.j0,r.F4},8198:(e,t,n)=>{n.d(t,{G5:()=>h,dO:()=>f,Pd:()=>y,tS:()=>_,g_:()=>A,ij:()=>D,Yo:()=>k,DT:()=>E,fS:()=>L,nM:()=>C,tO:()=>P,t$:()=>a,UI:()=>g,Vn:()=>v,EQ:()=>S,vx:()=>M,F2:()=>c,LF:()=>I,i$:()=>O,Y3:()=>x});var i=n(9384);function r(e){return function(t){return function(n){return e.fromEither(i.Wi(n)?i.t$(t()):i.F2(n.value))}}}function o(e){return function(t,n){return function(r){return e.fromEither(t(r)?i.F2(r):i.t$(n(r)))}}}var s=n(3735),a=(n(7341),i.t$),c=i.F2,u=function(e,t){return(0,s.zG)(e,g(t))},l=function(e,t){return(0,s.zG)(e,m(t))},d="Either",g=function(e){return function(t){return C(t)?t:c(e(t.right))}},f={URI:d,map:u},p=c,m=function(e){return function(t){return C(t)?t:C(e)?e:c(t.right(e.right))}},h={URI:d,map:u,ap:l},w=function(e){return function(t){return C(t)?t:e(t.right)}},_=w,y=function(e,t){return function(n){return C(n)?a(e(n.left)):c(t(n.right))}},v=function(e){return function(t){return C(t)?a(e(t.left)):t}},b={URI:d,fromEither:s.yR},E=o(b),k=r(b),C=i.nM,P=i.tO,q=function(e,t){return function(n){return C(n)?e(n.left):t(n.right)}},S=q,A=S,L=function(e){return function(t){return C(t)?e(t.left):t.right}},I=function(e){return C(e)?c(e.left):a(e.right)},M=function(e){return function(t){return C(t)?e(t.left):t}},D=function(e){return function(t){return null==t?a(e):c(t)}},x=function(e,t){try{return c(e())}catch(e){return a(t(e))}},O=q(s.yR,s.yR);i.F4,i.Xl},4268:(e,t,n)=>{n.d(t,{Uz:()=>r,f7:()=>i,w4:()=>o});n(3735);var i=function(e){return{equals:function(t,n){return t===n||e(t,n)}}},r=function(e){return function(t){return i((function(n,i){return t.equals(e(n),e(i))}))}},o={equals:function(e,t){return e===t}};o.equals},7341:(e,t,n)=>{function i(e,t){return function(n){return function(i){return e.map(i,(function(e){return t.map(e,n)}))}}}function r(e){return function(t,n){return function(i){return e.map(i,(function(e){var i;return Object.assign({},e,((i={})[t]=n(e),i))}))}}}n.d(t,{Hr:()=>r,UI:()=>i})},6567:(e,t,n)=>{n.d(t,{DT:()=>a,EQ:()=>h,G:()=>s,UI:()=>u,Uo:()=>g,Wi:()=>p,Y3:()=>v,YP:()=>o,fS:()=>_,g_:()=>w,ij:()=>y,pC:()=>f,tS:()=>d});var i=n(3735),r=(n(7341),n(9384)),o=(n(6017),n(4870),n(5605),r.YP),s=r.G;function a(e){return function(t){return e(t)?s(t):o}}var c=function(e){return"Left"===e._tag?o:s(e.right)},u=function(e){return function(t){return p(t)?o:s(e(t.value))}},l=s,d=function(e){return function(t){return p(t)?o:e(t.value)}},g=(i.yR,c),f=r.pC,p=function(e){return"None"===e._tag},m=function(e,t){return function(n){return p(n)?e():t(n.value)}},h=m,w=h,_=function(e){return function(t){return p(t)?e():t.value}},y=function(e){return null==e?o:s(e)},v=function(e){try{return s(e())}catch(e){return o}};r.F4,r.Xl},7209:(e,t,n)=>{n.d(t,{Fp:()=>c,VV:()=>a,Zt:()=>s,uZ:()=>u});var i=n(4268),r=n(3735),o=function(e){return function(t,n){return t===n||0===e(t,n)}},s=function(e){return{equals:o(e),compare:function(t,n){return t===n?0:e(t,n)}}},a=(r.W8,function(e){return function(t,n){return t===n||e.compare(t,n)<1?t:n}}),c=function(e){return function(t,n){return t===n||e.compare(t,n)>-1?t:n}},u=function(e){var t=a(e),n=c(e);return function(e,i){return function(r){return n(t(r,i),e)}}};i.w4.equals},6017:(e,t,n)=>{n.d(t,{ff:()=>i});n(3735);var i=function(e){return function(t){return!e(t)}}},3328:(e,t,n)=>{n.d(t,{Eh:()=>R,Eq:()=>C,Ew:()=>_,JO:()=>v,Lx:()=>D,OE:()=>x,P5:()=>p,YM:()=>m,Z$:()=>h,ZN:()=>U,cx:()=>w,f2:()=>y,iw:()=>T,j0:()=>F,kp:()=>k,nq:()=>O,oR:()=>j,pJ:()=>B,pR:()=>G,qr:()=>b,t9:()=>E,u4:()=>M,xH:()=>S,xP:()=>I,yW:()=>W});var i=n(4268),r=n(3735),o=(n(7341),n(9384)),s=n(4011),a=n(7209),c=n(4814),u=(n(4870),n(5605),function(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}),l=function(e){return 0===e.length},d=c.Od;c.Ce,c.ws,c.R3,c.Im;var g=function(e,t){return function(n){return d(n)?t(n):e()}},f=c.dC;function p(e,t){return void 0===t?function(t){return p(e,t)}:f(e,t)?o.YP:o.G(t[e])}var m=function(e){return d(e)?o.G(c.YM(e)):o.YP},h=function(e){return d(e)?o.G(c.Z$(e)):o.YP};var w=function(e){return function(t){for(var n=0;n<t.length;n++)if(e(t[n]))return o.G(n);return o.YP}};function _(e){return function(t){for(var n=0;n<t.length;n++)if(e(t[n]))return o.G(t[n]);return o.YP}}var y=function(e){return function(t){for(var n=0;n<t.length;n++){var i=e(t[n]);if(o.pC(i))return i}return o.YP}};var v=function(e){return function(t){for(var n=t.length-1;n>=0;n--){var i=e(t[n]);if(o.pC(i))return i}return o.YP}},b=function(e){return function(t){for(var n=t.length-1;n>=0;n--)if(e(t[n]))return o.G(n);return o.YP}};function E(e){return function(t,n){if(void 0===n){var i=E(e);return function(e){return i(t,e)}}for(var r,o=0;o<n.length;o++)if(r=n[o],e.equals(r,t))return!0;return!1}}var k=function(e,t){return(0,r.zG)(e,B(t))},C=function(e,t){return(0,r.zG)(e,j(t))},P=c.of,q=function(e){return function(t){return(0,r.zG)(t,function(e){return function(t){if(l(t))return N;for(var n=[],i=0;i<t.length;i++)n.push.apply(n,e(i,t[i]));return n}}((function(t,n){return e(n)})))}},S=q(r.yR),A=function(e){return function(t){for(var n=[],i=0;i<t.length;i++){var r=e(i,t[i]);o.pC(r)&&n.push(r.value)}return n}},L=function(e){return A((function(t,n){return e(n)}))},I=(r.yR,function(e){return function(t){return function(n){return n.reduce((function(n,i,r){return e.concat(n,t(r,i))}),e.empty)}}}),M=function(e,t){return x(e,(function(e,n,i){return t(n,i)}))},D=function(e){var t=I(e);return function(e){return t((function(t,n){return e(n)}))}},x=function(e,t){return function(n){for(var i=n.length,r=e,o=0;o<i;o++)r=t(o,r,n[o]);return r}},O=function(e,t){return T(e,(function(e,n,i){return t(n,i)}))},T=function(e,t){return function(n){return n.reduceRight((function(e,n,i){return t(i,n,e)}),e)}},U=function(e){return{show:function(t){return"[".concat(t.map(e.show).join(", "),"]")}}},R=function(e){return(0,i.f7)((function(t,n){return t.length===n.length&&t.every((function(t,i){return e.equals(t,n[i])}))}))},G=function(e){return(0,a.Zt)((function(t,n){for(var i=t.length,r=n.length,o=Math.min(i,r),a=0;a<o;a++){var c=e.compare(t[a],n[a]);if(0!==c)return c}return s.Df.compare(i,r)}))},B=function(e){return function(t){for(var n=u([],e(t),!0),i=[];n.length>0;){var r=n.shift();o.nM(r)?n.unshift.apply(n,e(r.left)):i.push(r.right)}return i}},j=function(e){return function(t){var n=e(t),i=[],r=[];function s(t){o.nM(t)?e(t.left).forEach((function(e){return i.push(e)})):r.push(t.right)}for(var a=0,c=n;a<c.length;a++){s(c[a])}for(;i.length>0;)s(i.shift());return r}},N=(c.oo,c.cS);function W(e){return function(t){return t.every(e)}}var F=function(e){var t=c.j0(e);return function(n){return g((function(){return e.empty}),t(n))}};o.F4,c.w6,c.QI,c.Ss},4814:(e,t,n)=>{n.d(t,{R3:()=>w,Im:()=>h,ur:()=>G,QI:()=>j,cS:()=>d,Lx:()=>P,xP:()=>A,Eh:()=>D,ZN:()=>M,YM:()=>x,j0:()=>B,Od:()=>g,dC:()=>f,Z$:()=>T,Fp:()=>R,VV:()=>U,of:()=>k,Ce:()=>m,ws:()=>p,w6:()=>v,u4:()=>C,nq:()=>q,iw:()=>L,OE:()=>S,Ss:()=>N,oo:()=>_});var i,r=n(4268),o=n(3735),s=(n(7341),n(9384)),a=n(7209),c=function(e){return{concat:a.VV(e)}},u=function(e){return{concat:a.Fp(e)}};i=void 0;var l=function(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},d=s.Xl,g=s.Od,f=function(e,t){return e<0||e>=t.length},p=function(e){return function(t){return l([e],t,!0)}},m=p,h=function(e){return function(t){return l(l([],t,!0),[e],!1)}},w=h,_=function(e,t,n){if(g(n)){var i=s.r1(n);return i.splice(e,0,t),i}return[t]},y=function(e){return function(t){for(var n=Math.max(0,Math.floor(t)),i=[e(0)],r=1;r<n;r++)i.push(e(r));return i}},v=function(e,t){return e<=t?y((function(t){return e+t}))(t-e+1):[e]};function b(e,t){return t?e.concat(t):function(t){return t.concat(e)}}var E=function(e){return function(t){for(var n=[e,t[0]],i=1;i<t.length;i++)n.push(e,t[i]);return n}},k=s.ri,C=function(e,t){return S(e,(function(e,n,i){return t(n,i)}))},P=function(e){return function(t){return function(n){return n.slice(1).reduce((function(n,i){return e.concat(n,t(i))}),t(n[0]))}}},q=function(e,t){return L(e,(function(e,n,i){return t(n,i)}))},S=function(e,t){return function(n){return n.reduce((function(e,n,i){return t(i,e,n)}),e)}},A=function(e){return function(t){return function(n){return n.slice(1).reduce((function(n,i,r){return e.concat(n,t(r+1,i))}),t(0,n[0]))}}},L=function(e,t){return function(n){return n.reduceRight((function(e,n,i){return t(i,n,e)}),e)}},I=s.YM,M=function(e){return{show:function(t){return"[".concat(t.map(e.show).join(", "),"]")}}},D=function(e){return(0,r.f7)((function(t,n){return t.length===n.length&&t.every((function(t,i){return e.equals(t,n[i])}))}))},x=(s.F4,I),O=s.Gb,T=function(e){return e[e.length-1]},U=function(e){var t=c(e);return function(e){return e.reduce(t.concat)}},R=function(e){var t=u(e);return function(e){return e.reduce(t.concat)}},G=function(e){return function(t){return t.reduce(e.concat)}},B=function(e){var t=G(e);return function(e){return(0,o.ls)(function(e){return function(t){var n=O(t);return g(n)?(0,o.zG)(n,E(e),m(x(t))):t}}(e),t)}};function j(e,t){return void 0===t?m(e):(0,o.zG)(t,m(e))}var N=function(e,t){return(0,o.zG)(e,b([t]))}},356:(e,t,n)=>{n.d(t,{hX:()=>J,jV:()=>B,xb:()=>O,XP:()=>U,dx:()=>R});n(4268);var i=n(3735),r=n(9384),o=(n(4870),n(2751)),s=(n(5605),function(e){for(var t in e)if(r.e$.call(e,t))return!1;return!0}),a=function(e){return function(t){return Object.keys(t).sort(e.compare)}};o.Df;var c=function(e,t){return function(n){if(r.e$.call(n,e)&&n[e]===t)return n;var i=Object.assign({},n);return i[e]=t,i}},u=function(e,t){return r.e$.call(t,e)};var l={};function d(e){return function(t){var n={};for(var i in t)r.e$.call(t,i)&&(n[i]=e(i,t[i]));return n}}function g(e){return d((function(t,n){return e(n)}))}function f(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(2===e.length)return f(o.Df).apply(void 0,e);var n=a(e[0]);return function(e,t){return function(i){for(var r=e,o=n(i),s=o.length,a=0;a<s;a++){var c=o[a];r=t(c,r,i[c])}return r}}}function p(e){if("compare"in e){var t=a(e);return function(e){return function(n){return function(i){for(var r=e.empty,o=t(i),s=o.length,a=0;a<s;a++){var c=o[a];r=e.concat(r,n(c,i[c]))}return r}}}}return p(o.Df)(e)}function m(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(2===e.length)return m(o.Df).apply(void 0,e);var n=a(e[0]);return function(e,t){return function(i){for(var r=e,o=n(i),s=o.length-1;s>=0;s--){var a=o[s];r=t(a,i[a],r)}return r}}}function h(e){return S(o.Df)(e)}function w(e){return function(t){var n={},i=!1;for(var o in t)if(r.e$.call(t,o)){var s=t[o];e(o,s)?n[o]=s:i=!0}return i?n:t}}var _=function(e){return function(t){return function(n){if(s(n)||s(t))return l;var i={};for(var r in n)u(r,t)&&(i[r]=e.concat(n[r],t[r]));return i}}},y=function(e,t){return(0,i.zG)(e,g(t))},v=function(e){var t=I(e);return function(e,n,r){return(0,i.zG)(e,t(n,r))}},b=function(e){return function(t){var n=M(e)(t);return function(e,t){return(0,i.zG)(e,n(t))}}},E=function(e){var t=D(e);return function(e,n,r){return(0,i.zG)(e,t(n,r))}},k=function(e){var t=f(e);return function(e,n,r){return(0,i.zG)(e,t(n,r))}},C=function(e){var t=p(e);return function(e){var n=t(e);return function(e,t){return(0,i.zG)(e,n(t))}}},P=function(e){var t=m(e);return function(e,n,r){return(0,i.zG)(e,t(n,r))}},q=function(e){var t=A(e);return function(e){var n=t(e);return function(e,t){return n(e,(0,i.ls)(i.SK,t))}}},S=function(e){var t=q(e);return function(e){var n=t(e);return function(e){return n(e,i.yR)}}},A=function(e){return function(t){var n=a(e);return function(e,i){var r=n(e);if(0===r.length)return t.of(l);for(var o=t.of({}),s=function(n){o=t.ap(t.map(o,(function(e){return function(t){var i;return Object.assign({},e,((i={})[n]=t,i))}})),i(n,e[n]))},a=0,c=r;a<c.length;a++){s(c[a])}return o}}},L=function(e){return w((function(t,n){return e(n)}))};function I(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var n=f(e[0]);return function(e,t){return n(e,(function(e,n,i){return t(n,i)}))}}return I(o.Df).apply(void 0,e)}function M(e){if("compare"in e){var t=p(e);return function(e){var n=t(e);return function(e){return n((function(t,n){return e(n)}))}}}return M(o.Df)(e)}function D(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var n=m(e[0]);return function(e,t){return n(e,(function(e,n,i){return t(n,i)}))}}return D(o.Df).apply(void 0,e)}var x="ReadonlyRecord";o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df;o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df;var O=s,T=function(e){return function(t){return Object.keys(t).sort(e.compare)}},U=T(o.Df);var R=c;function G(e){return h(e)}var B=function(e){return function(t){return function(n){return O(n)||O(t)?{}:_(e)(t)(n)}}},j=y,N=v,W=b,F=E,K=k,z=C,$=P,H=q,V=function(e){return function(t){var n=T(e);return function(e,i){var r=n(e);if(0===r.length)return t.of({});for(var o=t.of({}),s=function(n){o=t.ap(t.map(o,(function(e){return function(t){return e[n]=t,e}})),i(n,e[n]))},a=0,c=r;a<c.length;a++){s(c[a])}return o}}},J=L;var Q="Record";o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df},4870:(e,t,n)=>{n.d(t,{s4:()=>i});n(3735);var i=function(e,t){return{left:e,right:t}}},5857:(e,t,n)=>{n.d(t,{e5:()=>g,Eh:()=>u,G0:()=>d});var i=n(4268),r=n(6017);new Set;var o=function(e){return function(t){for(var n,i=t.values(),r=!1;!r&&!(n=i.next()).done;)r=e(n.value);return r}};function s(e){return(0,r.ff)(o((0,r.ff)(e)))}function a(e){var t=c(e);return function(n,i){if(void 0===i){var r=a(e);return function(e){return r(e,n)}}return s((function(e){return t(e,i)}))(n)}}function c(e){return function(t,n){if(void 0===n){var i=c(e);return function(e){return i(t,e)}}for(var r,o=n.values(),s=!1;!s&&!(r=o.next()).done;)s=e.equals(t,r.value);return s}}var u=function(e){var t=a(e);return(0,i.f7)((function(e,n){return t(e,n)&&t(n,e)}))};function l(e){return function(t){for(var n,i=t.values(),r=new Set;!(n=i.next()).done;){var o=n.value;e(o)&&r.add(o)}return r}}function d(e){var t=p(e);return function(n,i){if(void 0===i){var r=d(e);return function(e){return r(n,e)}}if(f(n))return i;if(f(i))return n;var o=new Set(n);return i.forEach((function(e){t(e,o)||o.add(e)})),o}}function g(e){var t=p(e);return function(n,i){if(void 0===i){var r=g(e);return function(e){return r(e,n)}}return l((function(e){return!t(e,i)}))(n)}}new Set;var f=function(e){return 0===e.size},p=c},5151:(e,t,n)=>{n.d(t,{Hi:()=>h,PM:()=>m,RD:()=>E,UA:()=>w,UI:()=>u,dO:()=>p,oE:()=>C,of:()=>d,pE:()=>k,tD:()=>o,tS:()=>g});var i=n(3735),r=(n(7341),n(9384)),o=function(e){return function(){return Promise.resolve().then(e)}};var s=function(e,t){return(0,i.zG)(e,u(t))},a=function(e,t){return(0,i.zG)(e,l(t))},c=function(e,t){return(0,i.zG)(e,g(t))},u=function(e){return function(t){return function(){return Promise.resolve().then(t).then(e)}}},l=function(e){return function(t){return function(){return Promise.all([Promise.resolve().then(t),Promise.resolve().then(e)]).then((function(e){return(0,e[0])(e[1])}))}}},d=function(e){return function(){return Promise.resolve(e)}},g=function(e){return function(t){return function(){return Promise.resolve().then(t).then((function(t){return e(t)()}))}}},f="Task";var p={URI:f,map:s},m={URI:f,of:d},h={URI:f,map:s,ap:a},w={URI:f,map:s,of:d,ap:a,chain:c},_=i.yR,y=(r.F4,d(r.Xl)),v=function(e){var t=function(e){return function(t){return function(){return Promise.all(t.map((function(t,n){return Promise.resolve().then((function(){return e(n,t)()}))})))}}}(e);return function(e){return r.Od(e)?t(e):y}},b=function(e){var t=function(e){return function(t){return function(){return r.Gb(t).reduce((function(t,n,i){return t.then((function(t){return Promise.resolve().then(e(i+1,n)).then((function(e){return t.push(e),t}))}))}),Promise.resolve().then(e(0,r.YM(t))).then(r.ri))}}}(e);return function(e){return r.Od(e)?t(e):y}},E=function(e){return v((function(t,n){return e(n)}))}(i.yR),k=function(e){return b((function(t,n){return e(n)}))},C={URI:f,map:s,of:d,ap:a,chain:c,fromIO:o,fromTask:_}},9705:(e,t,n)=>{function i(e){return function(t,n){return function(i){return e.chain(i,(function(i){return e.map(n(i),(function(e){var n;return Object.assign({},i,((n={})[t]=e,n))}))}))}}}n.d(t,{Do:()=>Y,ak:()=>Z,tS:()=>H,g_:()=>j,Uo:()=>G,fF:()=>R,t$:()=>x,UI:()=>z,F2:()=>O,Y3:()=>N});var r=n(1828),o=n(8198),s=n(3735),a=n(7341);function c(e){return(0,s.ls)(o.F2,e.of)}function u(e){return(0,s.ls)(o.t$,e.of)}function l(e){return function(t){return e.map(t,o.F2)}}function d(e){return function(t){return e.map(t,o.t$)}}function g(e){return function(t){return(0,s.ls)(o.ij(t),e.of)}}function f(e){var t=g(e);return function(e){var n=t(e);return function(e){return(0,s.ls)(e,n)}}}function p(e){var t=w(e),n=f(e);return function(e){var i=n(e);return function(e){return t(i(e))}}}function m(e){return(0,a.UI)(e,o.dO)}function h(e){return(0,r.ap)(e,o.G5)}function w(e){return function(t){return function(n){return e.chain(n,(function(n){return o.nM(n)?e.of(n):t(n.right)}))}}}function _(e){return function(t){return function(n){return e.chain(n,(function(n){return o.nM(n)?t():e.of(n)}))}}}function y(e){return function(t,n){return function(i){return e.map(i,o.Pd(t,n))}}}function v(e){return function(t){return function(n){return e.map(n,o.Vn(t))}}}function b(e){return function(t,n){return function(i){return e.map(i,o.EQ(t,n))}}}function E(e){return function(t,n){return function(i){return e.chain(i,o.EQ(t,n))}}}function k(e){return function(t){return function(n){return e.chain(n,o.EQ(t,e.of))}}}function C(e){return function(t){return function(n){return e.chain(n,(function(n){return o.nM(n)?t(n.left):e.of(n)}))}}}function P(e){var t=C(e);return function(n){return t((function(t){return e.map(n(t),(function(e){return o.nM(e)?e:o.t$(t)}))}))}}function q(e){return function(t){return function(n){return e.chain(n,o.EQ((function(n){return e.map(t(n),o.t$)}),(function(t){return e.of(o.F2(t))})))}}}function S(e){return function(t){return e.map(t,o.LF)}}function A(e){return function(t){return e.map(t,o.i$)}}var L=n(9384),I=n(5151),M=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))},D=function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=s.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},x=u(I.PM),O=c(I.PM),T=l(I.dO),U=d(I.dO),R=(I.tD,I.tD,T),G=I.of,B=(I.tD,I.dO,E(I.UA)),j=B,N=(I.UA,function(e,t){return function(){return M(void 0,void 0,void 0,(function(){var n;return D(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,e().then(L.F2)];case 1:return[2,i.sent()];case 2:return n=i.sent(),[2,L.t$(t(n))];case 3:return[2]}}))}))}}),W=(I.dO,I.PM,I.PM,I.UA,I.UA,I.UA,I.UA,I.dO,function(e,t){return(0,s.zG)(e,z(t))}),F=function(e,t){return(0,s.zG)(e,$(t))},K=function(e,t){return(0,s.zG)(e,H(t))},z=m(I.dO),$=(I.dO,I.dO,h(I.Hi)),H=w(I.UA),V=(I.UA,O),J="TaskEither";var Q={URI:J,map:W,ap:F,chain:K};var Y=V(L.F4),Z=i(Q);L.Xl},5605:(e,t,n)=>{function i(e,t){return function(n){var i=e.traverse(n);return function(e,r){return n.map(i(e,r),t.separate)}}}function r(e,t){return function(n){var i=e.traverse(n);return function(e,r){return n.map(i(e,r),t.compact)}}}n.d(t,{BL:()=>r,Fj:()=>i})},3735:(e,t,n)=>{n.d(t,{MZ:()=>r,Q1:()=>c,SK:()=>g,W8:()=>s,a9:()=>o,bc:()=>l,gn:()=>a,ls:()=>u,yR:()=>i,zG:()=>d});function i(e){return e}var r=i;function o(e){return function(){return e}}var s=o(!0),a=o(null),c=o(void 0);function u(e,t,n,i,r,o,s,a,c){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments))};case 3:return function(){return n(t(e.apply(this,arguments)))};case 4:return function(){return i(n(t(e.apply(this,arguments))))};case 5:return function(){return r(i(n(t(e.apply(this,arguments)))))};case 6:return function(){return o(r(i(n(t(e.apply(this,arguments))))))};case 7:return function(){return s(o(r(i(n(t(e.apply(this,arguments)))))))};case 8:return function(){return a(s(o(r(i(n(t(e.apply(this,arguments))))))))};case 9:return function(){return c(a(s(o(r(i(n(t(e.apply(this,arguments)))))))))}}}function l(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e}function d(e,t,n,i,r,o,s,a,c){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return i(n(t(e)));case 5:return r(i(n(t(e))));case 6:return o(r(i(n(t(e)))));case 7:return s(o(r(i(n(t(e))))));case 8:return a(s(o(r(i(n(t(e)))))));case 9:return c(a(s(o(r(i(n(t(e))))))));default:for(var u=arguments[0],l=1;l<arguments.length;l++)u=arguments[l](u);return u}}var g=function(e,t){return t}},9384:(e,t,n)=>{n.d(t,{F2:()=>d,F4:()=>w,G:()=>a,Gb:()=>m,Od:()=>f,Wi:()=>r,Xl:()=>h,YM:()=>p,YP:()=>s,e$:()=>_,nM:()=>c,pC:()=>o,r1:()=>y,ri:()=>g,t$:()=>l,tO:()=>u});var i=function(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},r=function(e){return"None"===e._tag},o=function(e){return"Some"===e._tag},s={_tag:"None"},a=function(e){return{_tag:"Some",value:e}},c=function(e){return"Left"===e._tag},u=function(e){return"Right"===e._tag},l=function(e){return{_tag:"Left",left:e}},d=function(e){return{_tag:"Right",right:e}},g=function(e){return[e]},f=function(e){return e.length>0},p=function(e){return e[0]},m=function(e){return e.slice(1)},h=[],w={},_=Object.prototype.hasOwnProperty,y=function(e){return i([e[0]],e.slice(1),!0)}},4011:(e,t,n)=>{n.d(t,{Df:()=>r,Eq:()=>i});var i={equals:function(e,t){return e===t}},r={equals:i.equals,compare:function(e,t){return e<t?-1:e>t?1:0}};i.equals,r.compare},2751:(e,t,n)=>{n.d(t,{Df:()=>r,Eq:()=>i,pn:()=>s,xb:()=>o});var i={equals:function(e,t){return e===t}},r={equals:i.equals,compare:function(e,t){return e<t?-1:e>t?1:0}},o=function(e){return 0===e.length},s=function(e,t){return function(n){return n.endsWith(e,t)}}},655:(e,t,n)=>{n.d(t,{_T:()=>i,mG:()=>r});function i(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}function r(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))}Object.create;Object.create},477:e=>{e.exports=function(e,t,n,i){var r=self||window;try{try{var o;try{o=new r.Blob([e])}catch(t){(o=new(r.BlobBuilder||r.WebKitBlobBuilder||r.MozBlobBuilder||r.MSBlobBuilder)).append(e),o=o.getBlob()}var s=r.URL||r.webkitURL,a=s.createObjectURL(o),c=new r[t](a,n);return s.revokeObjectURL(a),c}catch(i){return new r[t]("data:application/javascript,".concat(encodeURIComponent(e)),n)}}catch(e){if(!i)throw Error("Inline worker is not supported");return new r[t](i,n)}}},6584:(e,t,n)=>{n.r(t),n.d(t,{CleanRoomAddon:()=>E,load:()=>y});var i=n(655),r=n(2688),o=n(5846),s=n(8198),a=n(3735),c=n(4011),u=n(6567),l=n(356),d=n(2751),g=n(9705);function f(e){var t;const n=null===(t=e.meta)||void 0===t?void 0:t.advertiserDomains;if("string"==typeof n)return[n];if(Array.isArray(n)){const e=n.filter((e=>"string"==typeof e));return e.length>0?e:null}return null}n(64);var p=n(6013);const m=()=>{const e={maxAttempts:200,waitTimeInMs:50};let t;return(0,p.a4)((()=>t),(()=>(t=(()=>{var e;const t=null===(e=window._pbjsGlobals)||void 0===e?void 0:e[0];return(t?window[t]:null)||window.pbjs||window.vmpbjs})(),!!(null==t?void 0:t.que)&&"function"==typeof(null==t?void 0:t.getEvents))),e)},h=e=>"function"==typeof e.readConfig?e.readConfig():e.getConfig();var w=n(7545),_=n(8863);const y=(e,t,n)=>{e.push({functionName:"addon",arguments:["clean_room",{}]})},v=(e,t)=>({direct_buy:(0,o.G0)(d.Eq)(e.direct_buy,t.direct_buy),programmatic:(0,o.G0)(d.Eq)(e.programmatic,t.programmatic)}),b=(0,l.hX)((e=>null!=e));class E{constructor(e){this.prefix="[clean_room]",this.stagedAuctions={},this.trackableAuctions={},this.trackAuctionsInterval=null,this.putOrResetUnprocessed=e=>(0,i.mG)(this,void 0,void 0,(function*(){const t=u.g_((()=>s.Y3((()=>this.unprocessedPrebidAuctions.reset()),r.w)),(e=>s.Y3((()=>this.unprocessedPrebidAuctions.put(e)),r.w))),n=(0,a.ls)(u.DT((e=>e instanceof Error)),u.UI((e=>this.reportError(`Unprocessed auctions failed. Got ${e}`))),s.Yo(a.Q1));return(0,a.zG)(yield e(),s.tS(t),s.vx(n),s.fS((()=>(0,i.mG)(this,void 0,void 0,(function*(){})))))})),this.options=e,this.permutive=e.permutive,this.api=e.api,this.logger=e.logger,this.namespace=e.namespace,this.queryManager=e.queryManager,this.messages=e.messages,this.network=e.network,this.unprocessedPrebidAuctions=e.unprocessedEvents.PrebidAuctions,this.userId=e.userId,this.sessionManager=e.sessionManager;const t=this.sessionManager.sessionHasChanged();this.makeRequest(t),this.startPrebidAuctions()}get allAuctions(){return Object.assign(Object.assign({},this.stagedAuctions),this.trackableAuctions)}makeRequest(e){this.getQueries(e).then((t=>{if(e){const e=this.getOrEmpty(t.queries);this.emitUpdated(e),this.cacheLocally(e)}else{const e=this.getOrEmpty(t.queries),n=this.getCache(),i=v(e,n);this.emitUpdated(i),this.cacheLocally(i)}}))}getQueries(e){const t=this.queryManager.userSegments.getStdAsList(),n=this.queryManager.userSegments.getAllAsList(),i=(0,o.e5)(c.Eq)(n,t);return this.api.cleanRoom(e,{stds:t,fps:i,userId:this.userId.get()})}getCache(){return{direct_buy:this.options.externalData.getExternalJsonData(_.P)||[],programmatic:this.options.externalData.getExternalJsonData(_.l)||[]}}cacheLocally(e){this.options.externalData.setExternalJsonData(_.P,e.direct_buy),this.options.externalData.setExternalJsonData(_.l,e.programmatic)}emitUpdated(e){this.messages.emit("permutive:cleanroom:db:updated",(0,o.G0)(d.Eq)(e.programmatic,e.direct_buy))}getOrEmpty(e){var t,n;return{direct_buy:null!==(t=e.direct_buy)&&void 0!==t?t:[],programmatic:null!==(n=e.programmatic)&&void 0!==n?n:[]}}startPrebidAuctions(){return(0,i.mG)(this,void 0,void 0,(function*(){yield this.trackUnprocessedPrebidAuctions();const e=yield m();if(u.Wi(e))return void this.logInfo("Tracking Prebid Auctions did not start. Missing pbjs.");const{value:t}=e;this.logDebug("Got prebid",t),this.setupUnprocessedPrebidAuctions();const n=h(t),c=e=>(0,a.zG)(this.mapToStagedAuctions(e),s.tS((()=>s.Y3((()=>e.bidsReceived.forEach((e=>{var t;("rendered"===(t=e).status||"targetingSet"===t.status)&&this.setBidToWon(n,e)}))),(e=>{const t=`Failed to process auction. Got ${(0,r.w)(e)}`;return this.reportError(t),(0,r.w)(t)})))));t.onEvent("auctionEnd",(e=>{c(e),this.storeAuctionsAsUnprocessed(this.allAuctions)}));const l=e=>{const i=(0,p.qh)(e);this.logDebug("Processing setTargeting event",{adUnitCodes:i});const r=s.DT((([e,t])=>!!e&&!!t.hb_adid),(()=>new Error("Missing targeting data"))),c=(0,a.ls)(r,s.tS((([e,{hb_adid:n}])=>(0,a.zG)(t.getAllPrebidWinningBids(),(0,o.Ew)((t=>t.adId===n&&t.adUnitCode===e)),s.Yo((()=>new Error("Prebid winning bid does not exist")))))),s.UI((e=>{this.setBidToWon(n,e)})));return i.forEach(c)};t.onEvent("setTargeting",(e=>{l(e),this.storeAuctionsAsUnprocessed(this.allAuctions)})),t.onEvent("bidWon",(e=>{this.setBidToWon(n,e),this.storeAuctionsAsUnprocessed(this.allAuctions)}));const d=(e,t)=>{this.logDebug("Processing render event",{isRendered:e,props:t}),t.bid&&(e&&this.setBidToRendered(n,t.bid),this.promoteAuctionToTrackable(t.bid),this.storeAuctionsAsUnprocessed(this.allAuctions),this.trackEligibleAuctions())};t.onEvent("adRenderSucceeded",(e=>{d(!0,e)})),t.onEvent("adRenderFailed",(e=>{d(!1,e)})),t.getEvents().forEach((e=>"auctionEnd"===e.eventType?c(e.args):"setTargeting"===e.eventType?l(e.args):"bidWon"===e.eventType?this.setBidToWon(n,e.args):"adRenderSucceeded"===e.eventType?d(!0,e.args):"adRenderFailed"===e.eventType?d(!1,e.args):void 0)),this.storeAuctionsAsUnprocessed(this.allAuctions,{debounced:!1}),(0,p.aq)((()=>(0,i.mG)(this,void 0,void 0,(function*(){this.trackAuctionsInterval=null;const e=this.allAuctions;this.stagedAuctions={},this.trackableAuctions={},yield this.trackPrebidAuctions(e,{useBeacon:!0}),yield this.storeAuctionsAsUnprocessed(null,{debounced:!1})}))))}))}trackUnprocessedPrebidAuctions(){return(0,a.zG)(g.Y3((()=>(0,i.mG)(this,void 0,void 0,(function*(){return(0,a.zG)(yield this.unprocessedPrebidAuctions.getIfPresent(),u.g_((()=>this.logDebug("No unprocessed PrebidAuctions found")),(e=>{var{props:t}=e,n=(0,i._T)(e,["props"]);return this.logDebug("Found unprocessed PrebidAuctions",{props:t,unprocessedData:n}),Promise.all([this.permutive.track("PrebidAuctions",t,{unprocessedData:n}),this.unprocessedPrebidAuctions.reset()])})))}))),(e=>{const t=`Failed to track unprocessed PrebidAuctions. Got ${(0,r.w)(e)}`;return this.reportError(t),(0,r.w)(t)})),(e=>e()))}setupUnprocessedPrebidAuctions(){const e=new w.b(1e3,2500),t=this.putOrResetUnprocessed.bind(this);this.debouncedPutOrResetUnprocessed=e.schedule(t)}storeAuctionsAsUnprocessed(e,{debounced:t=!0}={}){return(0,i.mG)(this,void 0,void 0,(function*(){this.logDebug("Store auctions as unprocessed",{auctionsToStore:e,debounced:t});const n=g.Y3((()=>(0,i.mG)(this,void 0,void 0,(function*(){const t=(0,p.qh)(null!=e?e:{}).map((([e,t])=>Object.assign(Object.assign({},t),{auction_id:e}))),n=yield this.options.clientContext.getClient();return(0,a.zG)(t,u.DT((e=>e.length>0)),u.UI((e=>({props:{isp_info:"$ip_isp_info",geo_info:"$ip_geo_info",aggregations:{auctions:e}},client:n,viewId:this.options.viewId.get(),sessionId:this.sessionManager.getSessionId()}))))}))),r.w);return t?this.debouncedPutOrResetUnprocessed(n):Promise.all([this.debouncedPutOrResetUnprocessed((()=>(0,i.mG)(this,void 0,void 0,(function*(){return s.t$(null)})))),this.putOrResetUnprocessed(n)])}))}mapBidProperties(e,t){var n;const i={advertiser_id:(e=>{var t,n,i;const r=(null===(t=e.rubicon)||void 0===t?void 0:t.advertiserId)||(null===(n=e.meta)||void 0===n?void 0:n.buyerId)||(null===(i=e.meta)||void 0===i?void 0:i.advertiserId);return r?`${r}`:null})(t),advertiser_name:(e=>{var t,n,i;const r=(null===(t=e.meta)||void 0===t?void 0:t.clickUrl)||(null===(n=e.adomain)||void 0===n?void 0:n[0])||(null===(i=e.meta)||void 0===i?void 0:i.advertiserName);return r?`${r}`:null})(t),advertiser_domains:f(t),brand_id:(e=>{var t;const n=null===(t=e.meta)||void 0===t?void 0:t.brandId;return n?`${n}`:null})(t),brand_name:(e=>{var t;return null===(t=e.meta)||void 0===t?void 0:t.brandName})(t),deal_id:t.dealId,dsp_id:(e=>{var t,n,i;const r=(null===(t=e.appnexus)||void 0===t?void 0:t.buyerMemberId)||(null===(n=e.rubicon)||void 0===n?void 0:n.networkId)||(null===(i=e.meta)||void 0===i?void 0:i.networkId);return r?`${r}`:null})(t),hb_pb:null===(n=t.adserverTargeting)||void 0===n?void 0:n.hb_pb,request_timestamp:t.requestTimestamp,response_timestamp:t.responseTimestamp},r={ad_id:t.adId,ad_unit_code:t.adUnitCode,bid_available:t.statusMessage&&t.statusMessage.indexOf("empty")<0,bidder:t.bidder,bidder_timeout:e.bidderTimeout,cpm:t.cpm,creative_id:`${t.creativeId}`,height:t.height,time_to_respond:t.timeToRespond,width:t.width};return Object.assign(Object.assign({},b(i)),r)}collectAdUnitCodes(e){const t=new Set;return e.reduce(((e,{adUnitCode:n})=>(!n||t.has(n)||(t.add(n),e.push({ad_unit_code:n})),e)),[])}mapToStagedAuctions(e){return s.Y3((()=>{const{auctionId:t,bidsReceived:n,noBids:i}=e;if(0===n.length&&0===i.length)return null;const r=this.collectAdUnitCodes(n),o=this.collectAdUnitCodes(i);return this.stagedAuctions[t]={bids:r,no_bids:o},this.logDebug("Added auction",this.stagedAuctions[t]),this.stagedAuctions[t]}),(e=>{const t=`Failed to map auction. Got ${(0,r.w)(e)}`;return this.reportError(t),(0,r.w)(t)}))}findAuction(e){return(0,a.zG)(this.getStagedAuction(e.auctionId),s.vx((()=>this.getTrackableAuction(e.auctionId))),s.vx((()=>this.mapToStagedAuctions({auctionId:e.auctionId,bidsReceived:[e],bidderRequests:[],noBids:[]}))))}setBidByOperation(e,t,n){const i=e=>e.hasOwnProperty("ad_id"),c=(n,c)=>{const u=e=>e.ad_id===n.adId,l=e=>e.ad_unit_code===n.adUnitCode,[d,g]=(0,a.zG)(c,(0,o.uK)((e=>i(e)&&u(e)&&l(e))),(e=>[e.left,e.right]));this.logDebug(`Bids for ${t}`,{nonMatching:d,matching:g});const f=(0,a.ls)(s.DT((e=>1===e.length),(()=>new Error("No matching bids"))),s.UI((([e])=>(this.logDebug(`Found bid for ${t}`,{found:e}),{found:e,others:d})))),p=s.DT((e=>e.length<=1),(()=>new Error("Ad ID is not unique"))),m=(0,a.ls)(f,s.vx((()=>s.Y3((()=>{const r=this.mapBidProperties(e,n),o=d.filter((e=>!(!l(e)||!i(e))||!l(e)));return this.logDebug(`Creating bid for ${t}`,{created:r,others:o}),{found:r,others:o}}),(e=>(0,r.w)(`Failed to create bid. Got ${(0,r.w)(e)}`))))));return(0,a.zG)(g,p,s.tS(m))};return(0,a.ls)((e=>(0,a.zG)(this.findAuction(e),s.tS((i=>(0,a.zG)(c(e,i.bids),s.tS((({found:e,others:t})=>s.Y3((()=>({updated:n(e),others:t})),r.w))),s.UI((({updated:e,others:n})=>{const r=[e,...n];i.bids=r,this.logDebug(`Bid operation ${t} successful`,e,r)}))))))),s.Vn((e=>{const n=`Failed bid operation ${t}. Got ${(0,r.w)(e)}`;return this.reportError(n),(0,r.w)(n)})))}setBidToWon(e,t){return this.setBidByOperation(e,"setWon",(e=>Object.assign(Object.assign({},e),{winning_bid:!0})))(t)}setBidToRendered(e,t){return this.setBidByOperation(e,"setRendered",(e=>Object.assign(Object.assign({},e),{winning_bid:!0,is_rendered:!0,rendered_timestamp:(new Date).getTime()})))(t)}promoteAuctionToTrackable({auctionId:e}){const t=this.stagedAuctions[e];if(t){if(this.trackableAuctions[e])return this.logError("Auction is already promoted to trackable",{auction:this.trackableAuctions[e]});this.trackableAuctions[e]=t,delete this.stagedAuctions[e],this.logDebug("Auction promoted to trackable",{auctionId:e,trackableAuctions:this.trackableAuctions})}}trackEligibleAuctions(){if(this.trackAuctionsInterval)return;this.trackAuctionsInterval=(0,p.PQ)((()=>(0,i.mG)(this,void 0,void 0,(function*(){if(!this.trackAuctionsInterval)return;this.trackAuctionsInterval=null;const e=this.trackableAuctions;this.trackableAuctions={},yield this.trackPrebidAuctions(e),yield this.storeAuctionsAsUnprocessed(this.stagedAuctions,{debounced:!1})}))),{timeout:5e3})}trackPrebidAuctions(e,t){return(0,i.mG)(this,void 0,void 0,(function*(){const n=(0,p.qh)(e).map((([e,t])=>Object.assign(Object.assign({},t),{auction_id:e})));n.length&&(yield this.permutive.track("PrebidAuctions",{isp_info:"$ip_isp_info",geo_info:"$ip_geo_info",aggregations:{auctions:n}},t),this.logDebug("Tracked auctions",{auctions:n}))}))}getStagedAuction(e){return(0,a.zG)(this.stagedAuctions[e],s.DT(Boolean,(()=>new Error("Staged auction not found"))),s.Vn((t=>(this.logError(t,{auctionId:e}),t))))}getTrackableAuction(e){return(0,a.zG)(this.trackableAuctions[e],s.DT(Boolean,(()=>new Error("Trackable auction not found"))),s.Vn((t=>(this.logError(t,{auctionId:e}),t))))}reportError(e){return this.network.error(`${this.prefix} ${e}`)}logInfo(...e){this.logger.log(this.prefix,...e)}logDebug(...e){this.logger.debug(this.prefix,...e)}logError(...e){this.logger.error(this.prefix,...e)}}},8863:(e,t,n)=>{n.d(t,{P:()=>i,l:()=>r});const i="_pcrdbs",r="_pcrprs"},503:(e,t,n)=>{n.d(t,{UI:()=>l,Ue:()=>a,VS:()=>d,YP:()=>u,a9:()=>c,g_:()=>p,p4:()=>h,q:()=>w,u4:()=>f,vP:()=>m,xH:()=>g});var i=n(2688),r=n(8198),o=n(3735),s=n(6567);function a(e){const[t,n]=y(e);let i=e;return[Object.assign({get current(){return i}},n),e=>{Object.is(e,i)||(t.beforeChange(),i=e,t.onChange(i),t.afterChange())}]}function c(e){return{get current(){return e},onChange:()=>()=>{},beforeChange:()=>()=>{},afterChange:()=>()=>{}}}function u(e){return t=>{const n=t.onChange(e);return e(t.current),n}}function l(e){return t=>_(t,e,{allowRecursion:!0})}function d(e){return t=>g(_(t,e,{allowRecursion:!0}))}function g(e){const t=e.current.current,[n,i]=y(t);let r=t;const s=Object.assign({get current(){return r}},i);e.beforeChange(n.beforeChange),e.afterChange(n.afterChange);let a=[];return(0,o.zG)(e,u((e=>{a.forEach((e=>e())),a=[e.beforeChange(n.beforeChange),e.afterChange(n.afterChange),(0,o.zG)(e,u((e=>{r=e,n.onChange(e)})))]}))),s}function f(e){return t=>{let n=s.YP;return _(t,(t=>{if((0,s.Wi)(n))return n=(0,s.G)(t),t;const i=e(n.value,t);return n=(0,s.G)(i),i}),{allowRecursion:!1})}}function p(e,t){return n=>{let i=e;return _(n,(e=>(i=t(i,e),i)),{allowRecursion:!1})}}function m(...e){if(0===e.length)return c([]);if(1===e.length)return l((e=>[e]))(e[0]);let t=e.map((e=>e.current));const[n,i]=y(t);let r=0,o=!1;return e.forEach((i=>{i.beforeChange((()=>{r++,1===r&&n.beforeChange()})),i.onChange((()=>{o=!0})),i.afterChange((()=>{if(r--,0===r)try{o&&(o=!1,t=e.map((e=>e.current)),n.onChange(t))}finally{n.afterChange()}}))})),Object.assign({get current(){return t}},i)}function h(e){const[t,n]=a(s.YP);return e.then((0,o.ls)(r.F2,s.G,n)).catch((0,o.ls)(i.w,r.t$,s.G,n)),t}function w(e){return f(((t,n)=>e(t,n)?t:n))}function _(e,t,n){let i,r=0;const a=v(s.YP);return(0,o.zG)(e,u((e=>{const o=++r,s=t(e);if(o!==r){if(n.allowRecursion)return;throw new Error("Disallowed recursion occurred in a Ref")}i=s,a.notify(i)}))),{get current(){return i},onChange:a.addListener,beforeChange:e.beforeChange,afterChange:e.afterChange}}function y(e){const t=v((0,s.G)(e)),n=b(),i=b();return[{onChange:t.notify,beforeChange:n.notify,afterChange:i.notify},{onChange:t.addListener,beforeChange:n.addListener,afterChange:i.addListener}]}function v(e){const t=b();let n=e;return{addListener(e){let i=n;return t.addListener((()=>{Object.is(n,i)||(i=n,e(n.value))}))},notify(e){!(0,s.Wi)(n)&&Object.is(e,n.value)||(n=(0,s.G)(e),t.notify())}}}function b(){let e=[];return{addListener(t){const n=()=>t();e=[...e,n];return()=>{e=e.filter((e=>e!==n))}},notify(){e.forEach((e=>e()))}}}},9417:(e,t,n)=>{n(1057),n(3351)},8206:(e,t,n)=>{n.d(t,{lg:()=>p,Bt:()=>m});var i=n(5846),r=n(3735),o=n(6567),s=n(6017),a=n(356),c=n(2751),u=n(6013);class l{constructor(e,t,n,i){this.userId=e,this.network=t,this.api=n,this.logger=i,this.tag="appnexus",this.ttlInSeconds=86400,this.usedForThirdPartyData=!0,this.url="https://ib.adnxs.com/getuidj",this.invalidAliases=["","0","-1"]}getId(){return this.logger.debug("identities[appnexus]: start HTTP request"),(0,u.G6)(navigator.userAgent)?Promise.resolve({type:"skipped"}):this.api.appnexus(this.url).then((e=>(this.logger.debug("identities[appnexus]: end HTTP request"),{type:"attempted",result:(0,r.zG)((0,o.DT)((e=>this.isValidAlias(e.uid)))(e),(0,o.UI)((e=>e.uid)))})),(e=>({type:"attempted",result:o.YP})))}reset(){return Promise.resolve()}isValidAlias(e){return!!e&&-1===this.invalidAliases.indexOf(e)}}class d{constructor(e,t,n,i,r){this.config=e,this.network=t,this.api=n,this.userId=i,this.logger=r,this.tag="pxid",this.ttlInSeconds=86400,this.usedForThirdPartyData=!1,this.url=`https://e1c3fd73-dd41-4abd-b80b-4278d52bf7aa.${this.config.pxidHost}/${this.config.apiVersion}/pxid`,this.resetUrl=this.url+"/reset"}getId(){return this.logger.debug("identities[pxid]: start HTTP request"),(0,u.G6)(navigator.userAgent)?Promise.resolve({type:"skipped"}):this.api.pxid(this.url).then((e=>(this.logger.debug("identities[pxid]: end HTTP request"),{type:"attempted",result:(0,o.ij)(e.uid)})),(e=>({type:"attempted",result:o.YP})))}reset(){return(0,u.G6)(navigator.userAgent)?Promise.resolve():this.api.pxidReset(this.resetUrl)}}const g=new Set(["public","email","email_md5","email_sha256"]),f=(e,t)=>!!e.id&&!(0,i.t9)(c.Eq)(e.tag,t);class p{constructor(e,t,n,i,r){this.metrics=e,this.trace=t,this.permutiveData=n,this.identityProviderEnv=i,this.logger=r,this.identities={},this.providers={},this.identitiesLastModified=new Date,this.identities=this.getCachedIdentitiesAndMigrateIfRequired()}get getIdentitiesLastModified(){return this.identitiesLastModified}prepareThirdPartyIdentities(){this.logger.debug("Identities: starting to load identities");const e=this.metrics.startTimer("sdk_get_third_party_identities_task_duration_seconds",{}),t=this.trace.startSpan("load_tpd_ids"),n=[{load:e=>{return t=e.config,n=e.network,i=e.api,r=e.userId,s=e.logger,(0,o.G)(new d(t,n,i,r,s));var t,n,i,r,s}},{load:e=>{return t=e.userId,n=e.network,i=e.api,r=e.logger,(0,o.G)(new l(t,n,i,r));var t,n,i,r}},{load:e=>(e.cookies,o.YP)},{load:e=>(e.cookies,o.YP)},{load:e=>(e.metrics,e.permutiveData,e.permutive,e.messages,o.YP)}],s=(0,i.oA)(n.map((e=>e.load(this.identityProviderEnv)))).map((e=>this.shouldAskForNewIdentity(e)?this.retrieveIdentity(e):Promise.resolve((0,r.bc)(e,this.getCachedTPDIdentity(e.tag)))));return Promise.all(s).then((e=>e.map((([e,t])=>(this.providers[e.tag]=e,this.setTPDIdentityIfPresent(e.tag,t,e.ttlInSeconds)))))).then((()=>{this.metrics.stopTimer("sdk_get_third_party_identities_task_duration_seconds",e),t.finish()}))}getPrioritizedIdentities(e){const t={default:0,appnexus:1,pxid:1},n=Object.entries(e).map((([e,{id:t,expiry:n,priority:i}])=>Object.assign(Object.assign(Object.assign({tag:e},t?{id:t}:{}),n?{expiry:n}:{}),void 0!==i?{priority:i}:{}))),r=n.filter((e=>f(e,Object.values(this.providers).map((e=>e.tag))))),s=n.filter((e=>((e,t)=>!!e.id&&!!(0,i.t9)(c.Eq)(e.tag,t))(e,Object.values(this.providers).map((e=>e.tag))))),a=(0,i.DZ)((e=>(0,o.ij)(e.priority)))(r),u=a.length>0?Math.max(...a):0,l=r.map((e=>void 0!==e.priority?Object.assign(Object.assign({},e),{priority:e.priority}):Object.assign(Object.assign({},e),{priority:u+1}))),d=s.map((e=>void 0===t[e.tag]?{tag:e.tag,id:e.id,priority:u+h}:{tag:e.tag,id:e.id,priority:u+w}));return l.concat(d)}getIdentitiesMap(){return this.getFilteredIdentities(((e,t)=>!!t.value))}getCustomerDefinedIdentitiesMap(){return this.getFilteredIdentities(((e,t)=>f({tag:e,id:t.value,expiry:t.expiry,priority:t.priority},Object.values(this.providers).map((e=>e.tag)))))}getTPDIdentitiesMap(){return this.getFilteredIdentities(((e,t)=>{var n,i;return!!t.value&&!!(null===(i=null===(n=this.providers)||void 0===n?void 0:n[e])||void 0===i?void 0:i.usedForThirdPartyData)}))}parseCustomerDefinedIdentities(e){const t=`Identify must be passed a non-empty string or list of { tag, id, priority? } tuples, value passed was '${JSON.stringify(e)}'`,n=e=>{throw new Error(e)},i=e=>(e.forEach((e=>{(e=>"string"==typeof e.id&&"string"==typeof e.tag)(e)||n(t),(e=>"email_sha256"!==e.tag||p.emailSHA256Regex.test(e.id))(e)||n("Identify called with unsupported format of email_sha256 ID. The support format is hex-encoded 64 character long lowercase string.")})),e);return"string"==typeof e?(r=e).length>0?[{id:r,tag:"default"}]:n(t):Array.isArray(e)?i(e):n(t);var r}extractIdentifyFromQueue({global:e},t=[]){const n=()=>e.q.findIndex((e=>"identify"===e.functionName)),i=(t,r)=>{if(t<0)return r;const o=e.q.splice(t,1)[0],s=this.parseCustomerDefinedIdentities(o.arguments[0]);return i(n(),r.concat(s))};return i(n(),t)}checkIdentitiesHaveBeenModified(e){const t={concat:(e,t)=>c.Eq.equals(e.value,t.value)?{}:(0,r.bc)(e,t)};return(0,r.zG)((0,a.jV)(t)(this.identities)(e),u.hk,(e=>{const t=(0,s.ff)(a.xb)(e);return this.logger.debug("[identities] is modified",t,e),t}))}setIdentities(e){let t=!1;const n=e.filter((e=>!g.has(e.tag))).reduce(((e,{tag:n,id:i,expiry:r,priority:o})=>(void 0===this.identities[n]&&(t=!0,this.logger.debug(`identities[${n}]: added`)),e[n]=Object.assign(Object.assign(Object.assign({},i?{value:i}:{}),r?{expiry:r}:{}),void 0!==o?{priority:o}:{}),e)),{});(t||this.checkIdentitiesHaveBeenModified(n))&&(this.identitiesLastModified=new Date),this.identities=Object.assign(Object.assign({},this.identities),n),this.logger.debug("[identities] Updating to",this.identities),this.permutiveData.setData("identities",this.identities)}reset(){return(0,r.zG)(this.identities={},(e=>Promise.all(Object.values(this.providers).map((e=>e.reset()))).then(r.Q1)))}getFilteredIdentities(e){return(0,u.m8)(...Object.entries(this.identities).filter((([t,n])=>e(t,n))).map((([e,{value:t,expiry:n,priority:i}])=>(0,r.bc)(e,Object.assign(Object.assign({id:t},n?{expiry:n}:{}),void 0!==i?{priority:i}:{})))))}shouldAskForNewIdentity(e){var t;const n=(0,o.ij)(null===(t=this.identities)||void 0===t?void 0:t[e.tag]);return(0,o.g_)((()=>!0),this.isIdentityExpired)(n)}getCachedTPDIdentity(e){return this.identities[e]?(0,o.ij)(this.identities[e].value):o.YP}setTPDIdentityIfPresent(e,t,n=86400){const i=()=>Date.now()+Math.floor(1e3*n);return(0,o.g_)((()=>this.setIdentities([{tag:e,expiry:i()}])),(t=>this.setIdentities([{tag:e,id:t,expiry:i()}])))(t)}retrieveIdentity(e){return e.getId().then((t=>"skipped"===t.type?(0,r.bc)(e,o.YP):(0,r.zG)(t.result,(t=>this.metrics.track({name:(0,o.pC)(t)?"sdk_third_party_identity_present_count":"sdk_third_party_identity_missing_count",value:1,labels:{identity_tag:e.tag}})),(n=>(0,r.bc)(e,t.result)))))}isIdentityExpired(e){return e.expiry&&Date.now()>=e.expiry}getCachedIdentitiesAndMigrateIfRequired(){return(e=>(0,u.m8)(...Object.entries(e).filter((([e,t])=>!this.isIdentityExpired(t)&&!g.has(e)))))(this.permutiveData.getData("identities")||{})}}p.emailSHA256Regex=/^[a-f0-9]{64}$/;const m=(e,t,n,r,o)=>{const s=(e,t)=>{const n=["(null)"];return n.indexOf(e)>-1||!!y[e]||(0,i.jV)(c.Eq)(t,n).length>0},a=e=>"721d6d85-35f0-4e35-bb38-13eb0d465158"===e,u={"be668577-07f5-444d-98e0-222b990951b1":s,"e43c8a90-d17b-4790-bfda-81b069b3b8c2":(e,t,n)=>["thestudentroom.co.uk"].some((e=>n.indexOf(e)>-1))&&(0,i.jV)(c.Eq)(t,["tsr-"]).length>0,"5d79bce7-5d2b-427e-a6c4-b89b6c7bf048":s,"366ab8da-5efa-4355-ab00-84db3b68ded2":e=>"96539955-4d7e-40df-882b-7e2fbacedb1c"===e||"345600e7-fb5f-48b1-9aa6-cde5396419b0"===e,"f3a06674-ebb9-4b9d-ba8f-0052018c0687":a,"38dadd0d-257a-4641-b332-b8b0fd20a6cb":a,"10453011-272d-49cd-9043-1964fdb36fd8":e=>"936ba6ac-9a8b-454d-ba98-facebd7553fe"===e},l={"fe68d1f7-c9f4-45b3-8905-7cda73d3fd74":e=>!!_[e]},d=u[e]||l[t];return!!d&&d(o,n,r)},h=2,w=3,_={},y={}},6815:(e,t,n)=>{n.d(t,{z:()=>i});class i{ingestIfEligible(e){return Promise.resolve()}}},64:(e,t,n)=>{n.d(t,{CL:()=>d,D0:()=>r,ED:()=>o,EW:()=>g,MU:()=>h,PH:()=>l,UW:()=>m,Uy:()=>c,eV:()=>s,jH:()=>f,mL:()=>p,qr:()=>a,t2:()=>u});var i=n(5506);const r=(0,i.MU)("engagement_edge_only",!0),o=(0,i.MU)("segment_transition_edge_only",!0),s=(0,i.MU)("track_form_submission",!0),a=(0,i.MU)("track_link_click",!0),c=(0,i.MU)("track_pageview_complete",!0),u=(0,i.MU)("track_pageview_engagement",!0),l=((0,i.$S)("sync_segments_cookie",!1),(0,i.$S)("track_slot_clicked",!0)),d=(0,i.$S)("track_slot_rendered",!0),g=(0,i.$S)("track_slot_viewable",!1),f=(0,i.$S)("track_targeting_keys",!1),p=((0,i.p1)("revenue_insights_enabled",!1),(0,i.p1)("data_provider_config",{ac_bidders:[]}),"_psegs"),m=!0,h=6e5},274:(e,t,n)=>{n.d(t,{U:()=>i});const i={$ip_address:"$ip_address",$ip_address_hash:"$ip_address_hash",$ip_geo_info_city:"$ip_geo_info_city",$ip_geo_info_continent:"$ip_geo_info_continent",$ip_geo_info_country:"$ip_geo_info_country",$ip_geo_info_postal_code:"$ip_geo_info_postal_code",$ip_geo_info_province:"$ip_geo_info_province",$ip_isp_info_autonomous_system_organization:"$ip_isp_info_autonomous_system_organization",$ip_isp_info_isp:"$ip_isp_info_isp",$ip_isp_info_organization:"$ip_isp_info_organization"}},8764:(e,t,n)=>{n.d(t,{v:()=>o});class i{constructor(e,t,n,i,r,o,s){this.logger=e,this.permutive=t,this.id=n,this.segmentCode=i,this.triggerType=r,this.config=o,this.workspaceLevelConfig=s}getSegmentCode(){return this.segmentCode}getTriggerType(){return this.triggerType}getConfig(){return this.config}getWorkspaceLevelConfig(){return this.workspaceLevelConfig}trackImpression(e){return this.trackActivation("impression",e)}trackConversion(e){return this.trackActivation("conversion",e)}trackActivation(e,t){const n={reaction_id:this.id,type:e};this.permutive.track("Reaction",n,t),this.logger.log(n.type,n)}}var r=n(5506);class o{constructor(e,t,n){this.logger=e,this.permutive=t,this.clientContext=n,this.optimisedActivationsConfig={dfp:{dfp:[74990,16780,17138,17135,17068,77423,77425,76328,57152,77426,91345,75311,76378,101389,77520,73221,71282,71287,104405,72255,72256,72257,18312,18445,18732,18320,18317,18313,18268,18295,18296,18298,18807,18299,19902,22392,20431,22710,22990,21538,34415,67199,34414,24101,21541,21535,21540,26440,26442,26443,27111,30221,30222,28394,32729,88865,36987,36988,36989,20494,38823,56089,56090,56093,41209,98331,41489,42437,46637,46638,46639,43274,43393,49964,46996,94606,94607,94608,17128,17127,58181,18318,18212,16842,17176,17180,16843,16841,16782,18314,21174,21216,21217,55914,18323,18264,17117,18260,18440,18263,18731,18247,18246,18253,18439,18437,18733,18245,18444,18365,18734,18240,18443,18356,18735,18239,18790,18297,18238,17183,18791,55934,18737,17427,17187,17173,17124,55935,18322,17186,18321,18254,17185,17182,18797,18315,18250,17174,18248,18319,18259,17125,18316,18310,17075,19676,18266,18270,18271,16987,18803,18269,16982,18805,18294,16781,18806,19669,18300,22393,20008,22395,20277,20278,20279,20280,20281,20282,20283,58310,22391,20428,20534,57756,20531,20469,21267,20645,20646,20714,20715,20710,20833,56623,22514,22515,22529,25136,23011,23805,24102,24103,24104,24105,24106,23027,24339,54639,23937,22226,32094,32095,29259,29255,33806,38068,37314,38305,41193,42438,42439,42441,51101,43538,46677,51098,51100,47473,51099,52142,52127,52133,52520,55241,54358,66495,99504,56274,57517,92621,92622,99536,105294,99689,77524,75874,73748,77533,77721,78743,78741,78740,73763,79183,79187,79188,79190,76980,76981,74123,74203,74349,104640,103258,104170,79184,73402,74664,101060,101061,74665,74659,74657,74662,74661,74660,81780,81781,81782,81783,81784,81785,81786,81787,81788,81789,81790,81791,81792,81793,81794,81795,102103,95434,102153,30251,101171,102212,102213,102214,100186,95472,84257,98074,85622,86173,87626,87696,87738,87739,87740,87741,87742,87744,88113,101387,101388,105978,105979,91328,106717,106751,108525,108526,109309,109466,109741,109944,62486,113583,113877,113878,113879,113880,114692,115709,116599,117084,117171,120985,121034,122044,122045,122046,122047,122049,122051,122054,124690,124792,123787,126197,76402],dfp_legacy:{}},eyeota_pixel:[],dbm:{omitted:1},appnexus:{},appnexus_adserver:[],nativo:[],rubicon_ssp:[],smart:[]}}getSpecializedActivations(e){return this.optimisedActivationsConfig[e]}getActivations(e){return(0,r.Hn)(e)("activationConfigs",[]).filter((e=>this.areContextCriteriaSatisfied(e))).map((e=>new i(this.logger,this.permutive,e.id,e.sc,e.tt,e.c,e.wc)))}areContextCriteriaSatisfied(e){const t=e.cc,n=e=>{const t=this.clientContext.getContext()[e.key];switch(e.comparison){case"EQUALS":return t===e.value;case"NOT_EQUALS":return t!==e.value;case"CONTAINS":return"string"==typeof t&&t.indexOf(e.value)>=0;case"NOT_CONTAINS":return"string"==typeof t&&t.indexOf(e.value)<0}};return!t||("AND"===(i=t).operator?i.criteria.every(n):i.criteria.some(n));var i}}},5506:(e,t,n)=>{n.d(t,{$S:()=>s,Hn:()=>r,MU:()=>o,p1:()=>a});const i={overlays:{auto_init:!0,activationConfigs:[]},web:{auto_init:!1,add_alchemy_taxonomy:!1,add_alchemy_entities:!1,engagement_edge_only:!0,segment_transition_edge_only:!0,activationConfigs:[]},scriptrunner:{auto_init:!0,activationConfigs:[]},clean_room:{auto_init:!0,publisher_permissions:{"89a805cd-dd0e-4976-93bc-d1ec7bfa4363":["allow_custom_insights","allow_targeting_known_audiences","allow_targeting_modelled_audiences","allow_insights"]},activationConfigs:[]},classification_models:{auto_init:!0,activationConfigs:[]},dfp:{auto_init:!0,networks:[{network_code:"5887",name:"Default"}],track_slot_rendered:!0,track_slot_viewable:!0,track_slot_clicked:!0,track_targeting_keys:!1,activationConfigs:[]},tracking_pixel:{auto_init:!0,activationConfigs:[]},dbm:{auto_init:!0,entity_id:926898717,product_type:"INVITE_PARTNER",activationConfigs:[]}},r=e=>{const t=i[e];return(e,n)=>{var i;return null!==(i=null==t?void 0:t[e])&&void 0!==i?i:n}},o=r("web"),s=r("dfp"),a=r("prebid");r("facebook_pixel_v2"),r("socio_demo_cohorts"),r("ctv")},427:(e,t,n)=>{n.d(t,{z:()=>r});var i=n(3629);class r extends class{constructor(e){this.context=e}getContext(){return this.context}updateContext(...e){e.forEach((([e,t])=>{this.context[e]=t}))}}{constructor(e){super(e)}getClient(){var e;const t=null!==(e=document.title)&&void 0!==e?e:"";return Promise.resolve({type:"web",user_agent:navigator.userAgent||"",url:(0,i.bk)(window.location.href),domain:window.location.hostname||"",title:t,referrer:(0,i.bk)(document.referrer)})}}},4572:(e,t,n)=>{n(6013)},449:(e,t,n)=>{n.d(t,{M:()=>w,m:()=>h});var i=n(655),r=n(2688),o=n(5846),s=n(8198),a=n(3735),c=n(6567),u=n(5151),l=n(9705),d=n(550),g=n(6013),f=n(5595);const p="permutive-events-cache",m="permutive-events-for-page",h="historical";class w{constructor(e,t,n,i,r,o,s){this.config=e,this.namespace=t,this.logger=n,this.network=i,this.trace=r,this.metrics=o,this.makeEventsStore=s,this.eventPutQueue=Promise.resolve(),this.eventsCache=this.makeEventsRepository(p),this.eventsForPage=this.makeEventsRepository(m),this.eventStore=s(),this.eventsTTLInMilliseconds=(0,a.zG)((0,c.ij)(this.config.eventsTTLInDays),(0,c.tS)((e=>"number"==typeof e&&e>0?(0,c.G)(24*e*3600):c.YP))),this.eventsCache.events=(0,g.PQ)((()=>{const e=this.trace.startSpan("load_event_cache");return this.loadFromDisk().then((t=>(e.finish(),this.logger.debug("Event cache loaded, #e",t.length),t)))})),this.readiness=this.eventsCache.events.then((()=>this.migratePreviousPagesEvents()))}migratePreviousPagesEvents(){return(0,i.mG)(this,void 0,void 0,(function*(){const e=this.trace.startSpan("migrate_previous_for_page_events"),t=(0,u.pE)((e=>(0,l.Y3)((()=>e.flush()),r.w)));return(0,a.zG)([this.eventsForPage,this.eventsCache],t,(0,u.UI)((t=>{const n=t.reduce(((e,t)=>(0,s.g_)((t=>[...e,t]),(()=>e))(t)),[]);return n.length>0&&this.network.error(`Migrate previous events failed. Got:\n${n.join("\n ")}`),e.finish()})),(e=>e()))}))}get eventsForCurrentPage(){return this.eventsForPage.events}all(){return Promise.all([this.eventsCache.events,this.eventsForPage.events]).then(o.xH)}resetIfNeeded(){return Promise.resolve(!1)}add(e,{persistOnDisk:t}){return(0,i.mG)(this,void 0,void 0,(function*(){this.logger.debug("Adding to cache",e);return(yield this.eventsForPage.events).push(e),t&&this.readiness.then((()=>this.eventsForPage.flush())),e}))}filterEventsByWorkspace(e){return e}pruneEventsToSizeLimit(e){const t=this.config.eventsCacheLimitBytes;let n=2*JSON.stringify(e).length,i=1;for(;n>t;)e.splice(0,i),i*=2,n=2*JSON.stringify(e).length;return{events:e,sizeInBytes:n}}loadFromDisk(){this.logger.log("Loading event cache...");const e=this.metrics.startTimer("sdk_load_events_cache_task_duration_seconds",{}),t=e=>{this.metrics.track({name:"sdk_events_cache_byte_total",value:e.sizeInBytes,labels:{}}),this.metrics.track({name:"sdk_events_cache_size_total",value:e.events.length,labels:{}})},n=(0,a.zG)(this.eventsTTLInMilliseconds,(0,c.g_)((0,a.a9)(a.yR),(e=>(0,o.hX)((t=>e>Date.now()-t.time.getTime()))))),r=(0,a.ls)((0,c.fS)((()=>[])),u.of),s=(0,l.g_)((e=>{const t=(0,u.of)([]);return e instanceof f.m?t:(this.network.error(`Error fetching data from store. Got ${e}`),()=>(0,i.mG)(this,void 0,void 0,(function*(){return yield this.reset("historical"),t()})))}),r);return(0,a.zG)([this.eventStore.get(p),this.eventStore.get(m)],(0,o.UI)(s),(0,o.vP)(u.oE),(0,u.UI)((t=>(this.logger.debug("Read events from store",t),this.metrics.stopTimer("sdk_load_events_cache_task_duration_seconds",e),t))),(0,u.UI)((0,a.ls)(o.xH,this.filterEventsByWorkspace,this.pruneEventsToSizeLimit.bind(this),(e=>(this.eventsCache.sizeInBytes=e.sizeInBytes,e.events.length>0&&t(e),e.events)),(0,o.UI)(d.kJ),n)),(e=>e()))}reset(e){return(0,i.mG)(this,void 0,void 0,(function*(){return this.logger.debug("Resetting Events Cache"),(0,a.zG)(this.eventStore.deleteStore(),(0,l.UI)((()=>(this.eventStore=this.makeEventsStore(),e===h?Promise.all([this.eventsCache.reset(),this.eventsForPage.flush()]):Promise.all([this.eventsCache.reset(),this.eventsForPage.reset()])))),(0,l.UI)((()=>this.all())),(0,l.g_)((()=>(0,u.of)([])),(e=>(0,a.a9)(e))),(e=>e()))}))}getStateSizeInBytes(){return this.eventsForPage.sizeInBytes+this.eventsCache.sizeInBytes}makeEventsRepository(e){const t={key:e,events:Promise.resolve([]),sizeInBytes:0,flush:()=>(0,i.mG)(this,void 0,void 0,(function*(){const e=yield t.events;this.logger.debug("Writing",e.length,"events to",t.key);const n=this.trace.startSpan(`write_${t.key}`),i=JSON.stringify(e);return t.sizeInBytes=2*i.length,this.eventPutQueue=this.eventPutQueue.then((i=>this.eventStore.put(e.map(d.XO),t.key)().then((e=>{if((0,s.nM)(e)){(e=>{const n=`Events cache failed to put ${t.key}. Got ${e}`;return e instanceof f.m?this.logger.error(n):this.network.error(n)})(e.left)}n.finish()}))))})),reset:()=>(t.events=Promise.resolve([]),t.sizeInBytes=0,t.flush())};return t}}},8231:(e,t,n)=>{n.d(t,{K:()=>R});class i{constructor(){this.crypto=window.crypto||window.msCrypto,this.ALG_NAME="AES-GCM"}isAvailable(){var e;return!!(null===(e=this.crypto)||void 0===e?void 0:e.subtle)}generateKey(e=!1){return this.crypto.subtle.generateKey({name:this.ALG_NAME,length:256},e,["encrypt","decrypt"])}encrypt(e,t){const[n,i]=this._encrypt(e,this.str2bytes(t));return n.then((e=>{const t=new Uint8Array(16+e.byteLength);return t.set(i,0),t.set(new Uint8Array(Uint32Array.of(e.byteLength).buffer),12),t.set(new Uint8Array(e),16),t.buffer}))}decrypt(e,t){const n=new Uint8Array(t,0,12),i=new Uint32Array(t,12,1)[0],r=t.slice(16,16+i);return this._decrypt(e,n,r).then(this.bytes2str)}_encrypt(e,t){const n=this.crypto.getRandomValues(new Uint8Array(12));return[this.crypto.subtle.encrypt({name:this.ALG_NAME,iv:n},e,t),n]}_decrypt(e,t,n){return this.crypto.subtle.decrypt({name:this.ALG_NAME,iv:t},e,n)}str2bytes(e){return(new TextEncoder).encode(e).buffer}bytes2str(e){return(new TextDecoder).decode(e)}}var r=n(2688),o=n(8198),s=n(6567),a=n(9705);var c=n(3735),u=n(2485),l=n(655);let d,g;const f=new WeakMap,p=new WeakMap,m=new WeakMap,h=new WeakMap,w=new WeakMap;let _={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return p.get(e);if("objectStoreNames"===t)return e.objectStoreNames||m.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return b(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function y(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(g||(g=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(E(this),t),b(f.get(this))}:function(...t){return b(e.apply(E(this),t))}:function(t,...n){const i=e.call(E(this),t,...n);return m.set(i,t.sort?t.sort():[t]),b(i)}}function v(e){return"function"==typeof e?y(e):(e instanceof IDBTransaction&&function(e){if(p.has(e))return;const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",o),e.removeEventListener("abort",o)},r=()=>{t(),i()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",o),e.addEventListener("abort",o)}));p.set(e,t)}(e),t=e,(d||(d=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,_):e);var t}function b(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",o)},r=()=>{t(b(e.result)),i()},o=()=>{n(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",o)}));return t.then((t=>{t instanceof IDBCursor&&f.set(t,e)})).catch((()=>{})),w.set(t,e),t}(e);if(h.has(e))return h.get(e);const t=v(e);return t!==e&&(h.set(e,t),w.set(t,e)),t}const E=e=>w.get(e);function k(e,t,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const s=indexedDB.open(e,t),a=b(s);return i&&s.addEventListener("upgradeneeded",(e=>{i(b(s.result),e.oldVersion,e.newVersion,b(s.transaction))})),n&&s.addEventListener("blocked",(()=>n())),a.then((e=>{o&&e.addEventListener("close",(()=>o())),r&&e.addEventListener("versionchange",(()=>r()))})).catch((()=>{})),a}function C(e,{blocked:t}={}){const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",(()=>t())),b(n).then((()=>{}))}const P=["get","getKey","getAll","getAllKeys","count"],q=["put","add","delete","clear"],S=new Map;function A(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(S.get(t))return S.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=q.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!P.includes(n))return;const o=async function(e,...t){const o=this.transaction(e,r?"readwrite":"readonly");let s=o.store;return i&&(s=s.index(t.shift())),(await Promise.all([s[n](...t),r&&o.done]))[0]};return S.set(t,o),o}_=(e=>({...e,get:(t,n,i)=>A(t,n)||e.get(t,n,i),has:(t,n)=>!!A(t,n)||e.has(t,n)}))(_);var L=n(5151),I=n(6013);function M(e){return"development"===e.environment?window.isSecureContext:"https:"===window.location.protocol}class D{constructor(e,t,n,i,r,o,s){this.namespace=e,this.logger=t,this.cryptoAlg=n,this.idb=i,this.mainObjectStore=r,this.keyObjectStore=o,this.keyObjectKey=s,this.MAX_CONSECUTIVE_PUTS=30,this.puts=1,this.hasForcedCompaction=!1,this.logger.debug("IDB: Created",this.idb),this.cryptoKey=this.getOrGenerateKey()}static initialise(e,t,n,i,r,s,u,l,d,g){const f=(0,I.G6)(navigator.userAgent)&&!1,p=[M(e),r.isAvailable(),!f].every((e=>!0===e)),m=(e,t,n)=>t.includes(n)?(0,c.Q1)():e.createObjectStore(n),h=p?(0,o.Y3)((()=>function(e){if(!(0,I.G6)(navigator.userAgent)||!indexedDB.databases)return Promise.resolve();let t,n=0;return new Promise((e=>{const i=()=>(n++,indexedDB.databases().finally(e));t=window.setInterval(i,100),i()})).finally((()=>{clearInterval(t),e.track({name:"sdk_idb_conn_attempt_safari_count",value:n,labels:{}})}))}(n).then((()=>k(s,g,{upgrade:e=>{const t=[...e.objectStoreNames];m(e,t,u),m(e,t,l)}})))),(e=>String(e))):(0,o.t$)("Connection not attempted. Default to localStorage");return(0,o.g_)((e=>(0,a.t$)(e)),(e=>(0,a.Y3)((()=>e.then((e=>new D(t,i,r,e,u,l,d)))),(e=>String(e)))))(h)}put(e,t){return(0,l.mG)(this,void 0,void 0,(function*(){return(0,c.zG)((()=>(0,l.mG)(this,void 0,void 0,(function*(){return(0,c.bc)(JSON.stringify(e),yield this.cryptoKey)}))),(0,L.tS)((([e,t])=>(0,L.of)(this.cryptoAlg.encrypt(t,e)))),(0,L.tS)((e=>()=>(0,l.mG)(this,void 0,void 0,(function*(){return yield this.resetIfRequired(this.puts++),e})))),(0,L.tS)((e=>(0,a.Y3)((()=>this.idb.put(this.mainObjectStore,e,this.namespace.getNamespacedStorageKey(String(t)))),r.w))),(0,L.UI)((0,o.g_)((n=>{throw this.logger.error(`IDB: Failed to put "${t.toString()}" value`,e,". Got \n",n),"QuotaExceededError"===n.name&&this.forceCompaction(),n}),(()=>t))),(e=>e()))}))}get(e){return this.cryptoKey.then((t=>(0,c.zG)(this.namespace.getNamespacedStorageKey(String(e)),(n=>this.idb.get(this.mainObjectStore,n).then((e=>e?this.cryptoAlg.decrypt(t,e):null)).then(JSON.parse).catch((t=>{const n=(0,r.w)(t);throw this.logger.error(`IDB: Get ${e.toString()} failed. Got`,n),n}))))))}delete(e){return(0,c.zG)(this.namespace.getNamespacedStorageKey(String(e)),(e=>this.idb.delete(this.mainObjectStore,e)))}deleteStore(){return this.logger.debug("IDB: Deleting",this.idb),this.idb.close(),C(this.idb.name)}getOrGenerateKey(){return(0,c.zG)(this.namespace.getNamespacedStorageKey(this.keyObjectKey),(e=>this.idb.get(this.keyObjectStore,e).then((e=>e||this.storeGivenOrGeneratedKey())).catch((e=>{const t=(0,r.w)(e);return this.logger.error("IDB: Get or generate key failed. Got\n",t),this.cryptoAlg.generateKey(!1)}))))}storeGivenOrGeneratedKey(e=this.cryptoAlg.generateKey(!1)){return(0,c.zG)((0,L.of)(this.namespace.getNamespacedStorageKey(this.keyObjectKey)),(0,L.tS)((t=>(0,a.Y3)((()=>(0,l.mG)(this,void 0,void 0,(function*(){return this.idb.put(this.keyObjectStore,yield e,t)}))),r.w))),(0,L.UI)((0,o.g_)((e=>{throw this.logger.error(`IDB: Failed to store crypto key to ${this.keyObjectStore} due to unexpected error,\n`,e),e}),(()=>e))),(e=>e()))}forceCompaction(){if(this.hasForcedCompaction)return null;this.hasForcedCompaction=!0,this.logger.debug("Attempting to force compaction");const e=`__${this.mainObjectStore}`;return k(e).then((t=>(t.close(),C(e))))}resetIfRequired(e){return(0,I.G6)(navigator.userAgent)&&e%this.MAX_CONSECUTIVE_PUTS==0?this.reset():Promise.resolve()}reset(){return(0,l.mG)(this,void 0,void 0,(function*(){const e=this.idb.name,t=this.idb.version;yield this.deleteStore(),this.idb=yield k(e,t),this.idb.createObjectStore(this.mainObjectStore),this.idb.createObjectStore(this.keyObjectStore),yield this.storeGivenOrGeneratedKey(this.cryptoKey),this.logger.debug("IDB: Reset to",this.idb)}))}}var x=n(3195),O=n(5595);class T{constructor(e,t,n,i,r,s,a,l,d,g){this.version=3,this.db=((e,t,n,i,r,o,s,a,l,d,g)=>(0,c.zG)(D,(0,u._)({logger:d,consentTracking:g})).initialise(e,t,n,d,i,r,o,s,a,l))(e,t,n,i,r,s,a,l,this.version,d,g)().then((0,o.fS)((e=>(0,x.S)(t,d,g))))}shouldThrowStoreClosingError(e){return"NotFoundError"===e.name||"InvalidStateError"===e.name}makeStoreClosingDuringOpertationError(e){return new O.m(`Attempted ${e} when the current store is closing.`)}put(e,t){return(0,a.Y3)((()=>this.db.then((n=>n.put(e,t)))),(e=>{const t=(0,r.w)(e);return this.shouldThrowStoreClosingError(t)?this.makeStoreClosingDuringOpertationError("put"):t}))}get(e){return(0,a.Y3)((()=>this.db.then((t=>t.get(e))).then(s.ij)),(e=>{const t=(0,r.w)(e);return this.shouldThrowStoreClosingError(t)?this.makeStoreClosingDuringOpertationError("get"):t}))}delete(e){return(0,a.Y3)((()=>this.db.then((t=>t.delete(e)))),(e=>String(e)))}deleteStore(){return(0,a.Y3)((()=>this.db.then((e=>e.deleteStore()))),(e=>String(e)))}}var U=n(449);class R extends U.M{constructor(e,t,n,r,o,s,a,c){super(e,t,n,r,o,s,(()=>new T(e,t,s,new i,"e1c3fd73-dd41-4abd-b80b-4278d52bf7aa",`events_${a.get()}`,`keys_${a.get()}`,"events",n,c)))}}},2923:(e,t,n)=>{n.d(t,{X:()=>i});class i{constructor(){this.properties={}}overrideCustomProps(e){this.properties=e}getCustomProps(){return this.properties}}},4314:(e,t,n)=>{n.d(t,{c:()=>a});var i=n(2688),r=n(3735),o=n(550),s=n(7545);class a{constructor(e,t,n,i,r,o){this.eventHandler=e,this.api=t,this.metrics=n,this.userId=i,this.network=r,this.eventsCache=o,this.DEBOUNCE_TIME=500,this.MAX_DEBOUNCE_TIME=5e3,this.batch={requestData:[],requestOptions:[],processingStrategies:[]},this.scheduler=new s.b(this.DEBOUNCE_TIME,this.MAX_DEBOUNCE_TIME),this.debouncedFlushIfNotEmpty=this.scheduler.schedule(this.flush.bind(this)),this.scheduler.scheduleForPageUnload((()=>this.flushWithBeacon.bind(this)(this.batch)))}add(e,t,n){return this.batch.requestData.push(e),this.batch.requestOptions.push(t),this.batch.processingStrategies.push(n),this.debouncedFlushIfNotEmpty(this.batch),Promise.resolve()}flush(e){return this.flushIfNotEmpty(e,!1)}flushWithBeacon(e){return this.flushIfNotEmpty(e,!0)}flushIfNotEmpty(e,t){const{requestData:n,requestOptions:o,processingStrategies:s}=e,a=e=>this.network.error(`Error sending events batch. Got ${(0,i.w)(e)}`,this.userId.get()),c=t?(0,r.ls)((e=>this.api.trackBatchBeacon(e)),(e=>Promise.resolve())):e=>this.api.trackBatch(this.metrics,e);return n.length>0?(0,r.zG)(this.resetBatch(),(e=>this.trackMetrics(n)),(e=>c(n).then((e=>this.isBatchResponse(e)?this.onBatchResponseSuccess(e,n,o,s):(0,r.Q1)())).catch(a))):Promise.resolve()}onBatchResponseSuccess(e,t,n,i){const s=(e,t)=>"never"!==t?(0,r.ls)((()=>this.eventHandler.newEvent((0,o.XO)(e),null)),(()=>this.eventsCache.add(e,{persistOnDisk:!0}))):r.Q1,a=(e,t,n)=>{const i={name:t.name,session_id:t.session_id,view_id:t.view_id,properties:t.properties,id:null,time:(new Date).toISOString()};return(0,r.zG)(n(e.error.message),(t=>console.error(e)),(t=>this.eventHandler.newEvent(i,e)))};return e.forEach((({body:e},c)=>{const u=t[c],l=n[c],d=i[c];return(0,o.bk)(e)?a(e,u,l.error):((e,t,n,i)=>{const a=(0,o.mh)(e,t);return(0,r.zG)(n(a),s(a,i))})(e,u,l.success,d)}))}resetBatch(){this.batch={requestData:[],requestOptions:[],processingStrategies:[]}}trackMetrics(e){this.metrics.track({name:"sdk_events_batch_size_total",value:e.length,labels:{}}),this.metrics.track({name:"sdk_events_batch_size_bytes",value:2*JSON.stringify(e).length,labels:{}})}isBatchResponse(e){return!!e}}},6515:(e,t,n)=>{n.d(t,{p:()=>o});var i=n(2899);const r="permutive-pvc";class o extends((0,i.h)(r)){constructor(e){super(e)}}},3937:(e,t,n)=>{n.d(t,{J:()=>r});var i=n(2899);class r extends((0,i.h)("permutive-unprocessed-pba")){constructor(e){super(e)}}},2899:(e,t,n)=>{n.d(t,{h:()=>a});var i=n(3735),r=n(6567),o=n(3195);const s=e=>t=>class extends t{constructor(){super(...arguments),this.key=e}put(e){return this.db.then((t=>t.put(e,this.key))).then(i.Q1)}getIfPresent(){return this.db.then((e=>e.get(this.key))).then(r.ij)}reset(){return this.db.then((e=>e.delete(this.key)))}},a=e=>(0,i.zG)(class{constructor(e){this.db=Promise.resolve((0,o.S)(e.namespace,e.logger,e.consentTracking))}},s(e))},9678:(e,t,n)=>{n.d(t,{LP:()=>o,dG:()=>i,eP:()=>r});const i=4096,r=`Cookie exceeds maximum supported size of ${i} bytes for most browsers.`,o="Cookie is missing required parameters."},9175:(e,t,n)=>{n.d(t,{S:()=>c});var i=n(3735),r=n(9678);class o{constructor(e,t,n){this.namespace=e,this.config=t,this.logger=n}setCookie(e,t,n=!1){var i;if(!(t&&e&&this.config.cookieExpiry&&this.config.cookieDomain)){const{cookieExpiry:n,cookieDomain:o}=null!==(i=this.config)&&void 0!==i?i:{};throw this.logger.warn(`Unable to set cookie. ${r.LP}`,{value:t,cookieName:e,cookieExpiry:n,cookieDomain:o}),new Error(r.LP)}const o=this.namespace.getNamespacedStorageKey(e),s=[encodeURIComponent(o),"=",encodeURIComponent(t),"; expires=",this.config.cookieExpiry,"; domain=",this.config.cookieDomain,"; path=/",n?"; samesite=none; secure":""].join("");if(s.length>r.dG)throw this.logger.warn(`Unable to set cookie ${o}. ${r.eP}`),new Error(r.eP);return this.logger.debug(`Setting cookie ${s}`),document.cookie=s,!0}getCookie(e,t=!1){const n=t?e:this.namespace.getNamespacedStorageKey(e),i=new RegExp("\\b"+encodeURIComponent(n)+"=([^;]+)").exec(document.cookie);return null!==i?decodeURIComponent(i[1]):null}deleteCookie(e){if(!e||!this.config.cookieDomain)return!1;const t=this.namespace.getNamespacedStorageKey(e);return document.cookie=encodeURIComponent(t)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; domain="+this.config.cookieDomain+"; path=/",!0}}var s=n(5097);const a=e=>{const{logger:t,consentTracking:n}=e,i=e=>(t.debug(`Cookie: Failed to set cookie ${e} as consent is revoked`),!1);return e=>class extends e{constructor(){super(...arguments),this.setCookie=(0,s.v)(super.setCookie.bind(this),i,n.isRevoked)}}},c=(e,t,n,r)=>new((0,i.zG)(o,a({consentTracking:r,logger:n})))(e,t,n)},3319:(e,t,n)=>{n.d(t,{S:()=>l});var i=n(3735),r=n(2688),o=n(787),s=n(8198);class a{constructor(e){this.namespace=e}getExternalData(e){const t=this.namespace.getNamespacedStorageKey(e);return window.localStorage.getItem(t)}getExternalJsonData(e){return(0,i.zG)(this.getExternalData(e),o.A)}setExternalData(e,t){const n=this.namespace.getNamespacedStorageKey(e);try{window.localStorage.setItem(n,t)}catch(e){}}setExternalJsonData(e,t){return(0,i.zG)((n=t,(0,s.Y3)((function(){var e=JSON.stringify(n);if("string"!=typeof e)throw new Error("Converting unsupported structure to JSON");return e}),i.yR)),(0,s.UI)((t=>this.setExternalData(e,t))),(0,s.g_)((e=>{throw(0,r.w)(e)}),i.Q1));var n}removeExternalData(e){const t=this.namespace.getNamespacedStorageKey(e);window.localStorage.removeItem(t)}}var c=n(5097);const u=e=>{const{logger:t,consentTracking:n}=e,i=e=>{t.debug(`External Data: Failed to set key ${e} as consent is revoked`)},r=i,o=i;return e=>class extends e{constructor(){super(...arguments),this.setExternalData=(0,c.v)(super.setExternalData.bind(this),r,n.isRevoked),this.setExternalJsonData=(0,c.v)(super.setExternalJsonData.bind(this),o,n.isRevoked)}}},l=(e,t,n)=>new((0,i.zG)(a,u({consentTracking:n,logger:t})))(e)},6715:(e,t,n)=>{n.d(t,{P:()=>i});class i{constructor(e,t,n,i,r,o,s,a,c=[],u={}){this.logger=e,this.network=t,this.userId=n,this.viewId=i,this.messages=r,this.sessionManager=o,this.cookies=s,this.externalData=a,this.blockers=c,this.addons=u,this.listenForBlockers=!0}makeSafe(e){return(...t)=>{try{return e(...t)}catch(e){this.network.error(e,this.userId.get())}}}utcNow(){const e=new Date;return new Date(e.toUTCString())}addBlocker(e){this.blockers.push(e),this.logger.log("<blockers> added blocker "+e),this.messages.on(e,(()=>{if(this.listenForBlockers){const t=this.blockers.indexOf(e);t>=0&&(this.blockers.splice(t,1),this.logger.log("<blockers> removed blocker "+e)),0===this.blockers.length&&(this.listenForBlockers=!1,this.messages.emit("permutive:blockers:empty"),this.logger.log("<blockers> complete"))}}))}}},4828:(e,t,n)=>{n.d(t,{SX:()=>o});class i{constructor(){this.prefix="[Permutive]",this.debugStyle=["color: blue"].join(";")}log(...e){return console.log.bind(window.console,this.prefix)(...e)}debug(...e){return console.debug.bind(window.console,"%c%s",this.debugStyle,this.prefix)(...e)}warn(...e){return console.warn.bind(window.console,this.prefix)(...e)}error(...e){return console.error.bind(window.console,this.prefix)(...e)}}class r{log(){}debug(){}warn(){}error(){}}const o=e=>{var t;return e.loggingEnabled&&void 0!==(null===(t=window.console)||void 0===t?void 0:t.log)?new i:new r}},8167:(e,t,n)=>{n.d(t,{Q:()=>i});class i{constructor(){this.messageListenerMap={},this.replayQueue={}}on(e,t,n={withReplay:!1}){var i,r;null!==(i=(r=this.messageListenerMap)[e])&&void 0!==i||(r[e]=[]),n.withReplay&&this.processReplayQueue(e,t),this.messageListenerMap[e].push(t)}once(e,t){const n=i=>{t(i),this.off(e,n)};this.on(e,n)}off(e,t){var n;if(!t)return this.messageListenerMap[e]=[],void(this.replayQueue[e]=[]);const i=(null!==(n=this.messageListenerMap[e])&&void 0!==n?n:[]).indexOf(t);i>=0&&this.messageListenerMap[e].splice(i,1)}emit(e,t,n={withReplay:!1}){var i;(null===(i=this.messageListenerMap[e])||void 0===i?void 0:i.length)>0?this.emitMessageWithPayload(e,t):n.withReplay&&this.addToReplayQueue(e,t)}addToReplayQueue(e,t){var n,i;null!==(n=(i=this.replayQueue)[e])&&void 0!==n||(i[e]=[]),this.replayQueue[e].push(t)}processReplayQueue(e,t){var n;null===(n=this.replayQueue[e])||void 0===n||n.forEach((e=>t(e)))}emitMessageWithPayload(e,t){var n;null===(n=this.messageListenerMap[e])||void 0===n||n.forEach((e=>e(t)))}}},7121:(e,t,n)=>{n.d(t,{AG:()=>a,UC:()=>o,Yh:()=>s});var i=n(6567),r=n(6013);const o=(e,t,n)=>e in t||(()=>{const t="number"==typeof e?e:parseInt(e);return!1===isNaN(t)&&n.has(t)})(),s=e=>(0,r.b0)(e,((e,t)=>t.state?(0,i.G)({[t.checksum]:t.state}):i.YP));function a(e){var t;return["SegmentEntry","SegmentExit"].includes(e.name)&&void 0!==(null===(t=e.properties)||void 0===t?void 0:t.segment_number)}},4938:(e,t,n)=>{n.d(t,{c:()=>ln,e:()=>cn});var i=n(7183),r=n(3735),o=n(477),s=n.n(o);function a(){return s()('/*! permutive-javascript-sdk v19.38.0 (web) (built 2022-11-01T15:42:38.514Z) */(()=>{"use strict";const e=()=>({kind:"null",value:null}),n=e=>({kind:"string",value:e}),t=e=>({kind:"number",value:e}),r=e=>({kind:"array",value:e}),i=e=>({kind:"object",value:e}),o=e=>e,a=()=>({kind:"bottom"}),c=e=>({kind:"inner",a:e}),s=e=>({kind:"top",error:e}),u=e=>({kind:"unbounded",group:e}),g=(e,n)=>({kind:"windowed",key:n,group:e}),l=(e,n,t)=>({kind:"countLimit",n:t,limit:n,group:e}),f=(e,n,t)=>({kind:"uniqueLimit",n:t,limit:n,group:e}),w=e=>({kind:"numberGroup",group:e}),d=e=>({kind:"stringGroup",group:e}),m=e=>({kind:"tuple",tuple:e}),p=e=>({state:e}),y=(e,n)=>({commands:e,payload:n});function h(e){return e}function E(e,n,t,r,i,o,a,c,s){switch(arguments.length){case 1:return e;case 2:return n(e);case 3:return t(n(e));case 4:return r(t(n(e)));case 5:return i(r(t(n(e))));case 6:return o(i(r(t(n(e)))));case 7:return a(o(i(r(t(n(e))))));case 8:return c(a(o(i(r(t(n(e)))))));case 9:return s(c(a(o(i(r(t(n(e))))))));default:for(var u=arguments[0],g=1;g<arguments.length;g++)u=arguments[g](u);return u}}var q=function(e){return{equals:function(n,t){return n===t||e(n,t)}}},b=function(e){return q((function(n,t){for(var r in e)if(!e[r].equals(n[r],t[r]))return!1;return!0}))},v=function(e){return function(n,t){return n===t||0===e(n,t)}},L=function(e){return{equals:v(e),compare:function(n,t){return n===t?0:e(n,t)}}},A=function(e){return function(n){return L((function(t,r){return n.compare(e(t),e(r))}))}},C=function(e){return function(n,t){return-1===e.compare(n,t)}},k=function(e){return function(n,t){return 1===e.compare(n,t)}},S=function(e){return function(n,t){return n===t||e.compare(n,t)>-1?n:t}};var P={equals:function(e,n){return e===n}},_={equals:P.equals,compare:function(e,n){return e<n?-1:e>n?1:0}};const x=(e,n)=>{switch(e.kind){case"bottom":return{kind:"bottom"};case"inner":return c(n(e.a));case"top":return s(e.error)}},I=e=>L(((n,t)=>{if("bottom"===n.kind&&"bottom"===t.kind)return 0;if("bottom"===n.kind)return-1;if("bottom"===t.kind)return 1;if("top"===n.kind&&"top"===t.kind)return _.compare(n.error,t.error);if("top"===n.kind)return 1;if("top"===t.kind)return-1;if("inner"===n.kind&&"inner"===t.kind)return e.compare(n.a,t.a);throw new Error("Non exhaustive match in extendedAlgebraOrd")}));var M=function(e,n){for(var t=0,r=n.length,i=e.length;t<r;t++,i++)e[i]=n[t];return e},T=function(e){return"Some"===e._tag},G={_tag:"None"},B=function(e){return{_tag:"Some",value:e}},F=function(e){return"Left"===e._tag},R=(Object.prototype.hasOwnProperty,function(e){return M([e[0]],e.slice(1))});var U=G,N=B;function D(e){return function(n){return e(n)?N(n):U}}var O=function(e){return"Left"===e._tag?U:N(e.right)},H=function(e){return{equals:function(n,t){return n===t||(K(n)?K(t):!K(t)&&e.equals(n.value,t.value))}}},W=function(e){return{equals:H(e).equals,compare:function(n,t){return n===t?0:V(n)?V(t)?e.compare(n.value,t.value):1:-1}}},z=function(e){return function(n){return K(n)?U:N(e(n.value))}},j=O,V=T,K=function(e){return"None"===e._tag},J=function(e){return function(n){return K(n)?e():n.value}};var Y;Y=void 0;var $=function(e){return e[0]},X=$;var Q=function(e,n){for(var t=0,r=n.length,i=e.length;t<r;t++,i++)e[i]=n[t];return e},Z=function(e){return e.length>0},ee=function(e,n){return e<0||e>=n.length},ne=function(e){return function(n){return Q([e],n)}},te=ne,re=function(e){return function(n){return Q(Q([],n),[e])}},ie=re,oe=R,ae=function(e){return Z(e)?B(e):G},ce=function(e){return function(n){for(var t=Math.max(0,Math.floor(n)),r=[e(0)],i=1;i<t;i++)r.push(e(i));return r}};var se=oe;var ue=function(e){return function(n){var t=Math.max(1,e);return t>=n.length?[se(n),[]]:[E(n.slice(1,t),te(le(n))),n.slice(t)]}},ge=function(e){return q((function(n,t){return n.length===t.length&&n.every((function(n,r){return e.equals(n,t[r])}))}))},le=X;var fe={equals:function(e,n){return e===n}},we={equals:fe.equals,compare:function(e,n){return e<n?-1:e>n?1:0}};var de=function(e,n){return function(t){for(var r=t.length,i=e,o=0;o<r;o++)i=n(o,i,t[o]);return i}};var me=function(e){return 0===e.length},pe=Z,ye=te,he=ie,Ee=function(e,n){return e<=0?[]:ce(n)(e)};var qe=ee,be=function(e){return function(n){return qe(e,n)?Ae(n):n.slice(0,e)}};var ve=function(e,n){for(var t=e.length,r=0;r<t&&n(e[r]);r++);return r};var Le=function(e){return function(n){return e<=0||me(n)?Ae(n):e>=n.length?[]:n.slice(e,n.length)}};var Ae=function(e){return e.slice()},Ce=function(e){return me(e)?[]:e.slice().reverse()},ke=function(e){return function(n){return n.length<=1?Ae(n):n.slice().sort(e.compare)}},Se=function(e,n,t){for(var r=[],i=Math.min(e.length,n.length),o=0;o<i;o++)r[o]=t(e[o],n[o]);return r};var Pe=function(e){return function(n){return e>=1&&pe(n)?ue(e)(n):me(n)?[Ae(n),[]]:[[],Ae(n)]}};var _e=function(e){return function(n){return E(n,function(e){return function(n){for(var t=[],r=0;r<n.length;r++)t.push.apply(t,e(r,n[r]));return t}}((function(n,t){return e(t)})))}},xe=function(e){return function(n){for(var t=[],r=0;r<n.length;r++){var i=e(r,n[r]);T(i)&&t.push(i.value)}return t}},Ie=function(e){return xe((function(n,t){return e(t)}))},Me=Ie(h),Te=de,Ge=function(e){var n=Be(e);return function(e){return n((function(n,t){return e(t)}))}},Be=function(e){return function(n){return Te(e.of([]),(function(t,r,i){return e.ap(e.map(r,(function(e){return function(n){return E(e,he(n))}})),n(t,i))}))}},Fe=function(e){return L((function(n,t){for(var r=n.length,i=t.length,o=Math.min(r,i),a=0;a<o;a++){var c=e.compare(n[a],t[a]);if(0!==c)return c}return we.compare(r,i)}))},Re=function(e){return{_tag:"Left",left:e}},Ue=function(e){return{_tag:"Right",right:e}},Ne=function(e,n){return E(e,He(n))},De=function(e,n){return E(e,ze(n))},Oe="Either",He=function(e){return function(n){return Ve(n)?n:Ue(e(n.right))}},We=Ue,ze=function(e){return function(n){return Ve(n)?n:Ve(e)?e:Ue(n.right(e.right))}},je={URI:Oe,map:Ne,ap:De,of:We},Ve=F;var Ke=function(e){return-1===e?1:1===e?-1:0};function Je(e,n){return Me(e.map(n))}function Ye(e,n,t,r){const i=(e,n)=>{if(0===e.length)return Me(n.map((e=>N({1:e[1],2:t(U,N(e[2]))}))));if(0===n.length)return Me(e.map((e=>N({1:e[1],2:t(N(e[2]),U)}))));if(e.length>0&&n.length>0&&C(r)(e[0][1],n[0][1])){const[r,...o]=e,a=r[1],c=r[2];return ye({1:a,2:t(N(c),U)})(i(o,n))}if(e.length>0&&n.length>0&&k(r)(e[0][1],n[0][1])){const[r,...o]=n,a=r[1],c=r[2];return ye({1:a,2:t(U,N(c))})(i(e,o))}if(e.length>0&&n.length>0){const[r,...o]=e,[a,...c]=n,s=r[1],u=r[2],g=a[2];return ye({1:s,2:t(N(u),N(g))})(i(o,c))}throw new Error("Non exhaustive match in mapOption2")},o=A((e=>e[1]))(r),a=(e=>{const n=Je(e,(e=>V(e[2])?N({1:e[1],2:e[2].value}):U));return 0===n.length?U:N(n)})(i(ke(o)([...e].map((e=>({1:e[0],2:e[1]})))),ke(o)([...n].map((e=>({1:e[0],2:e[1]}))))));return z((e=>new Map(e.map((e=>[e[1],e[2]])))))(a)}function $e(e,n,t,r){const i=A((e=>e[0]))(r),o=ke(i)([...n]).reduceRight(((e,n)=>{if(Ve(e)){const r=t(n[1],e.left);return V(r)?Re(r.value):Ue(n[0])}return e}),Re(e));return j(o)}function Xe(e,n){return new Map([...e].map(n))}function Qe(e,n){return new Map([...e].filter(n))}function Ze(e){return JSON.stringify(en(e))}function en(e){switch(e.kind){case"null":return rn.encode(e);case"string":return on.encode(e);case"number":return an.encode(e);case"array":return cn.encode(e);case"object":return sn.encode(e)}}function nn(e){return null===e?rn.decode(e):"number"==typeof e?an.decode(e):"string"==typeof e?on.decode(e):Array.isArray(e)?cn.decode(e):sn.decode(e)}const tn=(e,n)=>Re(`Failed to decode. Input was ${JSON.stringify(e)}. Codec type was ${n}`),rn={encode:e=>null,decode:e=>null===e?Ue({kind:"null",value:null}):tn(e,"SimpleNull")},on={encode:e=>e.value,decode:e=>"string"==typeof e?Ue(n(e)):tn(e,"SimpleString")},an={encode:e=>e.value,decode:e=>"number"==typeof e?Ue(t(e)):tn(e,"SimpleNumber")},cn={encode:e=>e.value.map(en),decode:e=>{if(Array.isArray(e)){const n=Ge(je)(nn)(e);return He(r)(n)}return tn(e,"SimpleArray")}},sn={encode:e=>{const n=[...e.value.entries()];return Object.assign({},...Array.from(n,(([e,n])=>({[e]:en(n)}))))},decode:e=>{if(e&&e.constructor===Object){const n=Ge(je)((([e,n])=>E(nn(n),He((n=>function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e}(e,n))))))(Object.entries(e));return He((e=>i(new Map([...e]))))(n)}return tn(e,"SimpleObject")}};function un(e){return E(e,ln,z(Ze),J((()=>"<encode error>")))}function gn(e){return z(yn)(function(e){switch(e.state.kind){case"top":return N(n(e.state.error));case"bottom":return U;case"inner":return ln(e.state.a)}}(e))}function ln(e){return function(e){switch(e.kind){case"numberGroup":case"stringGroup":return fn(e.group);case"tuple":return e.tuple.length>0}}(e.payload)?N(r(function(e,n){const t=z((e=>ye(e)(n)))(e);return J((()=>n))(t)}(z((e=>n(function(e){const n=e=>{switch(e){case"add":return"p";case"mul":return"m";case"max":return"v";case"min":return"n"}},t=e=>1===e[2]?n(e[1]):n(e[1])+JSON.stringify(e[2]);return e.map(t).join("")}(e))))(e.commands),function(e){const r=e=>{switch(e.kind){case"bottom":return{kind:"null",value:null};case"top":return n(e.error);case"inner":return t(e.a)}},o=e=>Je([wn,dn,e=>E(e,pn,i,N)],(n=>n(e))),a=e=>Je([wn,mn,e=>E(e,pn,(e=>Xe(e,(([e,n])=>[JSON.stringify(e),n]))),i,N)],(n=>n(e)));switch(e.kind){case"tuple":return e.tuple.map(r);case"stringGroup":return o(e.group);case"numberGroup":return a(e.group)}}(e.payload)))):U}function fn(e){switch(e.kind){case"unbounded":return e.group.size>0;case"windowed":return e.group.size>0||V(e.key);case"countLimit":case"uniqueLimit":return e.group.size>0||V(e.limit)}}function wn(e){switch(e.kind){case"unbounded":return U;case"windowed":return N(n("w"));case"countLimit":return N(n(1===e.n?"x":`x${e.n}`));case"uniqueLimit":return N(n(1===e.n?"u":`u${e.n}`))}}function dn(e){switch(e.kind){case"unbounded":return U;case"windowed":return N(n(V(e.key)?e.key.value:""));case"countLimit":case"uniqueLimit":return N(n(V(e.limit)?e.limit.value:""))}}function mn(e){switch(e.kind){case"unbounded":return U;case"windowed":return V(e.key)?N(t(e.key.value)):N({kind:"null",value:null});case"countLimit":case"uniqueLimit":return V(e.limit)?N(t(e.limit.value)):N({kind:"null",value:null})}}function pn(e){switch(e.kind){case"unbounded":case"windowed":case"countLimit":case"uniqueLimit":return e.group}}function yn(e){switch(e.kind){case"array":return 0===e.value.length?{kind:"null",value:null}:1===e.value.length?yn(e.value[0]):r(e.value.map(yn));case"object":return E(Qe(e.value,(([e,n])=>"null"!==n.kind)),(e=>Xe(e,(e=>[e[0],yn(e[1])]))),i);default:return e}}function hn(e){const n=e=>{if(0===e.length)return{kind:"bottom"};const n=(e=>{if(4!==e.length)return U;const[n,t,r,i]=e;if("string"===n.kind&&"string"===t.kind&&"object"===i.kind){const e=D((e=>En(e[1].value)&&qn(e[2].value)))({1:n,2:t});return z((e=>({prim:e[1].value,grp:e[2].value,cutoff:r,m:i.value})))(e)}return U})(e);if(V(n)){const{prim:e,grp:t,cutoff:r,m:i}=n.value,o=bn(r,i,vn(t));return"string"==typeof o?s(o):c(y(Ln(e),o))}const t=(e=>{if(3!==e.length)return U;const[n,t,r]=e;if("string"===n.kind&&"object"===r.kind){const e=D((e=>qn(e.value)))(n);return z((e=>({grp:e.value,cutoff:t,m:r.value})))(e)}return U})(e);if(V(t)){const{grp:e,cutoff:n,m:r}=t.value,i=bn(n,r,vn(e));return"string"==typeof i?s(i):c(y(U,i))}const r=(e=>{if(2!==e.length)return U;const[n,t]=e;if("string"===n.kind&&"object"===t.kind){const e=D((e=>En(e.value)))(n);return z((e=>({prim:e.value,m:t.value})))(e)}return U})(e);if(V(r)){const{prim:e,m:n}=r.value;return c(y(Ln(e),d(u(n))))}const i=(e=>{if(1!==e.length)return U;const[n]=e;return"object"===n.kind?N({m:n.value}):U})(e);if(V(i)){const{m:e}=i.value;return c(y(U,d(u(e))))}const o=(e=>{if(e.length<1)return U;const[n,...t]=e;if("string"===n.kind){const e=D((e=>En(e.value)))(n);return z((e=>({prim:e.value,rest:t})))(e)}return U})(e);if(V(o)){const{prim:e,rest:n}=o.value;return c(y(Ln(e),Cn(n)))}return c(y(U,Cn(e)))},t=e=>"array"===e.kind?_e(t)(e.value):[e];return"null"===e.kind?p({kind:"bottom"}):p(n(t(e)))}function En(e){const n=e.split("");if(!0==(0===n.length))return!1;{const[e,...t]=n;return-1!=="pmvn".indexOf(e)&&t.every((e=>-1!=="pmvn0123456789".indexOf(e)))}}function qn(e){const n=e.split("");switch(!0){case 0===n.length:return!1;case"w"===n[0]&&void 0===n[1]:return!0;default:{const[e,...t]=n;return-1!=="ux".indexOf(e)&&-1===t.map((e=>!isNaN(parseInt(e)))).indexOf(!1)}}}function bn(e,n,t){switch(e.kind){case"string":return d(t({1:N(e.value),2:n}));case"number":case"null":return w(t({1:"null"===e.kind?U:N(e.value),2:Qe(Xe(n,(([e,n])=>[Number(e),n])),(e=>!isNaN(e[0])))}));default:return"{bad cutoff}"}}function vn(e){const n=e=>n=>f(n[2],n[1],e),t=e=>n=>l(n[2],n[1],e),r=e.split("");switch(!0){case"w"===r[0]&&void 0===r[1]:return e=>g(e[2],e[1]);case"u"===r[0]&&void 0===r[1]:return n(1);case"u"===r[0]&&void 0!==r[1]:return n(parseInt(r.slice(1).join("")));case"x"===r[0]&&void 0===r[1]:return t(1);case"x"===r[0]&&void 0!==r[1]:return t(parseInt(r.slice(1).join("")));default:throw new Error("This should never happen if you use isGroupCommand")}}function Ln(e){return z(o)(ae(An(e,(e=>{const n=e.split("");if(0===n.length)return U;const[t,...r]=n,i=(e=>{switch(e){case"p":return N("add");case"m":return N("mul");case"v":return N("max");case"n":return N("min");default:return U}})(t);return z((e=>{const{init:n,rest:t}=(i=e=>{return"number"==typeof(n=parseInt(e))&&isFinite(n)&&Math.floor(n)===n;var n},function(e){var n=Pe(ve(e,i))(e);return{init:n[0],rest:n[1]}})(r);var i;return{1:{1:e,2:0===n.length?1:parseInt(n.join(""))},2:t.join("")}}))(i)}))))}function An(e,n){const t=n(e);return J((()=>[]))(z((e=>[e[1]].concat(An(e[2],n))))(t))}function Cn(e){return m(e.map(kn))}function kn(e){switch(e.kind){case"number":return c(e.value);case"string":return s(e.value);case"null":return{kind:"bottom"};case"object":return s("{object}");case"array":return s("{array}")}}const Sn={strategy:(e,n,t)=>r=>{if(K(t))return n;if("delta"===e&&K(n))return U;if(K(n))return t;if(V(n)&&V(t))return r(n.value,t.value);throw new Error("Non exhaustive match in combineCommand.strategy")},operation:(e,n,t,r,i,o)=>{const c=Fe(I(o));if("append"===e&&"add"===n)return Se(t,r,Bn("append",i.plus));if("append"===e&&"mul"===n)return Se(t,r,Bn("append",i.times));if("append"===e&&"max"===n)return S(c)(t,r);if("join"===e&&"add"===n)return Se(t,r,Bn("join",S(o)));if("join"===e&&"mul"===n)return Se(t,r,Bn("join",S(o)));if("join"===e&&"max"===n)return S(c)(t,r);if("min"===n)return Sn.operation(e,"max",t,r,i,function(e){return L(((n,t)=>Ke(e.compare(n,t))))}(o));if("delta"===e&&"max"===n)return k(c)(t,r)?t:r.map(a);if("delta"===e)return Se(t,r,((e,n)=>k(I(o))(e,n)?e:{kind:"bottom"}));throw new Error("Non exhaustive match in combineCommand.operation")},extend:(e,n,t,r)=>{if("delta"===e&&"top"===t.kind&&"top"===r.kind)return k(_)(t.error,r.error)?s(t.error):{kind:"bottom"};if("delta"===e&&"bottom"===r.kind)return t;if("delta"===e&&"bottom"===t.kind)return{kind:"bottom"};if("top"===t.kind&&"top"===r.kind)return s(S(_)(t.error,r.error));if("top"===t.kind)return t;if("top"===r.kind)return r;if("inner"===t.kind&&"inner"===r.kind)return n(t.a,r.a);if("bottom"===t.kind)return r;if("bottom"===r.kind)return t;throw new Error("Non exhaustive match in extend")}},Pn={plus:(e,n)=>e+n,times:(e,n)=>e*n};function _n(e,n,t,r){if("unbounded"===e.kind&&"unbounded"===n.kind){const i=e.group,o=n.group;return J(a)(z((e=>c(u(e))))(Ye(i,o,t,r)))}if("windowed"===e.kind&&"windowed"===n.kind){const i=e.key,o=e.group,s=n.key,u=n.group,l=S(W(r))(i,s);return J(a)(z((e=>c(g(e,l))))(Ye(o,u,t,r)))}if("countLimit"===e.kind&&"countLimit"===n.kind){const i=e.n,o=n.n;if(i===o){const o=e.limit,s=e.group,u=n.limit,g=n.group,f=S(W(r))(o,u);return J(a)(z((e=>c(l(e,f,i))))(Ye(s,g,t,r)))}return s("Non matching counts")}if("uniqueLimit"===e.kind&&"uniqueLimit"===n.kind){const i=e.n,o=n.n;if(i===o){const o=e.limit,s=e.group,u=n.limit,g=n.group,l=S(W(r))(o,u);return J(a)(z((e=>c(f(e,l,i))))(Ye(s,g,t,r)))}return s("Non matching counts")}return s("Non matching group types")}function xn(e,n,t,r,i,o){const c=(e,n)=>({1:be(e)(n).concat(Ee(Math.max(0,e-n.length),a)),2:Le(e)(n)}),s=(n,t,r)=>{if(0===n.length)return Sn.operation(e,"max",t,r,i,o);if(n.length>0){const[a,...u]=n,g=c(a[2],t),l=g[1],f=g[2],w=c(a[2],r),d=w[1],m=w[2];return Sn.operation(e,a[1],l,d,i,o).concat(s(u,f,m))}throw new Error("Non exhaustive match in recurse")};return Ce((u=e=>"bottom"===e.kind,function(e){return e.slice(ve(e,u))})(Ce(s(n,t,r))));var u}function In(n,t,r){return J(e)(Mn(n,U)(t,r))}function Mn(e,n){const t=n=>(t,r)=>Sn.strategy(e,t,r)(Mn(e,n)),r=(r,i)=>{if(H(ge(b({1:P,2:fe}))).equals(r.commands,i.commands)){const o=((n,r,i)=>{if("stringGroup"===r.kind&&"stringGroup"===i.kind){const e=_n(r.group,i.group,t(n),_);return x(e,(e=>d(Gn(e,_))))}if("numberGroup"===r.kind&&"numberGroup"===i.kind){const e=_n(r.group,i.group,t(n),we);return x(e,(e=>w(Gn(e,we))))}if("tuple"===r.kind&&"tuple"===i.kind){const t=V(n)?n.value:[];return c(m(xn(e,t,r.tuple,i.tuple,Pn,we)))}throw new Error(`Non matching payload. Got ${r.kind} and ${i.kind}`)})(K(r.commands)?n:r.commands,r.payload,i.payload);return x(o,(e=>y(r.commands,e)))}throw new Error(`Non matching primitive strings. Got ${un(r)} and ${un(i)}`)};return(n,t)=>gn(p(Sn.extend(e,r,hn(n).state,hn(t).state)))}function Tn(e,n,t){const r=z((n=>Qe(e,(([e,r])=>{return(i=t,function(e,n){return-1!==i.compare(e,n)})(e,n);var i}))))(n);return J((()=>e))(r)}function Gn(e,n){switch(e.kind){case"unbounded":return e;case"windowed":return K(e.key)?e:g(Tn(e.group,e.key,n),e.key);case"countLimit":{const t=e.limit,r=e.n,i=e.group,o=(e,n)=>n<=1?U:N(n-1),a=$e(r,i,o,n),c=S(W(n))(t,a);return l(Tn(i,c,n),c,r)}case"uniqueLimit":{const t=e.limit,r=e.n,i=e.group,o=(e,n)=>{if("object"===e.kind){const t=[...e.value.keys(),...n.keys()],i=new Set(t);return i.size>=r?U:N(i)}return U},a=$e(new Set,i,o,n),c=S(W(n))(t,a);return f(Tn(i,c,n),c,r)}}}function Bn(e,n){return(t,r)=>Sn.extend(e,((e,t)=>c(n(e,t))),t,r)}function Fn(e,n){return In("append",e,n)}function Rn(e,n,t,r,i,o,a,c,s){switch(arguments.length){case 1:return e;case 2:return n(e);case 3:return t(n(e));case 4:return r(t(n(e)));case 5:return i(r(t(n(e))));case 6:return o(i(r(t(n(e)))));case 7:return a(o(i(r(t(n(e))))));case 8:return c(a(o(i(r(t(n(e)))))));case 9:return s(c(a(o(i(r(t(n(e))))))));default:for(var u=arguments[0],g=1;g<arguments.length;g++)u=arguments[g](u);return u}}var Un=function(e){return"Some"===e._tag},Nn={_tag:"None"},Dn=function(e){return{_tag:"Some",value:e}},On=function(e){return"Left"===e._tag},Hn=Object.prototype.hasOwnProperty;function Wn(e){return function(n,t){if(void 0===t){var r=Wn(e);return function(e){return r(n,e)}}for(var i,o=0;o<t.length;o++)if(i=t[o],e.equals(i,n))return!0;return!1}}var zn=Wn;function jn(e){var n=zn(e);return function(t,r){if(void 0===r){var i=jn(e);return function(e){return i(e,t)}}return t.filter((function(e){return!n(e,r)}))}}var Vn=On,Kn=function(e){return function(n){return Vn(n)?e(n.left):n.right}};var Jn=function(e){return function(n){return!e(n)}},Yn=Nn,$n=Dn;var Xn=Un;var Qn={equals:function(e,n){return e===n}},Zn=function(e){for(var n in e)if(Hn.call(e,n))return!1;return!0};function et(e){return function(n){var t={},r=!1;for(var i in n)if(Hn.call(n,i)){var o=n[i];e(i,o)?t[i]=o:r=!0}return r?t:n}}var nt=function(e){return et((function(n,t){return e(t)}))};var tt=Zn;var rt=nt;rt(Jn(tt));function it(...e){return e.reduce(((e,n)=>Object.assign(Object.assign({},e),n)),{})}Jn((function(e){return 0===e.length}));function ot(e,n){const t=Object.keys(e),r=t.length,i={};for(let o=0;o<r;o++){const r=t[o],a=n(r,e[r]);Xn(a)&&(i[r]=a.value)}return i}function at(e){var n;return["SegmentEntry","SegmentExit"].includes(e.name)&&void 0!==(null===(n=e.properties)||void 0===n?void 0:n.segment_number)}const ct="process";let st=!1,ut=[],gt=!1;const lt={};let ft={getCurrentTime:()=>new Date,getCurrentSession:()=>"",getCurrentView:()=>"",getSegments:()=>({}),get1PSegments:()=>({}),get3PSegments:()=>({}),getSegmentsArray:()=>({}),getLookalikeModels:()=>({}),setSegmentActivation:()=>{}};const wt=e=>{const n=ft.get1PSegments(),t={"1p":Object.assign(Object.assign({},n["1p"]),e["1p"])};ft.get1PSegments=()=>t},dt=e=>{const n=Object.assign({},e);delete n["1p"],ft.get3PSegments=()=>n},mt=()=>{const e=bt.concat(ft.get1PSegments(),ft.get3PSegments()),n=qt(e);ft.getSegments=()=>e,ft.getSegmentsArray=()=>n};function pt(e,n,t,r,i,o,a){st=!1,ut=[],gt=!1;const c=qt(r.segments);ft={getCurrentTime:()=>new Date,getCurrentSession:()=>r.sessionId,getCurrentView:()=>r.viewId,get1PSegments:()=>r.segments,get3PSegments:()=>({}),getSegments:()=>bt.concat(ft.get1PSegments(),ft.get3PSegments()),getSegmentsArray:()=>c,getLookalikeModels:()=>r.lookalikeModels,setSegmentActivation:(e,n)=>{}};const s=ot(n,((n,t)=>{var r;return(null===(r=e[n])||void 0===r?void 0:r.checksum)===t?Yn:$n(((e,n)=>{const t=o[e].interpret(null,ft);return Object.assign({checksum:n},!1===t.result?{}:{result:t})})(n,t))}));if(0===i.length)return{diff:Object.assign(Object.assign({},e),s),errors:[]};if(0===Object.keys(s).length)return{diff:e,errors:[]};{const r=yt(s,n,t,i,"bootstrap",o,a);return{diff:Object.assign(Object.assign({},e),r.diff),errors:r.errors}}}function yt(e,n,t,r,i,o,a){let c={diff:{},errors:[]};const s=r.length,u=()=>r.filter((e=>{return n=a["!UpdateLookalikeModels"]||[],at(t=e)&&n.includes(t.properties.segment_number.toString());var n,t})).length===r.length?"lookalikeTransition":"transition",g=(e,n,t)=>"transition"===e?t===n-1?u():"event":e;for(let u=0;u<s;u++){const l=r[u],f=g(i,s,u),w=ht(Object.assign(Object.assign({},e),c.diff),n,t,l,f,o,a);c={diff:Object.assign(Object.assign({},c.diff),w.diff),errors:c.errors.concat(w.errors)}}return c}function ht(n,t,r,i,o,a,c){"bootstrap"!==o&&(ft.setSegmentActivation=Et(n,t));const s=e,u=(e,n)=>{const t=a[e],o=t.lift(i,ft),c=Rn(nn(n.state||null),Kn(s)),u=Rn(nn(o),Kn(s),(e=>Fn(c,e))),g=r[e],l=g?Rn(nn(g),Kn(s),(e=>Fn(u,e))):u,f=en(u),w=t.interpret(en(l),ft),d=n.activations||{};return Object.assign(Object.assign(Object.assign({checksum:n.checksum},null===f?{}:{state:f}),!1===w.result?{}:{result:w}),0===Object.keys(d).length?{}:{activations:d})},g=[],l={},f=function(e,n,t,r,i){switch(e){case"event":const e=(null==i?void 0:i[r.name])||[];if(st)return e;{ut.push(r);const n=[...i["!UpdateSecondPartyData"]||[],...i["!UpdateThirdPartyData"]||[]];return jn(Qn)(e,n)}case"lookalikeTransition":return(null==i?void 0:i[r.name])||[];case"transition":const o=(null==i?void 0:i[r.name])||[];if(gt){const e=i["!UpdateLookalikeModels"]||[];return o.concat(e)}return o;case"bootstrap":const a=((null==i?void 0:i[r.name])||[]).filter((e=>void 0!==n[e]));return jn(Qn)(a,[...st?[]:(i["!UpdateSecondPartyData"]||[]).concat(i["!UpdateThirdPartyData"]||[]),...gt?[]:i["!UpdateLookalikeModels"]||[]]);case"updateExternalState":return Object.keys(t);case"updateEnvironment":return[...i["!UpdateLookalikeModels"]||[],...i["!UpdateSecondPartyData"]||[],...i["!UpdateThirdPartyData"]||[]];case"updateLAL":return i["!UpdateLookalikeModels"]||[];case"updateTPD":return[...i["!UpdateSecondPartyData"]||[],...i["!UpdateThirdPartyData"]||[]]}}(o,n,r,i,c),w=f.length;!function(e){at(e)&&(wt({"1p":{[e.properties.segment_number]:"SegmentEntry"===e.name}}),mt())}(i);for(let e=0;e<w;e++){const r=f[e],i=n[r]||{checksum:t[r]};let o=i;try{o=u(r,i)}catch(e){g.push(`Failed to interpret query ${r}. Got ${e}`)}l[r]=o}return{diff:l,errors:g}}function Et(e,n){return(t,r,i)=>{if(!(i in e)){const t=n[i];if(void 0===t)throw new Error("Checksum not in internalStateMap");e[i]={checksum:t}}"activations"in e[i]||(e[i].activations={});t in e[i].activations||(e[i].activations[t]=[]),e[i].activations[t]=[...e[i].activations[t],r]}}function qt(e){return Object.keys(e).reduce(((n,t)=>{const r=Object.keys(e[t]),i=[];return r.forEach((n=>{!0===e[t][n]&&i.push(n)})),n[t]=i,n}),{})}const bt={empty:{},concat:(e,n)=>{const t=Object.assign({},e);for(const[e,r]of Object.entries(n))t[e]?t[e]=it(t[e],r):t[e]=r;return t}};const vt=(e,n)=>{if("noop"===e.type)return{diff:{},errors:[]};const t=(e,...t)=>[e.stateMap,...e.payload,...t,n.rawQueries,n.queriesByEvent];return"bootstrap"===e.type?pt(...t(e)):"updateEnvironment"===e.type?function(e,n,t,r,i,o){return r.segments&&(wt(r.segments),dt(r.segments),mt(),ft.setSegmentActivation=Et(e,n)),r.lookalikeModels&&(gt=!0),r.segments&&(e=>{const n=Object.keys(e).length,t="1p"in e;return t&&n>1||!t&&n>0})(r.segments)&&(st=!0),ft=Object.assign(Object.assign(Object.assign(Object.assign({},ft),r.viewId?{getCurrentView:()=>r.viewId}:{}),r.sessionId?{getCurrentSession:()=>r.sessionId}:{}),r.lookalikeModels?{getLookalikeModels:()=>r.lookalikeModels}:{}),yt(e,n,t,ut.length>0?ut:[lt],"updateEnvironment",i,o)}(...t(e)):"updateLAL"===e.type?function(e,n,t,r,i,o){return ft.getLookalikeModels=()=>r,gt=!0,ht(e,n,t,lt,"updateLAL",i,o)}(...t(e)):"updateTPD"===e.type?function(e,n,t,r,i,o){dt(r),mt(),ft.setSegmentActivation=Et(e,n),st=!0;const a=yt(e,n,t,ut.length>0?ut:[lt],"updateTPD",i,o);return ut=[],a}(...t(e)):"updateExternalState"===e.type?function(e,n,t,r,i){return ht(e,n,t,lt,"updateExternalState",r,i)}(...t(e)):e.type===ct?yt(...t(e,"event")):"processTransitions"===e.type?function(e,n,t,r,i,o){return yt(e,n,t,r,"transition",i,o)}(...t(e)):void 0};const Lt=function(){var e=this&&this.__assign||function(){return e=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},e.apply(this,arguments)},n=this&&this.__values||function(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},t=this&&this.__read||function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var r,i,o=t.call(e),a=[];try{for(;(void 0===n||n-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(t=o.return)&&t.call(o)}finally{if(i)throw i.error}}return a},r=this&&this.__spreadArray||function(e,n,t){if(t||2===arguments.length)for(var r,i=0,o=n.length;i<o;i++)!r&&i in n||(r||(r=Array.prototype.slice.call(n,0,i)),r[i]=n[i]);return e.concat(r||Array.prototype.slice.call(n))},i=function(){function i(e){return"number"==typeof e?o[e]:e}function g(e){return"number"==typeof e?a[e]:e}function l(e){return"number"==typeof e?c[e]:e}function f(e){switch(e.length){case 0:return null;case 1:return e[0];default:return e}}function w(e,n,t){void 0===t&&(t=p);var r=l(n).reduce((function(e,n){return e&&null!=e[n]?e[n]:null}),e);return null===r?null:t(r)}function d(e,n){var t=l(n).slice();return t.unshift(e),t}function m(e,n,t){return void 0===t&&(t=p),w(e,d("properties",n),t)}var p=function(e){return e},y=function(e){return!0};function h(e,n){return function(t){for(var r=0;r<e.length;r++){if((e[r](t)||!1)===n)return n}return!n}}var E=function(e){return function(n){return!e(n)}},q=function(e,n){return function(t){return t>=e&&t<=n}},b=function(e){return new Date(e).getTime()},v=function(e){return w(e,["time"],b)},L=function(e,n){return w(n,e,b)},A=function(e,n,t,r,i,o){return function(a){var c=w(a,e,(function(e){return e.filter(r).map((function(e){return w(e,n)})).reduce(i,o)}));return t(null===c?o:c)}};function C(e,t,r,i){var o,a;try{for(var c=n(e),s=c.next();!s.done;s=c.next()){var u=s.value;if(r(u)&&t(u)===i)return i}}catch(e){o={error:e}}finally{try{s&&!s.done&&(a=c.return)&&a.call(c)}finally{if(o)throw o.error}}return!i}var k=function(e){return function(n){return("string"==typeof e||"number"==typeof e)&&"string"==typeof n&&n.toLowerCase().indexOf(g(e).toLowerCase())>-1}},S=function(e){return function(n){return null!=n&&Array.isArray(n)&&n.indexOf(e)>=0}};function P(e,n,t,r,i){var o=w(e.getSegments(),[n,t])||!1;return i&&(r||o)&&e.setSegmentActivation(n,t,i),o}function _(e,n,t){return w(e.getSegments(),[n,t])||!1}function x(e,n,r){return void 0===r&&(r=18e5),function(i){return{a:{m:function(e,n){return[n[0],i.a.m(null!=e[0]&&e[0][0]===n[0][0]?e[1]:i.a.z,n[1])]},z:[[],i.a.z]},p:function(t,r){return[[e(t)],w(r,n)===e(t)?i.p(t,r):i.a.z]},r:function(n,t){return i.r(n,t[0]!=[]&&t[0][0]===e(n)?t[1]:i.a.z)},d:i.d.sq||{l:function(o,a){var c=w(o,n),s=e(a);if(c!==s)return null;var u=i.d.l(o,a);if(!(Array.isArray(u)&&u.length>1))return null;var g=t(u),l=g[0],f=g.slice(1),d=+(v(o)||a.getCurrentTime()),m=Math.floor(d/r),p={};return p[m]={},p[m][s]=1===f.length?f[0]:f,[l,"u",null,p]},i:function(n,t){if(!Array.isArray(n)||"object"!=typeof n[3])return[[],i.a.z];var r=e(t),o=n[3];return[[r],Object.keys(o).map((function(e){return o[e][r]})).filter((function(e){return e})).map((function(e){return i.d.i([n[0]].concat(e))})).reduce(i.a.m,i.a.z)]}}}}}var I=x((function(e){return e.getCurrentSession()}),["session_id"],18e5),M=x((function(e){return e.getCurrentView()}),["view_id"],3e5);function T(e,n,o,a){return void 0===a&&(a=1),{a:{m:function(e,n){return e.concat(n).slice(-o)},z:[]},p:function(t,r){return w(r,["name"])===i(n)?[e.p(t,r)]:[]},r:function(n,t){return e.r(n,t.reduce((function(n,t){return e.a.m(n,t)}),e.a.z))},d:e.d.ftn||{l:function(n,t){var r,i=e.d.l(n,t),c=w(n,["time"],b)*a;return i&&[i[0],"x"+o,null,(r={},r[c]=2==i.length?i[1]:i.slice(1),r)]},i:function(n,i){return n?Object.keys(n[3]||{}).sort().reverse().map((function(e){return Array.isArray(e)?r([n[0]],t(n[3][e]),!1):[n[0],n[3][e]]})).map((function(n){return e.d.i(n,i)})):[]}}}}var G=function(e,n){return null===e?null==n?null:{b:n}:null==n?{a:e}:{a:e,b:n}},B=function(e,n){return e&&n?e(n):null},F=function(e,n,t){if(t&&t.result&&Array.isArray(t.result)){var r=B(e.d&&e.d.m,{result:t.result[0]}),i=B(n.d&&n.d.m,{result:t.result[1]});return G(r,i)}return null};function R(e,n){var t=s[e];if(!n||!t)return!1;if(!t.length)return!0;for(var r=0,i=!1,o=function(e){for(var n=[],t=0;t<e.length;++t){var r=e.charCodeAt(t);if(r>=55296&&r<=56319){var i=e.charCodeAt(t+1);if(i>=56320&&i<=57343){n.push(e.slice(t,t+2)),++t;continue}}n.push(e.charAt(t))}return n}(n.toLowerCase()),a=0;a<o.length;a++){for(var c=o[a];r>0&&!t[r][c];)r=t[r].su?t[r].su:0;if(t[r][c]&&(i=!!t[r=t[r][c]].te))break}return i}return{q:function(e){return{lift:function(n,t){return e.d.l(n,t)},interpret:function(n,t){return function(n,t){return{result:e.r(n,t)}}(t,e.d.i(n,t))},migrate:function(n){return n&&e.d.m?e.d.m(n):null},m:e.a.m,z:e.a.z,p:e.p,r:e.r,i:e.d.i}},a:function(e){return h(e,!1)},acq:function(e,n){return{p:function(t,r){return[e.p(t,r),n.p(t,r)]},r:function(t,r){return e.r(t,r[0])&&n.r(t,r[1])},a:{z:[e.a.z,n.a.z],m:function(t,r){return[e.a.m(t[0],r[0]),n.a.m(t[1],r[1])]}},d:{l:function(t,r){return G(e.d.l(t,r),n.d.l(t,r))},i:function(t,r){return t?[e.d.i(t.a||null,r),n.d.i(t.b||null,r)]:[e.a.z,n.a.z]},m:function(t){return F(e,n,t)}}}},acs:R,acs_:function(e,n){return function(t){return R(n,w(t,e))}},af_i:function(e,n,t){return void 0===t&&(t=y),function(r){return w(r,e,(function(e){return C(e,n,t,!1)}))&&!0}},af_l:function(e,n,t){return void 0===t&&(t=y),function(r){var i=w(r,e,(function(e){return e.filter(t).length}));return n(null===i?0:i)}},af_m:function(e,n,t,r){return void 0===r&&(r=y),function(i){var o=w(i,e,(function(e){return e.filter(r)}));return null===o||0===o.length?t(0):t(o.map((function(e){return w(e,n)})).reduce((function(e,n){return e+n}),0)/o.length)}},af_n:function(e,n,t,r){return void 0===r&&(r=y),A(e,n,t,r,(function(e,n){return Math.min(e,n)}),Number.POSITIVE_INFINITY)},af_p:function(e,n,t,r){return void 0===r&&(r=y),A(e,n,t,r,(function(e,n){return e*n}),1)},af_s:function(e,n,t,r){return void 0===r&&(r=y),A(e,n,t,r,(function(e,n){return e+n}),0)},af_u:function(e,n,t){return void 0===t&&(t=y),function(r){return w(r,e,(function(e){return C(e,n,t,!0)}))||!1}},af_x:function(e,n,t,r){return void 0===r&&(r=y),A(e,n,t,r,(function(e,n){return Math.max(e,n)}),Number.NEGATIVE_INFINITY)},as:function(e,n,t){var r=d("properties",n);return function(n){for(var i=w(n,r),o=t.length,a=!0,c=0;c<o;c++){var s=t[c];if(!(a=e(s)(i)))break}return a}},c:S,c_:function(e,n){return function(t){return S(n)(w(t,e))}},cl_:function(e,n){return function(t){return S(g(n))(w(t,e))}},cx:function(e){return function(n){return S(g(e))(n)}},ctu:function(e,n,t,r){return{a:r?{m:function(e,n){return e.filter((function(e){return-1===n.indexOf(e)})).concat(n).slice(-r)},z:[]}:{m:function(e,n){return e.filter((function(e){return-1===n.indexOf(e)})).concat(n)},z:[]},p:function(r,o){return w(o,["name"])===i(e)&&n(o)?w(o,t):[]},r:function(e,n){return n},d:{l:function(){return null},i:function(){return[]}}}},ctv:function(n,t,r,o){function a(e,n){var t,r=function(e){return{k:e.k,c:1+e.c}},i={arr:[],add:{k:n,c:1}};return n?(t=e.reduce((function(e,n){return e.add.k===n.k?{arr:e.arr,add:r(n)}:{arr:e.arr.concat(n),add:e.add}}),i)).arr.concat(t.add):e}return{a:o?{m:function(e,n){return a(e,n).slice(-o)},z:[]}:{m:function(e,n){return a(e,n)},z:[]},p:function(e,o){return w(o,["name"])===i(n)&&t(o)?w(o,r):null},r:function(n,t){return t.reduce((function(n,t){var r;return e(e({},n),((r={})[t.k]=t.c,r))}),{})},d:{l:function(e){return null},i:function(e){return[]}}}},ctw:function(e,n,t,r){return{a:r?{m:function(e,n){return e.concat(n).slice(-r)},z:[]}:{m:function(e,n){return e.concat(n)},z:[]},p:function(r,o){return w(o,["name"])===i(e)&&n(o)?w(o,t):[]},r:function(e,n){return n},d:{l:function(){return null},i:function(){return[]}}}},cw:function(e,n,t){return void 0===t&&(t=p),{a:{m:function(e,n){return e+n},z:0},p:function(t,r){return w(r,["name"])===i(e)&&n(r)?1:0},r:function(e,n){return t(n)},d:{l:function(t){return w(t,["name"])===i(e)&&n(t)?["p",1]:null},i:function(e){return e?Array.isArray(e)?e.slice(-1)[0]:e:0},m:function(e){return e&&e.result?["p",e.result]:null}}}},e:function(e){return function(n){return n===e}},e_:function(e,n){return function(t){return w(t,e)===n}},fm:function(e,n){return{p:n.p,r:function(t,r){return e(n.r(t,r))},a:n.a,d:n.d}},ftn:function(e,n,t){return{a:{m:function(e,n){return e.concat(n.slice(0,t-e.length))},z:[]},p:function(t,r){return w(r,["name"])===i(n)?[e.p(t,r)]:[]},r:function(n,t){return e.r(n,t.reduce((function(n,t){return e.a.m(n,t)}),e.a.z))},d:T(e,n,t,-1).d}},fw:function(e,n,t,r){return void 0===r&&(r=p),{a:{m:function(e,n){return null===e?n:e},z:null},p:function(r,o){return w(o,["name"])===i(e)&&n(o)?w(o,t):null},r:function(e,n){return n},d:{l:function(t){return w(t,["name"])===i(e)&&n(t)?["p",1]:null},i:function(e){return e?Array.isArray(e)?e.slice(-1)[0]:e:0},m:function(e){return e&&e.result?["p",e.result]:null}}}},g:function(e){return function(n){return n>e}},g_:function(e,n){return function(t){return w(t,e)>n}},gb:function(e,n,t){return{a:{m:function(t,r){var i=Object.keys(t).concat(Object.keys(r)).filter((function(e,n,t){return t.indexOf(e)===n})).sort((function(e,n){return Math.max(w(t,[n,1]),w(r,[n,1]))-Math.max(w(t,[e,1]),w(r,[e,1]))})).slice(0,n).reduce((function(n,i){var o=e.a.m(w(t,[i,0])||e.a.z,w(r,[i,0])||e.a.z);return n[i]=[o,Math.max(w(t,[i,1]),w(r,[i,1]))],n}),{});return i},z:{}},p:function(n,r){var i,o,a=w(r,d("properties",t)),c=e.p(n,r);return null==a||(null==(o=c)||"object"==typeof o&&0===Object.keys(o).length||o===e.a.z)?{}:((i={})[a]=[c,w(r,["time"],b)],i)},r:function(n,t){var r={};return Object.keys(t).forEach((function(i){return r[i]=e.r(n,t[i][0])})),r},d:{l:function(){return null},i:function(){return{}}}}},ge:function(e){return function(n){return n>=e}},ge_:function(e,n){return function(t){return w(t,e)>=n}},i_:p,ifp:function(e){return{a:{m:function(e,n){return n},z:null},p:function(e){return null},r:function(n,t){return function(n){return _(n,"1p",e)}(n)},d:{l:function(e,n){return null},i:function(e){return null}}}},isp:function(e,n,t,r){return{a:{m:function(e,n){return n},z:!1},p:function(t,r){return _(t,e,n)},r:function(i,o){return P(i,e,n,t,r)},d:{l:function(e,n){return null},i:function(e){return Array.isArray(e)&&(!!+e[2]||!1)}}}},itp:function(e,n,t,r){return{a:{m:function(e,n){return n},z:!1},p:function(t,r){return _(t,e,n)},r:function(i,o){return P(i,e,n,t,r)},d:{l:function(e,n){return null},i:function(e){return Array.isArray(e)&&(!!+e[2]||!1)}}}},k:w,l:function(e){return function(n){return n<e}},l_:function(e,n){return function(t){var r=w(t,e);return null!==r&&r<n}},le:function(e){return function(n){return n<=e}},le_:function(e,n){return function(t){var r=w(t,e);return null!==r&&r<=n}},lm:function(e,n){var t=function(n){return function(e,n,t){var r,i=e||{},o=n[t]||{},a=(o["1p"]||{}).const||0;return Object.keys(i).forEach((function(e){i[e].forEach((function(n){var t=(o[e]||{})[n]||0;a+=t}))})),r=a,1/(1+Math.pow(Math.E,-r))}(n.getSegmentsArray(),n.getLookalikeModels(),e)};return{a:{m:function(e,n){return n},z:null},p:function(e){return null},r:function(e,r){return n(t(e))},d:{l:function(e,n){return null},i:function(e){return null}}}},ltn:T,mnw:function(e,n,t,r){void 0===r&&(r=p);var o=Number.POSITIVE_INFINITY;return{a:{m:function(e,n){return e<n?e:n},z:o},p:function(r,a){return w(a,["name"])===i(e)&&n(a)?w(a,t):o},r:function(e,n){return r(n)},d:{l:function(r){return w(r,["name"])===i(e)&&n(r)?["n",w(r,t)]:null},i:function(e){return e?Array.isArray(e)?e.slice(-1)[0]:e:o}}}},mxw:function(e,n,t,r){void 0===r&&(r=p);var o=Number.NEGATIVE_INFINITY;return{a:{m:function(e,n){return e>n?e:n},z:o},p:function(r,a){return w(a,["name"])===i(e)&&n(a)?w(a,t):o},r:function(e,n){return r(n)},d:{l:function(r){return w(r,["name"])===i(e)&&n(r)?["v",w(r,t)]:null},i:function(e){return e?Array.isArray(e)?e.slice(-1)[0]:e:o}}}},n0:E(p),n:function(e){return function(n){return n!==e}},nt:E,n_:function(e,n){return function(t){return w(t,e)!==n}},o:function(e){return h(e,!0)},ocq:function(e,n){return{p:function(t,r){return[e.p(t,r),n.p(t,r)]},r:function(t,r){return e.r(t,r[0])||n.r(t,r[1])},a:{z:[e.a.z,n.a.z],m:function(t,r){return[e.a.m(t[0],r[0]),n.a.m(t[1],r[1])]}},d:{l:function(t,r){return G(e.d.l(t,r),n.d.l(t,r))},i:function(t,r){return t?[e.d.i(t.a||null,r),n.d.i(t.b||null,r)]:[e.a.z,n.a.z]},m:function(t){return F(e,n,t)}}}},oe:function(e){for(var n=Object.keys(e),t=n.length,r=new Array(t);t--;)r[t]=[n[t],e[n[t]]];return r},os:function(e,n,t){var r=d("properties",n);return function(n){for(var i=w(n,r),o=t.length,a=!1,c=0;c<o;c++){var s=t[c];if(a=e(s)(i))break}return a}},pacs:function(e,n){return function(t){return R(n,m(t,e))}},pb:function(e,n,t){return function(r){return q(n,t)(m(r,e))}},pc:function(e,n){return function(t){var r=m(t,e);return null!=r&&Array.isArray(r)&&r.indexOf(n)>=0}},pc_:function(e,n){return function(t){var r=m(t,e),i=g(n);return null!=r&&Array.isArray(r)&&r.indexOf(i)>=0}},pe:function(e,n){return function(t){return m(t,e)===n}},pg:function(e,n){return function(t){return m(t,e)>n}},pge:function(e,n){return function(t){return m(t,e)>=n}},pl:function(e,n){return function(t){var r=m(t,e);return null!==r&&r<n}},ple:function(e,n){return function(t){var r=m(t,e);return null!==r&&r<=n}},pn:function(e,n){return function(t){return m(t,e)!==n}},ps:function(e,n){return function(t){return k(n)(m(t,e))}},pw:function(e,n,t,r){return void 0===r&&(r=p),{a:{m:function(e,n){return e*n},z:1},p:function(r,o){return w(o,["name"])===i(e)&&n(o)?w(o,t):1},r:function(e,n){return r(n)},d:{l:function(r){return w(r,["name"])===i(e)&&n(r)?(o=w(r,t))>=1?["m2p",o]:o>0?["m2p",null,1/o]:0==o?["m2p",0]:o>-1?["m2p",null,1/o,1]:["m2p",o,null,1]:null;var o},i:function(e){return e?Array.isArray(e)?0===(n=e.slice(1))[0]?0:Math.pow(-1,n[2]||0)*(n[0]||1)/(n[1]||1):e:1;var n}}}},ref:function(e){return function(n){return u[e](n)}},s:k,s_:function(e,n){return function(t){return k(n)(w(t,e))}},scq:function(e,n,t){return void 0===t&&(t=p),{p:function(t,r){return[e.p(t,r),n.p(t,r)]},r:function(r,i){return t(e.r(r,i[0])+n.r(r,i[1]))},a:{z:[e.a.z,n.a.z],m:function(t,r){return[e.a.m(t[0],r[0]),n.a.m(t[1],r[1])]}},d:{l:function(t,r){return G(e.d.l(t,r),n.d.l(t,r))},i:function(t,r){return t?[e.d.i(t.a||null,r),n.d.i(t.b||null,r)]:[e.a.z,n.a.z]},m:function(t){return F(e,n,t)}}}},sq:I,sw:function(e,n,t,r){return void 0===r&&(r=p),{a:{m:function(e,n){return e+n},z:0},p:function(r,o){return w(o,["name"])===i(e)&&n(o)?w(o,t):0},r:function(e,n){return r(n)},d:{l:function(r){return function(t){return w(t,["name"])===i(e)&&n(t)}(r)?(o=w(r,t))<0?["p2",null,-o]:["p2",o]:null;var o},i:function(e){return e?Array.isArray(e)?((n="p2"===e[0]?e.slice(1):e)[0]||0)-(n[1]||0):e:0;var n}}}},t:y,tb:function(e,n){return function(t){return q(e,n)(v(t))}},te:function(e){return function(n){return v(n)===e}},te_:function(e,n){return function(t){return L(e,t)===n}},tg:function(e){return function(n){return v(n)>e}},tg_:function(e,n){return function(t){return L(e,t)>n}},tge:function(e){return function(n){return v(n)>=e}},tge_:function(e,n){return function(t){return L(e,t)>=n}},ti:b,tl:function(e){return function(n){return v(n)<e}},tl_:function(e,n){return function(t){return L(e,t)<n}},tle:function(e){return function(n){return v(n)<e}},tle_:function(e,n){return function(t){return L(e,t)<n}},tn:function(e){return function(n){return v(n)!==e}},tn_:function(e,n){return function(t){return L(e,t)!==n}},tw:function(e,n,i){var o=i||100,a=Math.ceil(n/o),c=function(e){return Math.floor(e/a)},s=function(e,t,r){var i;return[c(e-n),(i={},i[c(t)]=r,i)]},u=function(n,t){var r=Math.max(n[0],t[0]),i=Object.keys(n[1]).filter((function(e){return e>=r})).concat(Object.keys(t[1]).filter((function(e){return e>=r}))).filter((function(e,n,t){return t.indexOf(e)===n})).reduce((function(r,i){var o=e.a.m(n[1][i]||e.a.z,t[1][i]||e.a.z);return o!==e.a.z&&(r[i]=o),r}),{});return[r,i]},g=[Number.NEGATIVE_INFINITY,{}],l=function(e){var n=function(n){return n.map((function(n){var r=t(n,3),i=r[0],o=(r[1],r[2]);return s(e.t,o,i)})).reduce(u,g)};return u(n(e.in),n(e.out))},d=function(n){if(void 0!==n.result)return d(n.result);if(void 0!==n.w)return d(l(n));var r=t(n,2),i=(r[0],r[1]),o=null,a={};for(var c in i){var s=e.d.m({result:i[c]});s&&Array.isArray(s)&&(o=s[0],a[c]=f(s.slice(1)))}return o&&[o,"w",n[0],a]};return{a:{m:function(e,n){var t=e.w?l(e):e;return u(t,n)},z:g},p:function(n,t){return s(n.getCurrentTime(),w(t,["time"],b),e.p(n,t))},r:function(n,t){var r=(t.w?l(t):t)[1];return e.r(n,Object.keys(r).reduce((function(n,t){return e.a.m(n,r[t])}),e.a.z))},d:e.d.tw||{l:function(n,i){var o=e.d.l(n,i);return o&&r([o[0],"w"],t(s(i.getCurrentTime(),w(n,["time"],b),o.slice(1))),!1)},i:function(t,r){var i=Array.isArray(t)?t:[],o=r.getCurrentTime(),a=c(o-n);return[i[2]||null,Object.keys(i[3]||{}).map((function(n){var t;return(t={})[n]=e.d.i(i[3][n],r),t})).reduce((function(e,n){return Object.keys(n).filter((function(e){return parseInt(e)>=a})).forEach((function(t){return e[t]=n[t]})),e}),{})]},m:e.d.m&&d}}},vgw:function(e,n,t,r){void 0===r&&(r=p);var o={v:0,k:0};return{a:{m:function(e,n){var t=e.k+n.k;return{v:t?e.v+n.k*(n.v-e.v)/t:0,k:t}},z:o},p:function(r,a){return w(a,["name"])===i(e)&&n(a)?{v:w(a,t),k:1}:o},r:function(e,n){return r(n.v)},d:{l:function(r){return w(r,["name"])===i(e)&&n(r)?0==(o=w(r,t))?["p3",1]:o<0?["p3",1,null,-o]:["p3",1,o]:null;var o},i:function(e){return e?Array.isArray(e)?{v:(((n=e.slice(1))[1]||0)-(n[2]||0))/(n[0]||1),k:n[0]||0}:void 0:o;var n}}}},vq:M,w:function(e){return function(n){return n===g(e)}},x:function(e){return function(n){return n!==g(e)}},y:function(e,n){return function(t){return m(t,e)===a[n]}},y_:function(e,n){return function(t){return w(t,e)===a[n]}},z:function(e,n){return function(t){return m(t,e)!==a[n]}},z_:function(e,n){return function(t){return w(t,e)!==a[n]}}}}(),o=["Pageview","SlotViewable","PageviewComplete","SlotClicked","VideoEngagement","PageviewEngagement","SegmentEntry","LinkClick"],a=["www.ft.com","app.ft.com","rankings.ft.com","cp","dh","md","oe","op","lv1","reg","tri","CEO/president/Chairman","Exec Mgmt (EVP/SVP/MD)","Other C Level (CFO/COO/CIO/CMO)","Owner/Partner/Proprietor","VP/Director","cor","etf.ft.com","int","www.ftadviser.com","Luxury goods","How To Spend It","Wine","Jewellery","Technology","Travel","Watches","Arts","Fashion","Fashion shows","Food & Drink","Spa holidays","Cruises and sailing","Fashion designer profiles","Restaurants","Style","The Art Market","Theatre","Yachts & Marinas","Beach holidays","Champagne","Cocktails & Drinks","Fashion accessories","Lifestyle","anon","ins","Arts books","Cannes Film Festival","Design","Diamonds and gemstones","Film","Gold","Interiors","ifa","mon","tel","Beauty","City breaks","Cycling holidays","FT Magazine","Gaming","House & Home","Life & Arts","Luxury holidays","Menswear","Paris Motor Show","Photography","Technology sector","The Aesthete","Wellbeing and fitness","res","Architecture","Cars","Gardens","Music","Sustainability","Technology regulation","Venice Film Festival","bikes","fse","itc","planes and boats","Audio books","Big tech","Book awards","Chelsea Flower Show","Fiction","Food & Beverage","Food diet","Geneva Motor Show","History books","Investments","Jancis Robinson","Organic food","Poetry","Property","Science fiction books","Special Report","Television","Travel & Leisure","United Kingdom","Womenswear","acc","bkg","fam","fin","howtospendit.ft.com","it","itt","ma","pm","pri","r01b","r02b","rsk","sm","tec","ts","Biotech","Commodities","Drugs research","FT Globetrotter","FT Series","Fund management","Health Care","Innovation","Research and development","Scientific research","Travel & leisure industry","Travel books","Wealth management","Work & Careers","br","foodrevolution.ft.com","r01d","www.agendaweek.com","www.boardiq.com","www.financialadvisoriq.com","www.fundfire.com","www.ignites.com","www.ignitesasia.com","www.lifeannuityspecialist.com","www.pandcspecialist.com","Beer and spirits","Corporate bonds","Cyber Security","Digital health","ESG investing","Electric vehicles","Entrepreneurship","Exchange traded funds","Genomics","Green bonds","Health","Health sector","High yield bonds","IT/computing","Investment Banking","Lunch with the FT","Pharmaceuticals sector","Prime property","Private wealth","Property sector","Sovereign bonds","US Treasury bonds","Wellbeing","an","as","channel video","con","cs","dt","food and drink","ft.com/food-drink","ft.com/travel","gi","gpv","howtospendit.com","kno","oil","ot","po","pr","r06f","r06l","r07a","se","transact.ft.com","Artificial intelligence","Asset Management","Banking","Bonds","Books","Christina Ohly Evans","Climate Capital","Consumer trends","Cyber warfare","Eating and drinking in Frankfurt","Eating and drinking in Hong Kong","Eating and drinking in London","Eating and drinking in New York City","Eating and drinking in Paris","Eating and drinking in Rome","Eating and drinking in San Francisco","Eating and drinking in Singapore","Eating and drinking in Tokyo","Equality in workplace","Financial Services","Fintech","Flora Macdonald Johnston","Future of work","Games industry","Hedge funds","Hydrogen vehicles","Insurance","Internet privacy","Investing in funds","Isabelle Kountoure","Jo Ellison","Leadership","Managing yourself","Maria Shollenbarger","Mental health","New-build property","Nicholas Lander","Pensions","Private Equity","Recipe","Renewable energy","Safari/","Sport","Sustainable capitalism","Tech start-ups","Tom Robbins","Trading technology","Travel insurance","Venture capital investment","Wearable technology","Winter sports","Women in business","app.ft.com/index_page/htsi","bonds","books and literature","buy","channels.ft.com/en/howtospendit/","chrome/","chromium/","cocktails/beer","commodities","equinor.ft.com","etf","ft.com/life-arts","ft.com/markets","gold","https://www.ft.com/","https://www.ft.com/moral-money","iberdrola.ft.com","man","mutual funds","ops","pension","phc","property","r02h","r03g","r07e","real estate","ret","school","travel","www.ft.com/htsi","www.pensions-expert.com","/5887/ft.com/life.and.arts","5G networks","Accounting","African prime property","Agricultural commodities","Air France SA","Airlines","Ajesh Patalay","Alexander Gimour","Alice Lascelles","Ariella Budick","Asia","Asia-Pacific equities","Asian prime property","Automobiles","Automobili Lamborghini Holding SpA","Aylin Bayhan","Beatrice Hodgkin","Blockchain","Bond","British Airways Executive Club","British Airways PLC","Burberry Group PLC","Business school","Business travel","Carola Long","Caroline Roux","Cars, bikes, planes and boats","Champagne Louis Roederer SA","Clara Baldock","Cloud computing","Cryptocurrencies","Dalia Dawood","Davos","Driverless vehicles","Due Diligence","EU energy","EU financial regulation","Ellie Pithers","Emerging market investing","Energy sector","Environment","Equities","Equity","Equity earnings","Ethical and responsible investment","Etihad Airways","European equities","European prime property","Exchange Traded Funds","Executive MBA","FT Wealth","Family holidays","Finance","Financial & markets regulation","Financials","Fitness in Frankfurt","Fitness in Hong Kong","Fitness in London","Fitness in New York City","Fitness in Paris","Fitness in Rome","Fitness in Singapore","Fitness in Tokyo","Flexible working","Foreign exchange","Francesca Gavin","Frankfurt travel","Fund Management","Fund regulation","Funding your business","Gareth Harris","Genevieve Curtis","Gillian Tett","Grace Cook","Griselda Murray Brown","Hester Lacey","Hong Kong travel","Horatia Harrod","IT/Tech/Telecoms","Inc.","Industrials","Information Technology","Information technology","Inheritance Tax","Investing","Itmar Srulovich","Jackie-Wullschlager","Jan Dalley","Japanese government bonds","Jessica Beresford","Joji Sakurai","Josh Spero","Justerini & Brooks Ltd","Justerini & Brooks Ltd.","Kate Youde","LVMH Moet Hennessy Louis Vuitton SA","LVMH Moet-Hennessy Louis Vuitton BV","Lauren Indvik","Laurent Perrier SA","Lindsey Tramuta","London travel","Louise Levene","Ltd.","MBA","Mark Ellwood","Masters in Finance","Masters in Management","Melanie Gerlis","Mercedes-Benz AG","Ming Liu","Moet Hennessy Diageo","Moet Hennessy SNC","Moral Money","Mortgages","Net-A-Porter Group Ltd","New York City travel","Nick Foulkes","Niki Blasina","North American prime property","Office life","Oil","Oil & Gas industry","Olympic Games","Online MBA","Paris travel","Patek Philippe SA","Peugeot Automobiles","Private equity","Property & Mortgages","Property downsizing","Qatar Airways","Ravinder Bhogal","Rebecca Rose","Rebecca Watson","Residential property","Retail & Consumer industry","Retail sector","Retirement","Review","Risk management/compliance","Rolex SA","Rome travel","Rowley Leigh","San Francisco travel","Sarah Hemming","Sarit Packer","Scarlett Conlon","Seamonkey/","Singapore travel","Skoda AS","Skoda Auto AS","Skye Gyngell","Sovereign wealth funds","Spread betting","Swiss International Air Lines Ltd","Tax","Technical/Business Specialist","Technology lobbying","Telecommunications","Telecoms / Utilities","Tess Thackara","Tim Auld","Tim Hayward","Tokyo travel","Tracker mortgages","UK airports","UK arts","UK equities","UK financial regulation","UK property","US equities","US financial regulation","Virgin Atlantic Airways Ltd","Visual Arts","Vivienne Becker","Volkswagen UK","Volvo Car AB","Watches & Jewellery","Wealth Management","Work-life balance","Working from home","Workplace diversity & equality","Yves Saint Laurent SAS","adventure holidays","africa holidays","air travel","aramco.ft.com","asia & australia holidays","asset management","bu","business travel","car","cfd\'s","cfds","college","cpl","electric vehicle","enu","equities","europe holidays","facebook.com","fine art","fixed income","foo","food industry","ft-intelligent-business","ft.com","ft.com/books","ft.com/ft-trading-room","ft.com/lex","ft.com/magazine","ft.com/personal-finance","ft.com/reports/wealth","ft.com/style","ftalphaville.ft.com","hedge fund","ig-hub.ft.com","investing","investment","linkedin.com","luxury goods","luxury holidays","luxury homes","mb","metal","mkt","multi-asset","north america holidays","ogm","oth","pat","pollution","pro","protection","r05e","r06","r07h","r07w","rad","rethink.ft.com","retirement","sal","solar energy","spa holidays","stu","tax","tie","trl","uk holidays","video and computer games","water","wealth management","wine","www.fdiintelligence.com","www.ft.com/reports/sustainable-food-agriculture","www.investorschronicle.co.uk","www.pwmnet.com","www.thebanker.com"],c=[["client","domain"],["client","url"],["article","topics"],["user","responsibility"],["user","position"],["user","industry"],["campaign_id"],["user","subscriptionLevel"],["line_item_id"],["article","admants"],["article","brand"],["article","categories"],["article","title"],["client","referrer"],["article","authors"],["geo_info","country"],["article","organisations"],["geo_info","continent"],["client","user_agent"],["progress"],["type"],["aggregations","PageviewEngagement","engaged_time"],["segment_number"],["article","type"],["dest_url"],["articleST","contentCategory"],["articleST","title"],["slot","ad_unit_path"],["advertiser_id"],["advertiser_name"],["article","id"],["article","people"],["campaign"],["form","method"],["url"],["user","fta_jobTitle"],["user","gender"],["user","indb2b"],["userExecApp","browseJobsFiltersSelected","responsibilities"],["userExecApp","browseJobsFiltersSelected","sector"],["userExecApp","jobListing","responsibilities"],["userExecApp","jobListing","sector"],["userMM","member"],["userMM","role"],["userST","title"],["userST","type"]],s=[],u=[i.os(i.cx,2,[29,42,64,28,101,33,35]),i.os(i.w,7,[10,18,9,16,8]),i.o([i.os(i.w,5,[108,107,351,156]),i.os(i.w,4,[117,429]),i.os(i.w,3,[55,431,116,80,156,355])]),i.os(i.cx,9,[183,184]),i.os(i.w,7,[8,9]),i.os(i.w,0,[142,141,140,139,138,137,136,135]),i.os(i.w,4,[7,6,5,4,3,15,14,13,12,11]),i.os(i.cx,2,[127,126,125,83,76,67,24]),i.os(i.cx,2,[51,49,26,20,23]),i.os(i.cx,9,[509,75]),i.os(i.cx,9,[134,112,75]),i.os(i.cx,2,[220,222,88,331,334,328,329,330,335,332,333,165,31,69,56]),i.os(i.cx,2,[118,146]),i.nt(i.ps(18,420)),i.os(i.cx,2,[151,159,120,153,154,124]),i.os(i.w,0,[2,17,1,0]),i.os(i.e,28,[4858985271,4824899484,4916164028,4906443106,4872154766,4834564230,17071129,16506769,4761211409,4898257415,17291809,4815530075,17226649,4743050551,4853829738,139158049,4923337424,4855421277,4509060898,4813437271,4903037490,4944239958,4817001997,4951224467,47499049,4815623192,4932063272,4821286752,16856809,4833099352,4919686922,4908664202,4990614892,16606609,4729402017,4803865617,4803380530,190695889,4402353290,208114849,4903630543,99573049,4790213476,4865351256,16201129,4834652375,16429729,4601481767,4787259116,4907562621,16944049,4742800448,75516409,4768716171,17374129,5008320878,4780354078,4785014140,4906024717,4820968557,5004026819,4944210671,4797037407,4623321291,5002841659,4797023706,4797299218,4916804777,4854441313,5001344291,4847952126,4932711580,4731334718,60482929,34001929,104920129,17428489,4744239359,4851878110,5010099352,4836769175,4768040047,108761929,4981327397,4940469115,4982884449,4837749047,135231769,4763251086,16048729,4840716212,4976591234,4809538686,4764082999,16572049,4826067961,4837151972,114655369,4795192211,4918913461,16392169,4906859471,4827105242,4633795193,4797776870,4813435324,4896952214,16226089,4791337153,4990804981,32810689,4882861129,17136289,4948433720,4949125323,4882854844,4836285792,4923090942,4952844402,4943669893,201786649,4743041008,208772329,4895750046,5001245965,21148129,4769068934,4950385678,4950719254,4943674249,4921795801,4743267505,4834366073,5001465531,4772240387,4910371343,4889913312,4961187027,4930771836,5019396366,4921151670,4875670240,4771320122,16185409,4906867579,4844389104,17003809,4823770701]),i.os(i.cx,2,[94,51,29,90,66,85,98,74,52,40,43,42,49,84,96,64,65,37,27,73,22,61,28,81,78,72,26,82,41,86,39,57,46,89,77,101,50,60,71,34,62,56,20,38,58,47,31,63,36,48,33,32,69,30,99,25,23,35]),i.os(i.cx,2,[238,438,416,388,339,349,421,373,436,397,128,129,414,235,58,39,57,31,32,25]),i.os(i.cx,2,[94,51,29,90,66,85,98,74,52,40,43,42,78,165,49,84,96,64,65,37,27,73,22,28,72,26,82,41,86,39,57,46,50,60,71,34,62,56,21,20,38,58,61,47,31,36,48,32,69,30,25,81,23,35]),i.nt(i.ref(21)),i.os(i.s,18,[245,246]),i.os(i.cx,2,[299,50,77,203,200,198,204,197,205,199,201,202,41,143,40,87,88,93,26,23,38,47,36,37,32,22,34,30,43,20]),i.os(i.w,0,[1,0]),i.os(i.w,3,[54,53]),i.os(i.w,7,[44,10,18,9,16,8]),i.os(i.w,0,[0,1]),i.os(i.s,1,[177,106]),i.os(i.s,1,[240,270]),i.os(i.cx,10,[122,97,21,59])];return{rawQueries:{100186:i.q(i.tw(i.cw(1,i.pe(6,3047912570),i.ge(1)),6048e5)),101060:i.q(i.ocq(i.ocq(i.cw(0,i.os(i.s,1,["digital-lawyers","innovative-lawyers"]),i.ge(1)),i.cw(0,i.os(i.s,12,["digital lawyers","innovative lawyers"]),i.ge(1))),i.cw(0,i.os(i.s,12,["airlines navigate meeting climate change pledges","amazons legal team: we wanted to help","australian law firms address lack of aboriginal recruits","blockchain-powered breakthrough on mutual fund","calls to action on esg boost demand for legal expertise","collective legal actions spread in europe","covid response fosters top legal teams creativity","creative practitioners crack tough legal challenges","cross-border deals need broad skills in time of trade war and pandemic","digital delivery from the daily grind for younger lawyers","digital scheme pays venezuela health workers from frozen funds","digital thinking spreads across asias law firms","diversity efforts for lawyers switch from hiring to keeping","eight smaller law firms that outpace larger rivals in europe","fintech pioneers navigate the laws grey areas","five views of law firm leadership","fix law firm culture to keep people of colour","forward-looking legal practitioners","gun rights and climate change","high pay in law jobs fails to compensate for toxic culture","how airlines survived to fly another day","in-house legal teams develop new attitude to risk","japan inc braced for fresh hostile bids","law firm leaders ready for radical change","law firm professionals driving radical change","law firms chase a piece of the crypto action","law firms embrace change makers","law firms focus on digital skills to ease legal pressures","law firms start to take the long view","lawyers help tesla unlock rooftop solar power","lawyers write the future for $200tn of post-libor deals","legal eye for detail will help battle sustainable finance greenwash","people-focused law firm leaders","seven individual takes on rethinking legal practice","the lawyers battling to redress systemic racial inequalities","the pay rates for lawyers are unsustainable","wanted: role models for solving legal problems together","why digital demands deep thinkers","young lawyers feel most at risk from burnout"]),i.ge(1)))),101061:i.q(i.ocq(i.ocq(i.ocq(i.cw(0,i.os(i.s,1,[478]),i.ge(1)),i.cw(0,i.ps(12,"Intelligent Business"),i.ge(1))),i.cw(0,i.os(i.s,13,[478]),i.ge(1))),i.cw(0,i.os(i.s,12,["banks turn to ai as regulators press for libor exit","big four primed for new audit rules to speed legal push","covid tracing fans public health vs privacy debate","how using data and tech speeded response to covid-19","medical technology gives healthcare a shot in the arm","meet the advocates of using contracts to gauge economic","new battleground takes shape over 5g patents","on guard for breakdowns and rule breakers","six ways to craft a digital future","wanted: diy-style tools to boost legal tech adoption"]),i.ge(1)))),101171:i.q(i.ocq(i.ocq(i.tw(i.cw(0,i.pc_(10,"Energy Source"),i.ge(1)),2592e6),i.cw(0,i.pe(1,"channels.ft.com/en/ft-energy-source"),i.ge(1))),i.isp("financial_times_redshift","UPL080",!1,"101171"))),101387:i.q(i.tw(i.cw(1,i.pe(6,2913665273),i.ge(7)),6048e5)),101388:i.q(i.acq(i.tw(i.cw(1,i.pe(6,2913665273),i.ge(1)),6048e5),i.tw(i.cw(1,i.pe(6,2913665273),i.le(9)),6048e5))),101389:i.q(i.cw(1,i.pe(6,2913665273),i.ge(1))),102103:i.q(i.ocq(i.ocq(i.tw(i.cw(0,i.pc_(10,307),i.ge(1)),2592e6),i.isp("financial_times_redshift","UPL006",!1,"102103")),i.isp("financial_times_redshift","UPL008",!1,"102103"))),102153:i.q(i.ocq(i.ocq(i.cw(0,i.af_u(["properties","user","followedConcepts"],i.e_(["name"],"Moral Money")),i.ge(1)),i.isp("financial_times_redshift","UPL009",!1,"102153")),i.tw(i.cw(0,i.pc_(10,385),i.ge(1)),2592e6))),102212:i.q(i.ocq(i.tw(i.cw(0,i.pc_(10,194),i.ge(1)),2592e6),i.cw(0,i.af_u(["properties","user","followedConcepts"],i.e_(["name"],"Climate Capital")),i.ge(1)))),102213:i.q(i.ocq(i.ocq(i.tw(i.cw(0,i.pc_(10,"Scoreboard"),i.ge(1)),2592e6),i.isp("financial_times_redshift","UPL069",!1,"102213")),i.cw(0,i.af_u(["properties","user","followedConcepts"],i.e_(["name"],"Scoreboard")),i.ge(1)))),102214:i.q(i.ocq(i.tw(i.cw(0,i.pc_(10,"Unhedged"),i.ge(1)),2592e6),i.cw(0,i.af_u(["properties","user","followedConcepts"],i.e_(["name"],"Unhedged")),i.ge(1)))),103258:i.q(i.ocq(i.ocq(i.cw(0,i.ps(1,"cop26"),i.ge(1)),i.cw(0,i.pc_(2,"COP26"),i.ge(1))),i.cw(0,i.af_u(["properties","user","followedConcepts"],i.e_(["name"],"COP26")),i.ge(1)))),104170:i.q(i.tw(i.cw(1,i.pe(6,2980091191),i.ge(1)),2592e6)),104405:i.q(i.tw(i.cw(1,i.pe(6,2980091191),i.ge(7)),6048e5)),104406:i.q(i.ocq(i.tw(i.cw(0,i.pc_(10,68),i.ge(1)),2592e6),i.cw(0,i.af_u(["properties","user","followedConcepts"],i.e_(["name"],"The Aesthete")),i.ge(1)))),104640:i.q(i.tw(i.cw(1,i.pe(6,2942895018),i.ge(7)),6048e5)),105294:i.q(i.ocq(i.ocq(i.cw(1,i.pe(8,5983421982),i.ge(1)),i.cw(1,i.pe(8,5985306905),i.ge(1))),i.cw(1,i.pe(8,5985307328),i.ge(1)))),105978:i.q(i.cw(1,i.pe(6,2945396807),i.ge(1))),105979:i.q(i.tw(i.cw(1,i.pe(6,2945396807),i.ge(1)),6048e5)),106717:i.q(i.ocq(i.ocq(i.ocq(i.ocq(i.ocq(i.ocq(i.tw(i.cw(0,i.pc_(10,"FT Podcast"),i.ge(1)),2592e6),i.tw(i.cw(0,i.pc_(2,131),i.ge(3)),2592e6)),i.tw(i.cw(0,i.os(i.cx,2,[149,"Recruitment","Corporate culture","Start-up hiring",210]),i.ge(2)),2592e6)),i.tw(i.cw(0,i.y(0,2),i.ge(2)),2592e6)),i.isp("financial_times_redshift","UPL034",!1,"106717")),i.isp("financial_times_redshift","UPL036",!1,"106717")),i.cw(0,i.af_u(["properties","user","followedConcepts"],i.o([i.y_(["name"],295),i.y_(["name"],210),i.y_(["name"],149)])),i.ge(1)))),106751:i.q(i.cw(0,i.os(i.s,1,["www.ft.com/partnercontent/societe-generale/a-banking-revolution-to-solve-the-challenge-of-climate-change.html","www.ft.com/partnercontent/societe-generale/africas-opportunity-to-build-back-better.html","www.ft.com/partnercontent/societe-generale/green-principles-for-the-shipping-industry.html","www.ft.com/partnercontent/societe-generale/greenflation-the-costs-of-the-energy-transition-start-to-hit-home.html","www.ft.com/partnercontent/societe-generale/how-net-zero-aviation-is-preparing-for-take-off.html","www.ft.com/partnercontent/societe-generale/ideal-energy-mix-realism-needs-to-balance-ambition.html","www.ft.com/partnercontent/societe-generale/inflation-in-2021-transitory-until-proven-permanent.html","www.ft.com/partnercontent/societe-generale/insurers-and-global-warming-time-for-a-new-business-model.html","www.ft.com/partnercontent/societe-generale/investing-in-china-short-term-cycles-long-term-potential.html","www.ft.com/partnercontent/societe-generale/mobility-in-a-time-of-crisis-an-opportunity-to-get-efficient.html","www.ft.com/partnercontent/societe-generale/union-building-how-to-create-an-integrated-payments-market-for-europe.html"]),i.ge(1))),108525:i.q(i.tw(i.cw(1,i.os(i.e,6,[3020012078,3020011913]),i.ge(1)),12096e5)),108526:i.q(i.tw(i.cw(1,i.os(i.e,6,[3020011913,3020012078]),i.ge(7)),6048e5)),109309:i.q(i.cw(0,i.a([i.tg(16564608e5),i.ps(1,"channels.ft.com/en/ft-moral-money")]),i.ge(1))),109466:i.q(i.cw(1,i.a([i.pe(8,5961057341),i.tg(16485984e5)]),i.ge(1))),109741:i.q(i.cw(0,i.ps(1,"www.ft.com/partnercontent/invesco/power-of-the-people-how-workforce-diversity-can-boost-the-bottom-line.html"),i.ge(1))),109944:i.q(i.isp("financial_times_redshift","UPL099",!1,"109944")),113583:i.q(i.isp("financial_times_redshift","UPL100",!1,"113583")),113877:i.q(i.ocq(i.ocq(i.tw(i.cw(0,i.a([i.y(0,19),i.os(i.cx,25,["Defined Benefit","Drawdown","Defined Contribution","Department for Work & Pensions","Pension Freedom","Retirement Income","Sipp","Auto-enrolment","State Pension","Personal Pension","Pensions Regulator",225])]),i.ge(3)),7776e6),i.tw(i.cw(0,i.a([i.y(0,19),i.os(i.s,26,["defined benefit","defined contribution","drawdown",260,"retirement income","sipp"])]),i.ge(3)),7776e6)),i.tw(i.cw(0,i.a([i.y(0,19),i.ps(1,260)]),i.ge(3)),7776e6))),113878:i.q(i.ocq(i.ocq(i.tw(i.cw(0,i.a([i.y(0,19),i.os(i.cx,25,["Protection Products","Critical Illness","Income Protection","Life Insurance","Protection"])]),i.ge(3)),7776e6),i.tw(i.cw(0,i.a([i.y(0,19),i.os(i.s,26,["assurance","insurance","insurer",506])]),i.ge(3)),7776e6)),i.tw(i.cw(0,i.a([i.y(0,19),i.ps(1,506)]),i.ge(3)),7776e6))),113879:i.q(i.ocq(i.ocq(i.tw(i.cw(0,i.a([i.y(0,19),i.os(i.cx,25,["Enterprise Investment Schemes","Venture Capital Trusts","National Insurance","Tax Efficient Investments","Avoidance","Capital Gains Tax",356,428])]),i.ge(3)),7776e6),i.tw(i.cw(0,i.a([i.y(0,19),i.os(i.s,26,["iht","national insurance","non-dom",518])]),i.ge(3)),7776e6)),i.tw(i.cw(0,i.a([i.y(0,19),i.os(i.s,1,[518])]),i.ge(3)),7776e6))),113880:i.q(i.ocq(i.ocq(i.tw(i.cw(0,i.a([i.y(0,19),i.os(i.cx,25,["Real Estate",119,95])]),i.ge(3)),7776e6),i.tw(i.cw(0,i.a([i.y(0,19),i.os(i.s,26,[248,"crude",253,497,179,262,"real assets",266,523])]),i.ge(3)),7776e6)),i.tw(i.cw(0,i.a([i.y(0,19),i.os(i.s,1,[248,"food",253,497,179,262,"real-assets","real-estate","residential",523])]),i.ge(3)),7776e6))),114692:i.q(i.tw(i.cw(1,i.pe(6,3047912570),i.ge(7)),6048e5)),115709:i.q(i.isp("financial_times_redshift","UPL101",!1,"115709")),116599:i.q(i.cw(0,i.a([i.pe(0,"qualcomm.ft.com"),i.tg(1659312e6)]),i.ge(1))),117084:i.q(i.isp("financial_times_redshift","UPL102",!1,"117084")),117171:i.q(i.cw(0,i.os(i.w,4,[117,115,186,110,182,181,180,109,496,175,171,170,462,132,167,166]),i.ge(1))),117680:i.q(i.acq(i.ocq(i.tw(i.cw(0,i.os(i.w,4,[109,115,110,4,7,6,3,5]),i.ge(1)),72576e5),i.tw(i.cw(0,i.os(i.w,3,[105,259,70,111,243,54,114,53,45]),i.ge(1)),72576e5)),i.tw(i.cw(0,i.os(i.w,5,[104,79,103,102,45]),i.ge(1)),72576e5))),120985:i.q(i.cw(0,i.pe(0,"equinoreu.ft.com"),i.ge(1))),121034:i.q(i.isp("financial_times_redshift","UPL103",!1,"121034")),122044:i.q(i.tw(i.cw(0,i.o([i.os(i.w,5,[102,45,104,79,103]),i.y(4,132),i.os(i.w,3,[114,54,45,105,70])]),i.ge(1)),290304e5)),122045:i.q(i.tw(i.cw(0,i.o([i.os(i.w,5,[107,108]),i.y(4,117),i.os(i.w,3,[55,80])]),i.ge(1)),290304e5)),122046:i.q(i.tw(i.cw(0,i.y(3,53),i.ge(1)),290304e5)),122047:i.q(i.tw(i.cw(0,i.y(3,111),i.ge(1)),290304e5)),122049:i.q(i.tw(i.cw(0,i.o([i.y(5,176),i.os(i.w,4,[181,175,171])]),i.ge(1)),290304e5)),122051:i.q(i.tw(i.cw(0,i.o([i.os(i.w,4,[180,186,110,167,166,109,170,182,115]),i.os(i.w,3,[169,178])]),i.ge(1)),290304e5)),122054:i.q(i.tw(i.cw(0,i.os(i.w,4,[4,6,5,3,7]),i.ge(1)),290304e5)),122721:i.q(i.cw(0,i.a([i.os(i.w,4,[6,7,4,5]),i.os(i.w,3,[116,55,80])]),i.ge(1))),123787:i.q(i.tw(i.cw(1,i.pe(6,3047912570),i.ge(1)),12096e5)),124690:i.q(i.isp("financial_times_redshift","UPL104",!1,"124690")),124792:i.q(i.cw(1,i.os(i.e,8,[5910755640,6010244157,6010245102,6010244148]),i.ge(1))),125008:i.q(i.tw(i.cw(0,i.pc_(10,121),i.ge(3)),2592e6)),125770:i.q(i.cw(1,i.pe(6,3100121172),i.ge(1))),126197:i.q(i.tw(i.cw(1,i.pe(6,3047912570),i.ge(1)),6048e5)),16780:i.q(i.cw(0,i.t,i.ge(1))),16781:i.q(i.cw(0,i.y(15,100),i.ge(1))),16782:i.q(i.cw(0,i.pe(15,"United States"),i.ge(1))),16841:i.q(i.tw(i.cw(0,i.y(7,10),i.ge(1)),24192e5)),16842:i.q(i.tw(i.cw(0,i.ps(1,479),i.ge(1)),7776e6)),16843:i.q(i.ocq(i.ocq(i.ocq(i.ocq(i.tw(i.cw(0,i.os(i.s,1,[526,19,271,529,530]),i.ge(3)),7776e6),i.tw(i.cw(0,i.os(i.cx,2,[309,341,441,444,326,"Mergers & Acquisitions","Derivatives","Investment Strategy","European Equities",319,443,314,"Emerging markets","Emerging Markets","Capital markets","Capital Markets","Asia-Pacific Equities",284,"People in Fund Management","UK Equities",440,"Asset management",212,123,216,340,191,291,130,236,164,"Stock exchange consolidation",425,"Sovereign debt","Sovereign Bonds",163,400,"Investor activism","Insider trading",155,"High frequency trading","Greece debt crisis","Investing in Foreign Exchange",337,150,"Equity Valuation","Equity valuation","Equity Exchanges","Equity exchanges",316,311,"Derivative exchanges","Derivative Exchanges",144,"Bank bonuses",276,226,157,91,451,"Venture Capital","US Treasury Bonds","Stock Exchange","Sovereign","Passive Investing","Investor Activism","Insider Trading","High Yield Bonds","High Frequency Trading","Hedge Funds","Greece Debt Crisis","Foreign Exchange",321,315,"Equity Earnings",357,"Derivative","Clearing & Settlement",189,"Agricultural Commodities"]),i.ge(3)),2592e6)),i.tw(i.cw(0,i.os(i.cx,11,[490,258,488,"earnings"]),i.ge(3)),5184e6)),i.tw(i.cw(0,i.o([i.os(i.cx,40,[189,325,274]),i.os(i.cx,41,[226,207,190])]),i.ge(3)),7776e6)),i.tw(i.cw(0,i.o([i.os(i.cx,38,[189,325,274]),i.os(i.cx,39,[226,207,190])]),i.ge(3)),7776e6))),16982:i.q(i.tw(i.cw(0,i.y(1,255),i.ge(1)),7776e6)),16987:i.q(i.tw(i.cw(0,i.y(13,255),i.ge(1)),7776e6)),17068:i.q(i.ocq(i.tw(i.cw(0,i.os(i.cx,9,["r03l","r03p","r03k","r03b"]),i.ge(3)),5184e6),i.tw(i.cw(0,i.os(i.w,12,["Beijing","Korea","Alibaba","Hong Kong","Chinese",283,"China","India"]),i.ge(3)),7776e6))),17075:i.q(i.ocq(i.ocq(i.ocq(i.ocq(i.ocq(i.tw(i.cw(0,i.o([i.pc_(9,"r04d"),i.os(i.cx,11,["studying business",268,"graduate school","education",467,"careers","career advice"])]),i.ge(3)),5184e6),i.tw(i.cw(0,i.os(i.cx,2,[322,"Business education","Online learning","Career change",379,378,"Business books","Americas business schools","Asian business schools","European business schools","Business School Rankings",149,"Executive education","Social entrepreneurship","Professional networking",396,"Executive search",295,"Applying to Business School","Education",131,376]),i.ge(2)),5184e6)),i.tw(i.cw(0,i.pe(1,"www.ft.com/business-education"),i.ge(3)),5184e6)),i.isp("financial_times_redshift","UPL036",!1,"17075")),i.isp("financial_times_redshift","UPL007",!1,"17075")),i.tw(i.cw(0,i.os(i.w,1,["https://www.ft.com/content/3a594f1e-d3b1-47eb-a0e3-479e43f0a0dc","https://www.ft.com/content/105a3fb5-c496-4d00-9ebf-b740179b18a6","https://www.ft.com/content/3945156a-6e08-4231-bf26-f8a576f07584","https://www.ft.com/content/fdc454cf-1d76-425d-9050-02a9b110a080","https://www.ft.com/content/07fe57d1-e194-402c-a343-39df7b594cec","https://www.ft.com/content/2a37a6af-61d4-4faa-acca-363463fd14b8","https://www.ft.com/content/2bd77e1d-4fea-4834-9901-3fffbc0e7a3a","https://www.ft.com/content/45af45cb-fe45-49b5-94a0-cfafcf281723","https://www.ft.com/content/f0d2d243-9e4d-4308-b3cd-a69e0ab697c0","https://www.ft.com/content/679b4a15-9920-4dfd-b80b-db7241acc7be","https://www.ft.com/reports/asia-pacific-business-schools","https://www.ft.com/content/17abca3d-ff56-4d88-80db-2faaf95f60f5","https://www.ft.com/content/4c157c58-5dab-11e7-b553-e2df1b0c3220","https://www.ft.com/content/17878a48-5da7-11e7-b553-e2df1b0c3220","https://www.ft.com/content/1451d662-5da7-11e7-b553-e2df1b0c3220","https://www.ft.com/content/3323b72a-5da9-11e7-b553-e2df1b0c3220","https://www.ft.com/content/520eb246-5dab-11e7-b553-e2df1b0c3220","https://www.ft.com/content/2d49b520-5da9-11e7-b553-e2df1b0c3220","https://www.ft.com/content/4eb8fa2a-5dab-11e7-b553-e2df1b0c3220","https://www.ft.com/content/67c70780-5dad-11e7-b553-e2df1b0c3220","https://www.ft.com/content/2fed43c8-5da9-11e7-b553-e2df1b0c3220","https://www.ft.com/reports/educating-next-chinese-business-leaders","https://www.ft.com/content/004906f6-e444-11e9-b112-9624ec9edc59","https://www.ft.com/content/55c0472c-e45b-11e9-b112-9624ec9edc59","https://www.ft.com/content/b6bcfa02-ef37-11e9-ad1e-4367d8281195","https://www.ft.com/content/cee526b6-e444-11e9-b112-9624ec9edc59","https://www.ft.com/content/39d1367c-e445-11e9-b112-9624ec9edc59","https://www.ft.com/content/5ee78ac2-e456-11e9-b112-9624ec9edc59","https://www.ft.com/content/00c9006c-e445-11e9-b112-9624ec9edc59","https://www.ft.com/content/5787f180-3b96-11ea-b84f-a62c46f39bc2","https://www.ft.com/content/c4be5690-3b91-11ea-b84f-a62c46f39bc2","https://www.ft.com/content/362fdc36-3b97-11ea-b84f-a62c46f39bc2","https://www.ft.com/content/5a7211de-3b94-11ea-b84f-a62c46f39bc2","https://www.ft.com/content/0c282a0c-3c36-11ea-a01a-bae547046735","https://www.ft.com/content/5953739c-3b94-11ea-b84f-a62c46f39bc2","https://www.ft.com/content/64211d86-ef52-4cf5-ba38-0fe64e18b58f","https://www.ft.com/content/8efa25d0-32dd-49bc-be6c-6fca1640f228","https://www.ft.com/content/2a7c06a9-a5bc-479e-9426-8098a383555a","https://www.ft.com/content/beb77be1-f735-45e9-82cb-ec834eb39565","https://www.ft.com/content/bc80f1ec-6164-4d7d-a2b4-e6981eabbfcb","https://www.ft.com/content/5b01f823-1bd1-4527-a944-1d592e606397","https://www.ft.com/content/d956141d-a52f-4616-a9a3-c8666256e8fb","https://www.ft.com/reports/responsible-business-education","https://www.ft.com/content/235c2ea8-96f6-4dfd-9898-ef04f0d2dcfb","https://www.ft.com/content/24d5caad-9c67-4f78-9d85-7ef6dc71a93d","https://www.ft.com/content/3db0e304-00b6-4497-99d5-b23b9592c697","https://www.ft.com/content/f23fc8f7-32c3-4c06-9bf7-e4773dacd68a","https://www.ft.com/content/1a1ff6e4-2010-40c4-93aa-9790541eac26","https://www.ft.com/content/3462f359-8a1d-4a1e-9098-a14bded3f00d","https://www.ft.com/content/5d926567-c6d7-49c3-9495-4bf9b12b01d4","https://www.ft.com/content/133f0660-6da4-4711-b6b3-bc1b4c3a0da9","https://www.ft.com/content/8bd9ff6c-870c-4efd-8584-537d7eae87e7","https://www.ft.com/reports/women-start"]),i.ge(1)),7776e6))),17117:i.q(i.isp("financial_times_redshift","UPL001",!1,"17117")),17124:i.q(i.ocq(i.ocq(i.tw(i.cw(0,i.os(i.s,12,["commercial lettings","commercial property","commerical property","income property","investing in commercial real estate","private rental","property deals","property development","property fund management","property investment","property market","real estate investment trust","student accommodation"]),i.ge(2)),2592e6),i.tw(i.cw(0,i.os(i.cx,2,[437,223,401,"Real Estate Portfolio","Real Estate Development","Global Property Insight","Real Estate Investment Trusts","Property funds","UK Property Taxation","UK property taxation",442,"UK Property",160,391,"North America property","North America Property","Global property","Global Property","Asian Property","Asian property",285,"African property",275,320,"Europe Property","Commercial property","Asia Property","Africa Property","House Prices",95]),i.ge(2)),2592e6)),i.tw(i.cw(0,i.os(i.s,1,["www.ft.com/reports/arab-world-property","www.ft.com/reports/ft-property-europe","www.ft.com/reports/ft-property-global","www.ft.com/reports/ft-property-london"]),i.ge(2)),5184e6))),17125:i.q(i.tw(i.cw(0,i.ps(1,"https://www.ftadviser.com/"),i.ge(1)),7776e6)),17127:i.q(i.cw(0,i.ps(36,"f"),i.ge(1))),17128:i.q(i.cw(0,i.ps(36,"m"),i.ge(1))),17135:i.q(i.isp("financial_times_redshift","UPL015",!1,"17135")),17138:i.q(i.ocq(i.ocq(i.ocq(i.ocq(i.ocq(i.tw(i.cw(0,i.ref(27),i.ge(3)),7776e6),i.tw(i.cw(0,i.os(i.cx,2,[161,27,33,62,28,63,38,29,20,128,25,95,162,61,409,"Social affairs",192,35,"Luxury",43]),i.ge(3)),7776e6)),i.tw(i.cw(0,i.os(i.cx,14,[345,"Simon Kuper"]),i.ge(3)),7776e6)),i.tw(i.cw(0,i.os(i.cx,11,[525,"retail","parties","music","gastronomy",172,"cities","cinema","classical concert",495,493,"coffee/tea","celebrity fan/gossip",242]),i.ge(4)),2592e6)),i.tw(i.cw(0,i.os(i.s,0,["arts",525]),i.ge(3)),7776e6)),i.isp("financial_times_redshift","UPL017",!1,"17138"))),17173:i.q(i.ocq(i.ocq(i.tw(i.cw(0,i.ref(27),i.ge(1)),7776e6),i.tw(i.cw(0,i.ref(28),i.ge(1)),7776e6)),i.tw(i.cw(0,i.pc_(10,21),i.ge(1)),7776e6))),17174:i.q(i.cw(0,i.os(i.w,3,[53,"IFA/Financial Advisor"]),i.ge(1))),17176:i.q(i.ocq(i.ocq(i.tw(i.cw("FormSubmission",i.pe(33,"Submit Comment"),i.ge(2)),2592e6),i.tw(i.cw(0,i.os(i.w,13,["wordpress.com","whatsapp.com","typepad.com","tumblr.com","t.co","stumbleupon.com","reddit.com","meneame.net","livejournal.com",492,"getpocket.com",473,"blogspot.sg","blogspot.it","blogspot.in","blogspot.com.gr","blogspot.com.es","blogspot.com.br","blogspot.com","blogspot.co.uk","blogspot.ca"]),i.ge(2)),7776e6)),i.tw(i.cw(0,i.os(i.cx,14,["wolfgang mnchau","philip stephens","martin wolf","janan ganesh","gillian tett","gideon rachman","edward luce"]),i.ge(2)),7776e6))),17180:i.q(i.tw(i.cw(0,i.pe(0,"MoneyMedia - must update this"),i.ge(1)),7776e6)),17182:i.q(i.ocq(i.ocq(i.tw(i.cw(0,i.os(i.cx,2,[150,"UK tax",437,161,400,160,"Pound Sterling","International tax","Income tax",337,"Fixed-rate loans","Financial transaction tax","Final salary schemes",316,"Current accounts","Capital gains tax",220,"Help to buy","First-time buyers",225,284,319,440,443,130,"Stocks to Watch",428,"Structured Products","Savings accounts","Savings",95,442,162,"Personal pensions","Mortgages & Mortgage Rates",386,"Bank of England","Lenders",91,157,"US interest rates","US Interest Rates","UK interest rates","UK Interest Rates","Negative interest rates","Negative Interest Rates","Interest Rates",214,341,"Fund Regulation",340,123,"First time buyers","ETFs report","Age of the ETF",314,"Debt Capital Markets","Debt","Commodities Trading",119,164,361,155,152,191,163,144,291,426,"Currency safe havens","Currency havens","Yen","UK Tax","Travel Insurance","Tax Returns","Tax Inversion","Tax Evasion","Structured Investment Products","Sterling",410,"Residential","Reminbi","Remortgaging","Pound","New-build","Money Laundering",356,"Help to Buy","First Time Buyers",321,"Euro",315,"Dollar","Current Bank Accounts","Autumn Statement","Annuities"]),i.ge(4)),2592e6),i.tw(i.cw(0,i.os(i.cx,9,[185,265]),i.ge(3)),7776e6)),i.tw(i.cw(0,i.os(i.s,1,["ft.com/alphaville",481,252,484]),i.ge(3)),7776e6))),17183:i.q(i.ocq(i.ocq(i.ocq(i.ocq(i.tw(i.cw(0,i.ps(1,"propertylistings.ft.com"),i.ge(1)),5184e6),i.cw(0,i.os(i.cx,2,[162,402,"Property and mortgages",401,95,61,"Property Prices","UK house prices",407,"Residential Property","South American prime property",391,"Middle Eastern prime property",320,"Australasian prime property",285,275,160,223,73,"Expats","Home","Interior","House",52,"Garden","Expat"]),i.ge(3))),i.cw(0,i.pc_(9,507),i.ge(3))),i.cw(0,i.os(i.cx,11,[262,"private school",495,"buying/selling homes"]),i.ge(3))),i.scq(i.cw(2,i.pc(["aggregations","SegmentEntry"],20283)),i.cw(6,i.pe(22,20283)),i.ge(1)))),17185:i.q(i.isp("financial_times_redshift","UPL020",!1,"17185")),17186:i.q(i.ocq(i.ocq(i.ocq(i.ocq(i.ocq(i.tw(i.cw(0,i.os(i.cx,2,[237,232,"Robotics","Quantum technologies","Internet of things","Data mining",196,302,353,188,145,"Big data",24,"Tech Unicorns","Robo","Quantum","Internet",208,"Cyber","Bioelectronics","Big Data",67]),i.ge(6)),7776e6),i.tw(i.cw(0,i.os(i.cx,14,["Tim Bradshaw","Richard Waters","Hannah Kuchler"]),i.ge(6)),7776e6)),i.tw(i.cw(0,i.os(i.cx,9,[24,113,263]),i.ge(4)),5184e6)),i.tw(i.cw(0,i.os(i.cx,11,["technology and computing","internet technology"]),i.ge(3)),5184e6)),i.tw(i.cw(0,i.o([i.pc_(40,354),i.os(i.cx,41,[432,24])]),i.ge(6)),7776e6)),i.tw(i.cw(0,i.o([i.pc_(38,354),i.os(i.cx,39,[432,24])]),i.ge(3)),7776e6))),17187:i.q(i.tw(i.cw(0,i.ps(1,530),i.ge(1)),7776e6)),17427:i.q(i.cw(0,i.a([i.tg(1567296e6),i.ps(13,"europa.eu")]),i.ge(1))),18212:i.q(i.ocq(i.cw(0,i.ps(1,187),i.ge(1)),i.cw(1,i.os(i.e,6,[2538855037,2232204205]),i.ge(1)))),18238:i.q(i.tw(i.cw(0,i.o([i.y(0,17),i.pc_(9,"r07o"),i.pc_(10,"ETF Hub"),i.pc_(2,150),i.os(i.s,12,[250,"exchange traded fund"])]),i.ge(2)),7776e6)),18239:i.q(i.cw(0,i.o([i.os(i.w,5,[104,79,102,103,45,214,"Fund/asset management",207,190,"Accountancy & tax advisor"]),i.os(i.w,4,[132,"Broker/Trader/Advisor"]),i.os(i.w,3,[70,45,105,54,114,214,412,"Money/portfolio mgmt","Broker/trader","Accounting/finance"])]),i.ge(1))),18240:i.q(i.tw(i.cw(0,i.os(i.s,1,["www.ft.com/ftfm","www.ft.com/fund-management"]),i.ge(3)),5184e6)),18245:i.q(i.ocq(i.tw(i.cw(0,i.os(i.cx,9,[508,183,184]),i.ge(4)),7776e6),i.tw(i.cw(0,i.os(i.s,1,[173,251,483]),i.ge(3)),7776e6))),18246:i.q(i.tw(i.cw(0,i.os(i.cx,2,["Asset allocation","Mini-bonds","Covered bonds","Contingent convertible bonds",361,"Municipal bonds",152,155,164,144,163]),i.ge(3)),7776e6)),18247:i.q(i.tw(i.cw(0,i.o([i.pc_(2,"FT wealth"),i.os(i.s,1,["ft.com/ft-wealth",485])]),i.ge(1)),7776e6)),18248:i.q(i.ocq(i.tw(i.cw(0,i.o([i.ref(3),i.os(i.cx,2,[129,128,25,"luxury travel",463,521,516,500,494,472,460,457,456])]),i.ge(2)),7776e6),i.tw(i.cw(0,i.ps(1,174),i.ge(2)),7776e6))),18250:i.q(i.ocq(i.ocq(i.ocq(i.ocq(i.tw(i.cw(0,i.os(i.s,12,["annuities",465,466,53,260,513]),i.ge(2)),5184e6),i.cw(0,i.pe(3,"Retired"),i.ge(1))),i.tw(i.cw(0,i.os(i.s,1,["ft.com/indepth/pensions-crisis","ft.com/next-act","ft.com/pensions-industry","ft.com/reports/top-401-advisers"]),i.ge(3)),7776e6)),i.tw(i.cw(0,i.os(i.cx,2,["UK Care Homes","Pension","Final Salary","Ageing Populations","Next Act",410,225]),i.ge(3)),7776e6)),i.tw(i.cw(0,i.os(i.cx,11,["retirement planning",513,"eldercare"]),i.ge(4)),7776e6))),18253:i.q(i.ocq(i.ocq(i.cw(0,i.os(i.s,3,["ifa/financial advisor","ifas","money/portfolio mgmt"]),i.ge(1)),i.tw(i.cw(0,i.os(i.s,1,["ft.com/fund-management",482,252,487]),i.ge(1)),5184e6)),i.tw(i.cw(0,i.ps(0,487),i.ge(1)),5184e6))),18254:i.q(i.tw(i.cw(0,i.os(i.s,1,["ft.com/architecture",480,"ft.com/dance","ft.com/design","ft.com/film",173,"ft.com/house-home",251,483,"ft.com/music",486,"ft.com/television","ft.com/theatre",174,"ft.com/visual-arts"]),i.ge(3)),2592e6)),18259:i.q(i.tw(i.cw(0,i.ps(1,512),i.ge(1)),7776e6)),18260:i.q(i.ocq(i.ocq(i.cw(0,i.os(i.cx,2,[119,"Risk Management"]),i.ge(3)),i.cw(0,i.os(i.s,12,[248,"risk management","risk mitigation"]),i.ge(3))),i.tw(i.cw(0,i.os(i.w,3,[114,412]),i.ge(1)),7776e6))),18262:i.q(i.ocq(i.ocq(i.ocq(i.tw(i.cw(0,i.ps(1,"ft.com/companies/energy"),i.ge(3)),7776e6),i.cw(0,i.os(i.cx,2,["Utilities",313,312,393,"Gas","Energy"]),i.ge(3))),i.cw(0,i.os(i.cx,16,["Shell","BP","BP PLC"]),i.ge(5))),i.cw(0,i.os(i.s,1,["energy"]),i.ge(3)))),18263:i.q(i.ocq(i.tw(i.cw(0,i.ps(1,"ft.com/personal-finance/property"),i.ge(1)),7776e6),i.tw(i.cw(0,i.os(i.cx,2,["uk mortgage rates","property & mortgages","property and mortgages","buy-to-let",386,"Mortgage",162,95]),i.ge(3)),7776e6))),18264:i.q(i.tw(i.cw(0,i.ps(1,"ft.com/ftfm"),i.ge(1)),7776e6)),18266:i.q(i.tw(i.cw(0,i.ps(1,"ft.com/reports/europe-road-to-growth"),i.ge(1)),7776e6)),18268:i.q(i.ocq(i.tw(i.cw(0,i.o([i.pc_(9,113),i.pc_(16,"National Cyber Security Centre"),i.os(i.cx,2,[215,196,145])]),i.ge(2)),7776e6),i.tw(i.cw(0,i.os(i.s,1,["ft.com/cyber-security","ft.com/reports/cyber-security"]),i.ge(2)),7776e6))),18269:i.q(i.ocq(i.ocq(i.tw(i.cw(0,i.os(i.cx,2,["personal finance","markets"]),i.ge(3)),7776e6),i.tw(i.cw(0,i.os(i.s,1,[252,484,"markets.ft.com/data"]),i.ge(3)),7776e6)),i.tw(i.cw(0,i.os(i.s,["client","title"],["binary options",465,466,"contracts for difference","currency pairs","forex","futures","fx","spread betting","trading"]),i.ge(3)),7776e6))),18270:i.q(i.ocq(i.tw(i.cw(0,i.os(i.cx,2,["trading advice","high frequency trading","trading room"]),i.ge(3)),5184e6),i.tw(i.cw(0,i.os(i.s,1,[481]),i.ge(1)),7776e6))),18271:i.q(i.tw(i.cw(0,i.ps(1,"ft.com/reports/women-start"),i.ge(1)),7776e6)),18294:i.q(i.ocq(i.cw(0,i.o([i.os(i.w,4,[110,"Associate","Analyst",180,"Other",170,115,186,182,109,166,167,"Senior Manager/Dept Head","Secretary/Treasurer","Programme/Project Manager","Professional","Manager/Supervisor","Consultant"]),i.os(i.w,3,[169,178,"Knowledge management","General Management"])]),i.ge(1)),i.cw(0,i.os(i.w,0,["ADD MONEY MEDIA (job title)","ADD FTA (job title- outsource invest- discretionary power)"]),i.ge(1)))),18295:i.q(i.ocq(i.tw(i.cw(0,i.o([i.os(i.cx,2,["World Economic Forum in Davos",305]),i.ps(12,305)]),i.ge(1)),7776e6),i.tw(i.cw(0,i.ps(1,"ft.com/davos-2019"),i.ge(1)),7776e6))),18296:i.q(i.tw(i.cw(0,i.ps(0,"ADD IC subscriber level as registered"),i.ge(1)),7776e6)),18297:i.q(i.tw(i.cw(0,i.os(i.w,0,["ADD MM job title","ADD MM industry subsector","ADD MM department","ADD MM FQiq site"]),i.ge(1)),7776e6)),18298:i.q(i.ocq(i.tw(i.cw(0,i.o([i.pe(35,"govt-public-service"),i.y(37,176),i.os(i.w,5,[176,"Govt/public service/NGO"]),i.os(i.w,4,[181,175,171,"Politician/Government Minister","Gov\'t/Int\'l org official","Diplomat/Sen Govt Officer"])]),i.ge(1)),7776e6),i.cw(0,i.pe(0,"ADD MoneyMedia Industry susbector as foreign public company"),i.ge(1)))),18299:i.q(i.tw(i.cw(0,i.os(i.s,1,["ig.ft.com/special-reports/child-labour/","ig.ft.com/special-reports/ten-years-out/","ig.ft.com/special-reports/whistleblowers/"]),i.ge(1)),7776e6)),18300:i.q(i.tw(i.cw(0,i.ps(0,"investorschronicle.co.uk"),i.ge(1)),7776e6)),18310:i.q(i.ocq(i.ocq(i.ocq(i.ocq(i.tw(i.cw(0,i.o([i.os(i.cx,2,["Alphaville","Invest",91,"Investment",357]),i.os(i.s,1,["ft.com/content/1d5c7cb2-35d9-11e7-bce4-9023f8c0fd2e","ft.com/content/53fa458e-6fa7-11e8-852d-d8b934ff5ffa","ft.com/content/eced4c88-2975-11e7-bc4b-5528796fe35c","ft.com/ftfm/responsible-investing","ft.com/reports/300-top-investment-advisers","ft.com/reports/impact-investing","ft.com/reports/invest-mozambique","ft.com/reports/investing-arab-world","ft.com/reports/investing-central-eastern-europe","ft.com/reports/investing-greece","ft.com/reports/investing-human-capital","ft.com/reports/investing-in-bahrain","ft.com/reports/investing-in-innovation","ft.com/reports/investing-in-liberia","ft.com/reports/investing-in-mauritania","ft.com/reports/investing-in-nigeria","ft.com/reports/investing-in-refugees","ft.com/reports/investing-in-romania","ft.com/reports/investing-in-tanzania","ft.com/reports/investing-in-turkey","ft.com/reports/investing-kenya","ft.com/reports/investing-kuwait","ft.com/reports/investing-mauritius","ft.com/reports/investing-mendoza","ft.com/reports/investing-new-ghana","ft.com/reports/investing-paraguay","ft.com/reports/investing-senegal","ft.com/reports/investing-ukraine","ft.com/reports/unlocking-yield","ft.com/uk-equities"])]),i.ge(1)),7776e6),i.cw(0,i.os(i.cx,2,["venture capital investment","uk inward investment","uk direct investment abroad","structured investment products","social investment","quant investing","private investing","political risk and investment","peer-to-peer investments","passive investing","libor investigation","investor activism","investment trusts","investment research","investment banking","investing under trump","investing in funds","infrastructure investment","growth investing","foreign direct investment","ethical and responsible investment","emerging market investing","election investment strategies","business investment"]),i.ge(2))),i.cw(0,i.os(i.s,12,[491]),i.ge(2))),i.tw(i.cw(0,i.pe(1,\'ADD IN FTA "investment" section\'),i.ge(1)),7776e6)),i.cw(1,i.os(i.s,1,["ftalphaville","investments"]),i.ge(2)))),18312:i.q(i.ocq(i.ocq(i.cw(0,i.os(i.s,12,["business leadership","enterprise","entrepreneur","innovation","leadership course","leadership training","management","thought leader"]),i.ge(4)),i.cw(0,i.os(i.cx,2,["Starting a Business","Silicon Roundabout","Women in Business","Start-up","Entrepreneur",219,149]),i.ge(4))),i.cw(0,i.os(i.s,1,["ft.com/reports/peoples-technology","ft.com/reports/uk-entrepreneurs","ft.com/reports/understanding-entrepreneurs","ft.com/reports/wealth-entrepreneurs"]),i.ge(6)))),18313:i.q(i.tw(i.cw(0,i.ps(1,"ft.com/reports/transform"),i.ge(1)),7776e6)),18314:i.q(i.ocq(i.ocq(i.ocq(i.ocq(i.tw(i.cw(0,i.o([i.os(i.s,12,["boutique hotel","city break","city guide","luxury flight","spa",269,"vacation","weekend break"]),i.os(i.s,1,["ft.com/adventure-holidays","ft.com/city-breaks","ft.com/cycling-holidays",174,"ft.com/winter-sports"])]),i.ge(1)),2592e6),i.tw(i.cw(0,i.os(i.cx,2,["winter sports","city breaks",521,"travel books",516,500,494,"latin america holidays","family holidays",472,"cycling holidays",463,"beach holidays",460,"america holidays",457,456]),i.ge(2)),2592e6)),i.tw(i.cw(0,i.ref(3),i.ge(3)),7776e6)),i.tw(i.cw(0,i.os(i.cx,11,[269,"sea travel","road travel","railway travel","holidays","budget travel",458]),i.ge(3)),5184e6)),i.isp("financial_times_redshift","UPL001",!1,"18314"))),18315:i.q(i.ocq(i.tw(i.cw(0,i.os(i.s,12,[241,"convertible bond","depressed bond prices"]),i.ge(3)),5184e6),i.tw(i.cw(0,i.os(i.cx,2,[241,152,155,164,163,144,191]),i.ge(3)),7776e6))),18316:i.q(i.tw(i.cw(0,i.ps(1,"ft.com/reports/the-world"),i.ge(1)),7776e6)),18317:i.q(i.ocq(i.cw(0,i.o([i.os(i.s,3,[517]),i.ps(7,268)]),i.ge(1)),i.cw(0,i.pe(1,"Need to ADD \'school name\' data"),i.ge(1)))),18318:i.q(i.cw(0,i.ref(6),i.ge(1))),18319:i.q(i.tw(i.cw(0,i.ps(1,"ft.com/reports/modern-workplace-disability"),i.ge(1)),7776e6)),18320:i.q(i.tw(i.cw(0,i.y(3,53),i.ge(1)),7776e6)),18321:i.q(i.tw(i.cw(0,i.o([i.os(i.cx,11,["petrochemistry","mining industry","copper",253,179]),i.os(i.cx,2,["Commodity",119]),i.ps(12,119),i.os(i.s,1,["ft.com/commodities","ft.com/copper","ft.com/gold","ft.com/oil"])]),i.ge(3)),2592e6)),18322:i.q(i.tw(i.cw(0,i.ps(1,"ft.com/reports/blockchain"),i.ge(1)),7776e6)),18323:i.q(i.ocq(i.cw(0,i.ref(2),i.ge(1)),i.cw(0,i.os(i.w,0,["ADD InvestorChronicles \'jobTitle\'","ADD MoneyMedia \'Department\'","ADD MoneyMedia \'industry subsector\'"]),i.ge(1)))),18356:i.q(i.ocq(i.ocq(i.tw(i.cw(0,i.ps(0,"markets.ft.com"),i.ge(5)),2592e6),i.tw(i.cw(0,i.o([i.os(i.cx,2,[147,212,"ESG",150,123,524,"sustainable investment",266,"portfolio management",258,"low volatility","funds sector","fund managers","fund asset management",475,250,471,461]),i.os(i.s,12,["asset allocation",461,241,471,"esg",250,475,"fund",491,499,"oeics","portfolio managers","portfolio strategy","private bank","private client management","private clients",266,"socially responsible investing","sustainable investing","ucits","volatility",524,"wealth manager"])]),i.ge(5)),2592e6)),i.cw(0,i.pc_(11,258),i.ge(1)))),18365:i.q(i.tw(i.cw(0,i.ps(1,"bigdeal.ft.com"),i.ge(1)),7776e6)),18437:i.q(i.ocq(i.ocq(i.tw(i.cw(0,i.os(i.cx,2,[161,451,123,425,"Wealth","Private Wealth","Wealth Funds","Personal Finance Advice & Comment",130,323]),i.ge(4)),7776e6),i.tw(i.cw(0,i.os(i.s,1,["ft.com/pcwm2019",485]),i.ge(5)),7776e6)),i.tw(i.cw(0,i.os(i.s,12,["fund selectors","stock broker","stock exchange","stockbroker","wealth"]),i.ge(5)),7776e6))),18439:i.q(i.tw(i.cw(0,i.y(0,2),i.ge(1)),7776e6)),18440:i.q(i.ocq(i.tw(i.cw(0,i.o([i.pc_(2,"Multi"),i.os(i.s,12,["multi asset",499,"multiasset"])]),i.ge(1)),7776e6),i.tw(i.cw(0,i.o([i.ps(0,"ADD \'FTA\' sections on multi-assets"),i.ps(1,"ftadviser.com/multi-asset/")]),i.ge(1)),7776e6))),18443:i.q(i.ocq(i.cw(0,i.os(i.s,4,["ceo/president/chairman",3,4,5,6,7,"other c level (cfo/coo/cio/cmo)","vp/director"]),i.ge(1)),i.cw(0,i.os(i.w,0,["ADD FTA job titles","ADD MoneyMedia JobTitles"]),i.ge(1)))),18444:i.q(i.tw(i.cw(0,i.ps(1,"ft.com/reports/future-of-car"),i.ge(1)),7776e6)),18445:i.q(i.ocq(i.ocq(i.ocq(i.tw(i.cw(0,i.o([i.os(i.cx,16,[384,383,369,368,300,365,366,371,22]),i.os(i.s,1,[173,"ft.com/reports/destination-cape-town-winelands","ft.com/reports/wine-buying-investing","ft.com/wine"])]),i.ge(2)),5184e6),i.tw(i.cw(0,i.os(i.cx,2,[384,383,369,368,300,366,365,371,"Global Spirits",143,"Drinks",227,34,"Food",40,22,"Beringer Blass Wine Estates","Robert Parker (Wine Critic)",30]),i.ge(2)),5184e6)),i.cw(0,i.os(i.cx,14,[92,367,224]),i.ge(3))),i.tw(i.cw(0,i.os(i.cx,31,["Stan Kroenke","Johann Rupert","Bernard Arnault","Marlon Abela",224,"Gordon Ramsay","Ruth Rogers",92]),i.ge(1)),7776e6))),18731:i.q(i.isp("financial_times_redshift","UPL005",!1,"18731")),18732:i.q(i.isp("financial_times_redshift","UPL002",!1,"18732")),18733:i.q(i.isp("financial_times_redshift","UPL003",!1,"18733")),18734:i.q(i.isp("financial_times_redshift","UPL004",!1,"18734")),18735:i.q(i.ocq(i.cw(0,i.y(3,111),i.ge(1)),i.cw(0,i.os(i.s,1,["portfolio"]),i.ge(1)))),18737:i.q(i.ocq(i.ocq(i.cw(1,i.pe(6,2443117150),i.ge(1)),i.cw(0,i.ps(1,"ft.com/content/abcb2ba2-2335-11e8-ae48-60d3531b7d11"),i.ge(1))),i.cw(0,i.a([i.y(23,97),i.pc_(2,"Dementia")]),i.ge(1)))),18782:i.q(i.cw(3,i.t,i.ge(1))),18790:i.q(i.tw(i.cw(0,i.af_u(["properties","user","followedConcepts"],i.e_(["name"],"Business education")),i.ge(1)),7776e6)),18791:i.q(i.tw(i.cw(0,i.af_u(["properties","user","followedConcepts"],i.e_(["name"],"Due Diligence")),i.ge(1)),7776e6)),18797:i.q(i.isp("financial_times_redshift","UPL008",!1,"18797")),18803:i.q(i.isp("financial_times_redshift","UPL009",!1,"18803")),18805:i.q(i.ocq(i.ocq(i.isp("financial_times_redshift","UPL011",!1,"18805"),i.isp("financial_times_redshift","UPL012",!1,"18805")),i.isp("financial_times_redshift","UPL013",!1,"18805"))),18806:i.q(i.isp("financial_times_redshift","UPL013",!1,"18806")),18807:i.q(i.ocq(i.isp("financial_times_redshift","UPL012",!1,"18807"),i.isp("financial_times_redshift","UPL013",!1,"18807"))),19597:i.q(i.cw(0,i.os(i.s,["isp_info","organization"],[467,268,"university"]),i.ge(1))),19669:i.q(i.tw(i.cw(0,i.af_u(["properties","user","followedConcepts"],i.o([i.e_(["name"],"World Health Organization"),i.e_(["name"],"Sarah Neville"),i.e_(["name"],"Sanofi SA"),i.e_(["name"],"Roche Holding AG"),i.e_(["name"],"Puma Biotechnology Inc"),i.e_(["name"],"Pharmaceuticals"),i.e_(["name"],"Pharmaceutical Research & Manufacturers of America"),i.e_(["name"],"Pharmaceutical NV"),i.e_(["name"],"Pfizer Inc"),i.e_(["name"],"Novartis AG"),i.e_(["name"],"National Health Service"),i.e_(["name"],"Merck & Co Inc"),i.e_(["name"],"Medical Technologies"),i.e_(["name"],"Medical Products"),i.e_(["name"],"Johnson & Johnson Co Inc"),i.e_(["name"],"Healthcare Support Services"),i.e_(["name"],"Health Tech"),i.e_(["name"],"Health Foundation"),i.y_(["name"],124),i.e_(["name"],"Global Pharmaceuticals"),i.e_(["name"],"Global Health"),i.e_(["name"],"GlaxoSmithKline PLC"),i.e_(["name"],"European Medicines Agency"),i.y_(["name"],120),i.e_(["name"],"Department of Health UK"),i.y_(["name"],118),i.e_(["name"],"Biopharma"),i.e_(["name"],"AstraZeneca PLC")])),i.ge(1)),7776e6)),19676:i.q(i.cw(1,i.os(i.e,6,[2568364262,2562912914]),i.ge(1))),19902:i.q(i.ocq(i.ocq(i.tw(i.cw(0,i.o([i.pc_(9,"r05j"),i.ps(1,"ft.com/companies/automobiles")]),i.ge(2)),5184e6),i.tw(i.cw(0,i.os(i.cx,2,[65,"Midlands Engine",213,89,"Flying cars",148,306,"Diesel engines","Connected Car"]),i.ge(2)),5184e6)),i.tw(i.cw(0,i.os(i.cx,16,["Yamaha Motor Co Ltd",449,"AB Volvo","Volkswagen of America Inc.","Volkswagen Leasing GmbH","Volkswagen Slovakia","Volkswagen AG",448,"Vertu Motors PLC","Verband der Automobilindustrie eV","Vauxhall Motors Ltd","Toyota Motor Corp","TI Automotive Ltd","Tesla Inc","Tata Motors Ltd","Tata Group","Society of Motor Manufacturers & Traders Ltd",423,422,"SAIC Motor Corp Ltd","PROTON Holdings Bhd","Porsche Automobil Holding SE",399,"Nissan Shatai Co Ltd","Nissan Motor Co Ltd","Morgan Motor Co Ltd","Mitsubishi Motors Corp",381,"McLaren Automotive Ltd","Mazda Motor Corp","Maserati SpA","Marshall Motor Holdings PLC","Kia Motors","Jardine Motors PLC","Jaguar Land Rover Ltd","Hyundai Motor Co","Hyundai Corp","Hybrid Air Vehicles Ltd","Honda Motor Co Ltd","Guangzhou Automobile Group Co Ltd","Group Lotus PLC","Great Wall Motor Co Ltd","General Motors Co","Geely Automobile Holdings Co Ltd","Ford UK","Ford Motor Credit Co LLC","Ford Motor Co","Fiat Chrysler Automobiles","Federation Internationale de l\'Automobile","European Automobile Manufacturers Association","Eicher Motors Ltd","Ducati Motor Holding SpA","Dollar Thrifty Automotive Group Inc","Delphi Automotive PLC","BYD Auto Co Ltd","Brilliance China Automotive Holdings Ltd","BMW","Rolls-Royce & Bentley Motor Cars Limited","Bentley Motors Ltd","Beijing Automotive Industry Holding Co","Automakers Limited","Autotrader",287,"Autoeuropa","Audi AG","Aston Martin Lagonda","Aston Martin Lagonda Global Holdings PLC","American Automotive Policy Council Inc","American Automotive Policy Council","Alliance of Automobile Manufacturers","Advance Auto Parts Inc","Advance Auto Parts","a.o. smith automotive products company"]),i.ge(2)),5184e6))),20008:i.q(i.ocq(i.ocq(i.ocq(i.ocq(i.ocq(i.scq(i.tw(i.cw(2,i.pc(["aggregations","SegmentEntry"],17173)),7776e6),i.tw(i.cw(6,i.pe(22,17173)),7776e6),i.ge(1)),i.tw(i.cw(0,i.ps(13,106),i.ge(1)),7776e6)),i.tw(i.cw(0,i.ps(0,106),i.ge(1)),7776e6)),i.tw(i.cw(0,i.o([i.os(i.cx,2,[38,25,35,"Luxury Living",63,20,"Watches and Jewellery",450,"FT Weekend",29,28,"Art Basel",27]),i.os(i.s,12,["art basel","fashion week","ft weekend","global travel"])]),i.ge(3)),7776e6)),i.tw(i.cw(0,i.os(i.cx,9,[185,507,"r06n","r06m","r06b",508,183,184]),i.ge(3)),7776e6)),i.tw(i.cw(0,i.os(i.s,1,["ft.com/art-of-fashion","ft.com/arts",480,"ft.com/fashion-shows",173,251,486,174]),i.ge(3)),7776e6))),20277:i.q(i.cw(0,i.ps(1,526),i.ge(1))),20278:i.q(i.cw(0,i.ps(1,"https://live.ft.com/"),i.ge(1))),20279:i.q(i.cw(0,i.ps(1,"www.globalriskregulator.com"),i.ge(1))),20280:i.q(i.ocq(i.cw(0,i.os(i.s,1,["http://www.pensions-expert.com","https://www.pensions-expert.com"]),i.ge(1)),i.cw(1,i.y(0,271),i.ge(1)))),20281:i.q(i.cw(0,i.os(i.s,1,["bdp.ft.com","non-execs.com"]),i.ge(1))),20282:i.q(i.cw(0,i.ps(1,"www.exec-appointments.com"),i.ge(1))),20283:i.q(i.ocq(i.tw(i.cw(0,i.os(i.cx,2,[52,33,"Design & Architecture",48,"Artisans","Green Architecture",71]),i.ge(2)),7776e6),i.tw(i.cw(0,i.ps(1,"https://www.ft.com/house-home"),i.ge(1)),7776e6))),20428:i.q(i.cw(1,i.pe(6,2581366773),i.ge(1))),20431:i.q(i.cw(0,i.ps(1,0),i.ge(1))),20469:i.q(i.cw(0,i.ps(1,"https://app.ft.com/"),i.ge(1))),20494:i.q(i.cw(0,i.ps(1,"https://iberdrola.ft.com"),i.ge(1))),20531:i.q(i.isp("financial_times_redshift","UPL016",!1,"20531")),20534:i.q(i.isp("financial_times_redshift","UPL019",!1,"20534")),20645:i.q(i.cw(0,i.os(i.w,20,[168,"channel article","channel home"]),i.ge(1))),20646:i.q(i.cw(0,i.os(i.w,20,["Brand Feature","Brand Feature Video","Brand Feature Infographic","Brand Feature Article","Brand Feature Home"]),i.ge(1))),20710:i.q(i.isp("financial_times_redshift","UPL025",!1,"20710")),20714:i.q(i.ocq(i.ocq(i.isp("financial_times_redshift","UPL037",!1,"20714"),i.isp("financial_times_redshift","UPL038",!1,"20714")),i.isp("financial_times_redshift","UPL039",!1,"20714"))),20715:i.q(i.ocq(i.ocq(i.isp("financial_times_redshift","UPL040",!1,"20715"),i.isp("financial_times_redshift","UPL041",!1,"20715")),i.isp("financial_times_redshift","UPL042",!1,"20715"))),20833:i.q(i.ocq(i.scq(i.cw(2,i.pc(["aggregations","SegmentEntry"],17124)),i.cw(6,i.pe(22,17124)),i.ge(1)),i.scq(i.cw(2,i.pc(["aggregations","SegmentEntry"],17183)),i.cw(6,i.pe(22,17183)),i.ge(1)))),21070:i.q(i.acq(i.ocq(i.ocq(i.ocq(i.tw(i.cw(0,i.os(i.w,3,[55,114,54,80,45,116,70,105]),i.ge(1)),7776e6),i.tw(i.cw(0,i.os(i.w,4,[4,117,7,5,6,3,132]),i.ge(1)),7776e6)),i.tw(i.cw(0,i.os(i.w,5,[45,257,107,108,104,79,103,102]),i.ge(1)),7776e6)),i.tw(i.cw(0,i.a([i.y(3,111),i.os(i.cx,2,[130,234,426,161,"Futures contracts"])]),i.ge(1)),7776e6)),i.ocq(i.isp("financial_times_redshift","UPL015",!1,"21070"),i.scq(i.tw(i.cw(2,i.pc(["aggregations","SegmentEntry"],17138)),7776e6),i.tw(i.cw(6,i.pe(22,17138)),7776e6),i.ge(1))))),21174:i.q(i.cw(1,i.pe(8,5172227965),i.ge(1))),21216:i.q(i.cw(1,i.os(i.e,8,[5136377680,5136377485]),i.ge(1))),21217:i.q(i.cw(1,i.os(i.e,8,[5136377716,5136377647]),i.ge(1))),21267:i.q(i.cw(0,i.ps(1,"https://ftalphaville.ft.com"),i.ge(1))),21535:i.q(i.ocq(i.ocq(i.tw(i.cw(0,i.os(i.cx,11,["television",469,"social network","ecommerce"]),i.ge(4)),24192e5),i.tw(i.cw(0,i.a([i.os(i.cx,2,[208,67,24]),i.os(i.cx,2,[195,409,408])]),i.ge(4)),24192e5)),i.tw(i.cw(0,i.os(i.cx,2,["Streaming services","Gadgets","Social Media","iPhone",211,"Mobile payments","Mobile devices","Consumer Electronics show",273,237]),i.ge(4)),24192e5))),21538:i.q(i.ocq(i.ocq(i.ocq(i.ocq(i.ocq(i.ocq(i.tw(i.cw(0,i.a([i.ref(10),i.os(i.cx,9,["r07s","S_6875","r07b",510,185])]),i.ge(4)),24192e5),i.tw(i.cw(0,i.a([i.os(i.cx,11,[490,"bank","finance","industry financing"]),i.ref(10)]),i.ge(4)),24192e5)),i.tw(i.cw(0,i.os(i.cx,2,[152,231,317,"Social and environmental impact investment",147]),i.ge(4)),24192e5)),i.tw(i.cw(0,i.a([i.os(i.cx,2,[326,236,91,216]),i.ref(10)]),i.ge(4)),24192e5)),i.isp("financial_times_redshift","UPL009",!1,"21538")),i.tw(i.cw(0,i.os(i.w,1,[255,"https://www.ft.com/ftfm/responsible-investing"]),i.ge(4)),24192e5)),i.cw(0,i.a([i.os(i.cx,2,[231,75]),i.os(i.cx,2,["UK direct investment abroad",236,"Infrastructure investment","Business investment","Growth investing","Private investing",311,91,157])]),i.ge(4)))),21540:i.q(i.tw(i.cw(0,i.o([i.os(i.cx,9,[134,112,"r01"]),i.os(i.cx,11,[515,504,179,469,"automotive"]),i.os(i.cx,16,["Mariner Energy LLC","Endeavor Energy Corp.","High Velocity Alternative Energy Corp.",352,"Shell WindEnergy","Synenco Energy","Irvine Energy","Athlon Energy Inc","Bois d\'Arc Energy","Oando Energy Resources","Bosch Solar Energy AG","Evolve Energy Ltd.","Defense Logistics Agency Energy","New Energy & Industrial Technology Development Organization","BlueCreek Energy","Atomic Energy Society of Japan","Shanxi Energy Industries Group Ltd.","Naked Energy Ltd.","Transeuro Energy Corp.","PetroLatina Energy PLC","NextEnergy Corp.","Stirling Energy Systems","FG Energy SRL","Energy Research Centre of the Netherlands","NextEra Energy Resources LLC","Archimede Solar Energy SRL","Sanyo Energy USA Corp.","First Energy Oman","DC Energy LLC","Deep Gulf Energy LP","Ontelaunee Energy Center","RWE Energy AG","Institute for Energy Research","Laricina Energy Ltd.","Nippon Renewable Energy KK","Eurus Energy Holdings Corp.","Martin Energy Trading LLC","PowerShares Global Nuclear Energy Portfolio","ITI Energy Ltd.","Albian Sands Energy","Pakistan Atomic Energy Commission","World Council for Renewable Energy","The Energy Saving Trust Ltd.","Bear Energy LP","Industrial Energy Ltd.","Gazprom Global Energy Solutions Ltd.","Grove Energy","Korea Energy Economics Institute Foundation","Western Energy Alliance","Atlas Energy Resources LLC","Platinum Energy LLC","Fisterra Energy SL","Caiman Energy LLC","Cobalt Energy Ltd.","Gateway Energy Services Corp.","New Energy Fund","AGR Energy Ltd. No. 1","International Association for Energy Economics","The Energy Institute (United Kingdom)","Direct Energy Source LLC","Apache Energy Limited","BA Energy","Eurogas Corp (Old name of Dundee Energy Ltd)","Pacific Energy Resources","Elko Energy","Prime Energy Development Ltd.","BDI - BioEnergy International AG","Express Energy Services Operating LP","Australian Institute of Energy","Business Energy Solutions Ltd.","Northern Tier Energy LP","Sound Energy","Environmental Energy Technologies","GDF Suez Energy Europe & International","Enhance Energy","Bridge Energy ASA","Connected Energy Corp.","Miller Energy Resources Inc","Ardenham Energy Ltd.","Mytrah Energy Ltd","Endeavour Energy Netherlands BV","Talisman Energy Resources Ltd.","International Solar Energy Society","Advanced BioEnergy GP LLC","SUEZ Energy North America","Supporters of Nuclear Energy","Honiton Energy Ltd.","Chosun Energy Pte Ltd.","Tamar Energy Ltd.","Better Energy Systems","Energy Matters Pty Ltd.","Miller Energy LLC","Ukrainian Energy Register OJSC","Energy Saving Trust Foundation","Red Cap Energy Pty Ltd.","Texas Energy Future Holdings LP","Inc. /Old/","Pinnacle Renewable Energy","Cairn Energy USA LLC","Starcrest Nigeria Energy Ltd.","NEC Energy Solutions","Directed Energy Professional Society",375,"Shandong Energy Group Co.","Spartan Energy Corp.","Atomic Energy Research Establishment","Lime Energy Co.","Asia Pacific Energy","ACF Renewable Energy Ltd.","Palladian Energy Ltd.","Energybuild Group Ltd.","Relentless Energy Corp.","Global Natural Energy PLC","NiSource Energy Partners LP","China Energy Research Society","Cutuco Energy Central America","Neconde Energy Ltd","Liwa Energy Ltd.","Texas Retail Energy LLC","Premier Renewable Energy Fund Ltd.","Pentagon Energy LLC","Avatar Energy Pty Ltd.","Japan Energy Corp.","Talen Energy Corp.","Enbridge Energy Management LLC","FirstEnergy Solutions Corp.","National Modern Energy Holdings Ltd.","Lithium Energy Japan KK","Citizens for Affordable Energy","Korean Peninsula Energy Development Organization","Energy Regulatory Commission","Chinese Wind Energy Association","Aurora Energy Ltd. (New Zealand)","Koch Energy Trading","Harbour Energy LP","Alberta Energy Regulator","Atomic Energy Power Corp.","Polish Wind Energy Association","Ice Energy Holdings","PLDT Communications & Energy Ventures Inc","Reenergy Group Plc","Rex Energy Corp.","Challenger Energy Corporation","Arawak Energy Corporation","Energy Star","China Energy Ltd.","SHV Energy Limited","Triana Energy LLC","China New Energy Chamber of Commerce","Ocean Energy Inc.","Coastal Energy Corp.","GE-Hitachi Nuclear Energy Holdings LLC","Chevron Energy Solutions Co.","Magma Energy Corp.","Constellation Energy Nuclear Group LLC","OptimumNano Energy Co.","Nuclear Energy Agency (NEA)","Growth Energy","Marlin Energy LLC","Consumer Energy Alliance","Amber Energy Inc.","Mariner Energy","Fourth Partner Energy Pvt Ltd.","Emirates Nuclear Energy Corp.","Mercuria Energy America","China Pingmei Shenma Energy & Chemical Group Co.","Asia Energy","ARC Energy Pty Ltd.","Proven Energy Ltd.","STE (Clean Recycling & Energy) Plc","Summit Energy Co. LLC","Concord Energy Inc.","Covanta Energy Inc.","Alberta Energy Co. Ltd.","BioTherm Energy (Pty) Ltd.","Wave Energy Scotland Ltd.","Redbank Energy Ltd","Direct Energy LP","Chemoil Energy Ltd.","Front Range Energy LLC","Ross Smith Energy Group Ltd.","Braemar Energy Ventures","Navetas Energy Management Ltd.","Panoche Energy Center LLC","LG&E Energy Corp.","China Guangdong Nuclear Energy Development Co.","American Energy Group Inc.","CQ Energy Canada Partnership","MAN Energy Solutions Schweiz AG","PrimeWest Energy Trust","Wells Fargo Energy Group","RPM Energy LLC","Hanwha Energy Corp.","Hess Energy Trading Co LLC","SHV Energy NV","Mesa Energy Investment Partners LLC","Energy Ventures Inc.","Japan Renewable Energy Foundation","Energy Performance","Evergreen Energy","Ranhill Energy Sdn Bhd","The Consilience Energy Advisory Group Ltd.","CPS Energy Resources Plc","ONGC Mittal Energy Ltd.","Adira Energy Corp.","Richmond Energy Partners Ltd.","Shell Energy Australia Pty Ltd.","Eagle Rock Energy Partners L.P.","Energy America LLC","EDF Energy Renewables Ltd.","Bolivar Energy Corp.","Honiton Energy (Baotou) Co. Ltd.","Himin Solar Energy","Energy Watch Pty Ltd.","Moorland Energy Ltd.","BP Energy Co.","Energy Policy Research Foundation","Lambert Energy Advisory Ltd","Peoples Energy Inc.","Riverstone Energy","redT Energy","Black Gold Energy LLC","Barrick Energy","Cordillera Energy Partners LLC","NGS Energy LP","Global Energy Decisions LLC","Energy Intelligence Group","Energy Management Inc.","Shoreline Energy International Ltd.","Energy Northwest","Empire Energy Inc.","EDF Energy Nuclear Generation Ltd.","Oliver Wyman Energy Group Ltd.","Caelus Energy Alaska LLC","Fulcrum BioEnergy","Dominion Energy Virginia","IC Green Energy Ltd.","Emerging Energy Research LLC","88 Energy Ltd","WEMS Energy Centre Ltd.","Bow Energy Pty Ltd.","Infinity Bio-Energy Ltd","Jordan Atomic Energy Commission","Ice Energy Technologies Ltd.","Energy XXI Gulf Coast","MarkWest Energy GP LLC","Geothermal Energy Association","Global Energy Solutions Corp. Ltd.","Bidtimes PLC (Old name of PowerHouse Energy Group PLC)","UMC Energy PLC","Addax Bioenergy Sierra Leone Ltd.","Patterson-UTI Energy Inc.","Moncada Energy Group SRL","OMV Maurice Energy Ltd.","India Energy Forum","Energy Market Authority","Energy Technology","British Institute of Energy Economics","Platinum Energy Solutions","LP","Spectra Energy Partners","American Energy Innovation Council","John Deere Wind Energy","Energy Transportation LLC","Westcoast Energy","Integrated Energy Systems Ltd.","Bioenergy","Pioneer Southwest Energy Partners USA LLC","Amec Wind Energy Ltd.","Fission Energy Corporation","Atomic Energy Corp.","Irish Wind Energy Association","Tricon Energy Ltd.","First Energy Bank BSC","TAG Energy Solutions Ltd.","BreitBurn Energy Corp.","Stone Energy Corp","Clean Energy Capital LLC","PT Paiton Energy Company","Duncan Energy Partners LP","Solid Energy","Consumers Energy Co.","AmerGen Energy Inc.","Warwick Energy Ltd","Vivo Energy Investments BV","Toro Energy Inc.","EURATOM - European Atomic Energy Community","Energy Studies Institute","Nantenergy","Energy Research Partnership","Canamens Energy Ltd.","China Energy Conservation & Environmental Protection Group Co.","CH Energy Group","Essential Energy Ltd.","RAO Energy System of East PJSC","TAC Energy","RPS Energy Ltd.","Energy Exchange Corp.","Innovative Energy Solutions","GWM Renewable Energy SpA","Country Energy","UniSource Energy Corp","Energy Resources Institute","Energy Cranes LLC","Dubai Energy","National Energy Regulator of South Africa","Rockyview Energy","Penn West Energy Trust","Babcock & Brown Wind Energy SRL","KSK Emerging India Energy Fund Ltd.","Columbia Energy & Environmental Services","GE-Hitachi Nuclear Energy International LLC","National Renewable Energy Laboratory","BreitBurn Energy Partners LP","Leyshon Energy Ltd","Southcross Energy LLC","AWS Ocean Energy Ltd.","GCL Poly Energy Holdings Ltd","Urban Green Energy","Opus Energy Group Ltd.","Clean Energy Council","Zayed Future Energy Prize","RusEnergy Agency","Octopus Energy","Rio Tinto Energy","Shallow Water Energy Security Coalition","Newco Energy Acquisition Holdings LLC","Utilita Energy Ltd","Energy Biosciences Institute","AGR Energy AS","Energy Research Inc.","Renewable Energy Corp.","Baker Energy","Greenergy BVBA","Energy Fuels Inc.","Flint Energy Services Ltd.","United Energy Systems of Ukraine","China Renewable Energy Society","Chinese Renewable Energy Industries Association","Bow Valley Energy","Badlands Energy","FACTS Global Energy","Pacific Coast Energy Co.","Online Energy","Global Marine Energy Plc","Global Bioenergy Partnership","Shenzhen Energy Environmental Protection Co. Ltd.","Energyaustralia","China Wind Energy Association","Pacific Energy Partners LP","Puget Energy Inc.","Shanghai Chaori Solar Energy Science & Technology Co Ltd","CIC Energy Corp","Ur-Energy","Energy Partners LLC (Indiana)","Aquion Energy","Alon USA Energy Inc","Mirant Energy Trading","Pavilion Energy Corp","The Energy Security Leadership Council","GE Energy Rentals","Energy Services Group LLC","Oriental Energy Resources Ltd","SDX Energy","Mitchell Energy & Development Corporation","Copano Energy LLC","Pearl Energy Ltd","Strategic Energy LLC","Peabody Energy Australia Pty Ltd.","Principle Energy Ltd.","Provident Energy Ltd","National Renewable Energy Centre Ltd.","Green Mountain Energy Company","STX Energy Co.","Reykjavik Energy Invest","Crosstex Energy Inc.","New Energy Company","Energy Infrastructure Merger Corp.","World Wind Energy Association","Sinotech Energy Ltd","Energy Technologies (Ukraine)","Atomic Energy Organization of Iran","Alternative Energy Ltd","The Energy & Minerals Group LP","Fieldwood Energy LLC","Spirit Energy Corporation","Wham Energy","Japan Atomic Energy Agency","Prometheus Energy Co","SouthWest Energy","Baoding Tianwei Yingli New Energy References Co. Ltd.","Energy Technique PLC","Black Elk Energy LLC","Independent Energy Holdings PLC","Sunnova Energy Corp.","Future Energy Pty Ltd.","BizzEnergy Ltd.","Siemens Energy","Standard Renewable Energy Group LLC","Greenergy International Ltd.","Encore Energy Partners LP","Panasonic EV Energy Co. Ltd.","Hess Energy Trading Co. (Singapore) Pte Ltd.","FT Energy","National Energy Technology Laboratory","Energy Bank Sao Tome & Principe","Flint Energy Services","Industry & Energy","South Korea Ministry of Commerce","Energy Partners Inc.","NOF Energy Ltd","Atlantic Energy Inc.","Anzon Energy","GeoSouthern Energy Corp.","China Power New Energy Development Co.","Hunting Energy Services (Canada) Ltd.","Cambridge Energy Research","Athlon Energy LP","ICAP Energy LLC","Phoenix Energy Holdings Ltd.","Energy Financing Team Ltd.","Recurrent Energy","VTTI Energy Partners LP","Forum Energy PLC","Nexus Energy Ltd","Solace Renewable Energy GmbH","Ingenious Clean Energy Income Ltd.","Our Energy Policy Foundation","SSP Energy Ltd.","MD America Energy LLC","Resolute Energy Corp","California Energy Commission","Sempra Energy Trading Corp.","Alinta Energy Group (old name of Redbank Energy Ltd)","Beijing Energy Investment Holding Co.","Centurion Energy","Climate Energy Ltd.","Cornwall Energy Associates Ltd","Drillsearch Energy Ltd.","Schuepbach Energy International LLC","Inspirit Energy Ltd.","Darley Energy Plc","The Texas Clean Energy Project LLC","Abaco Energy Technologies LLC","South Korea Ministry of Trade","Rice Energy","IOT Infrastructure & Energy Services Ltd.","Renovalia Energy SA","Quantum Energy Partners LLC","Energy Developments Limited","Minimise Energy Ltd.","Global Energy Management Institute","Duke Energy Renewables","Airvolution Energy Ltd.","Atlas Energy","Composite Energy Ltd.","Eco Energy Co.","Greenergy AB","Energy Companies","Hilcorp Energy Co","Emerging Energy & Environment LLC","Seventy Seven Energy","Spirit Energy LLC","Energy East Corp.","Houston Energy Partners","Dolphin Energy Ltd.","Germany Ministry of Economic Affairs & Energy","Energy Intelligence","Sunverge Energy","Pure Energy Resources Pty Ltd.","Kazenergy","WSP Future Energy Ltd.","Hudson Capital Energy LLC","Arcadia Energy Suisse SA","Longford Energy","Tidal Energy Marketing (U.S.) LLC","Green Energy Corp.","Energy Power Resources Ltd.","Lincoln Clean Energy LLC","Kuwait Energy Plc","All Energy Corp.","American Energy Capital Partners LP","Sarawak Energy Bhd.","Clean Energy Partners LLP","RAAM Global Energy Co.","Caspian Energy Group JSC","Pavilion Energy Pte Ltd.","Independent Energy Inc.","Google Energy Pvt Ltd.","Blue Energy Co","Forte Energy NL","London Energy Brokers\' Association","Canadian Energy Research Institute","Korea Atomic Energy Research Institute","German Renewable Energy Federation eV","National Energy Commission","EnergySource LLC","Murray Energy Corp","Continuum Wind Energy Pte Ltd.","M&C Energy Group Ltd.","Flow Energy Ltd.","Accenture Global Energy","Bandanna Energy Ltd.","Spark Energy LLC","Energy Retail Association","Pure Energy Corp.","Viva Energy Australia Group Pty Ltd.","Dominion Energy Inc.","United States Energy Association","Argent Energy Ltd.","Ncondezi Energy Ltd","Bluebird Energy PLC","Texas Alliance of Energy Producers","Greenpark Energy Ltd.","Tokamak Energy Ltd.","Positive Energy","MarkWest Energy Partners LP","Energy Advantage","Dune Energy","Integrys Energy Group Inc","Rio Tinto Energy America","American Eagle Energy Corp.","Maple Energy PLC","Murray Energy Corp.","Stratic Energy Corp.","MIT Energy Initiative","National Energy Group Inc","Rice Energy LP","Enbridge Energy Partners LP","Essar Energy Investment Ltd.","European Federation of Energy Traders","Riverstone Energy LP","DCC Energy Ltd. (Ireland)","Excelerate Energy LP","Green Energy (UK) Plc","Clarke Energy Ltd","Van Dyke Energy Co.","BrightSource Energy Inc","Austin Energy","Institute for 21st Century Energy","Argent Energy Trust","Renova Energy PLC","Jubilant Energy NV","Invenergy LLC","Zenergy Power PLC","RRI Energy Inc","Atomic Energy Regulatory Board","Scottish & Southern Energy Power Distribution Ltd.","Gintech Energy Corp.","Celtic Energy Ltd.","Pure Energy Resources Inc.","APR Energy LLC","Inc. (Texas)","American Energy Partners","Offshore Renewable Energy Catapult","Welspun Energy Ltd","UTS Energy","Wisconsin Energy Corp","MMC Energy Inc.","Energy Economics","Global Energy","Renewable Energy Systems Limited","LGO Energy PLC","BP Alternative Energy Ltd.","National Commission on Energy Policy","TECO Energy Inc","Caparo Energy Ltd (old name of Mytrah Energy Ltd)","Dominion Energy South Carolina","Gibson Energy ULC","Integral Energy Management LLC","Asia Coal Energy Ventures Ltd.","Parnon Energy Inc","Pira Energy Group","NextEnergy Capital Ltd.","Blueknight Energy Partners GP LLC","FirstEnergy Capital LLP","EEW Energy from Waste GmbH","GE Nuclear Energy","United Energy AS","Oxis Energy Ltd.","BlackRock New Energy Investment Trust PLC","Samruk-Energy JSC","Solartech Energy Corp","Third Energy Offshore Ltd.","Kuwait Energy Co. KSCC","Star Energy Group PLC","Shanghai International Energy Exchange Corp","Element Energy","Buccaneer Energy Ltd.","Matrix Energy Solutions Ltd","Energy Conversion Devices Inc","Auhua Clean Energy PLC","Viva Energy Australia Pty Ltd.","Geneva Energy Markets LLC","NGP Energy Capital Management LLC","Atlas Energy Inc","Maguire Energy Institute","PetroBakken Energy Ltd","Spring Energy Norway AS","Harvest Energy Trust","C&J Energy Services Ltd.","Energy Efficiency & Renewable Energy","Antrim Energy Inc","Neptune Energy","Energy Policy Institute of Canada","Star Energy Corp.","Atomic Energy of Canada Limited","Centrica Energy Ltd.","Urasia Energy Ltd","Sterlite Energy Ltd","Black Sea Energy Limited","Daylight Energy Ltd.","Abu Dhabi Future Energy Co PJSC","Resolute Energy Corp.","Iraq Energy Institute","Leyshon Energy Ltd.","Bayfield Energy Holdings PLC","China Integrated Energy Inc","Energy Management Institute","Novera Energy","Philadelphia Energy Solutions LLC","Delek Energy Systems Ltd","United Kingdom Atomic Energy Authority","Talos Energy LLC","Voller Energy","Inc. (Delaware)","Clayton Williams Energy","WSP Environment & Energy LLC","Energy Africa Limited","Great Plains Energy Inc","Energy East Inc.","Industrial Energy Consumers of America","Green Energy","Westar Energy Inc","Indian Energy Ltd","Energy Transfer Co. Ltd.","Allegheny Energy Inc","SK Energy Co Ltd","CEFC China Energy","VeraSun Energy Corporation","Energy Research Institute","Infinis Energy Holdings Ltd","GMP FirstEnergy","Hurricane Energy PLC","Energy Capital Partners LLC","Topaz Energy & Marine Ltd","Bulgarian Energy Holding EAD","PBF Energy Co LLC","Clayton Williams Energy Inc.","Energy Assets Group PLC","Parsley Energy LP","Coastal Energy Co","Shoreline Energy Corp.","Atomic Energy Commission","Third Energy UK Gas Ltd","Direct Energy Marketing Ltd","Lambert Energy Advisory Ltd.","Renewable Energy Holdings PLC","Energy Group PLC","Solar Energy Limited","Panther Energy Trading LLC","Helius Energy PLC","SeaEnergy PLC","Old Firm Energy Corp.","Monster Energy Co","Energy Development Corp","Energy Brands Inc","Seven Energy International Ltd","Environment & Water","Council on Energy","Geneva Energy Markets Europe Ltd.","Nuclear Energy Institute","Horizon Acquisition Co PLC (old name of APR Energy PLC)","Genel Energy International Ltd","European Marine Energy Centre Ltd","Alkane Energy PLC","Regency Energy Partners LP","Co-operative Energy Ltd","Athlon Energy","Rystad Energy AS","Tooley Energy Ltd.","Blue Water Energy LLP","Association for the Conservation of Energy","Nighthawk Energy PLC","Energy Solutions Inc","Intelligent Energy Holdings PLC","Puma Energy International BV","World Energy Council","Renewable Energy Generation Ltd","Energy Source LLC","Progress Energy Resources Corp","Siccar Point Energy Ltd.","NV Energy Inc","GenOn Energy Inc","Harbour Energy Ltd.","Caracal Energy Inc","World Energy Congress","Energy & Resources Institute","Energy XXI Bermuda Ltd","Global Wind Energy Council","European Wind Energy Association","UK Energy Research Centre","Dart Energy Ltd","American Wind Energy Association","International Renewable Energy Agency","Spectra Energy Corp","MidAmerican Energy Holdings","Energy Aspects Ltd","Solar Energy Industries Association","Cornwall Energy Partnership Ltd.","Emerald Energy PLC","Linn Energy LLC","Berau Coal Energy Tbk PT","EIG Global Energy Partners LLC","European Energy Exchange AG","Fairfield Energy Ltd","Pan American Energy LLC","Petrohawk Energy Corp","Sibir Energy","UK Atomic Energy Authority","Renewable Energy Association","Walter Energy Inc","Ovo Energy Ltd","Arrow Energy Ltd","CEFC China Energy Co.","MidAmerican Energy Co","Cobalt International Energy Inc","Kinder Morgan Energy Partners LP","Massey Energy Co","Xcite Energy Ltd","APR Energy PLC","Burren Energy PLC","Imperial Energy","Energy Transfer Partners LP","Cambridge Energy Research Associates","Energy UK","Talisman Energy Inc","Ithaca Energy Inc","XTO Energy Inc","Salamander Energy PLC","Constellation Energy Group Inc","Energy Aspects Ltd.","Energy & Industrial Strategy UK","Department for Business","State Atomic Energy Corp","Cove Energy PLC","PFC Energy Inc","Oxford Institute for Energy Studies","Ophir Energy PLC","New Energy Finance Ltd","Mercuria Energy Group Ltd","Essar Energy PLC","Energy Future Holdings Corp","EDF Energy PLC","British Energy Group","Energy Department","International Atomic Energy Agency","Energy Information Administration US","International Energy Agency","Scottish Power Ltd","Iberdrola Renovables SA","Shell Chemicals Company","Shell Petrochemicals Co. Ltd.","Shell Oil Company","Npower Energies","NPower","EDF Electric Company","BP Group Plc","ExxonMobil Chemical Co.","Exxon Corp."]),i.os(i.cx,2,["Nuclear energy","UK energy",308,394,"Natural resources"])]),i.ge(8)),24192e5)),21541:i.q(i.tw(i.cw(0,i.o([i.pc_(9,265),i.pc_(11,488),i.os(i.cx,16,["AIG Trading Corp.","HSBC Global Asset Management Ltd.","HSBC Global Asset Management UK Ltd","JPMorgan Chase Co. (Investment Management)","Morgan Stanley Investment Management","UBS Investment Bank","AXA Investment Managers","Morgan Stanley Private Wealth Management Ltd.","Deutsche Bank Wealth Management","BNP Paribas Wealth Management (Singapore)","UBS Private Wealth Management","Barclays Wealth International","Barclays Wealth & Investment Management","Investec Wealth & Investment Ltd","Citigroup Inc","Credit Suisse Group AG","BNP Paribas SA","Bank of America Corp","Goldman Sachs Group","JPMorgan Chase & Co","UBS Group AG"]),i.os(i.cx,2,[157,216,342,212,123,130])]),i.ge(6)),24192e5)),21548:i.q(i.tw(i.cw(0,i.o([i.pc_(14,92),i.os(i.cx,11,[477,172,247]),i.os(i.cx,16,["New York Wine & Culinary Center","Jiugui Wine Co. Ltd.","Brandywine Bookmaking LLC","Bordeaux Wine Investments Ltd.","Ascot Wine Management SA","Wine Invest","Hong Kong Wine Vault","Brandywine Fund Inc.","South African Wine Industry Trust","International Wine Cellars","Wine Business Institute","The Wine Treasury Ltd.","The Wine Reserve Ltd.","New York Wine and Grape Foundation","The Chalone Wine Group Inc.","Premier Cru Fine Wine Investments Ltd.","Denbies Wine Estate Ltd.","Leith\'s School of Food & Wine Ltd","International Exhibition Co-Operative Wine Society Ltd","Victoria Wine Company Limited","Wine Investment Fund Limited","Italian Wine Merchants","Total Wine & More","Lunzer Wine Investments Ltd.","Berkmann Wine Cellars Ltd.","Wine Source","Wine Cellar Ltd.","London International Wine Fair","Brandywine Global Investment Management LLC","Wine Australia Corp.","Brandywine Global Investment Management (Europe) Ltd.","Wine Asset Managers LLP","Bibendum Wine Ltd","The Wine & Spirit Trade Association","English Wine Producers","Wine & Spirit Education Trust","The Wine Society Ltd.","Allied Domecq Spirits & Wine Limited","Wine Rack Ltd.",352,"International Wine Accessories","The Wine Group Inc.","The Wine Group Inc. International Wine Accessories"]),i.os(i.cx,2,[88,93,30,87,41,22])]),i.ge(6)),24192e5)),21615:i.q(i.tw(i.cw(0,i.o([i.os(i.cx,11,[269,474,242,458,"accessories",477,172,247]),i.os(i.cx,2,[22,230,74,46,31,39,324,42,28,29,129,296,25,99,93,30,87,128,192,27,278])]),i.ge(6)),24192e5)),21670:i.q(i.cw(0,i.o([i.os(i.cx,16,["","Wizz Air Hungary Ltd","Air Jordan","Air Malta","Air Macau","Ryanair UK Ltd.","Air Serbia","Air Seychelles Ltd","Spanair SA","Icelandair HF",427,"Wizz Air Ltd.",277,"TNT Airways SA","Fiji Airways","Titan Airways Ltd.",292,"Atlantic Airways Ltd.","TransAsia Airways Corp","Inc. (Florida)","Pet Airways","British Airways City Flyer Ltd.","Sudan Airways","Connect Airways","British European Airways Corp.","Condor Airways VA","Scotairways","Myanmar Airways International Co. Ltd.","World Airways Inc.","Cayman Airways Ltd.","Monarch Airways","Asian Wings Airways Ltd.","First Choice Airways Ltd.","Nigeria Airways Limited","Laker Airways (Bahamas) Ltd.","Afriqiyah Airways","AirTran Airways Inc","Laker Airways","Iraqi Airways","Eastern Airways","Adria Airways dd","Pan American Airways Inc.","Britannia Airways","Hong Kong Express Airways Ltd","Cyprus Airways Public Ltd","Republic Airways Holdings Inc","TransAsia Airways Corp.","Olympic Airways SA","GB Airways","British Mediterranean Airways","Kuwait Airways","Tiger Airways Holdings Ltd","South African Airways Pty Ltd","Jetstar Airways Pty Ltd","British Midland Airways Ltd",445,403,"US Airways Group Inc",318,293,"Chautauqua Airlines Inc.","WestJet Airlines Ltd","Africa World Airlines Ltd.","Biman Bangladesh Airlines Ltd.","SAS Airline","Compass Airlines","Sunstate Airlines (Qld) Pty Ltd.","The Federation of Indian Airlines","My Way Airlines SRL","Kunpeng Airlines","Ansett Airlines","Singapore Airlines Cargo Pte Ltd.","Southwest Airlines Pilots Association","SkyWest Airlines Ltd","JAL airline","Air Wisconsin Airlines Inc.","Kendell Airlines","Uganda Airlines Inc.","China Southwest Airlines","Airline Aoc Support Ltd.","Airline Investments Ltd. (United Kingdom)","Sabena Belgian World Airlines SA","Aeromar Airlines","Nordic Regional Airlines AB","Jetstar Pacific Airlines Pty Ltd.","Tradewinds Airlines","Canadian Airlines International Inc.","Virgin Blue Airlines Pty Ltd.","Tassili Airlines",375,"Sichuan Airlines Co.","Avianca Airlines SA (Use Avianca Holdings SA)","Hebei Airlines Co. Ltd.","Trans States Airlines Inc","Dutch Antilles Express Airlines","Mesaba Airlines","North American Airlines","SriLankan Airlines Ltd.","East Star Airlines","Cargo Airline Association","LOT Polish Airlines SA","Airline Services Holdings Ltd.","PT Mandala Airlines","Ariana Afghan Airlines","SAS Scandinavian Airlines Norge AS","PSA Airlines","Key Airlines","Star Airlines SA","United Airlines Foundation","Mandarin Airlines","SkyEurope Airlines AS","Nepal Airlines Corp.","African Airlines Association","Australian Airlines Ltd.","Canadian Airlines Inc.","Iran Aseman Airlines","TATA SIA Airlines Ltd","Atlantic Southeast Airlines Inc.","VLM Airlines","Atlantic Coast Airlines Inc.","Mesa Airlines Inc.","PT Adam Skyconnection Airlines","Association of Asia Pacific Airlines","TAM Airlines","Pinnacle Airlines Corporation","Finnish Commuter Airlines Oy","Trans States Airlines","China United Airlines Co. Ltd.","KLM Airlines","Caribbean Airlines Ltd.","European Regions Airline Association Ltd.","Olympic Airlines SA","Libyan Arab Airlines","Darwin Airline SA","Ukraine International Airlines","British Airline Pilots\' Association","Porter Airlines","CSA Czech Airlines","Sterling Airlines","Pacific Airlines","European Low Fares Airline Association","Trans World Airlines Inc","Eos Airlines","America West Airlines Inc.","Thomas Cook Airlines Ltd.","International Airline Support Group","Zoom Airlines","Alaska Airlines Inc","Xiamen Airlines Co.","Aloha Airlines","Go Airlines India Ltd","Middle East Airlines","Copa Airlines","Shanghai Airlines Co.","Shenzhen Airlines Co.","Varig Brazil Airlines","Airline Group Ltd","Philippine Airlines Inc","Frontier Airlines Holdings Inc","Airline Partners Australia","Saudi Arabian Airlines Corp","SAS Scandinavian Airlines Danmark A/S","Oasis Hong Kong Airlines Ltd","LAN Airlines SA","Fairline","Hawaiian Airlines Inc","Transavia Airlines CV","Indian Airlines Limited","Hong Kong Airlines Ltd","Cargolux Airlines International SA","Skymark Airlines Inc","British Airline Pilots Association","Turkish Airlines Inc","Association of European Airlines","Brussels Airlines NV","Hainan Airlines Co Ltd","SkyTeam Airline Alliance Management Cooperatie UA","Lion Mentari Airlines PT","Ethiopian Airlines","Vueling Airlines SA","KLM Royal Dutch Airlines","Austrian Airlines AG","Monarch Airlines Ltd","United Airlines","Kingfisher Airlines Ltd","Northwest Airlines Corp","Continental Airlines Inc","American Airlines Inc"]),i.os(i.cx,2,[31,39,324,63,"Adventure holidays",278,235,129,296,25,99])]),i.ge(5))),22226:i.q(i.cw(1,i.os(i.e,8,[5184560812,5184560800,5184544204,5184454015,5184059973,5184045536]),i.ge(1))),22391:i.q(i.cw(1,i.pe(8,5196810182),i.ge(1))),22392:i.q(i.cw(1,i.pe(8,5196810188),i.ge(1))),22393:i.q(i.cw(1,i.pe(8,5178572129),i.ge(1))),22395:i.q(i.cw(1,i.pe(8,5196810224),i.ge(1))),22407:i.q(i.cw(0,i.ps(13,473),i.ge(1))),22408:i.q(i.cw(0,i.ps(13,492),i.ge(1))),22409:i.q(i.cw(0,i.ps(13,"twitter.com"),i.ge(1))),22410:i.q(i.cw(0,i.ps(13,"instagram.com"),i.ge(1))),22411:i.q(i.cw(0,i.ps(13,0),i.ge(1))),22412:i.q(i.cw(0,i.ps(13,1),i.ge(1))),22514:i.q(i.isp("financial_times_redshift","UPL036",!1,"22514")),22515:i.q(i.isp("financial_times_redshift","UPL035",!1,"22515")),22529:i.q(i.ocq(i.cw(1,i.os(i.e,8,[5202434762,5202052228,5172127401]),i.ge(1)),i.cw(0,i.pe(1,"ft.com/reports/responsible-business-education"),i.ge(1)))),22567:i.q(i.tw(i.cw(0,i.o([i.os(i.cx,11,[474,242,172,247]),i.os(i.cx,16,["Saint Laurent Group",455,"Balenciaga SA","Prada Holding BV",387,"Gucci Group NV","Gucci Group SpA","Chanel SA",398,"Rolex Watch",413,"LVMH Group",294,"NetJets Inc","Lufthansa Cargo AG","Emirates",427,277,292,445,403,318,293]),i.os(i.cx,2,[37,87,63,20,33,192,27])]),i.ge(6)),24192e5)),22581:i.q(i.ocq(i.tw(i.cw(0,i.o([i.os(i.cx,11,[515,504]),i.os(i.cx,2,[213,148,"Climate change",313,228])]),i.ge(4)),24192e5),i.tw(i.cw(0,i.a([i.pc_(2,75),i.os(i.cx,2,["Middle Eastern companies",308,"Industrial goods",286,394,393,353,312])]),i.ge(3)),24192e5))),22598:i.q(i.tw(i.cw(0,i.o([i.pe(1,"https://www.ft.com/sport"),i.pc_(14,"Murad Ahmed"),i.pc_(11,522),i.os(i.cx,2,[60,211,395,"Football",238,230])]),i.ge(3)),24192e5)),22600:i.q(i.tw(i.cw(0,i.o([i.pe(1,"https://www.ft.com/companies/automobiles"),i.os(i.cx,16,[449,423,422,"Alfa Romeo Automobiles SpA","Alfa Romeo","Hyundai Group","Ford Europe","Fiat SpA",399,"Honda Europe","Honda Motor Europe Ltd.",287,"Ferrari SpA","Mitsubishi Motors Europe BV","Audi UK",448,"Volksbank International AG","Reanult Nissan","Nissan Diesel","AMG Mercedes",381,"BMW (UK) Holdings Ltd.","Toyota Lexus","Rolls-Royce Motor Cars Ltd"]),i.os(i.cx,2,[213,306,148,65,89,286])]),i.ge(4)),24192e5)),22710:i.q(i.tw(i.cw(0,i.pc_(9,134),i.ge(5)),2592e6)),22892:i.q(i.ocq(i.tw(i.cw(0,i.o([i.os(i.cx,11,["shopping",493,"clothing"]),i.os(i.cx,31,[218,209,346]),i.os(i.cx,2,[195,"Retail",408,33,42,28,29])]),i.ge(4)),24192e5),i.tw(i.cw(0,i.os(i.w,1,[177,106]),i.ge(4)),24192e5))),22990:i.q(i.cw(0,i.ps(1,"https://www.ft.com/reports/future-ai-digital-healthcare"),i.ge(1))),23011:i.q(i.cw(4,i.a([i.pe(32,"FT Rethink"),i.y(0,512),i.pe(19,.5)]),i.ge(1))),23027:i.q(i.tw(i.cw(0,i.o([i.os(i.cx,9,[113,263]),i.os(i.cx,2,[302,83,188,"Data protection",215,"Enterprise software",430,234,232,76,196,145])]),i.ge(6)),24192e5)),23805:i.q(i.cw(1,i.os(i.e,8,[5154110554,5154569e3,5153838906,5108811759,5108989117,5108988649,5154538709,5154538757,5154538526,5154538682,5154538517,5154538958,5154538988,5157753106,5157784501]),i.ge(1))),23832:i.q(i.cw(0,i.a([i.ps(18,229),i.ref(20)]),i.ge(1))),23833:i.q(i.cw(0,i.a([i.ps(18,"Firefox/"),i.ref(13)]),i.ge(1))),23835:i.q(i.cw(0,i.a([i.ref(13),i.os(i.s,18,["firefox/","fxios/"])]),i.ge(1))),23852:i.q(i.tw(i.cw(0,i.a([i.ps(18,229),i.ref(20)]),i.ge(1)),12096e5)),23853:i.q(i.tw(i.cw(0,i.a([i.ps(18,229),i.ref(20)]),i.ge(1)),6048e5)),23937:i.q(i.tw(i.cw(0,i.o([i.pe(1,"https://www.ft.com/reports/future-food-agriculture"),i.os(i.cx,9,["r01c","r05f"]),i.os(i.cx,16,["Cargill Meat Solutions Corp.","Cargill Nutricao Animal Ltda.","Cargill Australia Ltd.","Cargill Fertilizantes SA","Cargill Ventures","Cargill Cotton Ltd.","Cargill Risk Management","Cargill AgHorizons US","Cargill Petroleum","Cargill Inc","John Deere-Lanz Verwaltungs AG","John Deere Renewables LLC","DowDuPont","Agrium Inc","Monsanto Growth Ventures","Mahyco Monsanto Biotech (India) Ltd.","Monsanto Co","Syngenta AG","Bayer Pharma AG","Bayer Pharmaceuticals Pvt Ltd.","Bayer Pharms","Bayer CropScience Ltd. (United Kingdom)","Bayer CropScience NV","CNH Partners LLC","CNH Industrial Capital LLC","CNH Global NV","BASF UK Ltd.","BASF Corp."]),i.os(i.cx,2,[93,"Food security","Food Safety","Food Prices","Chinese agriculture","Agritech","EU agriculture","UK agriculture","Agriculture","Agricultural trade","Agricultural production",276])]),i.ge(4)),24192e5)),23956:i.q(i.cw(1,i.pe(6,2599560951),i.ge(1))),24101:i.q(i.isp("financial_times_redshift","UPL037",!1,"24101")),24102:i.q(i.isp("financial_times_redshift","UPL038",!1,"24102")),24103:i.q(i.isp("financial_times_redshift","UPL039",!1,"24103")),24104:i.q(i.isp("financial_times_redshift","UPL040",!1,"24104")),24105:i.q(i.isp("financial_times_redshift","UPL041",!1,"24105")),24106:i.q(i.isp("financial_times_redshift","UPL042",!1,"24106")),24244:i.q(i.tw(i.cw(0,i.o([i.pc_(11,522),i.os(i.cx,2,[60,211])]),i.ge(3)),24192e5)),24245:i.q(i.acq(i.ocq(i.ocq(i.isp("financial_times_redshift","UPL011",!1,"24245"),i.isp("financial_times_redshift","UPL012",!1,"24245")),i.isp("financial_times_redshift","UPL013",!1,"24245")),i.tw(i.cw(0,i.o([i.os(i.cx,9,[24,"r02f",113,263]),i.os(i.cx,2,[76,83,234,232,24,67])]),i.ge(4)),24192e5))),24324:i.q(i.tw(i.cw(0,i.o([i.pe(1,"https://www.ft.com/uk-small-companies"),i.pc_(9,"S_6892"),i.pc_(14,"Andy Bounds"),i.os(i.cx,2,["UK small companies","Starting a business",342,"Scaling-up your business"])]),i.ge(4)),24192e5)),24339:i.q(i.isp("financial_times_redshift","UPL034",!1,"24339")),24978:i.q(i.cw(0,i.as(i.x,7,["anons",44]),i.ge(1))),25136:i.q(i.cw(1,i.os(i.e,8,[5144417438,5144417423,5144417408,5144417267,5144417246,5144416049,5143886593,5143886581,5143886563,5143648499,5143636256,5143105183,5143105117,5143105105,5143001667,5142992337,5142992316,5142992301]),i.ge(1))),26090:i.q(i.acq(i.scq(i.cw(2,i.pge(21,30)),i.vq(i.sw(5,i.t,["properties","engaged_time"],i.ge(30))),i.ge(10)),i.cw(1,i.y(27,272),i.ge(1)))),26091:i.q(i.acq(i.scq(i.cw(2,i.pge(21,60)),i.vq(i.sw(5,i.t,["properties","engaged_time"],i.ge(60))),i.ge(10)),i.cw(1,i.y(27,272),i.ge(1)))),26376:i.q(i.scq(i.cw(2,i.a([i.pge(21,30),i.pc_(9,113)])),i.vq(i.sw(5,i.pc_(9,113),["properties","engaged_time"],i.ge(30))),i.ge(10))),26380:i.q(i.scq(i.cw(2,i.a([i.pge(21,30),i.ref(9)])),i.vq(i.sw(5,i.ref(9),["properties","engaged_time"],i.ge(30))),i.ge(5))),26381:i.q(i.scq(i.cw(2,i.a([i.pge(21,30),i.pc_(9,112)])),i.vq(i.sw(5,i.pc_(9,112),["properties","engaged_time"],i.ge(30))),i.ge(5))),26383:i.q(i.scq(i.cw(2,i.a([i.pge(21,30),i.pc_(9,264)])),i.vq(i.sw(5,i.pc_(9,264),["properties","engaged_time"],i.ge(30))),i.ge(15))),26440:i.q(i.isp("financial_times_redshift","UPL047",!1,"26440")),26442:i.q(i.isp("financial_times_redshift","UPL048",!1,"26442")),26443:i.q(i.isp("financial_times_redshift","UPL049",!1,"26443")),27111:i.q(i.ocq(i.ocq(i.isp("financial_times_redshift","UPL011",!1,"27111"),i.isp("financial_times_redshift","UPL012",!1,"27111")),i.isp("financial_times_redshift","UPL013",!1,"27111"))),27314:i.q(i.cw(0,i.y(5,102),i.ge(1))),27315:i.q(i.cw(0,i.pe(5,"def"),i.ge(1))),27316:i.q(i.cw(0,i.y(5,464),i.ge(1))),27317:i.q(i.cw(0,i.y(5,103),i.ge(1))),27318:i.q(i.cw(0,i.y(5,70),i.ge(1))),27320:i.q(i.cw(0,i.y(5,261),i.ge(1))),27321:i.q(i.cw(0,i.pe(5,"map"),i.ge(1))),27323:i.q(i.cw(0,i.pe(5,"bse"),i.ge(1))),27324:i.q(i.cw(0,i.pe(5,"edu"),i.ge(1))),27326:i.q(i.cw(0,i.y(5,470),i.ge(1))),27327:i.q(i.cw(0,i.pe(5,"enc"),i.ge(1))),27330:i.q(i.cw(0,i.y(5,79),i.ge(1))),27331:i.q(i.cw(0,i.y(5,476),i.ge(1))),27332:i.q(i.cw(0,i.y(5,104),i.ge(1))),27333:i.q(i.cw(0,i.y(5,176),i.ge(1))),27334:i.q(i.cw(0,i.pe(5,"hea"),i.ge(1))),27335:i.q(i.cw(0,i.y(5,108),i.ge(1))),27336:i.q(i.cw(0,i.y(5,107),i.ge(1))),27338:i.q(i.cw(0,i.y(5,257),i.ge(1))),27339:i.q(i.cw(0,i.y(5,45),i.ge(1))),27340:i.q(i.cw(0,i.pe(5,"law"),i.ge(1))),27342:i.q(i.cw(0,i.y(5,502),i.ge(1))),27343:i.q(i.cw(0,i.y(5,501),i.ge(1))),27344:i.q(i.cw(0,i.y(5,267),i.ge(1))),27345:i.q(i.cw(0,i.pe(5,"rea"),i.ge(1))),27346:i.q(i.cw(0,i.pe(5,"rtl"),i.ge(1))),27347:i.q(i.cw(0,i.y(5,55),i.ge(1))),27348:i.q(i.cw(0,i.y(5,519),i.ge(1))),27349:i.q(i.cw(0,i.y(5,520),i.ge(1))),27350:i.q(i.cw(0,i.pe(5,"trv"),i.ge(1))),27351:i.q(i.cw(0,i.y(3,105),i.ge(1))),27352:i.q(i.cw(0,i.pe(3,"adl"),i.ge(1))),27353:i.q(i.cw(0,i.y(3,70),i.ge(1))),27354:i.q(i.cw(0,i.y(3,243),i.ge(1))),27355:i.q(i.cw(0,i.pe(3,"exp"),i.ge(1))),27356:i.q(i.cw(0,i.y(3,169),i.ge(1))),27357:i.q(i.cw(0,i.y(3,503),i.ge(1))),27358:i.q(i.cw(0,i.y(3,53),i.ge(1))),27359:i.q(i.cw(0,i.y(3,80),i.ge(1))),27360:i.q(i.cw(0,i.y(3,116),i.ge(1))),27361:i.q(i.cw(0,i.y(3,45),i.ge(1))),27362:i.q(i.cw(0,i.y(3,178),i.ge(1))),27363:i.q(i.cw(0,i.pe(3,"leg"),i.ge(1))),27364:i.q(i.cw(0,i.y(3,498),i.ge(1))),27365:i.q(i.cw(0,i.y(3,54),i.ge(1))),27366:i.q(i.cw(0,i.y(3,502),i.ge(1))),27367:i.q(i.cw(0,i.pe(3,"not"),i.ge(1))),27368:i.q(i.cw(0,i.y(3,259),i.ge(1))),27369:i.q(i.cw(0,i.y(3,111),i.ge(1))),27370:i.q(i.cw(0,i.y(3,505),i.ge(1))),27371:i.q(i.cw(0,i.y(3,511),i.ge(1))),27372:i.q(i.cw(0,i.y(3,267),i.ge(1))),27373:i.q(i.cw(0,i.y(3,114),i.ge(1))),27374:i.q(i.cw(0,i.y(3,514),i.ge(1))),27375:i.q(i.cw(0,i.y(3,468),i.ge(1))),27376:i.q(i.cw(0,i.y(3,517),i.ge(1))),27377:i.q(i.cw(0,i.y(3,55),i.ge(1))),27378:i.q(i.cw(0,i.y(4,166),i.ge(1))),27379:i.q(i.cw(0,i.y(4,167),i.ge(1))),27380:i.q(i.cw(0,i.y(4,132),i.ge(1))),27382:i.q(i.cw(0,i.y(4,462),i.ge(1))),27384:i.q(i.cw(0,i.y(4,3),i.ge(1))),27385:i.q(i.cw(0,i.y(4,170),i.ge(1))),27386:i.q(i.cw(0,i.y(4,171),i.ge(1))),27387:i.q(i.cw(0,i.y(4,6),i.ge(1))),27388:i.q(i.cw(0,i.y(4,175),i.ge(1))),27389:i.q(i.cw(0,i.y(4,496),i.ge(1))),27390:i.q(i.cw(0,i.y(4,109),i.ge(1))),27391:i.q(i.cw(0,i.y(4,180),i.ge(1))),27392:i.q(i.cw(0,i.y(4,5),i.ge(1))),27393:i.q(i.cw(0,i.y(4,7),i.ge(1))),27394:i.q(i.cw(0,i.y(4,181),i.ge(1))),27395:i.q(i.cw(0,i.y(4,182),i.ge(1))),27396:i.q(i.cw(0,i.y(4,110),i.ge(1))),27397:i.q(i.cw(0,i.y(4,186),i.ge(1))),27398:i.q(i.cw(0,i.y(4,115),i.ge(1))),27399:i.q(i.cw(0,i.y(4,117),i.ge(1))),27400:i.q(i.cw(0,i.y(4,4),i.ge(1))),27706:i.q(i.tw(i.cw(0,i.os(i.cx,2,["AI ethics","AI and jobs",188]),i.ge(3)),7776e6)),27708:i.q(i.tw(i.cw(0,i.os(i.cx,2,[430,"Military technology",76,237,67,24]),i.ge(3)),7776e6)),27710:i.q(i.tw(i.cw(0,i.pc_(2,239),i.ge(3)),7776e6)),27711:i.q(i.tw(i.cw(0,i.os(i.cx,2,["Masters",378,379]),i.ge(3)),7776e6)),27714:i.q(i.tw(i.cw(0,i.os(i.cx,2,[396,322,376]),i.ge(3)),7776e6)),28394:i.q(i.ocq(i.ocq(i.cw(0,i.os(i.s,1,["https://www.ft.com/content/a06505ee-3c47-11ea-b232-000f4477fbca","https://www.ft.com/content/cee5f3a8-21ab-11ea-b8a1-584213ee7b2b","https://www.ft.com/content/ea6e02d6-32e1-11ea-a329-0bcf87a328f2","https://www.ft.com/content/f6c3732c-21ac-11ea-b8a1-584213ee7b2b","https://www.ft.com/content/f80ea9d0-21a8-11ea-b8a1-584213ee7b2b","https://www.ft.com/content/f83ff838-21ac-11ea-b8a1-584213ee7b2b",527]),i.ge(1)),i.cw(0,i.ps(13,527),i.ge(1))),i.cw(0,i.os(i.s,1,["www.ft.com/content/03c53264-b943-4a42-b8eb-ee2265643cb9","www.ft.com/content/0c10c85e-d165-11e8-9a3c-5d5eac8f1ab4","www.ft.com/content/12b978aa-0544-11e9-bf0f-53b8511afd73","www.ft.com/content/24b2a4c4-f7bf-11e8-8b7c-6fa24bd5409c","www.ft.com/content/2eda777e-db68-11e8-b173-ebef6ab1374a","www.ft.com/content/3316885c-b07d-11e8-87e0-d84e0d934341","www.ft.com/content/3a8c7746-d886-11e8-aa22-36538487e3d0","www.ft.com/content/4577f938-2632-11e9-b20d-5376ca5216eb","www.ft.com/content/48e3f86e-f26c-11e8-938a-543765795f99","www.ft.com/content/4dd47e72-d163-11e8-9a3c-5d5eac8f1ab4","www.ft.com/content/4ec70ae8-d154-11e8-9a3c-5d5eac8f1ab4","www.ft.com/content/5dbaee74-1f02-11e9-a46f-08f9738d6b2b","www.ft.com/content/6674f2b6-d165-11e8-9a3c-5d5eac8f1ab4","www.ft.com/content/75699cfe-3506-11e9-bb0c-42459962a812","www.ft.com/content/778c9f5e-294e-11e9-9222-7024d72222bc","www.ft.com/content/83247fda-e0f1-11e8-a8a0-99b2e340ffeb","www.ft.com/content/8b2070da-d152-11e8-9a3c-5d5eac8f1ab4","www.ft.com/content/957b32c2-e737-11e8-8827-ff56e7163c11","www.ft.com/content/a66913c8-d888-11e8-aa22-36538487e3d0","www.ft.com/content/a6a7c790-d06c-11e8-a9f2-7574db66bcd5","www.ft.com/content/a8dee408-a470-11e8-a1b6-f368d365bf0e","www.ft.com/content/b7e766c4-ad5c-11e8-8253-48106866cd8a","www.ft.com/content/c23403c0-ad30-11e8-8253-48106866cd8a","www.ft.com/content/c54abafe-ad30-11e8-8253-48106866cd8a","www.ft.com/content/cdd62792-0e85-11e9-acdc-4d9976f1533b","www.ft.com/content/cf2fb2fc-db7c-11e8-b173-ebef6ab1374a","www.ft.com/content/d481cf02-1e47-11e9-a46f-08f9738d6b2b","www.ft.com/content/e568cf06-f718-11e8-af46-2022a0b02a6c","www.ft.com/content/ed7785ce-d162-11e8-9a3c-5d5eac8f1ab4","www.ft.com/content/f2399c18-e455-11e8-a8a0-99b2e340ffeb","www.ft.com/content/f3e49c7e-ad2e-11e8-8253-48106866cd8a","www.ft.com/content/fc0934a8-e394-11e9-9743-db5a370481bc","www.ft.com/content/fdb9161e-248c-11e9-b20d-5376ca5216eb"]),i.ge(1)))),28714:i.q(i.tw(i.cw(0,i.o([i.os(i.cx,9,["r04h","r04c"]),i.os(i.cx,2,[222,239,"LGBT+","Gender pay gap","Gender politics","Global inequality","US inequality","UK Inequality",454,206])]),i.ge(3)),24192e5)),29255:i.q(i.isp("financial_times_redshift","UPL050",!1,"29255")),29259:i.q(i.isp("financial_times_redshift","UPL051",!1,"29259")),30221:i.q(i.isp("financial_times_redshift","UPL052",!1,"30221")),30222:i.q(i.isp("financial_times_redshift","UPL053",!1,"30222")),30251:i.q(i.isp("financial_times_redshift","UPL032",!1,"30251")),30363:i.q(i.tw(i.cw(0,i.pe(17,"Africa"),i.ge(1)),7776e6)),30365:i.q(i.tw(i.cw(0,i.y(17,283),i.ge(1)),7776e6)),30366:i.q(i.tw(i.cw(0,i.pe(17,"Europe"),i.ge(1)),7776e6)),30367:i.q(i.tw(i.cw(0,i.pe(17,"North America"),i.ge(1)),7776e6)),30368:i.q(i.tw(i.cw(0,i.pe(17,"Oceania"),i.ge(1)),7776e6)),30369:i.q(i.tw(i.cw(0,i.pe(17,"South America"),i.ge(1)),7776e6)),31187:i.q(i.ocq(i.tw(i.cw(0,i.os(i.cx,16,["London Organising Committee of the Olympic & Paralympic Games Ltd","Olympic Committee","British Olympic Association"]),i.ge(3)),24192e5),i.tw(i.cw(0,i.pc_(2,395),i.ge(3)),24192e5))),32094:i.q(i.isp("financial_times_redshift","UPL054",!1,"32094")),32095:i.q(i.isp("financial_times_redshift","UPL055",!1,"32095")),32729:i.q(i.ocq(i.ocq(i.cw(0,i.os(i.s,1,[256]),i.ge(1)),i.cw(0,i.a([i.ps(0,256),i.os(i.s,13,[256])]),i.ge(1))),i.cw(0,i.os(i.s,1,["iberdrola.ft.com/are-our-roads-ready-for-the-electric-vehicle-revolution","iberdrola.ft.com/breaking-batteries-why-solving-storage-is-the-key-to-global-energy-transition","iberdrola.ft.com/change-management","iberdrola.ft.com/glasgows-blueprint-for-a-net-zero-city","iberdrola.ft.com/nike-s-race-to-protect-the-future-of-sport","iberdrola.ft.com/one-of-europes-biggest-batteries","iberdrola.ft.com/repowering-gives-wind-farms-a-new-lease-of-life","iberdrola.ft.com/smart-meters-will-help-electric-vehicles-move-into-the-mainstream","iberdrola.ft.com/the-day-in-the-life-of-our-carbon-footprint","iberdrola.ft.com/the-uks-new-wind-economy","iberdrola.ft.com/when-will-europe-have-its-time-in-the-sun","iberdrola.ft.com/will-vehicle-to-grid-drive-ev-adoption"]),i.ge(1)))),33786:i.q(i.tw(i.cw(0,i.os(i.cx,2,[453,131,452,210,206,336]),i.ge(4)),24192e5)),33806:i.q(i.cw(3,i.pe(6,2615508230),i.ge(1))),34414:i.q(i.cw(1,i.pe(6,2639728228),i.ge(1))),34415:i.q(i.cw(1,i.pe(6,2639728228),i.ge(3))),34989:i.q(i.tw(i.cw(0,i.pc_(2,"Coronavirus"),i.ge(12)),24192e5)),35747:i.q(i.tw(i.cw(0,i.a([i.y(7,44),i.ps(1,0)]),i.ge(1)),2592e6)),36987:i.q(i.cw(1,i.a([i.ps(1,254),i.os(i.e,8,[5349190977,5349190704,5350380659,5350380647,5349191247,5350380629,5349190689,5349191217,5349191214,5350380608,5350380605,5349191175,5349190554,5350380464,5350380458,5364764773,5349189837,5350046584,5350380380,5349190215,5349190200,5350380239,5350047778,5350047760,5349190044,5350047742,5350047733,5364057588,5364041238,5350047574,5349189966])]),i.ge(1))),36988:i.q(i.cw(1,i.a([i.ps(1,254),i.os(i.e,8,[5349614591,5349619850,5349619838,5348454477,5349619664,5349294367,5349619634,5349619595,5348454444,5349619577,5348454432,5349294145,5349294130,5348454405,5349293728,5349618932,5349618917,5349618452,5349618446,5349618437,5349293254,5349293242,5349293230,5349292009,5349292003,5348452317,5348452308,5348452014,5348452500,5349293959,5348454381,5349293953,5349293656,5349293926,5349293506,5349293482,5348454231,5349293446,5348452488,5349616736,5349616502,5348451549,5349598922,5348450634,5349616469,5349615275,5349615062,5349287443,5349287407,5349287266,5349286207,5349287221,5349287206,5349287194,5349287179,5349286702])]),i.ge(1))),36989:i.q(i.cw(1,i.a([i.ps(1,254),i.os(i.e,8,[5349722573,5348555739,5349725978,5349388471,5349388318,5348554926,5348553981,5348553279,5349725744,5349725738,5348552355,5349725456,5349725438,5349386155,5349723287,5349733334,5349732935,5349690431,5349393256,5348560008,5349392635,5349392623,5349391144,5348559078,5349731882,5349731234,5348558526,5348558331,5349730277,5348564142,5348563326,5348563668,5348564103,5348563632,5348563623,5348563128,5349739433,5348563101,5348562948,5349739394,5349739157,5349739355,5349396718,5349396394,5349737882,5349395674,5349735035,5348536494,5349390415,5348556951,5349728606,5349728588,5348554470,5348555913,5348563830,5348563809])]),i.ge(1))),37314:i.q(i.cw(0,i.ps(1,"https://tradesecrets.ft.com/"),i.ge(1))),38068:i.q(i.ocq(i.cw(1,i.pe(6,2691471324),i.ge(1)),i.cw(1,i.pe(8,5363789934),i.ge(1)))),38305:i.q(i.cw(1,i.a([i.ps(1,"https://financialadvisoriq.com/"),i.os(i.e,8,[5350380449,5349174654,5350380440,5350380434,5349190308,5349190287,5349190524,5349190257,5350380392,5349190002,5350047721,5350380929,5350380944,5350356200,5350048687,5350047595,5353468974,5350047598])]),i.ge(1))),38340:i.q(i.cw(0,i.ref(26),i.ge(1))),38341:i.q(i.cw(0,i.y(0,19),i.ge(1))),38342:i.q(i.cw(0,i.a([i.y(0,19),i.y(15,100)]),i.ge(1))),38343:i.q(i.cw(0,i.y(0,528),i.ge(1))),38344:i.q(i.cw(0,i.a([i.y(0,528),i.y(15,100)]),i.ge(1))),38345:i.q(i.cw(0,i.y(0,271),i.ge(1))),38346:i.q(i.cw(0,i.y(0,529),i.ge(1))),38352:i.q(i.cw(0,i.a([i.y(7,9),i.ref(26)]),i.ge(1))),38353:i.q(i.cw(0,i.a([i.y(7,8),i.ref(26)]),i.ge(1))),38354:i.q(i.cw(0,i.a([i.ref(26),i.ref(4)]),i.ge(1))),38355:i.q(i.cw(0,i.a([i.y(15,100),i.ref(26),i.ref(4)]),i.ge(1))),38356:i.q(i.cw(0,i.a([i.y(7,44),i.ref(26)]),i.ge(1))),38357:i.q(i.cw(0,i.a([i.y(7,16),i.ref(26)]),i.ge(1))),38358:i.q(i.cw(0,i.a([i.y(7,10),i.ref(26)]),i.ge(1))),38359:i.q(i.cw(0,i.a([i.y(7,18),i.ref(26)]),i.ge(1))),38360:i.q(i.cw(0,i.a([i.ref(26),i.ref(24)]),i.ge(1))),38361:i.q(i.cw(0,i.a([i.y(15,100),i.ref(26),i.ref(24)]),i.ge(1))),38362:i.q(i.ocq(i.cw(0,i.a([i.y(3,54),i.ref(26)]),i.ge(1)),i.cw(0,i.a([i.y(5,79),i.ref(26)]),i.ge(1)))),38470:i.q(i.cw(0,i.ref(5),i.ge(1))),38472:i.q(i.cw(0,i.y(0,135),i.ge(1))),38473:i.q(i.cw(0,i.y(0,136),i.ge(1))),38474:i.q(i.cw(0,i.y(0,137),i.ge(1))),38475:i.q(i.cw(0,i.y(0,138),i.ge(1))),38476:i.q(i.cw(0,i.y(0,139),i.ge(1))),38477:i.q(i.cw(0,i.y(0,140),i.ge(1))),38478:i.q(i.cw(0,i.y(0,141),i.ge(1))),38479:i.q(i.cw(0,i.y(0,142),i.ge(1))),38497:i.q(i.cw(0,i.a([i.pe(43,"Financial Advisor, Broker, Planner"),i.ref(5)]),i.ge(1))),38498:i.q(i.cw(0,i.a([i.y(0,19),i.pe(44,"jt40")]),i.ge(1))),38819:i.q(i.tw(i.cw(0,i.os(i.cx,2,[206,454,219]),i.ge(3)),24192e5)),38823:i.q(i.isp("financial_times_redshift","UPL061",!1,"38823")),38827:i.q(i.ocq(i.tw(i.cw(0,i.pc_(2,"Corporate governance"),i.ge(3)),24192e5),i.tw(i.cw(0,i.a([i.pc_(2,219),i.os(i.cx,2,[309,444,441,"Financial services",327])]),i.ge(3)),24192e5))),41193:i.q(i.cw(1,i.pe(8,4769775117),i.ge(1))),41209:i.q(i.cw(1,i.os(i.e,8,[4862888538,4862877003,4862661985]),i.ge(1))),41489:i.q(i.cw(0,i.ps(1,133),i.ge(1))),42437:i.q(i.cw(0,i.ps(1,133),i.ge(2))),42438:i.q(i.cw(0,i.a([i.y(20,168),i.ps(1,133)]),i.ge(1))),42439:i.q(i.cw(0,i.a([i.y(20,168),i.ps(1,133)]),i.ge(2))),42441:i.q(i.cw(4,i.a([i.pe(19,.5),i.ps(1,133)]),i.ge(1))),43274:i.q(i.cw(1,i.pe(6,2687880605),i.ge(1))),43393:i.q(i.ocq(i.cw(1,i.pe(6,2707878917),i.ge(1)),i.cw(1,i.pe(8,5421508015),i.ge(1)))),43538:i.q(i.ocq(i.cw(1,i.os(i.e,8,[5397885299,5397885284,5340952958]),i.ge(1)),i.cw(3,i.os(i.e,8,[5340952958,5397885284,5397885299]),i.ge(1)))),46637:i.q(i.cw(1,i.pe(6,2714057730),i.ge(1))),46638:i.q(i.cw(1,i.pe(6,2714057730),i.ge(3))),46639:i.q(i.cw(1,i.pe(6,2714057730),i.ge(5))),46677:i.q(i.cw(0,i.ps(0,459),i.ge(1))),46761:i.q(i.tw(i.cw(0,i.a([i.pe(42,"Yes"),i.ref(5)]),i.ge(1)),72576e5)),46762:i.q(i.tw(i.cw(0,i.a([i.ref(5),i.os(i.w,["userMM","licenceType"],["Free trialist","Full member"])]),i.ge(1)),72576e5)),46763:i.q(i.tw(i.cw(0,i.a([i.y(0,19),i.pe(45,"registered")]),i.ge(1)),72576e5)),46996:i.q(i.cw(1,i.pe(6,2652220480),i.ge(1))),47473:i.q(i.cw(0,i.ps(1,459),i.ge(1))),47493:i.q(i.ocq(i.ocq(i.ocq(i.tw(i.cw(0,i.os(i.cx,14,[221,233,"Janan Ganesh",224,92]),i.ge(3)),5184e6),i.cw(0,i.os(i.w,1,["www.ft.com/content/eef2f63d-4141-436f-a536-4ba9e21b5aa2","www.ft.com/content/5f55e3c0-4df9-4ddd-9823-21146a80825e","www.ft.com/content/2d11f113-485c-4fbd-bd60-f4f06e87d427","www.ft.com/content/24cf66a1-e369-4e85-8d4e-a721f759169b","www.ft.com/content/19693b47-9136-4310-8554-b3ee32959d65","www.ft.com/content/3ddad654-05d5-4b54-b729-3ec8ccc03abf","www.ft.com/content/4d0334a2-c45b-4ada-af5e-219335b0d1ad","www.ft.com/content/9d9e27b3-aeaa-4255-82fd-b27e0dd58613","www.ft.com/content/c101c97d-85be-480a-b423-1953b2808027","www.ft.com/content/40185886-6319-4f22-9c43-7a00d272bc30","www.ft.com/content/40dbdfa5-7b3c-4f4b-b9cf-6cb44ba1d1d6","www.ft.com/content/156cd2f0-50ab-4662-a046-90456adb4a06","www.ft.com/content/aca2e476-8f2f-11ea-a8ec-961a33ba80aa","www.ft.com/content/239e70ca-5c2b-463a-a6b4-969993303b7a","www.ft.com/content/4b949d24-94b0-11ea-abcd-371e24b679ed","www.ft.com/content/b9d6a09c-996b-11ea-8b5b-63f7c5c86bef","www.ft.com/content/c00b2333-c1a3-46ca-b461-575dea70bb97"]),i.ge(1))),i.tw(i.cw(0,i.os(i.s,1,["www.ft.com/restaurants","www.ft.com/wine"]),i.ge(2)),7776e6)),i.tw(i.cw(0,i.a([i.ref(26),i.os(i.cx,2,[22,34])]),i.ge(3)),2592e6))),47581:i.q(i.tw(i.cw(4,i.a([i.y(0,0),i.pe(19,0)]),i.ge(1)),7776e6)),47583:i.q(i.tw(i.cw(4,i.a([i.y(0,0),i.pe(19,25)]),i.ge(1)),7776e6)),47584:i.q(i.tw(i.cw(4,i.a([i.y(0,0),i.pe(19,50)]),i.ge(1)),7776e6)),47585:i.q(i.tw(i.cw(4,i.a([i.y(0,0),i.pe(19,75)]),i.ge(1)),7776e6)),47586:i.q(i.tw(i.cw(4,i.a([i.y(0,0),i.pe(19,100)]),i.ge(1)),7776e6)),49964:i.q(i.ocq(i.cw(1,i.pe(6,2738612544),i.ge(1)),i.cw(1,i.pe(8,5461884214),i.ge(1)))),51098:i.q(i.isp("financial_times_redshift","UPL063",!1,"51098")),51099:i.q(i.isp("financial_times_redshift","UPL064",!1,"51099")),51100:i.q(i.isp("financial_times_redshift","UPL065",!1,"51100")),51101:i.q(i.isp("financial_times_redshift","UPL066",!1,"51101")),52127:i.q(i.cw(0,i.a([i.tg(16011648e5),i.ps(1,187)]),i.ge(1))),52133:i.q(i.cw(0,i.a([i.y(20,168),i.tg(16011648e5),i.ps(1,187)]),i.ge(1))),52142:i.q(i.cw(4,i.a([i.pe(19,.5),i.tg(16011648e5),i.ps(1,187)]),i.ge(1))),52520:i.q(i.cw(1,i.os(i.e,8,[5321989341,5323209536,5321989374]),i.ge(1))),54358:i.q(i.ocq(i.cw(1,i.pe(6,2746744506),i.ge(1)),i.cw(1,i.pe(8,5477169724),i.ge(1)))),54639:i.q(i.cw(1,i.pe(6,2757538799),i.ge(1))),55241:i.q(i.ocq(i.cw(1,i.pe(6,2722430064),i.ge(1)),i.cw(1,i.pe(8,5428065359),i.ge(1)))),55914:i.q(i.ocq(i.ocq(i.ocq(i.cw(3,i.os(i.e,6,[2750301246,2746938138,2746669867,2743290941,2742689033,2738649978,2736253150,2734939368,2731153422,2730981093,2730907574,2730900145,2728157953,2727548150,2727123302,2724473678,2717206472,2714219401,2714144097,2709278100,2708825199,2705732341,2705259519,2705209334,2703672604,2700313374,2697601330,2695343739,2694052314,2693625293,2690955299,2690344061,2689709998,2689467968,2687831414,2682534934,2680591562,2680043483,2680023580,2680005020,2676676697,2675244871,2675235811,2673809912,2672074216,2670891736,2669266539,2668724134,2667084367,2663831028,2661818133,2661805647,2660761876,2658151668,2657522815,2657500018,2657353350,2656173569,2655796448,2654589757,2654358624,2653882997,2651661059,2648267468,2644149558,2644074936,2643741040,2643605233,2642188747,2641112541,2640675495,2638443326,2638263555,2636820425,2635150799,2631912954,2631073902,2628010002,2627406871,2627401903,2627297489,2624167337,2622688790,2622667811,2621918359,2621548798,2620229014,2619610983,2619500098,2618611386,2616297505,2616248363,2615378378,2614016157,2613914042,2612570144,2610530634,2610285984,2610062561,2609265819,2609061772,2609039743,2609019025,2608872884,2608797976,2607960928,2607193167,2605924293,2605136320,2604943850,2603776482,2602123420,2601346703,2599662639,2598865394,2598429053,2598163876,2597723982,2596900766,2596513414,2595945032,2594083108,2594019250,2591661834,2591254551,2589616475,2588236223,2587102011,2586612662,2586163662,2584601194,2582372604,2581188657,2580480402,2580376295,2580278357,2579447991,2578494188,2578327886,2578317722,2577508012,2576436463,2575981565,2575323497,2570198613,2562813348,2561801987,2561218936,2556418765,2555299386,2549619065,2541198927,2540381225,2533358597,2525026231,2523479231,2518025938,2512150542,2503301931,2490079628,2483723404,2480632730,2451010768,2420397572]),i.ge(1)),i.tw(i.cw(0,i.os(i.cx,16,["Alfred Dunhill Ltd","Watchfinder.co.uk Ltd","Roger Dubuis SA",455,"Yoox Net-a-Porter","Van Cleef & Arpels","Ulysse Nardin SA","Tiffany & Co","Tag Heuer SA",413,"Prada SpA","Polo Ralph Lauren Corp (old name of Ralph Lauren Corp)","Piaget SA",398,"Omega SA","Officine Panerai Marketing e Comunicazione SRL",387,"Montblanc International BV","Montblanc Inc.","LVMH Moet Hennessy Louis Vuitton","Loro Piana SpA","Loewe SA","Le Petit-Fils de L-U Chopard & Cie SA","Lange Uhren GmbH","Jaeger-Le Coultre SA","Hublot SA","DE Beers Group","Cie Financiere Richemont SA","Cie des Montres Longines Francillon SA","Christian Dior SA","Chloe SAS","Chaumet International","Chanel SAS","Cartier SA","Cartier International SA Geneve","Cartier",294,"Bulgari SpA","BRIONI SpA","Baume & Mercier","Audemars Piguet Holding SA"]),i.ge(3)),2592e6)),i.tw(i.cw(0,i.os(i.cx,2,[37,35,131,392,52,317,147,48,"Dance","Collecting"]),i.ge(8)),2592e6)),i.scq(i.tw(i.cw(2,i.pc(["aggregations","SegmentEntry"],21070)),7776e6),i.tw(i.cw(6,i.pe(22,21070)),7776e6),i.ge(1)))),55934:i.q(i.acq(i.tw(i.cw(0,i.o([i.os(i.cx,9,[264,"r07c",265,"r07d","r07l",510,185]),i.os(i.cx,10,[21,450]),i.os(i.cx,2,[62,20,23,26]),i.os(i.s,1,[240,270,"www.ft.com/life-arts"])]),i.ge(3)),2592e6),i.scq(i.tw(i.cw(2,i.pc(["aggregations","SegmentEntry"],17138)),7776e6),i.tw(i.cw(6,i.pe(22,17138)),7776e6),i.ge(1)))),55935:i.q(i.ocq(i.ocq(i.cw(1,i.pe(8,5529431685),i.ge(1)),i.cw(7,i.a([i.os(i.s,24,["www.ft.com/partnercontent/knight-frank/commercial-matters-real-estate-investment-for-the-future.html","www.ft.com/partnercontent/knight-frank/keeping-the-property-market-moving.html","www.ft.com/partnercontent/knight-frank/navigating-international-property-markets.html"]),i.ref(23)]),i.ge(1))),i.cw("AdImpressionTracker",i.a([i.pe(29,"Knight Frank"),i.y(34,479)]),i.ge(1)))),56089:i.q(i.tw(i.cw(0,i.pc_(9,"r06k"),i.ge(3)),2592e6)),56090:i.q(i.tw(i.cw(0,i.pc_(9,"r05o"),i.ge(3)),2592e6)),56093:i.q(i.ocq(i.cw(3,i.os(i.e,8,[5459024369,5459024105,5459026442,5458754860,5457850017,5457849780,5457849759,5457847578]),i.ge(1)),i.cw(7,i.a([i.ps(24,"wework.ft.com"),i.ref(23)]),i.ge(1)))),56274:i.q(i.ocq(i.ocq(i.cw(0,i.y(0,489),i.ge(1)),i.cw(3,i.os(i.e,8,[5529609102,5529612417]),i.ge(1))),i.cw(7,i.ps(24,489),i.ge(1)))),56623:i.q(i.ocq(i.cw(7,i.a([i.ps(24,"futropolis.ft.com"),i.ref(23)]),i.ge(1)),i.cw(3,i.os(i.e,8,[5484510935,5484220951]),i.ge(1)))),57152:i.q(i.cw(1,i.os(i.e,8,[5503316760,5504503592,5504501699,5503318551,5503318251,5503317507]),i.ge(1))),57517:i.q(i.cw(1,i.a([i.pe(8,5485277026),i.tge(16015104e5),i.tle(16041024e5)]),i.ge(1))),57756:i.q(i.cw(1,i.a([i.tg(16072992e5),i.os(i.e,8,[5555540819,5554228515])]),i.ge(1))),58181:i.q(i.isp("financial_times_redshift","UPL068",!1,"58181")),58310:i.q(i.isp("financial_times_redshift","UPL069",!1,"58310")),62486:i.q(i.ocq(i.ocq(i.cw(0,i.os(i.s,1,[249]),i.ge(1)),i.cw(0,i.o([i.os(i.s,0,[249]),i.os(i.s,13,[249])]),i.ge(1))),i.cw(0,i.os(i.s,1,["equinor.ft.com/articles/building-worlds-largest-offshore-windfarm-in-uk","equinor.ft.com/articles/there-will-be-no-net-zero-without-carbon-capture-and-hydrogen","equinor.ft.com/infographics/how-local-people-are-building-the-energy-revolution","equinor.ft.com/videos/the-future-is-afloat","equinor.ft.com/videos/worlds-first-net-zero-cluster","httpequinor.ft.com/videos/britains-path-to-net-zero","https://equinor.ft.com/videos/britains-path-to-net-zero"]),i.ge(1)))),66495:i.q(i.tw(i.cw(0,i.os(i.cx,2,[452,336,131,453,392]),i.ge(3)),7776e6)),66564:i.q(i.cw(0,i.a([i.y(7,44),i.ref(26)]),i.ge(2))),67199:i.q(i.isp("financial_times_redshift","UPL072",!1,"67199")),71282:i.q(i.tw(i.cw(0,i.af_u(["properties","user","followedConcepts"],i.o([i.y_(["name"],345),i.y_(["name"],147),i.y_(["name"],228),i.y_(["name"],91),i.y_(["name"],327)])),i.ge(1)),7776e6)),71287:i.q(i.ocq(i.tw(i.cw(0,i.ref(12),i.ge(3)),2592e6),i.tw(i.cw(0,i.a([i.ref(14),i.ref(7)]),i.ge(3)),2592e6))),72255:i.q(i.ocq(i.cw(1,i.os(i.e,8,[5667108370,5666180610,5667108367,5666180565,5658858169]),i.ge(1)),i.cw(1,i.os(i.e,8,[5639608238,5636565339,5615568360,5593752629,5588478139,5567562134,5567348605,5567348593]),i.ge(1)))),72256:i.q(i.ocq(i.cw(1,i.os(i.e,8,[5667098314,5667098296,5667098158,5667098095,5659438063]),i.ge(1)),i.cw(1,i.os(i.e,8,[5638040547,5637607429,5616729034,5593472095,5588694434,5567554226,5567340667,5567340658]),i.ge(1)))),72257:i.q(i.ocq(i.cw(1,i.os(i.e,8,[5667814001,5667813965,5667813797,5666161599,5571596365]),i.ge(1)),i.cw(1,i.os(i.e,8,[5639585033,5638069901,5615554794,5592335463,5588681015,5567331106,5567327242,5567327233]),i.ge(1)))),73221:i.q(i.cw(1,i.os(i.e,6,[2817956546,2832096478,2781849998,2843217349]),i.ge(1))),73285:i.q(i.cw(0,i.a([i.ref(6),i.os(i.w,3,[55,116,80])]),i.ge(1))),73287:i.q(i.cw(0,i.a([i.ref(6),i.os(i.w,3,[111,70,53,105,54])]),i.ge(1))),73288:i.q(i.cw(0,i.a([i.y(3,503),i.ref(6)]),i.ge(1))),73289:i.q(i.cw(0,i.a([i.ref(6),i.os(i.w,3,[259,505,468,243])]),i.ge(1))),73290:i.q(i.cw(0,i.a([i.y(3,514),i.ref(6)]),i.ge(1))),73291:i.q(i.cw(0,i.a([i.y(3,511),i.ref(6)]),i.ge(1))),73292:i.q(i.cw(0,i.a([i.y(3,498),i.ref(6)]),i.ge(1))),73402:i.q(i.ocq(i.ocq(i.ocq(i.tw(i.cw(0,i.ref(17),i.ge(3)),2592e6),i.tw(i.cw(0,i.os(i.cx,10,[68,121,158,59,21]),i.ge(1)),2592e6)),i.tw(i.cw(0,i.os(i.cx,14,[367,382,288,424,"Neil O\'Sullivan",364,347,447,389,"Simon de Burton","Esther Bintliff","Cherish Rufus","Anthony Lavelle","Henry Mance","Maria Crawford","Nathan Brooker",390,405,221,233,"Lorien Kite",350,362,301,280,434,217,289,297,"Laura Battle","David Cheal",406,"Paul Gould","Frederick Studenmann",370,419,218,310,209,348,279,404,415,358,418,281,435,92,"Aaliyah Harris","William Skidelsky","John Gapper","Casper Henderson","Max Liu","James Lovegrove","Nilanjana Roy",359,282,338,433,"Alice Hancock",417,"Ludovic Hunter-Tilney","David Honigmann","Michael Hann","Lorna Goodison","Anna Nicolaou","Tom Faber","Raphael Abraham","Tobias Grey","Danny Leigh","Marc C O\'Flaherty","Luke Edward Hall","Rosalind Sykes","Enuma Okoro",344,374,304,298,380,360,343,193,"Peter Aspden","Suzi Feay","Edwin Heathcote","Deyan Sudjic",377]),i.ge(1)),2592e6)),i.tw(i.cw(0,i.a([i.ref(17),i.os(i.w,23,["Opinion",227,411])]),i.ge(1)),2592e6))),73748:i.q(i.tw(i.cw(0,i.os(i.cx,2,[290,"Ethereum","Bitcoin",303]),i.ge(4)),2592e6)),73763:i.q(i.cw(1,i.pe(6,2814253884),i.ge(1))),74123:i.q(i.cw(1,i.pe(6,2822354159),i.ge(1))),74145:i.q(i.tw(i.cw(0,i.os(i.cx,2,["Telecoms",273]),i.ge(4)),24192e5)),74203:i.q(i.isp("financial_times_redshift","UPL074",!1,"74203")),74349:i.q(i.ocq(i.ocq(i.ocq(i.cw(1,i.os(i.e,8,[5785299779,5783410200,5674455281,5672031003,5674455293,5672141202,562492406,5624397493,5624397352,5624397343,5624397325,5624397295,5624397277,5624924087,5624397259,5624397244,5624397112,5624397094,5624397079,5624397064,5624397043]),i.ge(1)),i.cw(0,i.os(i.w,30,["d6a37d7c-e3aa-4d62-a6c9-b423935f660e","8a82cc23-f63b-467a-9212-9353f25287a5","0d35bb5e-d33c-4338-8a67-a22785ffb692","751ec9a1-331a-4c90-8f67-2582a7f76c85","0f18c154-e0ab-4e59-b717-5771af069df2","36f67744-2ef7-4386-ab00-29aeb07ca267"]),i.ge(1))),i.cw(7,i.ps(24,"www.ft.com/globetrotter/singapore"),i.ge(1))),i.cw(0,i.ps(1,"www.ft.com/partnercontent/singapore-tourism-board"),i.ge(1)))),74452:i.q(i.tw(i.cw(0,i.ps(1,482),i.ge(3)),3888e6)),74657:i.q(i.ocq(i.ocq(i.tw(i.cw(0,i.os(i.cx,2,[33,48,439,446,66,46,36,27]),i.ge(2)),2592e6),i.tw(i.cw(0,i.os(i.cx,14,[364,347,406,359,282,338,433,344,374,304,298,380,360,343,193,377]),i.ge(1)),2592e6)),i.tw(i.cw(0,i.a([i.ref(29),i.os(i.cx,2,[439,446,66,46,36,27])]),i.ge(1)),2592e6))),74659:i.q(i.ocq(i.ocq(i.ocq(i.tw(i.cw(0,i.ref(18),i.ge(2)),2592e6),i.tw(i.cw(0,i.pc_(10,121),i.ge(1)),2592e6)),i.tw(i.cw(0,i.a([i.ref(29),i.ref(18)]),i.ge(1)),7776e6)),i.tw(i.cw(0,i.os(i.cx,14,[372,363,390,405,221,233,350,193]),i.ge(1)),2592e6))),74660:i.q(i.ocq(i.ocq(i.ocq(i.tw(i.cw(0,i.ref(8),i.ge(2)),2592e6),i.tw(i.cw(0,i.os(i.cx,14,["Rachel Garrahan",382,447,389,434]),i.ge(1)),7776e6)),i.tw(i.cw(0,i.a([i.y(23,97),i.ref(8)]),i.ge(1)),7776e6)),i.tw(i.cw(0,i.a([i.os(i.cx,10,[68,21,59,122]),i.ref(8)]),i.ge(1)),7776e6))),74661:i.q(i.ocq(i.ocq(i.ocq(i.tw(i.cw(0,i.ref(11),i.ge(2)),2592e6),i.tw(i.cw(0,i.os(i.w,30,["52ac7efe-fd6e-41eb-ab9e-969b26067657","50916cbf-4a93-4208-b9b1-93afdd48c8d9","3cac455e-e9be-498f-8d51-2d250513d7de","b0f9f030-9eef-410b-aa12-b4cebb2f866f","be97a91f-8b2e-4a1d-a6c8-30847c5e1c8d"]),i.ge(1)),7776e6)),i.tw(i.cw(0,i.pc_(14,217),i.ge(1)),2592e6)),i.tw(i.cw(0,i.a([i.os(i.cx,10,[68,122,21,59]),i.ref(11)]),i.ge(1)),2592e6))),74662:i.q(i.ocq(i.ocq(i.tw(i.cw(0,i.os(i.cx,2,[231,"Philanthropy"]),i.ge(3)),2592e6),i.tw(i.cw(0,i.os(i.cx,10,[385,194,68]),i.ge(3)),2592e6)),i.tw(i.cw(0,i.os(i.cx,14,["Leslie Hook","Camilla Hodgson","Sara Semic","Rosanna Dodds","Esther Blintiff"]),i.ge(1)),2592e6))),74664:i.q(i.ocq(i.ocq(i.tw(i.cw(0,i.ref(0),i.ge(1)),2592e6),i.tw(i.cw(0,i.a([i.os(i.cx,10,[97,21]),i.ref(0)]),i.ge(1)),2592e6)),i.tw(i.cw(0,i.os(i.cx,14,["Baya Simons","Alice Cavanagh","Carolyn Asome",346,288,362,217,289,297,370,419,218,310,209]),i.ge(1)),7776e6))),74665:i.q(i.acq(i.ocq(i.ocq(i.ocq(i.tw(i.cw(0,i.ref(22),i.ge(2)),2592e6),i.tw(i.cw(0,i.os(i.cx,10,[68,158]),i.ge(1)),7776e6)),i.tw(i.cw(0,i.os(i.cx,14,["Fuchsia Dunlop",372,363,424,301,280,348,279,404,415,358,418,281,435,92,417]),i.ge(1)),2592e6)),i.tw(i.cw(0,i.os(i.w,23,[227,411]),i.ge(1)),7776e6)),i.ocq(i.cw(0,i.ref(22),i.ge(1)),i.tw(i.cw(0,i.a([i.ref(29),i.os(i.cx,2,[81,78,72,50,77,203,200,198,204,197,205,199,201,202,41,143,40,87,88,93,26,23,38,47,36,37,32,22,34,30,43,20])]),i.ge(1)),2592e6)))),74990:i.q(i.cw(1,i.os(i.e,6,[2786651995,2746287099]),i.ge(1))),75311:i.q(i.cw(1,i.pe(6,2866636014),i.ge(1))),75636:i.q(i.cw(3,i.ref(16),i.ge(1))),75640:i.q(i.ocq(i.ocq(i.cw(1,i.ref(16),i.ge(3)),i.cw(3,i.ref(16),i.ge(1))),i.scq(i.cw(2,i.a([i.pg(21,40),i.ref(19)])),i.vq(i.sw(5,i.ref(19),["properties","engaged_time"],i.g(40))),i.ge(1)))),75854:i.q(i.acq(i.ocq(i.ocq(i.ocq(i.ocq(i.isp("financial_times_redshift","UPL040",!1,"75854"),i.isp("financial_times_redshift","UPL041",!1,"75854")),i.isp("financial_times_redshift","UPL042",!1,"75854")),i.isp("financial_times_redshift","UPL027",!1,"75854")),i.isp("financial_times_redshift","UPL033",!1,"75854")),i.tw(i.cw(0,i.ref(6),i.ge(1)),72576e5))),75874:i.q(i.acq(i.ocq(i.ocq(i.ocq(i.isp("financial_times_redshift","UPL037",!1,"75874"),i.isp("financial_times_redshift","UPL026",!1,"75874")),i.isp("financial_times_redshift","UPL038",!1,"75874")),i.isp("financial_times_redshift","UPL039",!1,"75874")),i.tw(i.cw(0,i.ref(6),i.ge(1)),72576e5))),75963:i.q(i.tw(i.cw(0,i.pc_(2,230),i.ge(3)),2592e6)),76328:i.q(i.cw(1,i.pe(6,2842744773),i.ge(1))),76378:i.q(i.cw(0,i.ps(1,"channels.ft.com/transact/explore-seven-mega-trends-set-shape-post-pandemic-world"),i.ge(1))),76402:i.q(i.ocq(i.tw(i.cw(0,i.pc_(2,208),i.ge(3)),24192e5),i.tw(i.cw(0,i.as(i.cx,2,[24,195]),i.ge(3)),24192e5))),76414:i.q(i.tw(i.cw(0,i.os(i.cx,2,[402,"Renting property",223,407,160]),i.ge(3)),24192e5)),76507:i.q(i.tw(i.cw(0,i.a([i.ref(6),i.os(i.w,5,[104,79,103,102])]),i.ge(1)),72576e5)),76510:i.q(i.tw(i.cw(0,i.o([i.os(i.w,4,[115,110,109]),i.os(i.w,3,[178,169])]),i.ge(1)),72576e5)),76799:i.q(i.ocq(i.tw(i.cw(0,i.os(i.cx,10,[121,59,158,68,21]),i.ge(1)),2592e6),i.tw(i.cw(0,i.os(i.cx,10,[94,51,29,90,66,85,98,74,52,40,43,42,49,84,96,64,65,37,27,73,22,61,28,81,78,72,26,82,41,86,39,57,46,89,77,101,50,60,71,34,62,56,20,38,58,47,31,63,36,48,33,32,69,30,99,25,23,35]),i.ge(3)),2592e6))),76800:i.q(i.ocq(i.tw(i.cw(0,i.os(i.cx,10,[158,59,121,68,21]),i.ge(1)),2592e6),i.tw(i.cw(0,i.ref(17),i.ge(1)),2592e6))),76980:i.q(i.tw(i.cw(0,i.a([i.y(7,44),i.os(i.s,1,[1,0])]),i.ge(1)),6048e5)),76981:i.q(i.cw(0,i.a([i.y(7,44),i.ps(13,"subs.ft.com")]),i.ge(1))),77423:i.q(i.tw(i.cw(0,i.os(i.s,12,["dani rodrik: we are in a chronic state of shortage of good jobs","economists exchange","gita gopinath: fiscal policy plays an essential role in recovery","kristalina georgieva: we are in a resilient place but cannot take stability for granted","larry summers: im concerned that what is being done is substantially excessive","more productive ways of working","philip lane: we have a unique initiative in europe now  it is really quite something","raghuram rajan: society has to find a new equilibrium","the bank of englands chief economist calls on policymakers to jolt companies towards fairer"]),i.ge(1)),48384e5)),77425:i.q(i.cw(1,i.pe(6,2760141805),i.ge(3))),77426:i.q(i.cw(3,i.pe(6,2760141805),i.ge(1))),77520:i.q(i.ocq(i.ocq(i.tw(i.cw(0,i.ref(27),i.ge(3)),24192e5),i.tw(i.cw(0,i.ref(28),i.ge(3)),24192e5)),i.tw(i.cw(0,i.pc_(10,21),i.ge(3)),24192e5))),77524:i.q(i.cw(1,i.pe(6,2825178462),i.ge(3))),77533:i.q(i.cw(1,i.os(i.e,6,[2841413018,2831659582]),i.ge(3))),77721:i.q(i.isp("financial_times_redshift","UPL076",!1,"77721")),77841:i.q(i.acq(i.cw(0,i.ref(6),i.ge(1)),i.tw(i.cw(0,i.t,i.ge(3)),72576e5))),77848:i.q(i.acq(i.cw(0,i.ref(6),i.ge(1)),i.tw(i.cw(0,i.t,i.ge(1)),72576e5))),77849:i.q(i.acq(i.cw(0,i.ref(6),i.ge(1)),i.tw(i.cw(0,i.t,i.ge(2)),72576e5))),78740:i.q(i.ocq(i.cw(0,i.ps(1,244),i.ge(1)),i.cw(0,i.a([i.ps(0,244),i.ps(13,244)]),i.ge(1)))),78741:i.q(i.cw(4,i.a([i.pe(19,.5),i.ps(1,"channels.ft.com/en/howtospendit")]),i.ge(1))),78743:i.q(i.cw(3,i.pe(6,2843367074),i.ge(1))),78924:i.q(i.cw(0,i.pe(15,"Belgium"),i.ge(1))),79074:i.q(i.cw(1,i.pe(6,2760141805),i.ge(1))),79157:i.q(i.tw(i.cw(0,i.a([i.ref(6),i.os(i.w,5,[464,476,261,257,267,519,520])]),i.ge(1)),72576e5)),79176:i.q(i.tw(i.cw(0,i.y(4,3),i.ge(3)),72576e5)),79183:i.q(i.ocq(i.tw(i.cw(0,i.a([i.y(0,2),i.os(i.s,1,["rankings.ft.com/rankings/2142/global-mba-ranking-2015","rankings.ft.com/rankings/2152/online-mba-ranking-2015","rankings.ft.com/rankings/2632/global-mba-ranking-2016","rankings.ft.com/rankings/2634/online-mba-ranking-2016","rankings.ft.com/rankings/2710/global-mba-ranking-2017","rankings.ft.com/rankings/2711/online-mba-ranking-2017","rankings.ft.com/rankings/2808/global-mba-ranking-2018","rankings.ft.com/rankings/2809/online-mba-ranking-2018","rankings.ft.com/rankings/2825/global-mba-ranking-2019","rankings.ft.com/rankings/2826/online-mba-ranking-2019","rankings.ft.com/rankings/2837/global-mba-ranking-2020","rankings.ft.com/rankings/2838/online-mba-ranking-2020","rankings.ft.com/rankings/2859/global-mba-ranking-2021","rankings.ft.com/rankings/2860/online-mba-ranking-2021","rankings.ft.com/rankings/2866/mba-2022"])]),i.ge(1)),7776e6),i.tw(i.cw(0,i.a([i.y(0,2),i.os(i.s,1,["/global-mba-ranking-20","/mba-202","/online-mba-ranking-20"])]),i.ge(1)),7776e6))),79184:i.q(i.ocq(i.tw(i.cw(0,i.a([i.y(0,2),i.os(i.s,1,["rankings.ft.com/rankings/2452/executive-mba-ranking-2015","rankings.ft.com/rankings/2674/executive-mba-ranking-2016","rankings.ft.com/rankings/2766/executive-mba-ranking-2017","rankings.ft.com/rankings/2818/executive-mba-ranking-2018","rankings.ft.com/rankings/2832/executive-mba-ranking-2019","rankings.ft.com/rankings/2848/executive-mba-ranking-2020","rankings.ft.com/rankings/2863/emba-2021"])]),i.ge(1)),7776e6),i.tw(i.cw(0,i.a([i.y(0,2),i.os(i.s,1,["/emba-202","/executive-mba-ranking-20"])]),i.ge(1)),7776e6))),79187:i.q(i.ocq(i.tw(i.cw(0,i.a([i.y(0,2),i.os(i.s,1,["rankings.ft.com/home/masters-in-management","rankings.ft.com/rankings/2282/masters-in-management-2015","rankings.ft.com/rankings/2654/masters-in-management-2016","rankings.ft.com/rankings/2736/masters-in-management-2017","rankings.ft.com/rankings/2817/masters-in-management-2018","rankings.ft.com/rankings/2829/masters-in-management-2019","rankings.ft.com/rankings/2847/masters-in-management-2020","rankings.ft.com/rankings/5/masters-in-management-2021"])]),i.ge(1)),7776e6),i.tw(i.cw(0,i.a([i.y(0,2),i.ps(1,"/masters-in-management-20")]),i.ge(1)),7776e6))),79188:i.q(i.ocq(i.tw(i.cw(0,i.a([i.y(0,2),i.os(i.s,1,["rankings.ft.com/home/executive-education","rankings.ft.com/rankings/2162/executive-education-open-2015","rankings.ft.com/rankings/2172/executive-education-customised-2015","rankings.ft.com/rankings/2635/executive-education-customised-2016","rankings.ft.com/rankings/2636/executive-education-open-2016","rankings.ft.com/rankings/2713/executive-education-open-2017","rankings.ft.com/rankings/2714/executive-education-customised-2017","rankings.ft.com/rankings/2812/executive-education-customised-2018","rankings.ft.com/rankings/2813/executive-education-open-2018","rankings.ft.com/rankings/2827/executive-education-customised-2019","rankings.ft.com/rankings/2828/executive-education-open-2019","rankings.ft.com/rankings/2839/executive-education-customised-2020","rankings.ft.com/rankings/2840/executive-education-open-2020","rankings.ft.com/rankings/2861/executive-education-open-directory-2021","rankings.ft.com/rankings/2862/executive-education-custom-directory-2021"])]),i.ge(1)),7776e6),i.tw(i.cw(0,i.a([i.y(0,2),i.os(i.s,1,["/executive-education-custom-directory-202","/executive-education-customised-20","/executive-education-open-20","/executive-education-open-directory-202"])]),i.ge(1)),7776e6))),79190:i.q(i.ocq(i.tw(i.cw(0,i.a([i.y(0,2),i.os(i.s,1,["rankings.ft.com/home/masters-in-finance","rankings.ft.com/rankings/2/masters-in-finance-post-experience-2021","rankings.ft.com/rankings/2271/masters-in-finance-pre-experience-2015","rankings.ft.com/rankings/2281/masters-in-finance-post-experience-2015","rankings.ft.com/rankings/2650/masters-in-finance-pre-experience-2016","rankings.ft.com/rankings/2652/masters-in-finance-post-experience-2016","rankings.ft.com/rankings/2733/masters-in-finance-post-experience-2017","rankings.ft.com/rankings/2734/masters-in-finance-pre-experience-2017","rankings.ft.com/rankings/2814/masters-in-finance-pre-experience-2018","rankings.ft.com/rankings/2815/masters-in-finance-post-experience-2018","rankings.ft.com/rankings/2842/masters-in-finance-pre-experience-2020","rankings.ft.com/rankings/2843/masters-in-finance-post-experience-2020","rankings.ft.com/rankings/2864/masters-in-finance-pre-experience-2021"])]),i.ge(1)),7776e6),i.tw(i.cw(0,i.a([i.y(0,2),i.os(i.s,1,["/masters-in-finance-post-experience-20","/masters-in-finance-pre-experience-20"])]),i.ge(1)),7776e6))),79436:i.q(i.tw(i.cw(0,i.ref(2),i.ge(1)),72576e5)),80663:i.q(i.cw(0,i.os(i.s,1,["/partnercontent/accenture/"]),i.ge(1))),81249:i.q(i.cw(3,i.os(i.e,6,[2809599818,2859865676]),i.ge(1))),81250:i.q(i.cw(1,i.os(i.e,6,[2859865676,2809599818]),i.ge(3))),81707:i.q(i.tw(i.cw(0,i.ref(6),i.ge(1)),7776e6)),81780:i.q(i.tw(i.cw(0,i.af_u(["properties","user","followedConcepts"],i.e_(["name"],"Technology")),i.ge(1)),7776e6)),81781:i.q(i.tw(i.cw(0,i.af_u(["properties","user","followedConcepts"],i.e_(["name"],"Innovation")),i.ge(1)),7776e6)),81782:i.q(i.tw(i.cw(0,i.af_u(["properties","user","followedConcepts"],i.e_(["name"],"Renewable energy")),i.ge(1)),7776e6)),81783:i.q(i.tw(i.cw(0,i.af_u(["properties","user","followedConcepts"],i.o([i.e_(["name"],"Carbon Trading"),i.e_(["name"],"Carbon trading"),i.e_(["name"],"Carbon capture and storage")])),i.ge(1)),7776e6)),81784:i.q(i.tw(i.cw(0,i.af_u(["properties","user","followedConcepts"],i.e_(["name"],"Natural gas")),i.ge(1)),7776e6)),81785:i.q(i.tw(i.cw(0,i.af_u(["properties","user","followedConcepts"],i.e_(["name"],"Fintech")),i.ge(1)),7776e6)),81786:i.q(i.tw(i.cw(0,i.af_u(["properties","user","followedConcepts"],i.e_(["name"],"Digital health")),i.ge(1)),7776e6)),81787:i.q(i.tw(i.cw(0,i.af_u(["properties","user","followedConcepts"],i.e_(["name"],"Sustainability")),i.ge(1)),7776e6)),81788:i.q(i.tw(i.cw(0,i.af_u(["properties","user","followedConcepts"],i.e_(["name"],"Sustainable capitalism")),i.ge(1)),7776e6)),81789:i.q(i.tw(i.cw(0,i.af_u(["properties","user","followedConcepts"],i.e_(["name"],"Scientific research")),i.ge(1)),7776e6)),81790:i.q(i.tw(i.cw(0,i.af_u(["properties","user","followedConcepts"],i.e_(["name"],"Future of work")),i.ge(1)),7776e6)),81791:i.q(i.tw(i.cw(0,i.af_u(["properties","user","followedConcepts"],i.e_(["name"],"Corporate social responsibility")),i.ge(1)),7776e6)),81792:i.q(i.tw(i.cw(0,i.af_u(["properties","user","followedConcepts"],i.e_(["name"],"ESG investing")),i.ge(1)),7776e6)),81793:i.q(i.tw(i.cw(0,i.af_u(["properties","user","followedConcepts"],i.e_(["name"],"Infrastructure investment")),i.ge(1)),7776e6)),81794:i.q(i.tw(i.cw(0,i.af_u(["properties","user","followedConcepts"],i.o([i.y_(["name"],290),i.y_(["name"],303)])),i.ge(1)),7776e6)),81795:i.q(i.tw(i.cw(0,i.af_u(["properties","user","followedConcepts"],i.o([i.y_(["name"],215),i.y_(["name"],145)])),i.ge(1)),7776e6)),84257:i.q(i.cw(1,i.pe(6,2844429246),i.ge(1))),85612:i.q(i.acq(i.cw(0,i.ref(6),i.ge(1)),i.tw(i.cw(0,i.t,i.ge(3)),24192e5))),85622:i.q(i.ocq(i.ocq(i.isp("financial_times_redshift","UPL006",!1,"85622"),i.cw(0,i.pc_(10,307),i.ge(3))),i.cw(0,i.os(i.s,0,["ft.com/due-diligence"]),i.ge(1)))),85906:i.q(i.ocq(i.tw(i.cw(0,i.ref(12),i.ge(3)),3888e6),i.tw(i.cw(0,i.a([i.ref(14),i.ref(7)]),i.ge(3)),3888e6))),85907:i.q(i.ocq(i.tw(i.cw(0,i.ref(12),i.ge(3)),5184e6),i.tw(i.cw(0,i.a([i.ref(14),i.ref(7)]),i.ge(3)),5184e6))),85908:i.q(i.ocq(i.tw(i.cw(0,i.ref(12),i.ge(3)),7776e6),i.tw(i.cw(0,i.a([i.ref(14),i.ref(7)]),i.ge(3)),7776e6))),86173:i.q(i.ocq(i.tw(i.cw(0,i.os(i.s,1,["app.ft.com/stream/climatecapital","www.ft.com/climate-capital"]),i.ge(3)),7776e6),i.tw(i.cw(0,i.pc_(10,194),i.ge(3)),7776e6))),86956:i.q(i.acq(i.cw(0,i.a([i.y(7,8),i.ref(26)]),i.ge(1)),i.cw(0,i.y(15,100),i.ge(1)))),87626:i.q(i.cw(1,i.pe(6,2911694064),i.ge(1))),87678:i.q(i.cw(0,i.a([i.ref(6),i.os(i.w,5,[70,261,470,501])]),i.ge(1))),87696:i.q(i.tw(i.cw(0,i.t,i.ge(3)),24192e5)),87738:i.q(i.acq(i.tw(i.cw(0,i.a([i.ref(15),i.ref(1)]),i.ge(5)),6048e5),i.tw(i.cw(0,i.a([i.ref(15),i.ref(1)]),i.le(264)),6048e5))),87739:i.q(i.acq(i.tw(i.cw(0,i.a([i.ref(15),i.ref(1)]),i.ge(14)),6048e5),i.tw(i.cw(0,i.a([i.ref(15),i.ref(1)]),i.le(264)),6048e5))),87740:i.q(i.acq(i.tw(i.cw(0,i.a([i.ref(15),i.ref(1)]),i.ge(39)),6048e5),i.tw(i.cw(0,i.a([i.ref(15),i.ref(1)]),i.le(264)),6048e5))),87741:i.q(i.acq(i.tw(i.cw(0,i.a([i.ref(15),i.ref(1)]),i.ge(6)),2592e6),i.tw(i.cw(0,i.a([i.ref(15),i.ref(1)]),i.le(1049)),2592e6))),87742:i.q(i.acq(i.tw(i.cw(0,i.a([i.ref(15),i.ref(1)]),i.ge(24)),2592e6),i.tw(i.cw(0,i.a([i.ref(15),i.ref(1)]),i.le(1049)),2592e6))),87744:i.q(i.acq(i.tw(i.cw(0,i.a([i.ref(15),i.ref(1)]),i.ge(96)),2592e6),i.tw(i.cw(0,i.a([i.ref(15),i.ref(1)]),i.le(1049)),2592e6))),88113:i.q(i.acq(i.tw(i.cw(0,i.a([i.ref(15),i.ref(25)]),i.ge(5)),6048e5),i.tw(i.cw(0,i.a([i.ref(15),i.ref(25)]),i.le(264)),6048e5))),88865:i.q(i.ocq(i.tw(i.cw(0,i.a([i.y(0,2),i.os(i.s,1,["rankings.ft.com/home/regional-rankings","rankings.ft.com/rankings/2482/european-business-school-rankings-2015","rankings.ft.com/rankings/2688/european-business-school-rankings-2016","rankings.ft.com/rankings/2772/european-business-school-rankings-2017","rankings.ft.com/rankings/2824/european-business-school-rankings-2018","rankings.ft.com/rankings/2836/european-business-school-rankings-2019","rankings.ft.com/rankings/2858/european-business-school-rankings-2020","rankings.ft.com/rankings/2869/european-business-school-rankings-2021"])]),i.ge(1)),7776e6),i.tw(i.cw(0,i.a([i.y(0,2),i.ps(1,"/european-business-school-rankings-20")]),i.ge(1)),7776e6))),91003:i.q(i.cw(0,i.a([i.ref(6),i.os(i.w,5,[55,107,108])]),i.ge(1))),91328:i.q(i.cw(1,i.pe(6,2844429246),i.ge(50))),91345:i.q(i.cw(1,i.pe(6,2903990055),i.ge(1))),92621:i.q(i.acq(i.tw(i.cw(0,i.a([i.ref(15),i.ref(25)]),i.ge(9)),6048e5),i.tw(i.cw(0,i.a([i.ref(15),i.ref(25)]),i.le(264)),6048e5))),92622:i.q(i.acq(i.tw(i.cw(0,i.a([i.ref(15),i.ref(1)]),i.ge(22)),2592e6),i.tw(i.cw(0,i.a([i.ref(15),i.ref(1)]),i.le(1049)),2592e6))),94606:i.q(i.cw(0,i.os(i.s,1,["ft-energy-source"]),i.ge(1))),94607:i.q(i.cw(1,i.pe(6,2837857131),i.ge(1))),94608:i.q(i.cw(1,i.pe(6,2837857131),i.ge(3))),95434:i.q(i.isp("financial_times_redshift","UPL095",!1,"95434")),95472:i.q(i.tw(i.cw(1,i.pe(6,2932534492),i.ge(11)),6048e5)),98074:i.q(i.ocq(i.tw(i.cw(0,i.os(i.s,1,["app.ft.com/stream/ft-wealth","https://www.ft.com/ft-wealth"]),i.ge(3)),5184e6),i.tw(i.cw(0,i.pc_(10,323),i.ge(3)),5184e6))),98331:i.q(i.cw(1,i.pe(6,2932534492),i.ge(1))),99503:i.q(i.tw(i.cw(0,i.os(i.cx,2,["Climate science",148,239,228,125,126,127]),i.ge(3)),24192e5)),99504:i.q(i.cw(1,i.pe(6,2910679366),i.ge(3))),99536:i.q(i.tw(i.cw(3,i.ref(23),i.ge(1)),2592e6)),99689:i.q(i.tw(i.cw(0,i.af_u(["properties","user","followedConcepts"],i.e_(["name"],"Workplace diversity & equality")),i.ge(1)),7776e6))}||{},queriesByEvent:{"!UpdateSecondPartyData":["101171","102103","102153","102213","106717","109944","113583","115709","117084","121034","124690","17075","17117","17135","17138","17185","18314","18731","18732","18733","18734","18797","18803","18805","18806","18807","20531","20534","20710","20714","20715","21070","21538","22514","22515","24101","24102","24103","24104","24105","24106","24245","24339","26440","26442","26443","27111","29255","29259","30221","30222","30251","32094","32095","38823","51098","51099","51100","51101","58181","58310","67199","74203","75854","75874","77721","85622","95434"],AdImpressionTracker:["55935"],FormSubmission:["17176"],LinkClick:["55935","56093","56274","56623","74349"],Pageview:["101060","101061","101171","102103","102153","102212","102213","102214","103258","104406","106717","106751","109309","109741","113877","113878","113879","113880","116599","117171","117680","120985","122044","122045","122046","122047","122049","122051","122054","122721","125008","16780","16781","16782","16841","16842","16843","16982","16987","17068","17075","17124","17125","17127","17128","17138","17173","17174","17176","17180","17182","17183","17186","17187","17427","18212","18238","18239","18240","18245","18246","18247","18248","18250","18253","18254","18259","18260","18262","18263","18264","18266","18268","18269","18270","18271","18294","18295","18296","18297","18298","18299","18300","18310","18312","18313","18314","18315","18316","18317","18318","18319","18320","18321","18322","18323","18356","18365","18437","18439","18440","18443","18444","18445","18735","18737","18790","18791","19597","19669","19902","20008","20277","20278","20279","20280","20281","20282","20283","20431","20469","20494","20645","20646","21070","21267","21535","21538","21540","21541","21548","21615","21670","22407","22408","22409","22410","22411","22412","22529","22567","22581","22598","22600","22710","22892","22990","23027","23832","23833","23835","23852","23853","23937","24244","24245","24324","24978","27314","27315","27316","27317","27318","27320","27321","27323","27324","27326","27327","27330","27331","27332","27333","27334","27335","27336","27338","27339","27340","27342","27343","27344","27345","27346","27347","27348","27349","27350","27351","27352","27353","27354","27355","27356","27357","27358","27359","27360","27361","27362","27363","27364","27365","27366","27367","27368","27369","27370","27371","27372","27373","27374","27375","27376","27377","27378","27379","27380","27382","27384","27385","27386","27387","27388","27389","27390","27391","27392","27393","27394","27395","27396","27397","27398","27399","27400","27706","27708","27710","27711","27714","28394","28714","30363","30365","30366","30367","30368","30369","31187","32729","33786","34989","35747","37314","38340","38341","38342","38343","38344","38345","38346","38352","38353","38354","38355","38356","38357","38358","38359","38360","38361","38362","38470","38472","38473","38474","38475","38476","38477","38478","38479","38497","38498","38819","38827","41489","42437","42438","42439","46677","46761","46762","46763","47473","47493","52127","52133","55914","55934","56089","56090","56274","62486","66495","66564","71282","71287","73285","73287","73288","73289","73290","73291","73292","73402","73748","74145","74349","74452","74657","74659","74660","74661","74662","74664","74665","75854","75874","75963","76378","76402","76414","76507","76510","76799","76800","76980","76981","77423","77520","77841","77848","77849","78740","78924","79157","79176","79183","79184","79187","79188","79190","79436","80663","81707","81780","81781","81782","81783","81784","81785","81786","81787","81788","81789","81790","81791","81792","81793","81794","81795","85612","85622","85906","85907","85908","86173","86956","87678","87696","87738","87739","87740","87741","87742","87744","88113","88865","91003","92621","92622","94606","98074","99503","99689"],PageviewComplete:["17183","20008","20833","21070","26090","26091","26376","26380","26381","26383","55914","55934","75640"],PageviewEngagement:["26090","26091","26376","26380","26381","26383","75640"],SegmentEntry:["17183","20008","20833","21070","55914","55934"],SlotClicked:["18782","33806","43538","55914","56093","56274","56623","75636","75640","77426","78743","81249","99536"],SlotViewable:["100186","101387","101388","101389","104170","104405","104640","105294","105978","105979","108525","108526","109466","114692","123787","124792","125770","126197","18212","18310","18737","19676","20280","20428","21174","21216","21217","22226","22391","22392","22393","22395","22529","23805","23956","25136","26090","26091","34414","34415","36987","36988","36989","38068","38305","41193","41209","43274","43393","43538","46637","46638","46639","46996","49964","52520","54358","54639","55241","55935","57152","57517","57756","72255","72256","72257","73221","73763","74123","74349","74990","75311","75640","76328","77425","77524","77533","79074","81250","84257","87626","91328","91345","94607","94608","95472","98331","99504"],VideoEngagement:["23011","42441","47581","47583","47584","47585","47586","52142","78741"]}||{}}}();!function(e){const n=self;function t(e,t,r,i){function o(t){if("function"!=typeof n.postMessage)return e.ports[0].postMessage(t);n.postMessage(t)}if(!r)return o([t,null,i]);"undefined"!=typeof console&&"error"in console&&console.error("Worker caught an error:",r),o([t,r])}n.addEventListener("message",(function(n){if(r=n,!Array.isArray(r.data)||2!==r.data.length)return;var r;const i=n.data,[o,a]=i;if("function"==typeof e)return function(e,n,r,i){const o=function(e,n){try{return{res:e(n)}}catch(e){return{err:e}}}(n,i);return Boolean(null===(a=o)||void 0===a?void 0:a.err)?t(e,r,o.err):!(c=o.res)||"object"!=typeof c&&"function"!=typeof c||"function"!=typeof c.then?t(e,r,null,o.res):void o.res.then((function(n){t(e,r,null,n)}),(function(n){t(e,r,n)}));var a,c}(n,e,o,a);t(n,o,new Error("Please pass a function into register()."))}))}((function(e){return((e,n)=>Rn(vt(e,n),(n=>Object.assign(Object.assign({},n),{userId:e.userId}))))(e,Lt)}))})();',"Worker",void 0,void 0)}var c=n(655);const u=()=>({kind:"null",value:null}),l=e=>({kind:"string",value:e}),d=e=>({kind:"number",value:e}),g=e=>({kind:"array",value:e}),f=e=>({kind:"object",value:e}),p=e=>e,m=()=>({kind:"bottom"}),h=e=>({kind:"inner",a:e}),w=e=>({kind:"top",error:e}),_=e=>({kind:"unbounded",group:e}),y=(e,t)=>({kind:"windowed",key:t,group:e}),v=(e,t,n)=>({kind:"countLimit",n,limit:t,group:e}),b=(e,t,n)=>({kind:"uniqueLimit",n,limit:t,group:e}),E=e=>({kind:"numberGroup",group:e}),k=e=>({kind:"stringGroup",group:e}),C=e=>({kind:"tuple",tuple:e}),P=e=>({state:e}),q=(e,t)=>({commands:e,payload:t});function S(e){return e}function A(e,t,n,i,r,o,s,a,c){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return i(n(t(e)));case 5:return r(i(n(t(e))));case 6:return o(r(i(n(t(e)))));case 7:return s(o(r(i(n(t(e))))));case 8:return a(s(o(r(i(n(t(e)))))));case 9:return c(a(s(o(r(i(n(t(e))))))));default:for(var u=arguments[0],l=1;l<arguments.length;l++)u=arguments[l](u);return u}}var L=function(e){return{equals:function(t,n){return t===n||e(t,n)}}},I=function(e){return L((function(t,n){for(var i in e)if(!e[i].equals(t[i],n[i]))return!1;return!0}))},M=function(e){return function(t,n){return t===n||0===e(t,n)}},D=function(e){return{equals:M(e),compare:function(t,n){return t===n?0:e(t,n)}}},x=function(e){return function(t){return D((function(n,i){return t.compare(e(n),e(i))}))}},O=function(e){return function(t,n){return-1===e.compare(t,n)}},T=function(e){return function(t,n){return 1===e.compare(t,n)}},U=function(e){return function(t,n){return t===n||e.compare(t,n)>-1?t:n}};var R={equals:function(e,t){return e===t}},G={equals:R.equals,compare:function(e,t){return e<t?-1:e>t?1:0}};const B=(e,t)=>{switch(e.kind){case"bottom":return{kind:"bottom"};case"inner":return h(t(e.a));case"top":return w(e.error)}},j=e=>D(((t,n)=>{if("bottom"===t.kind&&"bottom"===n.kind)return 0;if("bottom"===t.kind)return-1;if("bottom"===n.kind)return 1;if("top"===t.kind&&"top"===n.kind)return G.compare(t.error,n.error);if("top"===t.kind)return 1;if("top"===n.kind)return-1;if("inner"===t.kind&&"inner"===n.kind)return e.compare(t.a,n.a);throw new Error("Non exhaustive match in extendedAlgebraOrd")}));var N=function(e,t){for(var n=0,i=t.length,r=e.length;n<i;n++,r++)e[r]=t[n];return e},W=function(e){return"Some"===e._tag},F={_tag:"None"},K=function(e){return{_tag:"Some",value:e}},z=function(e){return"Left"===e._tag},$=(Object.prototype.hasOwnProperty,function(e){return N([e[0]],e.slice(1))});var H=F,V=K;function J(e){return function(t){return e(t)?V(t):H}}var Q=function(e){return"Left"===e._tag?H:V(e.right)},Y=function(e){return{equals:function(t,n){return t===n||(ne(t)?ne(n):!ne(n)&&e.equals(t.value,n.value))}}},Z=function(e){return{equals:Y(e).equals,compare:function(t,n){return t===n?0:te(t)?te(n)?e.compare(t.value,n.value):1:-1}}},X=function(e){return function(t){return ne(t)?H:V(e(t.value))}},ee=Q,te=W,ne=function(e){return"None"===e._tag},ie=function(e){return function(t){return ne(t)?e():t.value}};var re;re=void 0;var oe=function(e){return e[0]},se=oe;var ae=function(e,t){for(var n=0,i=t.length,r=e.length;n<i;n++,r++)e[r]=t[n];return e},ce=function(e){return e.length>0},ue=function(e,t){return e<0||e>=t.length},le=function(e){return function(t){return ae([e],t)}},de=le,ge=function(e){return function(t){return ae(ae([],t),[e])}},fe=ge,pe=$,me=function(e){return ce(e)?K(e):F},he=function(e){return function(t){for(var n=Math.max(0,Math.floor(t)),i=[e(0)],r=1;r<n;r++)i.push(e(r));return i}};var we=pe;var _e=function(e){return function(t){var n=Math.max(1,e);return n>=t.length?[we(t),[]]:[A(t.slice(1,n),de(ve(t))),t.slice(n)]}},ye=function(e){return L((function(t,n){return t.length===n.length&&t.every((function(t,i){return e.equals(t,n[i])}))}))},ve=se;var be={equals:function(e,t){return e===t}},Ee={equals:be.equals,compare:function(e,t){return e<t?-1:e>t?1:0}};var ke=function(e,t){return function(n){for(var i=n.length,r=e,o=0;o<i;o++)r=t(o,r,n[o]);return r}};var Ce=function(e){return 0===e.length},Pe=ce,qe=de,Se=fe,Ae=function(e,t){return e<=0?[]:he(t)(e)};var Le=ue,Ie=function(e){return function(t){return Le(e,t)?xe(t):t.slice(0,e)}};var Me=function(e,t){for(var n=e.length,i=0;i<n&&t(e[i]);i++);return i};var De=function(e){return function(t){return e<=0||Ce(t)?xe(t):e>=t.length?[]:t.slice(e,t.length)}};var xe=function(e){return e.slice()},Oe=function(e){return Ce(e)?[]:e.slice().reverse()},Te=function(e){return function(t){return t.length<=1?xe(t):t.slice().sort(e.compare)}},Ue=function(e,t,n){for(var i=[],r=Math.min(e.length,t.length),o=0;o<r;o++)i[o]=n(e[o],t[o]);return i};var Re=function(e){return function(t){return e>=1&&Pe(t)?_e(e)(t):Ce(t)?[xe(t),[]]:[[],xe(t)]}};var Ge=function(e){return function(t){return A(t,function(e){return function(t){for(var n=[],i=0;i<t.length;i++)n.push.apply(n,e(i,t[i]));return n}}((function(t,n){return e(n)})))}},Be=function(e){return function(t){for(var n=[],i=0;i<t.length;i++){var r=e(i,t[i]);W(r)&&n.push(r.value)}return n}},je=function(e){return Be((function(t,n){return e(n)}))},Ne=je(S),We=ke,Fe=function(e){var t=Ke(e);return function(e){return t((function(t,n){return e(n)}))}},Ke=function(e){return function(t){return We(e.of([]),(function(n,i,r){return e.ap(e.map(i,(function(e){return function(t){return A(e,Se(t))}})),t(n,r))}))}},ze=function(e){return D((function(t,n){for(var i=t.length,r=n.length,o=Math.min(i,r),s=0;s<o;s++){var a=e.compare(t[s],n[s]);if(0!==a)return a}return Ee.compare(i,r)}))},$e=function(e){return{_tag:"Left",left:e}},He=function(e){return{_tag:"Right",right:e}},Ve=function(e,t){return A(e,Ye(t))},Je=function(e,t){return A(e,Xe(t))},Qe="Either",Ye=function(e){return function(t){return tt(t)?t:He(e(t.right))}},Ze=He,Xe=function(e){return function(t){return tt(t)?t:tt(e)?e:He(t.right(e.right))}},et={URI:Qe,map:Ve,ap:Je,of:Ze},tt=z;var nt=function(e){return-1===e?1:1===e?-1:0};function it(e,t){return Ne(e.map(t))}function rt(e,t,n,i){const r=(e,t)=>{if(0===e.length)return Ne(t.map((e=>V({1:e[1],2:n(H,V(e[2]))}))));if(0===t.length)return Ne(e.map((e=>V({1:e[1],2:n(V(e[2]),H)}))));if(e.length>0&&t.length>0&&O(i)(e[0][1],t[0][1])){const[i,...o]=e,s=i[1],a=i[2];return qe({1:s,2:n(V(a),H)})(r(o,t))}if(e.length>0&&t.length>0&&T(i)(e[0][1],t[0][1])){const[i,...o]=t,s=i[1],a=i[2];return qe({1:s,2:n(H,V(a))})(r(e,o))}if(e.length>0&&t.length>0){const[i,...o]=e,[s,...a]=t,c=i[1],u=i[2],l=s[2];return qe({1:c,2:n(V(u),V(l))})(r(o,a))}throw new Error("Non exhaustive match in mapOption2")},o=x((e=>e[1]))(i),s=(e=>{const t=it(e,(e=>te(e[2])?V({1:e[1],2:e[2].value}):H));return 0===t.length?H:V(t)})(r(Te(o)([...e].map((e=>({1:e[0],2:e[1]})))),Te(o)([...t].map((e=>({1:e[0],2:e[1]}))))));return X((e=>new Map(e.map((e=>[e[1],e[2]])))))(s)}function ot(e,t,n,i){const r=x((e=>e[0]))(i),o=Te(r)([...t]).reduceRight(((e,t)=>{if(tt(e)){const i=n(t[1],e.left);return te(i)?$e(i.value):He(t[0])}return e}),$e(e));return ee(o)}function st(e,t){return new Map([...e].map(t))}function at(e,t){return new Map([...e].filter(t))}function ct(e){return JSON.stringify(ut(e))}function ut(e){switch(e.kind){case"null":return gt.encode(e);case"string":return ft.encode(e);case"number":return pt.encode(e);case"array":return mt.encode(e);case"object":return ht.encode(e)}}function lt(e){return null===e?gt.decode(e):"number"==typeof e?pt.decode(e):"string"==typeof e?ft.decode(e):Array.isArray(e)?mt.decode(e):ht.decode(e)}const dt=(e,t)=>$e(`Failed to decode. Input was ${JSON.stringify(e)}. Codec type was ${t}`),gt={encode:e=>null,decode:e=>null===e?He({kind:"null",value:null}):dt(e,"SimpleNull")},ft={encode:e=>e.value,decode:e=>"string"==typeof e?He(l(e)):dt(e,"SimpleString")},pt={encode:e=>e.value,decode:e=>"number"==typeof e?He(d(e)):dt(e,"SimpleNumber")},mt={encode:e=>e.value.map(ut),decode:e=>{if(Array.isArray(e)){const t=Fe(et)(lt)(e);return Ye(g)(t)}return dt(e,"SimpleArray")}},ht={encode:e=>{const t=[...e.value.entries()];return Object.assign({},...Array.from(t,(([e,t])=>({[e]:ut(t)}))))},decode:e=>{if(e&&e.constructor===Object){const t=Fe(et)((([e,t])=>A(lt(t),Ye((t=>function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e}(e,t))))))(Object.entries(e));return Ye((e=>f(new Map([...e]))))(t)}return dt(e,"SimpleObject")}};function wt(e){return A(e,yt,X(ct),ie((()=>"<encode error>")))}function _t(e){return X(Pt)(function(e){switch(e.state.kind){case"top":return V(l(e.state.error));case"bottom":return H;case"inner":return yt(e.state.a)}}(e))}function yt(e){return function(e){switch(e.kind){case"numberGroup":case"stringGroup":return vt(e.group);case"tuple":return e.tuple.length>0}}(e.payload)?V(g(function(e,t){const n=X((e=>qe(e)(t)))(e);return ie((()=>t))(n)}(X((e=>l(function(e){const t=e=>{switch(e){case"add":return"p";case"mul":return"m";case"max":return"v";case"min":return"n"}},n=e=>1===e[2]?t(e[1]):t(e[1])+JSON.stringify(e[2]);return e.map(n).join("")}(e))))(e.commands),function(e){const t=e=>{switch(e.kind){case"bottom":return{kind:"null",value:null};case"top":return l(e.error);case"inner":return d(e.a)}},n=e=>it([bt,Et,e=>A(e,Ct,f,V)],(t=>t(e))),i=e=>it([bt,kt,e=>A(e,Ct,(e=>st(e,(([e,t])=>[JSON.stringify(e),t]))),f,V)],(t=>t(e)));switch(e.kind){case"tuple":return e.tuple.map(t);case"stringGroup":return n(e.group);case"numberGroup":return i(e.group)}}(e.payload)))):H}function vt(e){switch(e.kind){case"unbounded":return e.group.size>0;case"windowed":return e.group.size>0||te(e.key);case"countLimit":case"uniqueLimit":return e.group.size>0||te(e.limit)}}function bt(e){switch(e.kind){case"unbounded":return H;case"windowed":return V(l("w"));case"countLimit":return V(l(1===e.n?"x":`x${e.n}`));case"uniqueLimit":return V(l(1===e.n?"u":`u${e.n}`))}}function Et(e){switch(e.kind){case"unbounded":return H;case"windowed":return V(l(te(e.key)?e.key.value:""));case"countLimit":case"uniqueLimit":return V(l(te(e.limit)?e.limit.value:""))}}function kt(e){switch(e.kind){case"unbounded":return H;case"windowed":return te(e.key)?V(d(e.key.value)):V({kind:"null",value:null});case"countLimit":case"uniqueLimit":return te(e.limit)?V(d(e.limit.value)):V({kind:"null",value:null})}}function Ct(e){switch(e.kind){case"unbounded":case"windowed":case"countLimit":case"uniqueLimit":return e.group}}function Pt(e){switch(e.kind){case"array":return 0===e.value.length?{kind:"null",value:null}:1===e.value.length?Pt(e.value[0]):g(e.value.map(Pt));case"object":return A(at(e.value,(([e,t])=>"null"!==t.kind)),(e=>st(e,(e=>[e[0],Pt(e[1])]))),f);default:return e}}function qt(e){const t=e=>{if(0===e.length)return{kind:"bottom"};const t=(e=>{if(4!==e.length)return H;const[t,n,i,r]=e;if("string"===t.kind&&"string"===n.kind&&"object"===r.kind){const e=J((e=>St(e[1].value)&&At(e[2].value)))({1:t,2:n});return X((e=>({prim:e[1].value,grp:e[2].value,cutoff:i,m:r.value})))(e)}return H})(e);if(te(t)){const{prim:e,grp:n,cutoff:i,m:r}=t.value,o=Lt(i,r,It(n));return"string"==typeof o?w(o):h(q(Mt(e),o))}const n=(e=>{if(3!==e.length)return H;const[t,n,i]=e;if("string"===t.kind&&"object"===i.kind){const e=J((e=>At(e.value)))(t);return X((e=>({grp:e.value,cutoff:n,m:i.value})))(e)}return H})(e);if(te(n)){const{grp:e,cutoff:t,m:i}=n.value,r=Lt(t,i,It(e));return"string"==typeof r?w(r):h(q(H,r))}const i=(e=>{if(2!==e.length)return H;const[t,n]=e;if("string"===t.kind&&"object"===n.kind){const e=J((e=>St(e.value)))(t);return X((e=>({prim:e.value,m:n.value})))(e)}return H})(e);if(te(i)){const{prim:e,m:t}=i.value;return h(q(Mt(e),k(_(t))))}const r=(e=>{if(1!==e.length)return H;const[t]=e;return"object"===t.kind?V({m:t.value}):H})(e);if(te(r)){const{m:e}=r.value;return h(q(H,k(_(e))))}const o=(e=>{if(e.length<1)return H;const[t,...n]=e;if("string"===t.kind){const e=J((e=>St(e.value)))(t);return X((e=>({prim:e.value,rest:n})))(e)}return H})(e);if(te(o)){const{prim:e,rest:t}=o.value;return h(q(Mt(e),xt(t)))}return h(q(H,xt(e)))},n=e=>"array"===e.kind?Ge(n)(e.value):[e];return"null"===e.kind?P({kind:"bottom"}):P(t(n(e)))}function St(e){const t=e.split("");if(!0==(0===t.length))return!1;{const[e,...n]=t;return-1!=="pmvn".indexOf(e)&&n.every((e=>-1!=="pmvn0123456789".indexOf(e)))}}function At(e){const t=e.split("");switch(!0){case 0===t.length:return!1;case"w"===t[0]&&void 0===t[1]:return!0;default:{const[e,...n]=t;return-1!=="ux".indexOf(e)&&-1===n.map((e=>!isNaN(parseInt(e)))).indexOf(!1)}}}function Lt(e,t,n){switch(e.kind){case"string":return k(n({1:V(e.value),2:t}));case"number":case"null":return E(n({1:"null"===e.kind?H:V(e.value),2:at(st(t,(([e,t])=>[Number(e),t])),(e=>!isNaN(e[0])))}));default:return"{bad cutoff}"}}function It(e){const t=e=>t=>b(t[2],t[1],e),n=e=>t=>v(t[2],t[1],e),i=e.split("");switch(!0){case"w"===i[0]&&void 0===i[1]:return e=>y(e[2],e[1]);case"u"===i[0]&&void 0===i[1]:return t(1);case"u"===i[0]&&void 0!==i[1]:return t(parseInt(i.slice(1).join("")));case"x"===i[0]&&void 0===i[1]:return n(1);case"x"===i[0]&&void 0!==i[1]:return n(parseInt(i.slice(1).join("")));default:throw new Error("This should never happen if you use isGroupCommand")}}function Mt(e){return X(p)(me(Dt(e,(e=>{const t=e.split("");if(0===t.length)return H;const[n,...i]=t,r=(e=>{switch(e){case"p":return V("add");case"m":return V("mul");case"v":return V("max");case"n":return V("min");default:return H}})(n);return X((e=>{const{init:t,rest:n}=(r=e=>{return"number"==typeof(t=parseInt(e))&&isFinite(t)&&Math.floor(t)===t;var t},function(e){var t=Re(Me(e,r))(e);return{init:t[0],rest:t[1]}})(i);var r;return{1:{1:e,2:0===t.length?1:parseInt(t.join(""))},2:n.join("")}}))(r)}))))}function Dt(e,t){const n=t(e);return ie((()=>[]))(X((e=>[e[1]].concat(Dt(e[2],t))))(n))}function xt(e){return C(e.map(Ot))}function Ot(e){switch(e.kind){case"number":return h(e.value);case"string":return w(e.value);case"null":return{kind:"bottom"};case"object":return w("{object}");case"array":return w("{array}")}}const Tt={strategy:(e,t,n)=>i=>{if(ne(n))return t;if("delta"===e&&ne(t))return H;if(ne(t))return n;if(te(t)&&te(n))return i(t.value,n.value);throw new Error("Non exhaustive match in combineCommand.strategy")},operation:(e,t,n,i,r,o)=>{const s=ze(j(o));if("append"===e&&"add"===t)return Ue(n,i,Ft("append",r.plus));if("append"===e&&"mul"===t)return Ue(n,i,Ft("append",r.times));if("append"===e&&"max"===t)return U(s)(n,i);if("join"===e&&"add"===t)return Ue(n,i,Ft("join",U(o)));if("join"===e&&"mul"===t)return Ue(n,i,Ft("join",U(o)));if("join"===e&&"max"===t)return U(s)(n,i);if("min"===t)return Tt.operation(e,"max",n,i,r,function(e){return D(((t,n)=>nt(e.compare(t,n))))}(o));if("delta"===e&&"max"===t)return T(s)(n,i)?n:i.map(m);if("delta"===e)return Ue(n,i,((e,t)=>T(j(o))(e,t)?e:{kind:"bottom"}));throw new Error("Non exhaustive match in combineCommand.operation")},extend:(e,t,n,i)=>{if("delta"===e&&"top"===n.kind&&"top"===i.kind)return T(G)(n.error,i.error)?w(n.error):{kind:"bottom"};if("delta"===e&&"bottom"===i.kind)return n;if("delta"===e&&"bottom"===n.kind)return{kind:"bottom"};if("top"===n.kind&&"top"===i.kind)return w(U(G)(n.error,i.error));if("top"===n.kind)return n;if("top"===i.kind)return i;if("inner"===n.kind&&"inner"===i.kind)return t(n.a,i.a);if("bottom"===n.kind)return i;if("bottom"===i.kind)return n;throw new Error("Non exhaustive match in extend")}},Ut={plus:(e,t)=>e+t,times:(e,t)=>e*t};function Rt(e,t,n,i){if("unbounded"===e.kind&&"unbounded"===t.kind){const r=e.group,o=t.group;return ie(m)(X((e=>h(_(e))))(rt(r,o,n,i)))}if("windowed"===e.kind&&"windowed"===t.kind){const r=e.key,o=e.group,s=t.key,a=t.group,c=U(Z(i))(r,s);return ie(m)(X((e=>h(y(e,c))))(rt(o,a,n,i)))}if("countLimit"===e.kind&&"countLimit"===t.kind){const r=e.n,o=t.n;if(r===o){const o=e.limit,s=e.group,a=t.limit,c=t.group,u=U(Z(i))(o,a);return ie(m)(X((e=>h(v(e,u,r))))(rt(s,c,n,i)))}return w("Non matching counts")}if("uniqueLimit"===e.kind&&"uniqueLimit"===t.kind){const r=e.n,o=t.n;if(r===o){const o=e.limit,s=e.group,a=t.limit,c=t.group,u=U(Z(i))(o,a);return ie(m)(X((e=>h(b(e,u,r))))(rt(s,c,n,i)))}return w("Non matching counts")}return w("Non matching group types")}function Gt(e,t,n,i,r,o){const s=(e,t)=>({1:Ie(e)(t).concat(Ae(Math.max(0,e-t.length),m)),2:De(e)(t)}),a=(t,n,i)=>{if(0===t.length)return Tt.operation(e,"max",n,i,r,o);if(t.length>0){const[c,...u]=t,l=s(c[2],n),d=l[1],g=l[2],f=s(c[2],i),p=f[1],m=f[2];return Tt.operation(e,c[1],d,p,r,o).concat(a(u,g,m))}throw new Error("Non exhaustive match in recurse")};return Oe((c=e=>"bottom"===e.kind,function(e){return e.slice(Me(e,c))})(Oe(a(t,n,i))));var c}function Bt(e,t,n){return ie(u)(jt(e,H)(t,n))}function jt(e,t){const n=t=>(n,i)=>Tt.strategy(e,n,i)(jt(e,t)),i=(i,r)=>{if(Y(ye(I({1:R,2:be}))).equals(i.commands,r.commands)){const o=((t,i,r)=>{if("stringGroup"===i.kind&&"stringGroup"===r.kind){const e=Rt(i.group,r.group,n(t),G);return B(e,(e=>k(Wt(e,G))))}if("numberGroup"===i.kind&&"numberGroup"===r.kind){const e=Rt(i.group,r.group,n(t),Ee);return B(e,(e=>E(Wt(e,Ee))))}if("tuple"===i.kind&&"tuple"===r.kind){const n=te(t)?t.value:[];return h(C(Gt(e,n,i.tuple,r.tuple,Ut,Ee)))}throw new Error(`Non matching payload. Got ${i.kind} and ${r.kind}`)})(ne(i.commands)?t:i.commands,i.payload,r.payload);return B(o,(e=>q(i.commands,e)))}throw new Error(`Non matching primitive strings. Got ${wt(i)} and ${wt(r)}`)};return(t,n)=>_t(P(Tt.extend(e,i,qt(t).state,qt(n).state)))}function Nt(e,t,n){const i=X((t=>at(e,(([e,i])=>function(e){return function(t,n){return-1!==e.compare(t,n)}}(n)(e,t)))))(t);return ie((()=>e))(i)}function Wt(e,t){switch(e.kind){case"unbounded":return e;case"windowed":return ne(e.key)?e:y(Nt(e.group,e.key,t),e.key);case"countLimit":{const n=e.limit,i=e.n,r=e.group,o=(e,t)=>t<=1?H:V(t-1),s=ot(i,r,o,t),a=U(Z(t))(n,s);return v(Nt(r,a,t),a,i)}case"uniqueLimit":{const n=e.limit,i=e.n,r=e.group,o=(e,t)=>{if("object"===e.kind){const n=[...e.value.keys(),...t.keys()],r=new Set(n);return r.size>=i?H:V(r)}return H},s=ot(new Set,r,o,t),a=U(Z(t))(n,s);return b(Nt(r,a,t),a,i)}}}function Ft(e,t){return(n,i)=>Tt.extend(e,((e,n)=>h(t(e,n))),n,i)}var Kt=n(6567),zt=n(64),$t=n(6013),Ht=n(7545),Vt=n(7121);class Jt{constructor(e,t,n){this.externalData=e,this.localQueries=t,this.externalQueries=n,this.queryCodesAsList=[],this.queryCodesAsMap={};const i=this.externalData.getExternalJsonData(zt.mL)||[],r=(0,Kt.fS)((()=>[]))((0,Kt.Y3)((()=>i.filter((e=>(0,Vt.UC)(e,this.localQueries,this.externalQueries))))));this.add(r)}has(e){return e in this.queryCodesAsMap}add(e){return(0,r.zG)(e.forEach((e=>this.queryCodesAsMap[e]=!0)),(e=>this.updateSegmentsList()))}remove(e){return(0,r.zG)(e.forEach((e=>delete this.queryCodesAsMap[e])),(e=>this.updateSegmentsList()))}getAllAsList(){return this.queryCodesAsList}getStdAsList(){return this.queryCodesAsList.filter((e=>e>=1e7))}getAllAsMap(){return this.queryCodesAsMap}getUpdates(e){const t=[],n=[];return Object.entries(e).forEach((([e,i])=>{const r=parseInt(e),o=(null==i?void 0:i.result)||{result:!1},s=!0===(null==o?void 0:o.result)&&!(r in this.queryCodesAsMap),a=!1===(null==o?void 0:o.result)&&r in this.queryCodesAsMap;s?t.push(r):a&&n.push(r)})),{entered:t,exited:n}}flush(){this.externalData.setExternalJsonData(zt.mL,this.getAllAsList())}reset(){this.externalData.removeExternalData(zt.mL),this.queryCodesAsList=[],this.queryCodesAsMap={}}updateSegmentsList(){this.queryCodesAsList=Object.keys(this.queryCodesAsMap).map((e=>parseInt(e)))}}const Qt="bootstrap",Yt="process",Zt="processTransitions",Xt="updateEnvironment",en="updateExternalState",tn="updateLAL",nn="updateTPD";const rn="permutive:query:changed",on="internal_query_states",sn="external_query_states",an=e=>class extends e{constructor(...e){super(...e),this.prefix="[Query Manager]",this.isWorkerReady=!1,this.stateMap={value:{},promise:Promise.resolve({})},this.extStateMap={},this.userSegments=new Jt(this.externalData,this.queryMetadata,this.externalQueries),this.segmentEntryQueryCodes=new Set,this.segmentExitQueryCodes=new Set,this.cohortEntryQueryCodes=new Set,this.cohortExitQueryCodes=new Set,this.hasNewOrModifiedQueries=!1,this.makeDebouncedProcessTransitions()}makeStateMaps(){const e=this.permutiveData.getData(on)||{},t=this.permutiveData.getData(sn)||{},n=Object.keys(this.queryMetadata),i=Object.keys(e);this.hasNewOrModifiedQueries=n.length!==i.length||n.filter((t=>{var n;return this.queryMetadata[t]!==(null===(n=e[t])||void 0===n?void 0:n.checksum)})).length>0,this.logger.debug("QueryManager has new or modified queries",this.hasNewOrModifiedQueries);const o=this.hasNewOrModifiedQueries?(0,$t.fl)(e,(t=>{var n;return(null===(n=e[t])||void 0===n?void 0:n.checksum)===this.queryMetadata[t]})):e;this.extStateMap=this.hasNewOrModifiedQueries?(0,r.zG)((0,$t.fl)(t,(e=>e in o)),(e=>(this.permutiveData.setData(sn,e),e))):t,this.stateMap={value:o,promise:Promise.resolve(o)};this.permutiveData.getData("query_states")&&this.permutiveData.setData("query_states",null)}makeDebouncedProcessTransitions(){this.scheduler=new Ht.b(this.transitionDebounceTime,this.transitionDebounceMaxTime);this.debouncedProcessTransitions=this.scheduler.scheduleAccumulated((e=>this.processTransitions(e)),{concat:(e,t)=>e.concat(t),empty:[]})}makeMessage(e,t,n){return{type:e,payload:(0,r.bc)(this.queryMetadata,this.extStateMap,...t),stateMap:n,userId:this.userId.get()}}trackTransition(e,t){const n=zt.ED?this.customProperties.getCustomProps():{},i=Object.assign(Object.assign(Object.assign({},n),{segment_number:t}),{});e?(this.segmentEntryQueryCodes.add(t),this.cohortEntryQueryCodes.add(t.toString())):(this.segmentExitQueryCodes.add(t),this.cohortExitQueryCodes.add(t.toString())),this.permutive.track(e?"SegmentEntry":"SegmentExit",i)}trackSegmentsTransition(e,t){e.forEach((e=>{this.trackTransition(!0,e),this.messages.emit(rn,{queryCode:e,result:{result:!0}})})),t.forEach((e=>{this.trackTransition(!1,e),this.messages.emit(rn,{queryCode:e,result:{result:!1}})}))}updateUserSegments(e,t){this.userSegments.add(e),this.userSegments.remove(t),this.userSegments.flush()}onStateChangeReady(e){const{entered:t,exited:n}=this.userSegments.getUpdates(e);this.trackSegmentsTransition(t,n),this.updateUserSegments(t,n),this.logDebug("Updating query state",{updatedStateMap:e}),this.permutiveData.setData(on,e);return(t.length>0||n.length>0)&&(this.logDebug("Updated cohorts",{entered:t,exited:n}),this.messages.emit("permutive:segments:updated")),{segmentsEntered:new Set(t),segmentsExited:new Set(n)}}onStateChange(e,t){return(0,r.zG)(t.length>0?this.network.error(`QL error(s). Got ${t.join("; ")}`,this.userId.get()):{},(t=>this.stateMap.value=Object.assign(Object.assign({},this.stateMap.value),e)),(e=>this.isWorkerReady?[e,this.onStateChangeReady(e)]:[e,{segmentsEntered:new Set,segmentsExited:new Set}]))}postMessage(e,t){const n=e=>this.userId.get()===e.userId?e:{diff:{},errors:[]};return new Promise((i=>{this.stateMap.promise=this.stateMap.promise.then((0,r.ls)((n=>this.makeMessage(e,t,n)),(e=>this.processMessage(e)))).then((0,r.ls)(n,(({diff:e,errors:t})=>{const[n,r]=this.onStateChange(e,t);return i([e,r]),n}))).catch((e=>(0,r.zG)(this.network.error(`Error during query execution. Got ${e}`,this.userId.get()),(e=>i([{},{segmentsEntered:new Set,segmentsExited:new Set}])),(e=>this.stateMap.value))))}))}processTransitions(e){return this.postMessage(Zt,[e])}bootstrap(e){return this.postMessage(Qt,[{segments:{"1p":this.userSegments.getAllAsMap()},sessionId:this.sessionManager.getSessionId(),viewId:this.viewId.get(),lookalikeModels:{}},e])}updateEnvironment(e){return this.postMessage(Xt,[e])}updateLAL(e){return this.postMessage(tn,[e])}updateTPD(e){return this.postMessage(nn,[e])}process(e,t){return(0,Vt.AG)(e)?this.debouncedProcessTransitions([e]):this.processStandard([e],t)}processStandard(e,t){return(0,c.mG)(this,void 0,void 0,(function*(){const n=yield this.postMessage(Yt,[e]);return t&&this.setAsRealTimeifNeeded(e),n}))}updateExternalState(e){const t=(0,$t.b0)(e,((e,t)=>{const n=this.queryMetadata[e];return n&&t[n]?(0,Kt.Uo)(lt(t[n])):Kt.YP})),n=(0,$t.b0)(this.extStateMap,((e,t)=>(0,Kt.Uo)(lt(t)))),i=(e,t,n)=>(0,r.zG)((0,Kt.Y3)((()=>function(e,t){return Bt("join",e,t)}(e,t))),(0,Kt.fS)((()=>(this.network.error(`Failed to join external state for query: ${n}. Had ${ct(t)}, received ${ct(e)}}`,this.userId.get()),t)))),o=(0,$t.b0)(Object.assign(Object.assign({},n),t),((e,t)=>n[e]?(0,Kt.G)(ut(i(t,n[e],e))):(0,Kt.G)(ut(t))));return this.permutiveData.setData(sn,o),this.extStateMap=o,this.postMessage(en,[])}reset(){this.userSegments.reset(),this.permutiveData.setData(on,{}),this.permutiveData.setData(sn,{}),this.stateMap={value:{},promise:Promise.resolve({})},this.extStateMap={}}setAsReady(){this.isWorkerReady=!0,this.onStateChangeReady(this.stateMap.value),this.messages.emit("permutive:queries:initialised")}getStateSizeInBytes(){return 2*JSON.stringify(this.stateMap.value).length}updateExternalSegments(e){const t={};for(const n of Object.keys(e)){const i=parseInt(n);!isNaN(i)&&this.externalQueries.has(i)&&(t[i]={result:{result:e[i]}})}const{entered:n,exited:i}=this.userSegments.getUpdates(t);this.trackSegmentsTransition(n,i),this.updateUserSegments(n,i);(n.length>0||i.length>0)&&this.messages.emit("permutive:segments:updated")}setAsRealTimeifNeeded(e){return!this.realtime.isRealtime()&&e.filter((e=>"Pageview"===e.name)).length>0?this.realtime.setAsRealtime(this.userSegments.getAllAsList().length):void 0}logDebug(...e){this.logger.debug(this.prefix,...e)}};function cn(){return(0,i.h)(new a)}class un{constructor(e){this.queryMetadata={16780:"0c8b70cdb7",16781:"22911a2329",16782:"c784c76f7e",16841:"1229c7ba6e",16842:"8c5f9ad456",16843:"7238959794",16982:"4997c744c8",16987:"42c90f4f7b",17068:"380d7eb9a3",17075:"38881c4e1b",17117:"77cf8f3bec",17124:"46446ac949",17125:"16ee0b72c9",17127:"c02108d5ce",17128:"5c4df92317",17135:"b912960866",17138:"0e4dd309d2",17173:"41fa272cce",17174:"28e0d3e756",17176:"6ca9be80a5",17180:"0b3ac08bc9",17182:"9a1f1eea9e",17183:"cf7e337d90",17185:"d0415019d9",17186:"b67d9d5fa2",17187:"5d8be7ab24",17427:"b902fb0e38",18212:"9628467caa",18238:"041d42e238",18239:"b08b1a8105",18240:"e25f3ddb4e",18245:"726840066d",18246:"eed9fb99e4",18247:"885c0d608a",18248:"1633affb26",18250:"40bacbc3a9",18253:"10388b04b2",18254:"89151e5ff0",18259:"1a1486a906",18260:"b5cda771c8",18262:"567574d7ad",18263:"d6625fca46",18264:"6da9692239",18266:"7a47df7030",18268:"2d8169515a",18269:"9333b1b098",18270:"22be240e1e",18271:"cc27f4b177",18294:"cef1545569",18295:"71629f428c",18296:"05ddfa266f",18297:"4b5e8103a5",18298:"ca906825a6",18299:"691a9bc1a7",18300:"b640e0d431",18310:"00be9595b5",18312:"52f354dc6e",18313:"e2963bad30",18314:"712ca44b5b",18315:"b2720ffc50",18316:"2718415157",18317:"7a98db60ee",18318:"b1ab0400c7",18319:"749d022e4a",18320:"5ab3789283",18321:"9727f2c9ae",18322:"bda152188c",18323:"a5b3defa6a",18356:"ccd83c3fbc",18365:"12d85d8b0d",18437:"d6208e961e",18439:"c1124faccd",18440:"cde6c8b99a",18443:"bf521fa741",18444:"fa1e56ea5c",18445:"a00a8ed49a",18731:"a16bcf0978",18732:"93f3806b98",18733:"741ce2218f",18734:"75e88b58a7",18735:"a76df9c2bc",18737:"50dcb0797b",18782:"d2f664deef",18790:"c4c2711f62",18791:"f5426320ab",18797:"9e98d08744",18803:"e8dde19f3d",18805:"e3e172cd5b",18806:"774e69043e",18807:"c588a207a7",19597:"00a3168789",19669:"cedc16d7a7",19676:"49d024dada",19902:"fb24407ac0",20008:"65adfca5f6",20277:"d7ebf56c86",20278:"c72c3a6d5d",20279:"a047409afb",20280:"e4338025e3",20281:"c46cba3007",20282:"6382a63c9d",20283:"5c87035621",20428:"9b5089e724",20431:"71b7bf78c8",20469:"6a89bb1d86",20494:"0f97917850",20531:"4508e9caa7",20534:"8a22e4f80b",20645:"ee9b882cc2",20646:"67bd3902df",20710:"9462059cbc",20714:"1e28df5f8d",20715:"5fffb0bdab",20833:"2070c0308c",21070:"e8d5c0c975",21174:"c22b2c70bd",21216:"7b0a3c46e7",21217:"fea656e263",21267:"942c916850",21535:"25117f9959",21538:"af0e68f677",21540:"1b6906c148",21541:"3ef780789b",21548:"7a0ae8cfb1",21615:"566eeac680",21670:"c6dd7e394c",22226:"463a54a1da",22391:"80fbfa8543",22392:"7608ec5971",22393:"3311098de9",22395:"11097ec3c6",22407:"075ee85c82",22408:"981456f86e",22409:"bcd0fc54c4",22410:"e65e70bbbd",22411:"9ed22f5b9e",22412:"3d1eccf21b",22514:"dd445a0dcf",22515:"72691b4595",22529:"2e5841f9b6",22567:"9399930345",22581:"91d23fdf23",22598:"febb8b919f",22600:"a9bc1b0bc0",22710:"efb4ba1b8a",22892:"9027c51963",22990:"c165c95166",23011:"d0f7a3e5da",23027:"ec6180d4fb",23805:"975414bdb3",23832:"9e939dc176",23833:"1412d1fa4c",23835:"c3553c27f8",23852:"d802216c3b",23853:"c2b7ea37ba",23937:"2186b5b340",23956:"9e3d6dfb0a",24101:"546c35fdb4",24102:"d54808796e",24103:"405602724a",24104:"2061069b4c",24105:"ba3c6f6585",24106:"0d0ca46630",24244:"c5cef6667a",24245:"9a7c2a7788",24324:"87a7e1b006",24339:"75ec81e4b2",24978:"34b28a1556",25136:"cdbfe1de1b",26090:"48a922a3f2",26091:"163c7a4ad8",26376:"47f7b67e4d",26380:"bce6f2eb14",26381:"a878b65f13",26383:"e851cc52f9",26440:"d0816c8e5d",26442:"7d0551b3f7",26443:"8d91935d6e",27111:"e3e172cd5b",27314:"c0c889a12b",27315:"d31a1112ba",27316:"b5d24d19c5",27317:"7484332f65",27318:"efa6a38d20",27320:"a5a5f40224",27321:"27fc760883",27323:"0947124537",27324:"89ea470937",27326:"6e9e7ec5ef",27327:"cf9d44e170",27330:"3a98372066",27331:"92e97e9e37",27332:"0e1dd9b1d2",27333:"54a5202334",27334:"9926bea7dd",27335:"cc5c08ed53",27336:"37df25393d",27338:"42916fe042",27339:"f21c75a8a5",27340:"58400ab701",27342:"63708f4f54",27343:"55d8a00c2b",27344:"2c1d9271cd",27345:"1863d76d26",27346:"8965fb1fa2",27347:"65cf7b0cb1",27348:"0e2eaa6162",27349:"8fd8a92a0c",27350:"61469cdfb8",27351:"835c7dcd97",27352:"d348241e7b",27353:"122d2e0f04",27354:"2e35f672d1",27355:"49195d11cc",27356:"e0d6824b3b",27357:"48ec033db3",27358:"1f5b5aaba1",27359:"fb1629957e",27360:"f72ada8d4e",27361:"0f44e19eef",27362:"a561f0a743",27363:"f3f09b5e59",27364:"310d71c820",27365:"f17b2eced3",27366:"3496547b5a",27367:"1af9f74af8",27368:"04641050d0",27369:"110d4e03fb",27370:"c24b48b1b6",27371:"35aed7f9a4",27372:"c16f1eac5a",27373:"8ebbaf4b67",27374:"ef8f801206",27375:"a3d1cbab09",27376:"2a558f7f10",27377:"853fffedd9",27378:"0735d87b44",27379:"5d151e7c9e",27380:"59ab88c252",27382:"7689410886",27384:"20f8d72c14",27385:"0221d1b037",27386:"45d7fec7be",27387:"50b1051267",27388:"7ae5814bd9",27389:"655d0d57a9",27390:"0b061b825c",27391:"d869d227df",27392:"36832bc24f",27393:"11fff6f956",27394:"8c8ffe5940",27395:"6a611f321d",27396:"7dbc452a1b",27397:"b97b810210",27398:"348603af58",27399:"ebe10622f0",27400:"1be6d0a31c",27706:"677472ee81",27708:"607c3e221c",27710:"5e025c8cb0",27711:"cd238ed229",27714:"4731589f7b",28394:"eba9fc793c",28714:"9efda3bc52",29255:"ce22c80e64",29259:"d0f54b617c",30221:"122a966987",30222:"39f57b2bff",30251:"35fdba531f",30363:"c4f1391bcc",30365:"aea916952d",30366:"cb81e73a7b",30367:"b83c4796d1",30368:"aea0de8dcc",30369:"e04893c9f3",31187:"e386cca67f",32094:"54687d0c18",32095:"03629580de",32729:"ee0102cf01",33786:"eb3c3082ae",33806:"5cec4ea3db",34414:"a229e34496",34415:"771a4e082f",34989:"9675b7eee4",35747:"7059a8d80f",36987:"9fc8c4fec9",36988:"29b9429ac8",36989:"454dc54060",37314:"91f405d7d9",38068:"49485355ed",38305:"e88bcb1884",38340:"9b6f91deac",38341:"5e07ca631e",38342:"df62d0912b",38343:"1850642364",38344:"80de688dc6",38345:"b23f1b56c6",38346:"1e088ae027",38352:"fe708944e3",38353:"48c4e6c4bb",38354:"d737f860bb",38355:"3930d1c8d4",38356:"8d214479ca",38357:"38d74e7af3",38358:"1f5ebcee93",38359:"955e23fcb4",38360:"05d9e9a749",38361:"cea7654c8f",38362:"09999dfa42",38470:"4ccf70d6c0",38472:"2245976a76",38473:"ffc59b576a",38474:"af53a49d92",38475:"870f4dc569",38476:"3ce08603be",38477:"b264d03028",38478:"58e2b9e708",38479:"7d1cc69be7",38497:"0ac4684986",38498:"328e5ed050",38819:"60db6efb84",38823:"f57c22391f",38827:"63707f4af6",41193:"3366be9cae",41209:"e00e5d8ac4",41489:"c4320f24db",42437:"8c5f7b4813",42438:"230be8e1f8",42439:"773fb94e3a",42441:"49159201ff",43274:"27368f5d9c",43393:"52d858a857",43538:"30b4e7f941",46637:"998ea8d6f6",46638:"1c58ee8d5b",46639:"4d10b02aad",46677:"1f5abd06a7",46761:"82ce53de40",46762:"1be7fb9d7e",46763:"322e897fd5",46996:"f6aee47097",47473:"99dc88f0d3",47493:"060df60735",47581:"d000893588",47583:"ab77d217bf",47584:"3847c4a068",47585:"078a51bb5e",47586:"f536ee7a65",49964:"b0fb838582",51098:"63e4075d10",51099:"4f6ebc6c0a",51100:"fec8b612e1",51101:"ae2a26b253",52127:"12d1610e7c",52133:"d6fbacc863",52142:"13cab2bebf",52520:"b5fa68fa82",54358:"5289251004",54639:"0d2272c5f1",55241:"805a0294b3",55914:"6e1cb39fec",55934:"4b6b7e0d5d",55935:"955988ed4f",56089:"83469fa05b",56090:"a1cceb3d87",56093:"184712fe28",56274:"1ea31f55f1",56623:"fcee3ab09c",57152:"28e94e0195",57517:"4d70f313d2",57756:"271f418b4a",58181:"fe1f0cea1f",58310:"6fcab06785",62486:"a1ea30e692",66495:"a1ef284267",66564:"29f0eabf25",67199:"fe588473ef",71282:"8821e43b95",71287:"7ceb838ba0",72255:"2c78b521a2",72256:"586bb2805d",72257:"362cd36709",73221:"26984e3244",73285:"5ff39d098f",73287:"7ef1315dd9",73288:"3c14ca83af",73289:"8d539644a5",73290:"d22f5cffd5",73291:"da7ed4b553",73292:"5065150063",73402:"d7d6f2946d",73748:"e54ae403dd",73763:"717c45d014",74123:"bbff4bcb26",74145:"8d50b08a84",74203:"c18098d489",74349:"bd5648c37e",74452:"20b7d8a2ea",74657:"be77e24aff",74659:"b067b4eb1b",74660:"a88838f1a3",74661:"3fc5afea9d",74662:"c70a26740e",74664:"d7be35102a",74665:"e2876eae03",74990:"e747ad0806",75311:"7d8b50f366",75636:"874d27a2a4",75640:"8a5a2399d2",75854:"7dcc21b25f",75874:"9f1b69b969",75963:"ebd56efe0e",76328:"7321d91d1c",76378:"50b7c7e250",76402:"bca30d157b",76414:"09a3d5b238",76507:"d62b784392",76510:"3aa996925e",76799:"5aa4e41d45",76800:"87fc16e1a3",76980:"cdf3c7214f",76981:"05a21c8f7c",77423:"81ec30cb9e",77425:"2f686d9260",77426:"118ecc2016",77520:"4166988bbb",77524:"6ddaaccdcf",77533:"aa87637845",77721:"de5e1ff3fc",77841:"3bfabedd76",77848:"ff80ec3664",77849:"8544a70021",78740:"a53b28508e",78741:"137ad50616",78743:"35fdb655a7",78924:"2014c1331e",79074:"4750421ccd",79157:"e033712087",79176:"ef741762a2",79183:"7a9f2703ef",79184:"8988be14b9",79187:"a2939dcbbd",79188:"6c861dd9c6",79190:"e63b20a8a4",79436:"649c7d2491",80663:"a1c069203a",81249:"74fc162f3c",81250:"351ebe6de7",81707:"b97ebf64e4",81780:"4d5b0c15f6",81781:"466f23ea95",81782:"5fa5739063",81783:"e7d59eba2e",81784:"1de17ab818",81785:"9fa89e6164",81786:"7d0294e6e4",81787:"2fa2adf3b8",81788:"c2b52fd341",81789:"ca72e169a5",81790:"07861da5d8",81791:"286022afe6",81792:"86b8862764",81793:"61475117d4",81794:"cfac49464c",81795:"ad52e71da6",84257:"a2a163e3f2",85612:"21434272b9",85622:"a09b6bee4d",85906:"d34bbb2baa",85907:"39d5c25073",85908:"4dd7a2f880",86173:"e954897689",86956:"e61b93ded0",87626:"e05210be5c",87678:"97040433c6",87696:"c1c6c69d84",87738:"4a8b130b15",87739:"1e8d3cbaf4",87740:"05dbf2bfba",87741:"fa07992442",87742:"62cb9067c9",87744:"c44a9e1864",88113:"4fe6ba9010",88865:"4a270b8989",91003:"c21206f4fb",91328:"92f3e00076",91345:"eac427c4a5",92621:"aa28b683cd",92622:"54c2d6e883",94606:"101c7eea64",94607:"4d0ed29ea1",94608:"22ed82e0c1",95434:"89c636216d",95472:"bb6d9f62dd",98074:"b197f78916",98331:"eb09f0bf17",99503:"69f52a9a61",99504:"57608a9d6c",99536:"38e75847d0",99689:"508feae9e8",100186:"0f34831d9b",101060:"d3c1be9023",101061:"7959ea664f",101171:"12a109163d",101387:"ce9291b03e",101388:"d8e8605bf7",101389:"36bf7d31fe",102103:"250f4961cd",102153:"5d1abeb768",102212:"08b9a043c2",102213:"1abefebc5b",102214:"93b7d3de3c",103258:"e23830069f",104170:"8077830323",104405:"1f202c11c2",104406:"9da4d21ffa",104640:"9820b8a89d",105294:"1be977832a",105978:"b1c7b6c2b2",105979:"d6282309ef",106717:"c6a8977f08",106751:"a49052a445",108525:"e1d79b3145",108526:"1cac9b9b6e",109309:"40783b814e",109466:"48cc466031",109741:"11b1fb9e45",109944:"834c713771",113583:"9bc7381e91",113877:"8715546977",113878:"b9953a617c",113879:"e917dd8843",113880:"7c5eeaab61",114692:"6ba615c053",115709:"119ae2a94b",116599:"9a28cb1b7f",117084:"1d574bdc78",117171:"0b8196b0f1",117680:"67d40bf130",120985:"7a84e72571",121034:"501c410ca3",122044:"97d6f5a187",122045:"a20d562795",122046:"c6fdcc9c64",122047:"1bce5fc490",122049:"38c3266067",122051:"4178aad403",122054:"dcb24449fb",122721:"00951deb02",123787:"25bdcf4901",124690:"7c9655f51a",124792:"b4ddeb76b0",125008:"f682a8f1dd",125770:"b4409875f5",126197:"0f34831d9b"},this.externalQueries=new Set([]),this.customProperties=e.customProperties,this.externalData=e.externalData,this.logger=e.logger,this.messages=e.messages,this.network=e.network,this.permutive=e.permutive,this.permutiveData=e.permutiveData,this.queryWorker=e.queryWorker,this.realtime=e.realtime,this.sessionManager=e.sessionManager,this.transitionDebounceMaxTime=e.transitionDebounceMaxTime,this.transitionDebounceTime=e.transitionDebounceTime,this.userId=e.userId,this.viewId=e.viewId}processMessage(e){return this.queryWorker.postMessage(e)}}class ln extends((()=>(0,r.zG)(un,an))()){constructor(e){super(e),this.makeStateMaps()}}},3253:(e,t,n)=>{n.d(t,{S:()=>s});var i=n(655),r=n(3735),o=n(6013);class s{constructor(e,t){var n;this.db=e,this.options=t,this.hasChanged=!1,this.options=null!==(n=this.options)&&void 0!==n?n:{},this.options.timeout_seconds=this.options.timeout_seconds||1800,this.options.session_data_key=this.options.session_data_key||"permutive-session",this.session_id=null}getSessionId(){return this.session_id}sessionHasChanged(){return this.hasChanged}decodeSessionData(e){return null===e?null:"object"==typeof e&&e.hasOwnProperty("session_id")&&e.hasOwnProperty("last_updated")?Object.assign(Object.assign({},e),{last_updated:new Date(e.last_updated)}):null}reset(){return this.db.delete(this.options.session_data_key)}persistSessionData(e){return(0,i.mG)(this,void 0,void 0,(function*(){const t=e.last_updated.toISOString();yield this.db.put(Object.assign(Object.assign({},e),{last_updated:t}),this.options.session_data_key)}))}newSession(e){return this.hasChanged=!0,{session_id:(0,o.k$)(),last_updated:e}}hasExpired(e,t){if(isNaN(t.getTime()))return!0;return e>new Date(t.getTime()+1e3*this.options.timeout_seconds)}static initialise(e,t,n){return(0,i.mG)(this,void 0,void 0,(function*(){const i=new s(t,n);e.deleteCookie(i.options.session_data_key);const o=new Date,a=yield i.db.get(i.options.session_data_key).catch(r.gn),c=i.decodeSessionData(a),u=null===c||i.hasExpired(o,c.last_updated)?i.newSession(o):Object.assign(Object.assign({},c),{last_updated:o});return yield i.persistSessionData(u),i.session_id=u.session_id,i}))}}},2747:(e,t,n)=>{n.d(t,{S:()=>m});var i=n(3735),r=n(787),o=n(6013),s=n(7545);class a{constructor(e,t,n,i,r){this.config=e,this.namespace=t,this.logger=n,this.network=i,this.userId=r,this.permutiveData={},this.permutiveDataSize=0,this.localStorageQueue=new Set,this.localStorageScheduler=new s.b(e.localStorageWriteDelay,e.localStorageWriteMaxDelay),this.debouncedFlush=this.localStorageScheduler.schedule(this.flushLocalStorageQueue.bind(this)),this.debouncedStorageKeys=new Set(e.localStorageDebouncedKeys),this.localStorageScheduler.scheduleForPageUnload(this.flushLocalStorageQueue.bind(this)),this.permutiveData=this.buildData()}reset(){this.permutiveData={}}getDataSize(){return this.permutiveDataSize}getData(e){return this.permutiveData[e]}setData(e,t){this.permutiveData[e]=t,this.debouncedStorageKeys.has(e)?(this.localStorageQueue.add(e),this.debouncedFlush()):this.writeData(e)}flushLocalStorageQueue(){for(let e of this.localStorageQueue)this.writeData(e);this.localStorageQueue.clear()}buildData(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.getDataChunk("misc")),this.getDataChunk("models")),this.getDataChunk("queries")),this.getDataChunk("tpd")),this.getDataChunk("enrichers"))}getDataChunk(e){const t=this.namespace.getNamespacedStorageKey(this.chunkKeyToStorageKey(e)),n=window.localStorage.getItem(t),i=(0,r.A)(n);return null===i?{}:(this.permutiveDataSize+=2*n.length,i)}chunkKeyToStorageKey(e){switch(e){case"models":return this.config.permutiveDataModelsKey;case"queries":return this.config.permutiveDataQueriesKey;case"tpd":return this.config.permutiveDataTPDKey;case"enrichers":return this.config.permutiveDataEnrichersKey;case"misc":return this.config.permutiveDataMiscKey;default:return(0,o.Fi)(e)}}writeData(e){this.logger.debug(`Data Store: Writing ${e} to localStorage`);const[t,n]=this.dataKeyToChunkInfo(e);return(0,o.Z_)(this.network,this.userId,(()=>window.localStorage.setItem(this.namespace.getNamespacedStorageKey(t),JSON.stringify(n))))()}dataKeyToChunkInfo(e){const t=e=>(0,o.eu)(this.permutiveData,e);switch(e){case"models_data":case"models_last_updated":return[this.chunkKeyToStorageKey("models"),t(c)];case"query_states":case"internal_query_states":case"external_query_states":case"state_offset":case"event-source-id":return[this.chunkKeyToStorageKey("queries"),t(u)];case"third-party-data":case"third-party-data-session-id":case"third-party-data-usage":return[this.chunkKeyToStorageKey("tpd"),t(l)];case"enricher:geoip":return[this.chunkKeyToStorageKey("enrichers"),t(d)];case"identities":case"amp_ready":case"metricsEnabled":case"addon:tradedesk":case"addon:tracking_pixel":case"addon:eyeota_pixel":case"addon:twitter_pixel":case"addon:pinterest_pixel":case"addon:facebook_pixel_v2":case"addon:appnexus":case"addon:ddp":case"addon:gigya":case"addon:neustar_fabrick":case"pubmatic":case"lotame":return[this.chunkKeyToStorageKey("misc"),t(g)];default:return(0,o.Fi)(e)}}}const c=["models_data","models_last_updated"],u=["query_states","internal_query_states","external_query_states","state_offset","event-source-id"],l=["third-party-data","third-party-data-session-id","third-party-data-usage"],d=["enricher:geoip"],g=["identities","amp_ready","metricsEnabled","addon:tradedesk","addon:tracking_pixel","addon:eyeota_pixel","addon:twitter_pixel","addon:pinterest_pixel","addon:facebook_pixel_v2","addon:appnexus","addon:ddp","addon:gigya","addon:neustar_fabrick","pubmatic","lotame"];var f=n(5097);const p=e=>{const{logger:t,consentTracking:n}=e,i=e=>{t.debug(`Data Store: Failed to write ${e} as consent is revoked`)};return e=>class extends e{constructor(){super(...arguments),this.writeData=(0,f.v)(super.writeData.bind(this),i,n.isRevoked)}}},m=(e,t,n,r,o,s)=>new((0,i.zG)(a,p({consentTracking:s,logger:n})))(e,t,n,r,o)},1823:(e,t,n)=>{n.d(t,{$:()=>r});var i=n(6013);class r{constructor(e){this.permutiveData=e,this.eventSourceId=e.getData("event-source-id")||this.generateAndStoreEventSourceId()}get(){return this.eventSourceId}generateAndSet(){this.eventSourceId=this.generateAndStoreEventSourceId()}generateAndStoreEventSourceId(){const e=(0,i.k$)();return this.permutiveData.setData("event-source-id",e),e}}},7738:(e,t,n)=>{n.d(t,{L:()=>i});class i{constructor(e){this.config=e}getNamespacedStorageKey(e){return`${this.config.stateNamespace}${e}`}}},4528:(e,t,n)=>{n.d(t,{u:()=>i});class i{constructor(e,t){this.metrics=e,this.messages=t}isRealtime(){return this._isRealtime}isReady(){return this._isReady}setAsRealtime(e){this._isRealtime=!0,this.messages.emit("permutive:realtime"),this.metrics.trackTimeSinceInit("sdk_realtime_targeting_set_task_duration_seconds",{}),this.metrics.track({name:"sdk_user_segments_count",value:e,labels:{}})}setAsReady(){this._isReady=!0,this.messages.emit("permutive:ready"),this.metrics.trackTimeSinceInit("sdk_initialisation_task_duration_seconds",{sdk_version:"v19.38.0"}),window.performance&&window.performance.memory&&(this.metrics.track({name:"sdk_heap_memory_bytes_used",value:window.performance.memory.usedJSHeapSize,labels:{}}),this.metrics.track({name:"sdk_heap_memory_limit_fraction_used",value:window.performance.memory.usedJSHeapSize/window.performance.memory.jsHeapSizeLimit,labels:{}}))}}},2472:(e,t,n)=>{n.d(t,{a:()=>s});var i=n(655),r=n(3735),o=n(356);class s{constructor(e,t,n,i,r,o,s,a){this.config=e,this.localStorage=t,this.logger=n,this.queryManager=i,this.permutiveData=r,this.eventSourceId=o,this.cookies=s,this.externalData=a}reset(){return(0,i.mG)(this,void 0,void 0,(function*(){return this.logger.log("Resetting State"),(0,r.zG)(this.cookies.deleteCookie(this.config.cookieName),(e=>this.externalData.removeExternalData(this.config.cookieName)),(e=>(0,o.XP)({_paols:!0,_papns:!0,_pcrdbs:!0,_pcrprs:!0,_pdfps:!0,_pfwqp:!0,_pnativo:!0,_prps:!0,_prubicons:!0,_psegs:!0,_psmart:!0,"permutive-id":!0,"permutive-loaded":!0,"permutive-prebid-rtd":!0,"permutive-events-cache":!0}).forEach((e=>this.externalData.removeExternalData(e)))),(e=>this.queryManager.reset()),(e=>this.permutiveData.reset()),(e=>this.eventSourceId.generateAndSet()),(e=>Promise.all([this.localStorage.delete(this.config.permutiveDataModelsKey),this.localStorage.delete(this.config.permutiveDataQueriesKey),this.localStorage.delete(this.config.permutiveDataTPDKey),this.localStorage.delete(this.config.permutiveDataEnrichersKey),this.localStorage.delete(this.config.permutiveDataMiscKey)])),r.Q1)}))}}},1714:(e,t,n)=>{n.d(t,{N:()=>m,e:()=>f});var i=n(655),r=n(2688),o=n(7183),s=n(8198),a=n(3735),c=n(477),u=n.n(c);function l(){return u()('/*! permutive-javascript-sdk v19.38.0 (web) (built 2022-11-01T15:42:38.514Z) */(()=>{"use strict";const n=()=>({kind:"null",value:null}),r=n=>({kind:"string",value:n}),t=n=>({kind:"number",value:n}),e=n=>({kind:"array",value:n}),u=n=>({kind:"object",value:n}),i=n=>n,o=()=>({kind:"bottom"}),c=n=>({kind:"inner",a:n}),a=n=>({kind:"top",error:n}),s=n=>({kind:"unbounded",group:n}),f=(n,r)=>({kind:"windowed",key:r,group:n}),l=(n,r,t)=>({kind:"countLimit",n:t,limit:r,group:n}),d=(n,r,t)=>({kind:"uniqueLimit",n:t,limit:r,group:n}),p=n=>({kind:"numberGroup",group:n}),m=n=>({kind:"stringGroup",group:n}),g=n=>({kind:"tuple",tuple:n}),v=n=>({state:n}),h=(n,r)=>({commands:n,payload:r});function k(n){return n}function w(n,r,t,e,u,i,o,c,a){switch(arguments.length){case 1:return n;case 2:return r(n);case 3:return t(r(n));case 4:return e(t(r(n)));case 5:return u(e(t(r(n))));case 6:return i(u(e(t(r(n)))));case 7:return o(i(u(e(t(r(n))))));case 8:return c(o(i(u(e(t(r(n)))))));case 9:return a(c(o(i(u(e(t(r(n))))))));default:for(var s=arguments[0],f=1;f<arguments.length;f++)s=arguments[f](s);return s}}var y=function(n){return{equals:function(r,t){return r===t||n(r,t)}}},b=function(n){return y((function(r,t){for(var e in n)if(!n[e].equals(r[e],t[e]))return!1;return!0}))},x=function(n){return function(r,t){return r===t||0===n(r,t)}},j=function(n){return{equals:x(n),compare:function(r,t){return r===t?0:n(r,t)}}},N=function(n){return function(r){return j((function(t,e){return r.compare(n(t),n(e))}))}},q=function(n){return function(r,t){return-1===n.compare(r,t)}},L=function(n){return function(r,t){return 1===n.compare(r,t)}},O=function(n){return function(r,t){return r===t||n.compare(r,t)>-1?r:t}};var M={equals:function(n,r){return n===r}},S={equals:M.equals,compare:function(n,r){return n<r?-1:n>r?1:0}};const G=(n,r)=>{switch(n.kind){case"bottom":return{kind:"bottom"};case"inner":return c(r(n.a));case"top":return a(n.error)}},E=n=>j(((r,t)=>{if("bottom"===r.kind&&"bottom"===t.kind)return 0;if("bottom"===r.kind)return-1;if("bottom"===t.kind)return 1;if("top"===r.kind&&"top"===t.kind)return S.compare(r.error,t.error);if("top"===r.kind)return 1;if("top"===t.kind)return-1;if("inner"===r.kind&&"inner"===t.kind)return n.compare(r.a,t.a);throw new Error("Non exhaustive match in extendedAlgebraOrd")}));var _=function(n,r){for(var t=0,e=r.length,u=n.length;t<e;t++,u++)n[u]=r[t];return n},A=function(n){return"Some"===n._tag},$={_tag:"None"},I=function(n){return{_tag:"Some",value:n}},C=function(n){return"Left"===n._tag},z=(Object.prototype.hasOwnProperty,function(n){return _([n[0]],n.slice(1))});var J=$,P=I;function R(n){return function(r){return n(r)?P(r):J}}var F=function(n){return"Left"===n._tag?J:P(n.right)},W=function(n){return{equals:function(r,t){return r===t||(H(r)?H(t):!H(t)&&n.equals(r.value,t.value))}}},B=function(n){return{equals:W(n).equals,compare:function(r,t){return r===t?0:D(r)?D(t)?n.compare(r.value,t.value):1:-1}}},T=function(n){return function(r){return H(r)?J:P(n(r.value))}},U=F,D=A,H=function(n){return"None"===n._tag},K=function(n){return function(r){return H(r)?n():r.value}};var Q;Q=void 0;var V=function(n){return n[0]},X=V;var Y=function(n,r){for(var t=0,e=r.length,u=n.length;t<e;t++,u++)n[u]=r[t];return n},Z=function(n){return n.length>0},nn=function(n,r){return n<0||n>=r.length},rn=function(n){return function(r){return Y([n],r)}},tn=rn,en=function(n){return function(r){return Y(Y([],r),[n])}},un=en,on=z,cn=function(n){return Z(n)?I(n):$},an=function(n){return function(r){for(var t=Math.max(0,Math.floor(r)),e=[n(0)],u=1;u<t;u++)e.push(n(u));return e}};var sn=on;var fn=function(n){return function(r){var t=Math.max(1,n);return t>=r.length?[sn(r),[]]:[w(r.slice(1,t),tn(dn(r))),r.slice(t)]}},ln=function(n){return y((function(r,t){return r.length===t.length&&r.every((function(r,e){return n.equals(r,t[e])}))}))},dn=X;var pn={equals:function(n,r){return n===r}},mn={equals:pn.equals,compare:function(n,r){return n<r?-1:n>r?1:0}};var gn=function(n,r){return function(t){for(var e=t.length,u=n,i=0;i<e;i++)u=r(i,u,t[i]);return u}};var vn=function(n){return 0===n.length},hn=Z,kn=tn,wn=un,yn=function(n,r){return n<=0?[]:an(r)(n)};var bn=nn,xn=function(n){return function(r){return bn(n,r)?qn(r):r.slice(0,n)}};var jn=function(n,r){for(var t=n.length,e=0;e<t&&r(n[e]);e++);return e};var Nn=function(n){return function(r){return n<=0||vn(r)?qn(r):n>=r.length?[]:r.slice(n,r.length)}};var qn=function(n){return n.slice()},Ln=function(n){return vn(n)?[]:n.slice().reverse()},On=function(n){return function(r){return r.length<=1?qn(r):r.slice().sort(n.compare)}},Mn=function(n,r,t){for(var e=[],u=Math.min(n.length,r.length),i=0;i<u;i++)e[i]=t(n[i],r[i]);return e};var Sn=function(n){return function(r){return n>=1&&hn(r)?fn(n)(r):vn(r)?[qn(r),[]]:[[],qn(r)]}};var Gn=function(n){return function(r){return w(r,function(n){return function(r){for(var t=[],e=0;e<r.length;e++)t.push.apply(t,n(e,r[e]));return t}}((function(r,t){return n(t)})))}},En=function(n){return function(r){for(var t=[],e=0;e<r.length;e++){var u=n(e,r[e]);A(u)&&t.push(u.value)}return t}},_n=function(n){return En((function(r,t){return n(t)}))},An=_n(k),$n=gn,In=function(n){var r=Cn(n);return function(n){return r((function(r,t){return n(t)}))}},Cn=function(n){return function(r){return $n(n.of([]),(function(t,e,u){return n.ap(n.map(e,(function(n){return function(r){return w(n,wn(r))}})),r(t,u))}))}},zn=function(n){return j((function(r,t){for(var e=r.length,u=t.length,i=Math.min(e,u),o=0;o<i;o++){var c=n.compare(r[o],t[o]);if(0!==c)return c}return mn.compare(e,u)}))},Jn=function(n){return{_tag:"Left",left:n}},Pn=function(n){return{_tag:"Right",right:n}},Rn=function(n,r){return w(n,Bn(r))},Fn=function(n,r){return w(n,Un(r))},Wn="Either",Bn=function(n){return function(r){return Hn(r)?r:Pn(n(r.right))}},Tn=Pn,Un=function(n){return function(r){return Hn(r)?r:Hn(n)?n:Pn(r.right(n.right))}},Dn={URI:Wn,map:Rn,ap:Fn,of:Tn},Hn=C;var Kn=function(n){return-1===n?1:1===n?-1:0};function Qn(n,r){return An(n.map(r))}function Vn(n,r,t,e){const u=(n,r)=>{if(0===n.length)return An(r.map((n=>P({1:n[1],2:t(J,P(n[2]))}))));if(0===r.length)return An(n.map((n=>P({1:n[1],2:t(P(n[2]),J)}))));if(n.length>0&&r.length>0&&q(e)(n[0][1],r[0][1])){const[e,...i]=n,o=e[1],c=e[2];return kn({1:o,2:t(P(c),J)})(u(i,r))}if(n.length>0&&r.length>0&&L(e)(n[0][1],r[0][1])){const[e,...i]=r,o=e[1],c=e[2];return kn({1:o,2:t(J,P(c))})(u(n,i))}if(n.length>0&&r.length>0){const[e,...i]=n,[o,...c]=r,a=e[1],s=e[2],f=o[2];return kn({1:a,2:t(P(s),P(f))})(u(i,c))}throw new Error("Non exhaustive match in mapOption2")},i=N((n=>n[1]))(e),o=(n=>{const r=Qn(n,(n=>D(n[2])?P({1:n[1],2:n[2].value}):J));return 0===r.length?J:P(r)})(u(On(i)([...n].map((n=>({1:n[0],2:n[1]})))),On(i)([...r].map((n=>({1:n[0],2:n[1]}))))));return T((n=>new Map(n.map((n=>[n[1],n[2]])))))(o)}function Xn(n,r,t,e){const u=N((n=>n[0]))(e),i=On(u)([...r]).reduceRight(((n,r)=>{if(Hn(n)){const e=t(r[1],n.left);return D(e)?Jn(e.value):Pn(r[0])}return n}),Jn(n));return U(i)}function Yn(n,r){return new Map([...n].map(r))}function Zn(n,r){return new Map([...n].filter(r))}function nr(n){return JSON.stringify(rr(n))}function rr(n){switch(n.kind){case"null":return ur.encode(n);case"string":return ir.encode(n);case"number":return or.encode(n);case"array":return cr.encode(n);case"object":return ar.encode(n)}}function tr(n){return null===n?ur.decode(n):"number"==typeof n?or.decode(n):"string"==typeof n?ir.decode(n):Array.isArray(n)?cr.decode(n):ar.decode(n)}const er=(n,r)=>Jn(`Failed to decode. Input was ${JSON.stringify(n)}. Codec type was ${r}`),ur={encode:n=>null,decode:n=>null===n?Pn({kind:"null",value:null}):er(n,"SimpleNull")},ir={encode:n=>n.value,decode:n=>"string"==typeof n?Pn(r(n)):er(n,"SimpleString")},or={encode:n=>n.value,decode:n=>"number"==typeof n?Pn(t(n)):er(n,"SimpleNumber")},cr={encode:n=>n.value.map(rr),decode:n=>{if(Array.isArray(n)){const r=In(Dn)(tr)(n);return Bn(e)(r)}return er(n,"SimpleArray")}},ar={encode:n=>{const r=[...n.value.entries()];return Object.assign({},...Array.from(r,(([n,r])=>({[n]:rr(r)}))))},decode:n=>{if(n&&n.constructor===Object){const r=In(Dn)((([n,r])=>w(tr(r),Bn((r=>function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n}(n,r))))))(Object.entries(n));return Bn((n=>u(new Map([...n]))))(r)}return er(n,"SimpleObject")}};function sr(n){return w(n,lr,T(nr),K((()=>"<encode error>")))}function fr(n){return T(hr)(function(n){switch(n.state.kind){case"top":return P(r(n.state.error));case"bottom":return J;case"inner":return lr(n.state.a)}}(n))}function lr(n){return function(n){switch(n.kind){case"numberGroup":case"stringGroup":return dr(n.group);case"tuple":return n.tuple.length>0}}(n.payload)?P(e(function(n,r){const t=T((n=>kn(n)(r)))(n);return K((()=>r))(t)}(T((n=>r(function(n){const r=n=>{switch(n){case"add":return"p";case"mul":return"m";case"max":return"v";case"min":return"n"}},t=n=>1===n[2]?r(n[1]):r(n[1])+JSON.stringify(n[2]);return n.map(t).join("")}(n))))(n.commands),function(n){const e=n=>{switch(n.kind){case"bottom":return{kind:"null",value:null};case"top":return r(n.error);case"inner":return t(n.a)}},i=n=>Qn([pr,mr,n=>w(n,vr,u,P)],(r=>r(n))),o=n=>Qn([pr,gr,n=>w(n,vr,(n=>Yn(n,(([n,r])=>[JSON.stringify(n),r]))),u,P)],(r=>r(n)));switch(n.kind){case"tuple":return n.tuple.map(e);case"stringGroup":return i(n.group);case"numberGroup":return o(n.group)}}(n.payload)))):J}function dr(n){switch(n.kind){case"unbounded":return n.group.size>0;case"windowed":return n.group.size>0||D(n.key);case"countLimit":case"uniqueLimit":return n.group.size>0||D(n.limit)}}function pr(n){switch(n.kind){case"unbounded":return J;case"windowed":return P(r("w"));case"countLimit":return P(r(1===n.n?"x":`x${n.n}`));case"uniqueLimit":return P(r(1===n.n?"u":`u${n.n}`))}}function mr(n){switch(n.kind){case"unbounded":return J;case"windowed":return P(r(D(n.key)?n.key.value:""));case"countLimit":case"uniqueLimit":return P(r(D(n.limit)?n.limit.value:""))}}function gr(n){switch(n.kind){case"unbounded":return J;case"windowed":return D(n.key)?P(t(n.key.value)):P({kind:"null",value:null});case"countLimit":case"uniqueLimit":return D(n.limit)?P(t(n.limit.value)):P({kind:"null",value:null})}}function vr(n){switch(n.kind){case"unbounded":case"windowed":case"countLimit":case"uniqueLimit":return n.group}}function hr(n){switch(n.kind){case"array":return 0===n.value.length?{kind:"null",value:null}:1===n.value.length?hr(n.value[0]):e(n.value.map(hr));case"object":return w(Zn(n.value,(([n,r])=>"null"!==r.kind)),(n=>Yn(n,(n=>[n[0],hr(n[1])]))),u);default:return n}}function kr(n){const r=n=>{if(0===n.length)return{kind:"bottom"};const r=(n=>{if(4!==n.length)return J;const[r,t,e,u]=n;if("string"===r.kind&&"string"===t.kind&&"object"===u.kind){const n=R((n=>wr(n[1].value)&&yr(n[2].value)))({1:r,2:t});return T((n=>({prim:n[1].value,grp:n[2].value,cutoff:e,m:u.value})))(n)}return J})(n);if(D(r)){const{prim:n,grp:t,cutoff:e,m:u}=r.value,i=br(e,u,xr(t));return"string"==typeof i?a(i):c(h(jr(n),i))}const t=(n=>{if(3!==n.length)return J;const[r,t,e]=n;if("string"===r.kind&&"object"===e.kind){const n=R((n=>yr(n.value)))(r);return T((n=>({grp:n.value,cutoff:t,m:e.value})))(n)}return J})(n);if(D(t)){const{grp:n,cutoff:r,m:e}=t.value,u=br(r,e,xr(n));return"string"==typeof u?a(u):c(h(J,u))}const e=(n=>{if(2!==n.length)return J;const[r,t]=n;if("string"===r.kind&&"object"===t.kind){const n=R((n=>wr(n.value)))(r);return T((n=>({prim:n.value,m:t.value})))(n)}return J})(n);if(D(e)){const{prim:n,m:r}=e.value;return c(h(jr(n),m(s(r))))}const u=(n=>{if(1!==n.length)return J;const[r]=n;return"object"===r.kind?P({m:r.value}):J})(n);if(D(u)){const{m:n}=u.value;return c(h(J,m(s(n))))}const i=(n=>{if(n.length<1)return J;const[r,...t]=n;if("string"===r.kind){const n=R((n=>wr(n.value)))(r);return T((n=>({prim:n.value,rest:t})))(n)}return J})(n);if(D(i)){const{prim:n,rest:r}=i.value;return c(h(jr(n),qr(r)))}return c(h(J,qr(n)))},t=n=>"array"===n.kind?Gn(t)(n.value):[n];return"null"===n.kind?v({kind:"bottom"}):v(r(t(n)))}function wr(n){const r=n.split("");if(!0==(0===r.length))return!1;{const[n,...t]=r;return-1!=="pmvn".indexOf(n)&&t.every((n=>-1!=="pmvn0123456789".indexOf(n)))}}function yr(n){const r=n.split("");switch(!0){case 0===r.length:return!1;case"w"===r[0]&&void 0===r[1]:return!0;default:{const[n,...t]=r;return-1!=="ux".indexOf(n)&&-1===t.map((n=>!isNaN(parseInt(n)))).indexOf(!1)}}}function br(n,r,t){switch(n.kind){case"string":return m(t({1:P(n.value),2:r}));case"number":case"null":return p(t({1:"null"===n.kind?J:P(n.value),2:Zn(Yn(r,(([n,r])=>[Number(n),r])),(n=>!isNaN(n[0])))}));default:return"{bad cutoff}"}}function xr(n){const r=n=>r=>d(r[2],r[1],n),t=n=>r=>l(r[2],r[1],n),e=n.split("");switch(!0){case"w"===e[0]&&void 0===e[1]:return n=>f(n[2],n[1]);case"u"===e[0]&&void 0===e[1]:return r(1);case"u"===e[0]&&void 0!==e[1]:return r(parseInt(e.slice(1).join("")));case"x"===e[0]&&void 0===e[1]:return t(1);case"x"===e[0]&&void 0!==e[1]:return t(parseInt(e.slice(1).join("")));default:throw new Error("This should never happen if you use isGroupCommand")}}function jr(n){return T(i)(cn(Nr(n,(n=>{const r=n.split("");if(0===r.length)return J;const[t,...e]=r,u=(n=>{switch(n){case"p":return P("add");case"m":return P("mul");case"v":return P("max");case"n":return P("min");default:return J}})(t);return T((n=>{const{init:r,rest:t}=(u=n=>{return"number"==typeof(r=parseInt(n))&&isFinite(r)&&Math.floor(r)===r;var r},function(n){var r=Sn(jn(n,u))(n);return{init:r[0],rest:r[1]}})(e);var u;return{1:{1:n,2:0===r.length?1:parseInt(r.join(""))},2:t.join("")}}))(u)}))))}function Nr(n,r){const t=r(n);return K((()=>[]))(T((n=>[n[1]].concat(Nr(n[2],r))))(t))}function qr(n){return g(n.map(Lr))}function Lr(n){switch(n.kind){case"number":return c(n.value);case"string":return a(n.value);case"null":return{kind:"bottom"};case"object":return a("{object}");case"array":return a("{array}")}}const Or={strategy:(n,r,t)=>e=>{if(H(t))return r;if("delta"===n&&H(r))return J;if(H(r))return t;if(D(r)&&D(t))return e(r.value,t.value);throw new Error("Non exhaustive match in combineCommand.strategy")},operation:(n,r,t,e,u,i)=>{const c=zn(E(i));if("append"===n&&"add"===r)return Mn(t,e,Ir("append",u.plus));if("append"===n&&"mul"===r)return Mn(t,e,Ir("append",u.times));if("append"===n&&"max"===r)return O(c)(t,e);if("join"===n&&"add"===r)return Mn(t,e,Ir("join",O(i)));if("join"===n&&"mul"===r)return Mn(t,e,Ir("join",O(i)));if("join"===n&&"max"===r)return O(c)(t,e);if("min"===r)return Or.operation(n,"max",t,e,u,function(n){return j(((r,t)=>Kn(n.compare(r,t))))}(i));if("delta"===n&&"max"===r)return L(c)(t,e)?t:e.map(o);if("delta"===n)return Mn(t,e,((n,r)=>L(E(i))(n,r)?n:{kind:"bottom"}));throw new Error("Non exhaustive match in combineCommand.operation")},extend:(n,r,t,e)=>{if("delta"===n&&"top"===t.kind&&"top"===e.kind)return L(S)(t.error,e.error)?a(t.error):{kind:"bottom"};if("delta"===n&&"bottom"===e.kind)return t;if("delta"===n&&"bottom"===t.kind)return{kind:"bottom"};if("top"===t.kind&&"top"===e.kind)return a(O(S)(t.error,e.error));if("top"===t.kind)return t;if("top"===e.kind)return e;if("inner"===t.kind&&"inner"===e.kind)return r(t.a,e.a);if("bottom"===t.kind)return e;if("bottom"===e.kind)return t;throw new Error("Non exhaustive match in extend")}},Mr={plus:(n,r)=>n+r,times:(n,r)=>n*r};function Sr(n,r,t,e){if("unbounded"===n.kind&&"unbounded"===r.kind){const u=n.group,i=r.group;return K(o)(T((n=>c(s(n))))(Vn(u,i,t,e)))}if("windowed"===n.kind&&"windowed"===r.kind){const u=n.key,i=n.group,a=r.key,s=r.group,l=O(B(e))(u,a);return K(o)(T((n=>c(f(n,l))))(Vn(i,s,t,e)))}if("countLimit"===n.kind&&"countLimit"===r.kind){const u=n.n,i=r.n;if(u===i){const i=n.limit,a=n.group,s=r.limit,f=r.group,d=O(B(e))(i,s);return K(o)(T((n=>c(l(n,d,u))))(Vn(a,f,t,e)))}return a("Non matching counts")}if("uniqueLimit"===n.kind&&"uniqueLimit"===r.kind){const u=n.n,i=r.n;if(u===i){const i=n.limit,a=n.group,s=r.limit,f=r.group,l=O(B(e))(i,s);return K(o)(T((n=>c(d(n,l,u))))(Vn(a,f,t,e)))}return a("Non matching counts")}return a("Non matching group types")}function Gr(n,r,t,e,u,i){const c=(n,r)=>({1:xn(n)(r).concat(yn(Math.max(0,n-r.length),o)),2:Nn(n)(r)}),a=(r,t,e)=>{if(0===r.length)return Or.operation(n,"max",t,e,u,i);if(r.length>0){const[o,...s]=r,f=c(o[2],t),l=f[1],d=f[2],p=c(o[2],e),m=p[1],g=p[2];return Or.operation(n,o[1],l,m,u,i).concat(a(s,d,g))}throw new Error("Non exhaustive match in recurse")};return Ln((s=n=>"bottom"===n.kind,function(n){return n.slice(jn(n,s))})(Ln(a(r,t,e))));var s}function Er(r,t,e){return K(n)(_r(r,J)(t,e))}function _r(n,r){const t=r=>(t,e)=>Or.strategy(n,t,e)(_r(n,r)),e=(e,u)=>{if(W(ln(b({1:M,2:pn}))).equals(e.commands,u.commands)){const i=((r,e,u)=>{if("stringGroup"===e.kind&&"stringGroup"===u.kind){const n=Sr(e.group,u.group,t(r),S);return G(n,(n=>m($r(n,S))))}if("numberGroup"===e.kind&&"numberGroup"===u.kind){const n=Sr(e.group,u.group,t(r),mn);return G(n,(n=>p($r(n,mn))))}if("tuple"===e.kind&&"tuple"===u.kind){const t=D(r)?r.value:[];return c(g(Gr(n,t,e.tuple,u.tuple,Mr,mn)))}throw new Error(`Non matching payload. Got ${e.kind} and ${u.kind}`)})(H(e.commands)?r:e.commands,e.payload,u.payload);return G(i,(n=>h(e.commands,n)))}throw new Error(`Non matching primitive strings. Got ${sr(e)} and ${sr(u)}`)};return(r,t)=>fr(v(Or.extend(n,e,kr(r).state,kr(t).state)))}function Ar(n,r,t){const e=T((r=>Zn(n,(([n,e])=>{return(u=t,function(n,r){return-1!==u.compare(n,r)})(n,r);var u}))))(r);return K((()=>n))(e)}function $r(n,r){switch(n.kind){case"unbounded":return n;case"windowed":return H(n.key)?n:f(Ar(n.group,n.key,r),n.key);case"countLimit":{const t=n.limit,e=n.n,u=n.group,i=(n,r)=>r<=1?J:P(r-1),o=Xn(e,u,i,r),c=O(B(r))(t,o);return l(Ar(u,c,r),c,e)}case"uniqueLimit":{const t=n.limit,e=n.n,u=n.group,i=(n,r)=>{if("object"===n.kind){const t=[...n.value.keys(),...r.keys()],u=new Set(t);return u.size>=e?J:P(u)}return J},o=Xn(new Set,u,i,r),c=O(B(r))(t,o);return d(Ar(u,c,r),c,e)}}}function Ir(n,r){return(t,e)=>Or.extend(n,((n,t)=>c(r(n,t))),t,e)}function Cr(n,r,t,e,u,i,o,c,a){switch(arguments.length){case 1:return n;case 2:return r(n);case 3:return t(r(n));case 4:return e(t(r(n)));case 5:return u(e(t(r(n))));case 6:return i(u(e(t(r(n)))));case 7:return o(i(u(e(t(r(n))))));case 8:return c(o(i(u(e(t(r(n)))))));case 9:return a(c(o(i(u(e(t(r(n))))))));default:for(var s=arguments[0],f=1;f<arguments.length;f++)s=arguments[f](s);return s}}var zr=function(n){return"Some"===n._tag},Jr={_tag:"None"},Pr=function(n){return{_tag:"Some",value:n}},Rr=function(n){return"Left"===n._tag},Fr=Object.prototype.hasOwnProperty,Wr=Rr,Br=function(n){return function(r){return Wr(r)?n(r.left):r.right}};var Tr=function(n){return function(r){return!n(r)}};var Ur=Jr,Dr=Pr;var Hr=zr;var Kr=function(n){for(var r in n)if(Fr.call(n,r))return!1;return!0};function Qr(n){return function(r){var t={},e=!1;for(var u in r)if(Fr.call(r,u)){var i=r[u];n(u,i)?t[u]=i:e=!0}return e?t:r}}var Vr=function(n){return Qr((function(r,t){return n(t)}))};var Xr=Kr;var Yr=Vr;Yr(Tr(Xr));Tr((function(n){return 0===n.length}));function Zr(n,r){const t=Object.keys(n),e=t.length,u={};for(let i=0;i<e;i++){const e=t[i],o=r(e,n[e]);Hr(o)&&(u[e]=o.value)}return u}function nt(n,r){const t=Cr((n=>Zr(n,((n,r)=>r.state?Dr({[r.checksum]:r.state}):Ur)))(n),tr,Br((n=>u(new Map)))),e=Cr(tr(r),Br((n=>u(new Map))));return Cr(function(n,r){return Er("delta",n,r)}(t,e),(n=>rr(n)))||{}}!function(n){const r=self;function t(n,t,e,u){function i(t){if("function"!=typeof r.postMessage)return n.ports[0].postMessage(t);r.postMessage(t)}if(!e)return i([t,null,u]);"undefined"!=typeof console&&"error"in console&&console.error("Worker caught an error:",e),i([t,e])}r.addEventListener("message",(function(r){if(e=r,!Array.isArray(e.data)||2!==e.data.length)return;var e;const u=r.data,[i,o]=u;if("function"==typeof n)return function(n,r,e,u){const i=function(n,r){try{return{res:n(r)}}catch(n){return{err:n}}}(r,u);return Boolean(null===(o=i)||void 0===o?void 0:o.err)?t(n,e,i.err):!(c=i.res)||"object"!=typeof c&&"function"!=typeof c||"function"!=typeof c.then?t(n,e,null,i.res):void i.res.then((function(r){t(n,e,null,r)}),(function(r){t(n,e,r)}));var o,c}(r,n,i,o);t(r,i,new Error("Please pass a function into register()."))}))}((function(n){switch(n.type){case"delta":return nt(n.stateMap,n.lastSentStateMapWithChecksum);case"noop":return{}}}))})();',"Worker",void 0,void 0)}var d=n(7545),g=n(7121);function f(){return(0,o.h)(new l)}const p={concat:(e,t)=>Object.assign(Object.assign({},e),t),empty:{}};class m{constructor(e,t,n,i,r,o,s,a,c){this.api=e,this.network=t,this.sessionManager=n,this.permutiveData=i,this.queryManager=r,this.metrics=o,this.userId=s,this.eventSourceId=a,this.stateWorker=c,this.DEBOUNCE_TIME=1e3,this.MAX_DEBOUNCE_TIME=5e3,this.fetchUnseenState=!0,this.scheduler=new d.b(this.DEBOUNCE_TIME,this.MAX_DEBOUNCE_TIME),this.debouncedSyncIfNotEmpty=this.scheduler.scheduleAccumulated((e=>this.syncIfNotEmpty.bind(this)("standard",e)),p),this.fetchUnseenState=!!h.includes("e1c3fd73-dd41-4abd-b80b-4278d52bf7aa")||this.sessionManager.sessionHasChanged(),this.stateOffset=this.permutiveData.getData("state_offset")||0,this.lastSentStateMapWithChecksum=(0,g.Yh)(this.permutiveData.getData("internal_query_states")||{}),this.stateWorker.postMessage({type:"noop"})}sync(e){return(0,a.zG)(this.debouncedSyncIfNotEmpty(e),(e=>Promise.resolve()))}syncWithUnseen(){return this.syncIfNotEmpty("unseen",{}).then(a.Q1)}syncIfNotEmpty(e,t){const[n,i,o]="standard"===e?[this.stateOffset,t,this.fetchUnseenState]:"unseen"===e?[this.stateOffset,this.queryManager.stateMap.value,!0]:[0,{},!0],s=this.metrics.startTimer("sdk_compute_delta_seconds",{}),c={type:"delta",stateMap:i,lastSentStateMapWithChecksum:this.lastSentStateMapWithChecksum},u=this.stateWorker.postMessage(c).then((e=>(this.metrics.stopTimer("sdk_compute_delta_seconds",s),e))),l=e=>{this.fetchUnseenState=!1;const t=(0,a.ls)((e=>this.network.error(`Error sending state delta. Got ${(0,r.w)(e)}`,this.userId.get())),(e=>({})));return this.api.state(this.metrics,this.userId.get(),this.eventSourceId.get(),e,n,o).then((e=>function(e){return!!e}(e)?this.onStateResponse(e):{})).then((t=>(this.lastSentStateMapWithChecksum=e,t))).catch(t)};return u.then((e=>o||Object.keys(e).length>0?l(e):Promise.resolve({})))}resetSync(){return(0,i.mG)(this,void 0,void 0,(function*(){this.reset(),yield this.syncIfNotEmpty("reset",{})}))}reset(){this.lastSentStateMapWithChecksum={}}onStateResponse(e){const t=(0,s.Y3)((()=>JSON.parse(e.state)),(e=>this.network.error(`Failed to parse State API response, got ${e}`,this.userId.get()))),n=e=>e?this.queryManager.updateExternalState(e):(0,a.Q1)();return(0,s.tO)(t)?(0,a.zG)(e.state_offset,(e=>this.stateOffset=e),(e=>this.permutiveData.setData("state_offset",e)),(e=>n(t.right)),(e=>t.right)):{}}}const h=["fe68d1f7-c9f4-45b3-8905-7cda73d3fd74"]},7258:(e,t,n)=>{n.d(t,{u:()=>i});class i{constructor(e,t,n,i,r){this.permutiveData=e,this.permutiveReset=t,this.userId=n,this.viewId=i,this.eventsCache=r}getPermutiveData(e){return this.permutiveData.getData(e)}setPermutiveData(e,t){return this.permutiveData.setData(e,t)}getStateSizeInBytes(){return this.permutiveData.getDataSize()+this.eventsCache.getStateSizeInBytes()}reset(){return this.permutiveReset.reset()}}},7846:(e,t,n)=>{n.d(t,{M:()=>a});var i=n(3735),r=n(6567),o=n(503),s=n(6013);class a{constructor(e,t,n,r){this.config=e,this.clientContext=t,this.cookies=n,this.externalData=r,this.setUserId=i.Q1;const s=this.getOrGenerateUserId(),[a,c]=o.Ue(s);this.userId=a,this.setUserId=c,this.set(s)}isEqual(e){return this.userId.current===e}get(){return this.userId.current}getRef(){return this.userId}set(e){this.cookies.setCookie(this.config.cookieName,e,!0),this.externalData.setExternalData(this.config.cookieName,e),this.clientContext.updateContext(["user_id",e]),this.setUserId(e)}getOrGenerateUserId(){return(0,r.fS)((()=>(0,r.fS)(s.k$)(this.getUserIdFromLocalStorage())))(this.getUserIdFromCookie())}getUserIdFromCookie(){return this.getUserIdFromStorageIfValid("cookie")}getUserIdFromLocalStorage(){return this.getUserIdFromStorageIfValid("localStorage")}getUserIdFromStorageIfValid(e){const t=(0,r.DT)(s.Gz);return(0,i.zG)("cookie"===e?this.cookies.getCookie(this.config.cookieName):this.externalData.getExternalData(this.config.cookieName),r.ij,(0,r.tS)(t))}}},6919:(e,t,n)=>{n.d(t,{W:()=>r});var i=n(6013);class r{constructor(e,t){this.clientContext=e,this.config=t,t.viewId&&(0,i.Gz)(t.viewId)?this.set(t.viewId):this.generateAndSet()}get(){return this.viewId}generateAndSet(){return this.set((0,i.k$)())}set(e){return this.viewId=e,this.clientContext.updateContext(["view_id",this.viewId]),this.viewId}}},2485:(e,t,n)=>{n.d(t,{_:()=>r});var i=n(5097);const r=e=>{const{logger:t,consentTracking:n}=e,r=(e,n)=>(t.debug(`DB: Failed to write ${String(n)} as consent is revoked`),Promise.resolve(n));return e=>class extends e{constructor(){super(...arguments),this.put=(0,i.v)(super.put.bind(this),r,n.isRevoked)}}}},3195:(e,t,n)=>{n.d(t,{S:()=>a});var i=n(3735),r=n(2485),o=n(787);class s{constructor(e){this.namespace=e}put(e,t){return(0,i.zG)(this.namespace.getNamespacedStorageKey(String(t)),(t=>window.localStorage.setItem(t,JSON.stringify(e))),(e=>Promise.resolve(t)))}get(e){return(0,i.zG)(this.namespace.getNamespacedStorageKey(String(e)),(e=>window.localStorage.getItem(e)),o.A,(e=>Promise.resolve(e)))}delete(e){return(0,i.zG)(this.namespace.getNamespacedStorageKey(String(e)),(e=>Promise.resolve(window.localStorage.removeItem(e))))}deleteStore(){return Promise.resolve()}}const a=(e,t,n)=>new((0,i.zG)(s,(0,r._)({logger:t,consentTracking:n})))(e)},5595:(e,t,n)=>{n.d(t,{m:()=>i});class i extends Error{constructor(e){super(e),this.name="StoreClosingError"}}},1057:(e,t,n)=>{n.d(t,{Ec:()=>s,_8:()=>o});var i=n(6567),r=n(6013);const o=e=>{const t=e.__tcfapi,n={type:"aborted"},o=["tcloaded","useractioncomplete"];return t?(0,r.a4)((()=>a(t,"getTCData")),(()=>a(t,"getTCData").then((e=>"loaded"===(null==e?void 0:e.cmpStatus)&&o.includes(null==e?void 0:e.eventStatus))))).then((0,i.g_)((()=>n),(e=>({type:"loaded",data:e})))):Promise.resolve({type:"missing"})},s=e=>e.gdprApplies?(0,i.G)(e.vendor.consents):i.YP,a=(e,t)=>new Promise((n=>{e(t,2,(e=>{n(e)}))}))},3351:(e,t,n)=>{n.d(t,{D:()=>i});const i={tradedesk:21,ddp:755,appnexus:32,pubmatic:76,neustar_fabrick:468}},2520:(e,t,n)=>{n.d(t,{U:()=>c});var i=n(655),r={equals:function(e,t){return e===t}},o=n(3735),s=n(2688),a=n(6013);class c{constructor(e,t,n,i,r,o,s,a,c,u,l){this.network=e,this.logger=t,this.api=n,this.permutiveData=i,this.messages=r,this.sessionManager=o,this.metrics=s,this.permutiveIdentity=a,this.queryManager=c,this.permutive=u,this.userId=l,this.lastUserIdentitiesChecked=new Date,this.logger.log("Enabling tpd reporting"),this.messages.on("permutive:segments:updated",(()=>{this.reportUsage()})),this.readThirdPartyCohorts(),this.lastCheckedSession=this.permutiveData.getData("third-party-data-session-id")||""}readThirdPartyCohorts(){this.userSegments=this.permutiveData.getData("third-party-data")||{},this.segmentsPromise=Promise.resolve(this.userSegments)}shouldUseSegmentsInMemory(){const e=this.lastUserIdentitiesChecked>=this.permutiveIdentity.getIdentitiesLastModified;return this.lastUserIdentitiesChecked=new Date,e&&this.lastCheckedSession===this.sessionManager.getSessionId()&&!!this.segmentsPromise}segments(){if(this.shouldUseSegmentsInMemory())return this.segmentsPromise;const e=this.sessionManager.getSessionId(),t=(0,a.b2)();this.lastCheckedSession=e;const n=this.metrics.startTimer("sdk_get_third_party_data_task_duration_seconds",{}),i=Object.assign(Object.assign({},this.permutiveIdentity.getCustomerDefinedIdentitiesMap()),this.permutiveIdentity.getTPDIdentitiesMap());if(Object.keys(i).length>0){const e=this.permutiveIdentity.getPrioritizedIdentities(i),n=u(e),r=e=>(this.userSegments=l(e),this.userSegments),c=e=>{t.resolve(e)},d="Audience matching retrieval failed with reason:",g="Third Party Data segments retrieval failed with reason:",f=(e,t)=>{const n=(0,s.w)(`${e} ${t}`);this.network.error(n,this.userId.get())},p=e=>this.metrics.track({name:e,value:1,labels:{}}),m=()=>this.api.audienceMatching(this.metrics,this.userId.get(),{identities:e.map((e=>(0,a.eu)(e,["tag","id"])))}),h=()=>this.api.tpd(this.metrics,n),w=(0,o.ls)(r,c),_=e=>(0,o.zG)(p("sdk_audience_matching_request_fail_count"),(()=>f(d,e)),h),y=e=>(0,o.zG)(f(g,e),(()=>c({})));m().then((e=>w(e.items))).catch((e=>_(e).then((e=>w(e))).catch((e=>y(e)))))}else t.resolve({});const c=t.promise.then((e=>this.userSegments));return c.then((t=>{this.permutiveData.setData("third-party-data-session-id",e),this.metrics.stopTimer("sdk_get_third_party_data_task_duration_seconds",n);const i=this.permutiveData.getData("third-party-data")||{},o=(0,a.rB)((0,a.rB)(r)),s=(0,a.rB)(r);if(0===Object.keys(i).length||!o.equals(i,t)){this.permutiveData.setData("third-party-data",this.userSegments);const e=Object.entries(t||{});(i?e.filter((([e,t])=>!s.equals(i[e]||{},t))):e).forEach((([e,t])=>this.fireSegments(e,Object.keys(t))))}})),this.segmentsPromise=c}reset(){this.segmentsPromise=null,this.userSegments={}}fireSegments(e,t){this.permutive.track("ThirdPartySegments",{data_provider:e,segments:t})}reportUsage(){const e=d(this.queryManager.stateMap.value),t=(0,a.vp)(JSON.stringify(e));if(this.permutiveData.getData("third-party-data-usage")!==t&&Object.keys(e).length>0){this.permutiveData.setData("third-party-data-usage",t);const n={user_id:this.userId.get(),time:new Date,tpd_segments:e};this.api.tpdUsage(this.metrics,n)}}}const u=e=>(null==e?void 0:e.reduce(((e,t)=>(e[t.tag]=t.id,e)),{}))||{},l=e=>Object.entries(e).reduce(((e,[t,n])=>Object.assign(Object.assign({},e),{[t]:(0,a.j5)(n)})),{}),d=e=>{const t={},n=Object.keys(e),r=n.length;for(let o=0;o<r;o++){const r=n[o],s=e[r],{activations:a}=s;(0,i._T)(s,["activations"]);a&&Object.keys(a).length>0&&(t[r]=a)}return t}},2223:(e,t,n)=>{n.d(t,{C:()=>c});var i=n(655),r=n(5846),o=n(3735);const s=(a=[[{name:"dfp",import:Promise.resolve().then(n.bind(n,242))}],[],[],[{name:"classification_models",import:Promise.resolve().then(n.bind(n,6172))}],[],[],[],[{name:"clean_room",import:Promise.resolve().then(n.bind(n,6584))}],[{name:"dbm",import:Promise.resolve().then(n.bind(n,2863))}],[{name:"ddp",import:Promise.resolve().then(n.bind(n,208))}],[],[],[],[],[],[],[{name:"overlays",import:Promise.resolve().then(n.bind(n,718))}],[],[],[],[],[],[],[],[{name:"scriptrunner",import:Promise.resolve().then(n.bind(n,7926))}],[{name:"tracking_pixel",import:Promise.resolve().then(n.bind(n,2586))}],[],[],[{name:"web",import:Promise.resolve().then(n.bind(n,8482))}],[],[]],(0,o.zG)((0,r.xH)(a),(0,r.u4)({},((e,t)=>Object.assign(Object.assign({},e),{[t.name]:t.import})))));var a;const c=({_internals:e,logger:t,network:n,permutiveMethods:r,q:o,clientContext:a})=>{const c=Object.entries(s).map((([s,c])=>(0,i.mG)(void 0,void 0,void 0,(function*(){return t.log(`Loading addon ${s}`),(yield c).load(o,r,e,n,a)}))));return Promise.all(c)}},957:(e,t,n)=>{n.r(t),n.d(t,{createAddon:()=>b,getCachedCleanRoomSegments:()=>_,getCachedDFPSegments:()=>y});var i=n(2688),r=n(5846),o=n(3735),s=n(6567),a=n(2751),c=n(8863),u=n(503),l=n(5506),d=n(6013);const g="_pdfps";n(9678);let f=!1;let p;const m=e=>{const{logger:t}=e;!0!==f&&googletag.pubadsReady&&(null!=p||(p=({slot:n})=>{const{getContentUrl:i}=n;if(!i||"function"!=typeof i)return;(0,o.zG)(i(),(0,a.pn)("&trunc=1"))&&(t.debug("DFP content URL has been truncated!"),(({metrics:e,logger:t})=>{f||(e.track({name:"sdk_targeting_size_limit_exceeded_count",value:1,labels:{target:"dfp"}}),f=!0,t.debug("DFP has exceeded targeting limit"))})(e),googletag.pubads().removeEventListener("slotRenderEnded",p),p=null)}),googletag.pubads().addEventListener("slotRenderEnded",p))},h={liveSegments:[],cloudCohorts:[],cleanRoomSegments:[],eligibleSegments:{}},w={segments:h,getGAMKeyValues:()=>({permutive:w.segments.liveSegments.join(",")})},_=e=>{const t=e.getExternalJsonData(c.P)||[],n=e.getExternalJsonData(c.l)||[];return(0,r.G0)(a.Eq)(t)(n)},y=e=>e.getExternalJsonData(g)||[],v=(e,t)=>{const{logger:n,externalData:o,network:s}=e;let a=t.map(String).concat(h.cloudCohorts).concat(h.cleanRoomSegments);n.debug("DFP is updating with targeting values",a),((e,t,n)=>{const{logger:i}=e;window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],m(e),window.googletag.cmd.push((()=>{const{getTargeting:e,setTargeting:o}=googletag.pubads(),s=e("permutive")||[],a=Object.values(t.eligibleSegments).map(String).concat(t.cloudCohorts).concat(t.cleanRoomSegments).concat("rts"),c=(0,r.uK)((e=>a.includes(e))),{left:u}=c(s),l=n.concat(u).concat("rts");i.debug("DFP setting GPT targeting to",l),o("permutive",l)}))})(e,h,a);try{o.setExternalJsonData(g,a)}catch(e){const t=(0,i.w)(e),r="DFP failed to set data. Got:";n.error(r,t),s.error(`${r} ${t.message}`)}return(({api:e,logger:t},n)=>{(0,l.$S)("sync_segments_cookie",!1)?(t.debug("DFP syncing segment cookie _pdfps"),e.segmentSync({key:g,value:n})):t.debug("DFP sync segments cookie not enabled, skipping sync")})(e,JSON.stringify(a)),n.debug("DFP live segments updated to",t),t},b=e=>{const{logger:t,activationManager:n,messages:i,externalData:r,network:a,nextGenOutput:c,userId:l,cookies:f}=e;h.eligibleSegments=(e=>{const t=e.getSpecializedActivations("dfp"),n={};for(const e of t.dfp)n[e]=e;for(const e of Object.keys(t.dfp_legacy)){const i=Number(e);n[i]=t.dfp_legacy[i]}return n})(n);const p=(0,o.zG)(c,u.UI((e=>e.queryLanguageSegments)),u.UI((e=>(t.debug("DFP received QL segments",{qlSegments:e}),(0,o.zG)(e,s.fS((()=>[])),(e=>((e,t)=>e.filter((e=>e in t)).map((e=>t[e])))(e,h.eligibleSegments)))))),u.q(((e,t)=>(0,d.cO)(e,t)))),m=(0,o.zG)(c,u.UI((e=>e.cloudCohorts.gam))),[y,b]=u.Ue(_(r));return i.on("permutive:cleanroom:db:updated",b),i.on("permutive:reset",(()=>b([]))),(0,o.zG)(u.vP(p,m,y),u.YP((0,d.Z_)(a,l,(([n,i,r])=>{t.debug("DFP received updated cohorts",{filteredQlSegments:n,cloudCohorts:i,cleanRoomSegments:r}),h.cloudCohorts=i,h.cleanRoomSegments=r,h.liveSegments=v(e,n)})))),t.debug("DFP initialised with segments",h),i.on("permutive:reset",(0,d.Z_)(a,l,(()=>{t.debug("DFP received 'permutive:reset' event"),r.removeExternalData(g),f.deleteCookie(g)}))),i.emit("permutive:dfp:ready"),w}},242:(e,t,n)=>{n.r(t),n.d(t,{load:()=>a});var i=n(64),r=n(6013),o=n(957);const s={},a=(e,t,n)=>{e.push({functionName:"addon",arguments:["dfp",{}]});window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.googletag.cmd.push((()=>c(t,n)))},c=(e,t)=>{e.ready(t.makeSafe((()=>w(t.metrics))),"realtime"),_(t.externalData),b(t.userId,t.viewId),f(e),googletag.cmd.push((()=>{p(e),m(e)})),window.addEventListener("message",l(e),!1)},u=({advertiserId:e,campaignId:t,lineItemId:n,creativeId:i})=>({advertiser_id:(0,r.ke)(e),campaign_id:(0,r.ke)(t),line_item_id:(0,r.ke)(n),creative_id:(0,r.ke)(i)}),l=e=>t=>{var n;try{const i=JSON.parse(t.data);if(!i.permutive_type||"google_ad_click"!==i.permutive_type)return;const{ad_unit_path:r,creative_id:o,advertiser_id:a,order_id:c,line_item_id:l}=null!==(n=null==i?void 0:i.data)&&void 0!==n?n:{},g=u({lineItemId:l,advertiserId:a,campaignId:c,creativeId:o});let f;Object.keys(s).some((e=>{const{slot:t,creative_id:n}=s[e];if((null==t?void 0:t.ad_unit_path)===r&&n===g.creative_id)return f=s[e],!0})),f=null!=f?f:Object.assign(Object.assign({},g),{is_empty:!1}),d(e,f)}catch(e){}},d=(e,t)=>{i.PH&&t&&e.track("SlotClicked",t)},g=(e,t,n)=>{s[t]=n,h(e,n),v(e,t)},f=e=>{const t=googletag.pubadsReady&&googletag.pubads().getSlots();t&&t.forEach((t=>{const n=t.getResponseInformation();if(!n)return;const i=Object.assign(Object.assign({},u(n)),{is_empty:!1,service_name:"publisher_ads",slot:y(t)}),r=t.getSlotElementId();g(e,r,i)}))},p=e=>{googletag.pubads().addEventListener("slotRenderEnded",(t=>{const n=Object.assign(Object.assign({},u(t)),{is_empty:t.isEmpty,service_name:t.serviceName,slot:y(t.slot)});if(t.size){const[e,i]=t.size;"number"==typeof e&&"number"==typeof i&&(n.width=e,n.height=i)}const i=t.slot.getSlotElementId();g(e,i,n)}))},m=e=>{i.EW&&googletag.pubads().addEventListener("impressionViewable",(({slot:t,serviceName:n})=>{const i=t.getResponseInformation();if(!i)return;const r=Object.assign(Object.assign({},u(i)),{service_name:n,slot:y(t)});e.track("SlotViewable",r)}))},h=(e,t)=>{if(!i.CL)return;var n;n=Object.assign(Object.assign({},t),{rendered_timestamp:Date.now()}),e.track("SlotRendered",n)},w=e=>{let t=0;const n=googletag.pubadsReady&&googletag.pubads().getSlots();n&&n.forEach((e=>e.getResponseInformation()&&t++));const i=0===t?"sdk_targeting_realtime_success_count":"sdk_targeting_realtime_fail_count";e.track({name:i,value:1,labels:{target:"dfp"}})},_=e=>{const t=(0,o.getCachedDFPSegments)(e);googletag.cmd.push((()=>{const{getTargeting:e,setTargeting:n}=googletag.pubads(),i=e("permutive")||[];n("permutive",[...new Set([...t.map(String),...i])])}))},y=e=>{const t={ad_unit_path:e.getAdUnitPath(),slot_element_id:e.getSlotElementId()};return i.jH?Object.assign(Object.assign({},t),(()=>{const t={},n=[];let i=[];const r=(e,r)=>{const o="slot"===e?e=>t[e]=1:()=>{},s=r.getTargetingKeys();i=s;for(let s=0;s<i.length;s++){const a=i[s];if(void 0!==t[a]&&"service"===e)continue;const c=[],u=r.getTargeting(a);for(let e=0;e<u.length;e++)c.push(u[e].toString());c.length>0&&(o(a),n.push({key:a,value:c}))}};return r("slot",e),r("service",googletag.pubads()),{targeting_keys:n}})()):t},v=(e,t)=>{let n=!1;const i=()=>{n&&"hidden"===document.visibilityState&&d(e,s[t])},r=()=>{n=!0},o=()=>{n=!1};try{document.addEventListener("visibilitychange",i);const e=document.getElementById(t);e.addEventListener("mouseover",r),e.addEventListener("mouseout",o)}catch(e){}},b=(e,t)=>{const{setTargeting:n}=googletag.pubads()}},718:(e,t,n)=>{n.r(t),n.d(t,{OverlaysAddon:()=>o,load:()=>r});var i=n(6013);const r=e=>{e.unshift({functionName:"addon",arguments:["overlays",{}]})};class o{constructor(e){const t=this;this.permutive=e.permutive,this.options=e,this.activations=this.options.activationManager.getActivations("overlays"),this.loadedImageCounts={};for(let n=0;n<this.activations.length;n++){const r=this.activations[n],o=r.getSegmentCode(),s=r.getTriggerType(),a=r.getConfig(),c=this.buildOverlayCss(a,n);document.head.insertAdjacentHTML("beforeend",c);const u=this.buildOverlayBody(a,n);document.body.insertAdjacentHTML("beforeend",u);const l=`permutive-overlay-${n}`,d=document.getElementById(l),g=d.getElementsByClassName("close")[0],f=d.getElementsByClassName("content")[0],p=()=>{d.style.visibility="hidden",d.style.opacity="0"},m=e=>{f.contains(e.target)||(p(),d.removeEventListener("click",m))};g.addEventListener("click",p),d.addEventListener("click",m);[].slice.call(d.getElementsByTagName("a")).slice(1).forEach((e=>{e.addEventListener("click",(function(){r.trackConversion({useBeacon:!0})}))}));const h=d.getElementsByTagName("form")[0];h&&h.addEventListener("submit",(function(e){e.preventDefault(),r.trackConversion({success:function(){h.submit()}})}));const w=function(e,n){t.showOverlay(e),n.trackImpression()};"EveryTime"===s?this.permutive.segment(o,(0,i.Z_)(e.network,e.userId,(e=>{e?w(l,r):this.permutive.trigger(o,"result",(function(e){e.result&&w(l,r)}))}))):"OnEntry"===s?this.permutive.trigger(o,"result",(0,i.Z_)(e.network,e.userId,(function(e){e.result&&w(l,r)}))):"OnExit"===s&&this.permutive.trigger(o,"result",(0,i.Z_)(e.network,e.userId,(function(e){e.result||w(l,r)})))}}buildOverlayCss(e,t){return'<style type="text/css">.${overlay_class}{position:fixed;top:0;bottom:0;left:0;right:0;width:100%;height:100%;background:rgba(0,0,0,0.${opacity_percentage});transition:opacity ${opacity_transition_ms}ms;visibility:hidden;opacity:0;z-index:1000000;}.${modal_class}{position:fixed;padding:10px;background:#fff;border-radius:5px;z-index:1000001}.${modal_class} .content{overflow:auto;z-index:1000002;}.${modal_class} .close{position:absolute;top:20px;right:30px;transition:all 200ms;font-size:30px;font-weight:bold;text-decoration:none;color:#333;z-index:1000003}.${modal_class} .close:hover{color:orange;}</style>'.replace(/\${overlay_class}/g,"permutive-overlay-"+t).replace(/\${modal_class}/g,"permutive-modal-"+t).replace("${opacity_percentage}",e.opacity_percentage.toString()).replace("${opacity_transition_ms}",e.opacity_transition_ms.toString())}buildOverlayBody(e,t){const n=this.options.config.windowKey;let i="";return!function(e){return void 0!==e.html}(e)?function(e){return void 0!==e.image_url&&void 0!==e.image_link}(e)&&(i='<a href="'+e.image_link+'"><img src="'+e.image_url+'"/></a>'):i=e.html,'<div id="${overlay_class}" class="${overlay_class}"><div id="${modal_class}" class="${modal_class}"><a class="close" href="javascript:;">&times;</a><div class="content">${content}</div></div></div>'.replace(/\${overlay_class}/g,"permutive-overlay-"+t).replace(/\${modal_class}/g,"permutive-modal-"+t).replace("${content}",i).replace(/<img /g,`<img onload='window[${n}].addons.overlays.loadedImage("permutive-overlay-" + num + "")' `)}showOverlay(e){const t=document.getElementById(`${e}`),n=()=>{const e=t.getElementsByTagName("div")[0],n=e.getBoundingClientRect().height,i=e.getBoundingClientRect().width;e.style.left=window.innerWidth/2-i/2+"px",e.style.top=window.innerHeight/2-n/2+"px",t.style.visibility="visible",t.style.opacity="1"},i=t.getElementsByTagName("img");if(i.length>0){let t=0;const r=()=>{t<10&&(!(e in this.loadedImageCounts)||this.loadedImageCounts[e]<i.length)?(t+=1,setTimeout(r,500)):n()};r()}else n()}loadedImage(e){e in this.loadedImageCounts?this.loadedImageCounts[e]=this.loadedImageCounts[e]+1:this.loadedImageCounts[e]=1}}},2863:(e,t,n)=>{n.r(t),n.d(t,{load:()=>i});const i=e=>{e.push({functionName:"addon",arguments:["dbm",{}]})}},208:(e,t,n)=>{n.r(t),n.d(t,{DDPPixel:()=>r,load:()=>o});const i=("https:"===location.protocol?"https:":"http:")+"//cm.g.doubleclick.net/pixel?google_nid=permutive_dmp&google_cm&type=ddp&k=";class r extends class{constructor(e,t,n){this.options=e,this.storageKey=t,this.syncTimeoutSeconds=n;const i=this.options.permutiveData.getData(this.storageKey);this.isExpired(i)&&(this.fire(this.makeUrl(e.config.apiKey,e.state.userId.get())),this.options.permutiveData.setData(t,(new Date).getTime()))}fire(e){(new Image).src=e}isExpired(e){return isNaN(e)||(new Date).getTime()>e+1e3*this.syncTimeoutSeconds}}{constructor(e){super(e,"addon:ddp",86400)}makeUrl(e,t){return i+e+"&u="+t}}const o=()=>{}},7926:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ScriptRunnerAddon:()=>ScriptRunnerAddon,load:()=>load});const load=e=>{e.unshift({functionName:"addon",arguments:["scriptrunner",{}]})};class ScriptRunnerAddon{constructor(options){this.permutive=options.permutive,this.options=options,this.network=options.network,this.activations=this.options.activationManager.getActivations("scriptrunner");for(let i=0;i<this.activations.length;i++){const activation=this.activations[i],triggerType=activation.getTriggerType(),segmentCode=activation.getSegmentCode(),run=activation=>{const script=activation.getConfig().script.replace(/impression\(\)/g,"activation.trackImpression();").replace(/conversion\(\)/g,"activation.trackConversion();");try{eval(script)}catch(e){e instanceof Error&&(e.message="Error running custom script: "+e.message,this.network.error(e,this.options.userId.get()))}};"EveryTime"===triggerType?this.permutive.segment(segmentCode,(e=>{e?run(activation):this.permutive.trigger(segmentCode,"result",(function(e){e.result&&run(activation)}))})):"OnEntry"===triggerType?this.options.queryManager.segmentEntryQueryCodes.has(segmentCode)?run(activation):this.permutive.trigger(segmentCode,"result",(function(e){e.result&&run(activation)})):"OnExit"===triggerType&&(this.options.queryManager.segmentExitQueryCodes.has(segmentCode)?run(activation):this.permutive.trigger(activation.getSegmentCode(),"result",(function(e){e.result||run(activation)})))}}}},2586:(e,t,n)=>{n.r(t),n.d(t,{PixelAddon:()=>o,load:()=>r});var i=n(6013);const r=e=>{e.push({functionName:"addon",arguments:["tracking_pixel",{}]})};class o{constructor(e){const t=this;this.options=e,this.latestStateByDomain=this.options.permutiveData.getData("addon:tracking_pixel")||{},this.activations=this.options.activationManager.getActivations("tracking_pixel");const n=0===Object.keys(this.latestStateByDomain).length;this.eligibleSegmentsForEntries={},this.eligibleSegmentsForExits={};for(let e=0;e<this.activations.length;e++){const t=this.activations[e],n=t.getTriggerType(),i=t.getSegmentCode(),r=t.getConfig().pixel_url,o=this.extractPixelType(r);"OnEntry"===n?(o in this.eligibleSegmentsForEntries||(this.eligibleSegmentsForEntries[o]={}),this.eligibleSegmentsForEntries[o][i]=t):"OnExit"===n&&(o in this.eligibleSegmentsForExits||(this.eligibleSegmentsForExits[o]={}),this.eligibleSegmentsForExits[o][i]=t)}const r=this.options.queryManager.userSegments.getAllAsList();n&&(0,i.Z_)(e.network,e.userId,(()=>this.firePixelsIfNecessary(r))),this.options.messages.on("permutive:segments:updated",(0,i.Z_)(e.network,e.userId,(()=>{const e=this.options.queryManager.userSegments.getAllAsList();t.firePixelsIfNecessary(e)}))),this.options.messages.on("permutive:reset",(0,i.Z_)(e.network,e.userId,(()=>{t.latestStateByDomain={},this.options.state.setPermutiveData("addon:tracking_pixel",{})})))}extractPixelType(e){return e.indexOf("://")>-1?e.split("/")[2]:e.split("/")[0]}firePixelsIfNecessary(e){const t=Object.keys(Object.assign(Object.assign({},this.eligibleSegmentsForEntries),this.eligibleSegmentsForExits)),n={},i=this.eligibleSegmentsForEntries,r=this.eligibleSegmentsForExits;t.forEach((t=>{n[t]=n[t]||[];for(let o=0;o<e.length;o++){const s=e[o];(i[t]&&i[t][s]||r[t]&&r[t][s])&&n[t].push(e[o])}})),t.forEach((e=>{const t=n[e]||[],o=Array.isArray(this.latestStateByDomain[e])?this.latestStateByDomain[e]:[];for(let n=0;n<t.length;n++){const r=t[n];if(-1===o.indexOf(r)){const t=i[e]&&i[e][r];"OnEntry"===(null==t?void 0:t.getTriggerType())&&this.firePixel(t)}}for(let n=0;n<o.length;n++){const i=o[n];if(-1===t.indexOf(i)){const t=r[e]&&r[e][i];"OnExit"===(null==t?void 0:t.getTriggerType())&&this.firePixel(t)}}})),this.latestStateByDomain=n,this.options.state.setPermutiveData("addon:tracking_pixel",this.latestStateByDomain)}firePixel(e){(new Image).src=e.getConfig().pixel_url,e.trackImpression()}}},8482:(e,t,n)=>{n.r(t),n.d(t,{WebAddon:()=>C,load:()=>k});var i=n(655),r=n(2688),o=n(8198),s=n(3735),a=n(4011),c=n(6567),u=n(7209),l=n(64),d=n(6013),g=n(3760),f=n(5506);const p=(0,f.MU)("add_alchemy_entities",!1),m=(0,f.MU)("add_alchemy_taxonomy",!1);function h(e){return Object.assign(Object.assign(Object.assign({},e&&m?{taxonomy_labels:"$alchemy_taxonomy_labels"}:{}),e&&p?{entity_names:"$alchemy_entity_names"}:{}),{})}function w(e,t,n,i){const r=Object.assign(Object.assign(Object.assign({isp_info:"$ip_isp_info",geo_info:"$ip_geo_info"},{}),e),t);n.track("Pageview",r).then((e=>{i.emit("permutive:event:pageview",e)}))}function _(e,t,n,i,r,o,s=!0,a=c.YP){const u=y(e,t,n,i,r),l=(0,c.fS)((()=>null))(a);let d={useBeacon:s};null!==l&&(d=Object.assign(Object.assign({},d),{unprocessedData:l})),o.track("PageviewComplete",u,d)}function y(e,t,n,i,r){return Object.assign(Object.assign(Object.assign({isp_info:"$ip_isp_info",geo_info:"$ip_geo_info"},i),n),{aggregations:Object.assign({PageviewEngagement:Object.assign({engaged_time:e},l.UW?{completion:t}:{})},l.ED?{SegmentEntry:Array.from(r.segmentEntryQueryCodes),SegmentExit:Array.from(r.segmentExitQueryCodes),CohortEntry:Array.from(r.cohortEntryQueryCodes),CohortExit:Array.from(r.cohortExitQueryCodes)}:{})})}const v=["mousemove","click","scroll"],b=["email","tel","submit","reset","button","file","password","radio","checkbox"],E=["email","e-mail","password","tel","telephone","phone","name_first","name_last","sa_zip"],k=(e,t)=>{0};class C{constructor(e){this.dirtyState=!1,this.totalCompletion=0,this.totalEngagedTime=0,this.hasPageviewCompleteFired=!1,this.cleanupPageEngagementDetection=s.Q1,this.permutive=e.permutive,this.options=e,this.api=e.api,this.clientContext=e.clientContext,this.logger=e.logger,this.unprocessedPVC=e.unprocessedEvents.PageviewComplete,this.options.customProperties.overrideCustomProps(e.page||{});this.pageEngagementDetected=(()=>{this.dirtyState=!0,l.Uy&&this.resetTimeout()}).bind(this),w(h(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.permutive,this.options.messages),this.enablePageEngagementDetection(),"loading"!==document.readyState?this.attachListeners():window.addEventListener("DOMContentLoaded",this.attachListeners.bind(this),!1),l.t2&&(this.timerHandle=this.registerEngagementInterval(this.getEventInterval())),l.Uy&&(this.setPageviewCompleteTimeout(l.MU),(0,d.aq)((()=>{this.hasPageviewCompleteFired||_(this.totalEngagedTime,this.totalCompletion,h(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.options.queryManager,this.permutive)})))}sendLinkClickEvent(e,t){if(window.location.href&&e.href){const n=0===e.href.indexOf("data:")?"NOT_URL":e.href;this.permutive.track("LinkClick",{dest_url:n},{useBeacon:t})}}sendFormSubmissionEvent(e){{const t=e.currentTarget,n={form:Object.assign(Object.assign(Object.assign({method:t.method||"GET",properties:this.serializeForm(t)},"string"==typeof t.id?{id:t.id}:{}),t.name&&"string"==typeof t.name?{name:t.name}:{}),t.action&&"string"==typeof t.action?{action:t.action}:{})};this.permutive.track("FormSubmission",n)}}trackEngagementInterval(e){return(0,s.zG)(this.updateState(e),(({engaged_time:e,total_engaged_time:t,completion:n,total_completion:i})=>function(e,t,n,i,r,o){const s=Object.assign(Object.assign({isp_info:"$ip_isp_info",geo_info:"$ip_geo_info",engaged_time:e,total_engaged_time:t},r),{completion:n,total_completion:i});o.track("PageviewEngagement",s)}(e,t,n,i,this.options.customProperties.getCustomProps(),this.permutive)),(e=>{if(!this.hasPageviewCompleteFired)return function(e,t,n,i,r,o,s,a,c){const u=y(e,t,s,a,c);return r.then((e=>{const t={props:u,sessionId:n,viewId:i,client:e};o.put(t)}))}(this.totalEngagedTime,this.totalCompletion,this.options.sessionManager.getSessionId(),this.options.viewId.get(),this.clientContext.getClient(),this.unprocessedPVC,h(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.options.queryManager)}))}reset(e){return(0,i.mG)(this,void 0,void 0,(function*(){if(this.disablePageEngagementDetection(),l.Uy){const e=yield this.unprocessedPVC.getIfPresent();this.hasPageviewCompleteFired=!1,_(this.totalEngagedTime,this.totalCompletion,h(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.options.queryManager,this.permutive,!1,e)}this.dirtyState=!1,this.options.state.viewId.generateAndSet(),this.totalCompletion=0,this.totalEngagedTime=0,this.options.customProperties.overrideCustomProps(e.page||{}),this.updateWebOptions(e),this.enablePageEngagementDetection();const t={logger:this.logger,config:Object.assign(Object.assign({},this.options.config),{watson:e.watson}),clientContext:this.clientContext,api:this.api,permutiveData:this.options.permutiveData,metrics:this.options.metrics,sessionManager:this.options.sessionManager,enrichers:this.options.enrichers,network:this.options.network};(0,g.H)(t)().then((()=>{w(h(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.permutive,this.options.messages),l.t2&&(clearInterval(this.timerHandle),this.timerHandle=this.registerEngagementInterval(this.getEventInterval()))}))}))}serializeForm(e){return[...e.getElementsByTagName("input")].filter((e=>!(!e.type||!e.id||e.disabled||e.checked||"fieldset"===e.nodeName.toLowerCase()||-1!==b.indexOf(e.type.toLowerCase())||-1!==E.indexOf(e.name.toLowerCase())))).map((e=>({name:e.name||e.id,value:e.value}))).filter((e=>e.value.length<120))}registerEngagementInterval(e){return setInterval((()=>{this.dirtyState&&this.trackEngagementInterval(e)}),1e3*e)}attachListeners(){const e=e=>"a"===e.tagName.toLowerCase(),t=n=>e(n)?(0,c.G)(n):n.parentElement?e(n.parentElement)?(0,c.G)(n.parentElement):t(n.parentElement):c.YP;l.eV&&[].slice.call(document.getElementsByTagName("form"),0).forEach((e=>{e.addEventListener("submit",(0,d.Z_)(this.options.network,this.options.userId,this.sendFormSubmissionEvent.bind(this)))})),l.qr&&document.body.addEventListener("click",(e=>{if(e.target instanceof Element){const n=t(e.target);return(0,c.g_)((()=>{}),(t=>this.sendLinkClickEvent(t,((e,t)=>!("_blank"===t.target||e.metaKey||e.ctrlKey||e.shiftKey||2===e.which||3===e.which))(e,t))))(n)}}),{capture:!0})}updateState(e){const t=Math.max(this.totalCompletion,this.getCurrentCompletion()),n=t-this.totalCompletion;return this.totalEngagedTime+=e,this.totalCompletion=t,this.dirtyState=!1,{engaged_time:e,total_engaged_time:this.totalEngagedTime,completion:n,total_completion:this.totalCompletion}}getCurrentCompletion(){if("function"==typeof this.options.getPageCompletion)return(0,s.zG)((0,o.Y3)((0,s.ls)(this.options.getPageCompletion,Number,(e=>isNaN(e)?0:e),(0,u.uZ)(a.Df)(0,1)),r.w),(0,o.EQ)((e=>(this.logger.warn("Web: invoking getPageCompletion threw an error. Got",e),0)),(e=>(this.logger.debug("Web: invoking getPageCompletion returned",e),e))));return(()=>{const e=document.documentElement.scrollHeight,t=window.pageYOffset+window.innerHeight;return t<=0?0:t>=e?1:t/e})()}setPageviewCompleteTimeout(e){return window.setTimeout((()=>{this.hasPageviewCompleteFired||(_(this.totalEngagedTime,this.totalCompletion,h(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.options.queryManager,this.permutive,!1),this.hasPageviewCompleteFired=!0)}),e)}resetTimeout(){clearTimeout(this.pageviewCompleteTimeoutHandle),this.pageviewCompleteTimeoutHandle=this.setPageviewCompleteTimeout(l.MU)}registerPageEngagementCleanup(e){if("function"!=typeof e)return this.logger.warn("No page detection cleanup was registered"),null;this.cleanupPageEngagementDetection=()=>(0,o.Y3)((()=>{e(),this.cleanupPageEngagementDetection=s.Q1}),(e=>this.logger.warn("Page detection cleanup threw an error",(0,r.w)(e))))}enablePageEngagementDetection(){this.options.addPageEngagementDetection&&(0,s.zG)(this.options.addPageEngagementDetection(this.pageEngagementDetected),(e=>this.registerPageEngagementCleanup(e))),this.setDirtyEventListenersTo(!0,this.getDirtyEvents())}disablePageEngagementDetection(){this.cleanupPageEngagementDetection(),this.setDirtyEventListenersTo(!1,this.getDirtyEvents())}setDirtyEventListenersTo(e,t){const n=e?window.addEventListener:window.removeEventListener;return t.forEach((e=>n(e,this.pageEngagementDetected))),null}getDirtyEvents(){return this.options.dirtyEvents||v}getEventInterval(){return this.options.eventInterval||5}updateWebOptions(e){var t;e.watson={enabled:"boolean"==typeof(null===(t=e.watson)||void 0===t?void 0:t.enabled)?e.watson.enabled:this.options.config.watson.enabled};const n={addPageEngagementDetection:void 0,dirtyEvents:void 0,eventInterval:void 0,getPageCompletion:void 0,page:void 0,watson:void 0};return this.options=Object.assign(Object.assign(Object.assign({},this.options),n),e)}}},275:(e,t,n)=>{n.d(t,{J:()=>r});const i=e=>"string"==typeof e&&"$"===e[0];class r{constructor(){this.replacementMap={}}register(e){this.replacementMap=Object.assign(Object.assign({},this.replacementMap),e.getReplacementMap)}enrich(e,t){return this.enrichRecursive(e,t)}enrichRecursive(e,t){const n={output:{},isFullyEnriched:!0},r=Object.keys(e);for(let o=0;o<r.length;o++){const s=r[o],a=e[s];switch(!0){case i(a):const[e,r]=this.isPropertyReplaceable(a);n.output[s]=e?r:a,this.replacementMap.hasOwnProperty(a)&&r===a&&t&&delete n.output[s],n.isFullyEnriched=!!e&&n.isFullyEnriched;break;case null!==a&&"object"==typeof a&&a.constructor===Object:const o=this.enrichRecursive(a,t);n.output[s]=o.output,n.isFullyEnriched=n.isFullyEnriched&&o.isFullyEnriched;break;default:n.output[s]=a}}return n}isPropertyReplaceable(e){const t=this.replacementMap[e];return[this.replacementMap.hasOwnProperty(e)&&t!==e,t]}}},3760:(e,t,n)=>{n.d(t,{B:()=>a,H:()=>c});var i=n(3735),r=n(5151),o=n(9705);const s=[],a=e=>{s.push(e)},c=e=>{const t=s.map((t=>(0,o.Y3)((()=>t.load(e)),(t=>{e.network.error(t)}))));return(0,i.zG)((0,r.RD)(t),(0,r.UI)(i.Q1))}},4762:(e,t,n)=>{n.d(t,{F:()=>o});var i=n(3735),r=n(6567);class o{constructor(e,t,n){this.urls=e,this.config=t,this.network=n}identify(e,t,n){const i=()=>this.reqWithMetrics(e,"sdk_http_identify_seconds",{url:this.urls.getEndpointUrl("/identify",(0,r.G)(this.config.apiVersion)),method:"POST",payload:{user_id:t.get(),aliases:n},contentType:"text/plain",dataType:"json",withCredentials:!0});return this.identifyPromise?this.identifyPromise=this.identifyPromise.then(i):this.identifyPromise=i()}metrics(e){return this.network.req({url:this.urls.getEndpointUrl("/internal/metrics",(0,r.G)(this.config.apiVersion)),method:"POST",payload:e,contentType:"text/plain",dataType:"text",withCredentials:!1})}track(e,t,n){const i=this.getTrackUrl(t,{isFullyEnriched:n,useBeacon:!1});return this.reqWithMetrics(e,"sdk_http_events_seconds",{url:i,method:"POST",payload:t,contentType:"text/plain",dataType:"json",withCredentials:!1})}trackBatch(e,t){const n=this.getTrackUrl(t,{isFullyEnriched:!0,useBeacon:!1});return this.reqWithMetrics(e,"sdk_http_events_seconds",{url:n,method:"POST",payload:t,contentType:"text/plain",dataType:"json",withCredentials:!1})}trackBeacon(e,t){const n=this.getTrackUrl(e,{isFullyEnriched:t,useBeacon:!0});return this.network.reqWithBeacon({url:n,payload:e})}trackBatchBeacon(e){const t=this.getTrackUrl(e,{isFullyEnriched:!0,useBeacon:!0});return this.network.reqWithBeacon({url:t,payload:e})}tpd(e,t){return this.reqWithMetrics(e,"sdk_http_tpd_seconds",{url:this.urls.getEndpointUrl("/tpd",(0,r.G)(this.config.apiVersion)),method:"POST",payload:{user_id:t},contentType:"text/plain",dataType:"json",withCredentials:!1})}tpdUsage(e,t){return this.reqWithMetrics(e,"sdk_http_tpd_usage_seconds",{url:this.urls.getEndpointUrl("/tpd/usage",(0,r.G)(this.config.apiVersion)),method:"POST",payload:t,contentType:"text/plain",dataType:"json",withCredentials:!1})}audienceMatching(e,t,n){return this.reqWithMetrics(e,"sdk_http_audience_matching_seconds",{url:this.urls.getAudienceMatchingEndpointUrl("/id",(0,r.G)("v1"),t),payload:n,method:"POST",withCredentials:!1,dataType:"json"})}reset(e){return this.reqWithMetrics(e,"sdk_http_reset_seconds",{url:this.urls.getEndpointUrl("/reset",(0,r.G)(this.config.apiVersion)),method:"POST",payload:null,contentType:"text/plain",dataType:"json",withCredentials:!0})}segmentSync(e){return this.network.req({url:`https://${this.config.segmentSyncApiHost}/sync/${e.key}`,method:"POST",payload:`value=${encodeURIComponent(e.value)}`,contentType:"application/x-www-form-urlencoded",dataType:"json",withCredentials:!0})}modelsBinary(e){return this.reqWithMetrics(e,"sdk_http_models_seconds",{url:this.getModelsUrl("binary"),method:"GET",contentType:"text/plain",dataType:"binary",withCredentials:!1})}modelsJson(e){return this.reqWithMetrics(e,"sdk_http_models_seconds",{url:this.getModelsUrl("json"),method:"GET",contentType:"text/plain",dataType:"json",withCredentials:!1})}state(e,t,n,i,o,s){return this.reqWithMetrics(e,"sdk_http_reset_seconds",{url:this.urls.getEndpointUrl("/state",(0,r.G)("v1.0"),[["fetch_unseen",JSON.stringify(s)]]),method:"POST",payload:{group_id:t,event_source_id:n,state:JSON.stringify(i),last_seen_offset:o},contentType:"text/plain",dataType:"json",withCredentials:!1})}cleanRoom(e,t){return this.network.req({url:this.urls.getAdvertiserEndpointUrl("/segment",(0,r.G)(this.config.advertiserApiVersion),[["new-session",e.toString()]]),method:"POST",payload:t,contentType:"text/plain",dataType:"json",withCredentials:!1})}appnexus(e){return this.network.req({url:e,method:"GET",contentType:"text/plain",dataType:"json",withCredentials:!0,timeout:2e3})}pxid(e){return this.network.req({url:this.urls.makeAuthenticatedUrl(e),method:"GET",contentType:"text/plain",dataType:"json",withCredentials:!0,timeout:2e3})}queries(){const e={addons:{dfp:{activations:{dfp:[],dfp_legacy:{}},auto_init:!0,track_slot_rendered:!1,track_slot_viewable:!1,track_slot_clicked:!1,track_targeting_keys:!1,sync_segments_cookie:!1},web:{auto_init:!1,track_pageview_engagement:!0,track_pageview_complete:!0,track_form_submission:!1,track_link_click:!1,engagement_edge_only:!0,segment_transition_edge_only:!1}},queries:{queries:{},eventSegments:{},eventsLookup:[],literalsLookup:[],subexpressionsLookup:[],stateSyncReplays:[],propertiesLookup:[]},queries_metadata:{}},t=`${this.config.cdnBaseUrl.startsWith("dev.local:")?"http":"https"}://${this.config.cdnBaseUrl}/queries/e1c3fd73-dd41-4abd-b80b-4278d52bf7aa-amp.json`;return this.network.req({url:t,withCredentials:!1,dataType:"json",method:"GET"}).catch((()=>e))}pxidReset(e){return this.network.req({url:this.urls.makeAuthenticatedUrl(e),method:"POST",payload:null,contentType:"text/plain",dataType:"json",withCredentials:!0})}getSocioDemoPredictions(e){return this.network.req({method:"POST",url:this.urls.getEndpointUrl("/demographic/infer/v3",(0,r.G)(this.config.apiVersion)),dataType:"json",payload:e,withCredentials:!1})}reqWithMetrics(e,t,n){const r=e.startTimer(t,{});return this.network.req(n).then((n=>(0,i.zG)(e.stopTimer(t,r),(e=>n))))}getTrackUrl(e,t){const{isFullyEnriched:n,useBeacon:i}=t,o=Array.isArray(e),s=!n;return this.urls.getEndpointUrl(o?"/batch/events":"/events",(0,r.G)(this.config.apiVersion),[["enrich",JSON.stringify(s)],["sdkp",JSON.stringify(!i)]])}getModelsUrl(e){const t=`https://${this.config.cdnBaseUrl}`;switch(e){case"binary":return`${t}/models/v2/e1c3fd73-dd41-4abd-b80b-4278d52bf7aa-models.bin`;case"json":return`${t}/models/e1c3fd73-dd41-4abd-b80b-4278d52bf7aa-models.json`}}}},550:(e,t,n)=>{n.d(t,{XO:()=>r,bk:()=>s,kJ:()=>i,mh:()=>o,sv:()=>a});const i=e=>Object.assign({id:e.id,name:e.name,time:new Date(e.time),properties:e.properties||{}},c(e)),r=e=>Object.assign({id:e.id||null,name:e.name,time:(u(e.time)?e.time:new Date).toISOString(),properties:e.properties||{}},c(e)),o=(e,t)=>Object.assign({id:e.id,time:new Date(e.time),name:t.name,properties:t.properties},c(t)),s=e=>void 0!==e.request_id,a=e=>void 0!==e.properties,c=e=>Object.assign(Object.assign({},e.session_id?{session_id:e.session_id}:{}),e.view_id?{view_id:e.view_id}:{}),u=e=>isFinite(e)&&e instanceof Date},8110:(e,t,n)=>{n.d(t,{s:()=>r});var i=n(6567);class r{constructor(e){this.config=e,this.PATH_JOINER_Q="?",this.PATH_JOINER_A="&"}getEndpointUrl(e,t,n=[]){return this.getUrl("base",e,t,n)}getSdkErrorsUrl(e,t){return this.getUrl("sdk-errors",e,t,[])}getAdvertiserEndpointUrl(e,t,n=[]){return this.getUrl("adv",e,t,n)}getClassificationModelsEndpointUrl(e,t,n=[]){return this.getUrl("clm",e,t,n)}getAudienceMatchingEndpointUrl(e,t,n,i=[]){const r=`${e}/${n}/audiences`;return this.getUrl("audience-matching",r,t,i)}makeAuthenticatedUrl(e){return this.makeUrlWithQueryParams(e,[["k",this.config.apiKey]])}getUrlPrefix(e){switch(e){case"base":return"";case"adv":return"/adv";case"sdk-errors":return"/sdk-errors";case"clm":return"/clm";case"audience-matching":return"/audience-matching"}}getUrl(e,t,n,r){const o=this.getUrlPrefix(e),s=(0,i.g_)((()=>""),(e=>`/${e}`))(n),a=`${this.config.apiProtocol}://${this.config.apiHost}${o}${s}${t}`;return this.makeUrlWithQueryParams(a,r.concat([["k",this.config.apiKey]]))}makeUrlWithQueryParams(e,t){const n=t.map((([e,t])=>`${e}=${t}`)).join(this.PATH_JOINER_A),i=e.includes(this.PATH_JOINER_Q)?this.PATH_JOINER_A:this.PATH_JOINER_Q;return`${e}${i}${n}`}}},7703:(e,t,n)=>{n.d(t,{v:()=>k});var i=n(655),r=n(3735);var o=n(503);function s(e){return function(e){return t=>{const n=e(t),i=o.vP(t.input,n.output,n.state);return Object.assign(Object.assign({},n),{output:(0,r.zG)(i,o.UI((([e,t])=>t))),state:(0,r.zG)(i,o.UI((([e,t,n])=>n)))})}}((t=>{return n=e(t),i=a,r=n,Object.assign(Object.assign({},i),r);var n,i,r}))}const a={output:o.a9(void 0),state:o.a9(void 0),stop:()=>(0,i.mG)(void 0,void 0,void 0,(function*(){}))};var c=n(6013),u=n(6567);function l(e){const t=(0,r.zG)(o.vP(function(e){0;const{consent:t}=e;return t}(e),function({messages:e}){const[t,n]=o.Ue(new Set);return e.on("permutive:addon:preinit",(e=>n(new Set([...t.current,e])))),t}(e),function({messages:e,userSegments:t,logger:n}){const i="[Ref: QL segments]",s=()=>(0,r.zG)([...t.getAllAsList()],u.DT((e=>e.length>0))),[a,l]=o.Ue(s());return n.debug(i,"initialised",{segments:a.current}),e.on("permutive:segments:updated",(()=>{const e=s();n.debug(i,"updated",{segments:e}),l(e)})),e.on("permutive:reset",(()=>{n.debug(i,"reset"),l(u.YP)})),(0,r.zG)(a,o.q(((e,t)=>u.pC(e)&&u.pC(t)?(0,c.cO)(e.value,t.value):u.pC(e)===u.pC(t))))}(e),function({messages:e,realtime:t}){const[n,i]=o.Ue(t.isReady());return e.on("permutive:ready",(()=>i(!0))),n}(e),function({messages:e,realtime:t}){var n;const[i,r]=o.Ue(null!==(n=t.isRealtime())&&void 0!==n&&n);return e.on("permutive:realtime",(()=>r(!0))),e.on("permutive:reset",(()=>r(!1))),i}(e),e.userId.getRef()),o.UI((([e,t,n,i,r,o])=>({consent:e,enabledAddons:t,queryLanguageSegments:n,ready:i,realtime:r,userId:o})))),[n,i]=o.Ue(t.current);return t.onChange((()=>setTimeout((()=>i(t.current))))),n}function d(){return({input:e})=>({components:{},output:e,state:o.a9({}),stop:()=>(0,i.mG)(this,void 0,void 0,(function*(){}))})}function g(e,t,n){return s=>a=>{const c=s(a),u=f(a.previousState)?a.previousState[e]:null,l=(0,r.zG)(c.output,o.UI(n)),d=t({previousState:u,input:l});return{components:Object.assign(Object.assign({},c.components),{[e]:d}),output:(0,r.zG)(o.vP(c.output,d.output),o.UI((([t,n])=>Object.assign(Object.assign({},t),{[e]:n})))),state:(0,r.zG)(o.vP(c.state,d.state),o.UI((([t,n])=>Object.assign(Object.assign({},t),{[e]:n})))),stop:()=>(0,i.mG)(this,void 0,void 0,(function*(){yield Promise.all([d.stop(),c.stop()])}))}}}const f=function(e){return"object"==typeof e&&!!e&&e.constructor===Object};function p(e){return t=>n=>{const i=t(n);return Object.assign(Object.assign({},i),{output:e(i.output)})}}var m=n(8198),h=n(3328),w=n(6172);const _={userId:"",requestInFlight:!1};const y={allCohorts:[],gam:[],xandrSsp:[]},v=function(e){const t=function(e){return t=>e.permutiveApi.req({url:e.permutiveUrls.getClassificationModelsEndpointUrl("/segment",(0,u.G)(e.config.classificationModelsApiVersion)),method:"POST",payload:{userCohorts:t.cohorts,userId:t.userId},contentType:"text/plain",dataType:"json",withCredentials:!1})}(e);return s((({previousState:e,input:n})=>{const i=function(e){if("object"==typeof e&&null!==e)return e;return}(e),s=i?{userId:i.userId,requestInFlight:!1,lastResponse:{timestamp:i.responseTimestamp,content:i.response}}:{userId:n.current.userId,requestInFlight:!1},a=(0,r.zG)(n,o.g_(o.a9(s),((e,n)=>(0,r.zG)(e,o.VS((e=>{var i,s;if(!n.consent)return o.a9(_);const a=n.userId,c=a===(null==e?void 0:e.userId)?e:{userId:a,requestInFlight:!1};if(!(n.enabledAddons.has(w.addonName)&&n.realtime&&(0,u.pC)(n.queryLanguageCohorts)))return o.a9(c);if(Date.now()-(null!==(s=null===(i=c.lastResponse)||void 0===i?void 0:i.timestamp)&&void 0!==s?s:0)<18e5)return o.a9(c);const l={userId:a,cohorts:n.queryLanguageCohorts.value};return(0,r.zG)(o.p4(t(l)),o.UI((0,u.EQ)((()=>Object.assign(Object.assign({},c),{requestInFlight:!0})),(0,m.EQ)((e=>Object.assign(Object.assign({},c),{requestInFlight:!1})),(e=>({userId:a,requestInFlight:!1,lastResponse:{timestamp:Date.now(),content:e}}))))))}))))),o.xH,(e=>o.vP(n,e)),o.UI((([e,t])=>e.enabledAddons.has(w.addonName)?t:_)));return{output:(0,r.zG)(a,o.UI((e=>{return e.lastResponse?(t=e.lastResponse.content,{allCohorts:(0,h.xH)(Object.values(t)),gam:t.gam||[],xandrSsp:t.xandrSsp||[]}):y;var t})),o.u4(((e,t)=>({allCohorts:(0,c.cO)(e.allCohorts,t.allCohorts)?e.allCohorts:t.allCohorts,gam:(0,c.cO)(e.gam,t.gam)?e.gam:t.gam,xandrSsp:(0,c.cO)(e.xandrSsp,t.xandrSsp)?e.xandrSsp:t.xandrSsp}))),o.q(((e,t)=>(0,c.cO)([e.allCohorts,e.gam,e.xandrSsp],[t.allCohorts,t.gam,t.xandrSsp])))),state:(0,r.zG)(a,o.UI((e=>e.lastResponse&&{userId:e.userId,responseTimestamp:e.lastResponse.timestamp,response:e.lastResponse.content})))}}))},b=e=>{return(0,r.zG)(d(),g("classificationModels",v(e),r.yR),p(o.UI((e=>({cohorts:{all:e.classificationModels.allCohorts,gam:e.classificationModels.gam,xandrSsp:e.classificationModels.xandrSsp}})))),(e=>n=>{const r=e(n);if(t)return t(r);const{components:o}=r;return(0,i._T)(r,["components"])}));var t};u.YP;function E(e){return(0,r.zG)(d(),g("publisherCohorts",b(e),(e=>({consent:e.consent,enabledAddons:e.enabledAddons,queryLanguageCohorts:e.queryLanguageSegments,realtime:e.realtime,userId:e.userId}))),p((0,r.ls)(o.UI((e=>({cloudCohorts:e.publisherCohorts.cohorts,queryLanguageSegments:e.queryLanguageSegments}))),o.q((t=e=>[e.cloudCohorts,e.queryLanguageSegments],(e,n)=>(0,c.cO)(t(e),t(n)))))));var t}function k(e){const t=function(e){const t=function(e){const{config:t,logger:n,metrics:i,network:r,urls:o}=e;return{config:t,logger:n,metrics:i,permutiveApi:r,permutiveUrls:o,reportError:(e,t={})=>{r.error(e,null==t?void 0:t.userId,null==t?void 0:t.timestamp)}}}(e),n=e.namespace.getNamespacedStorageKey("permutive-app"),s=5e3;return(0,r.zG)(E(t),function(e){return t=>n=>{const r=t(n),[s,a]=o.Ue(r.state.current),u=()=>a(r.state.current),l=setInterval(u,e);let d=!1;return(0,c.aq)((()=>!d&&u()),navigator.userAgent),Object.assign(Object.assign({},r),{state:s,stop:()=>(0,i.mG)(this,void 0,void 0,(function*(){d=!0;const e=r.stop();u(),clearInterval(l),yield e}))})}}(s),S,C,function(e){return t=>({input:n})=>{const i=localStorage.getItem(e),s=t({previousState:i,input:n});return(0,r.zG)(s.state,o.YP((t=>{switch(typeof t){case"string":localStorage.setItem(e,t);break;case"undefined":localStorage.removeItem(e);break;case"object":if(null===t){localStorage.removeItem(e);break}throw new Error("Permutive app raised an invalid state.");default:throw new Error("Permutive app raised an invalid state.")}}))),s}}(n))}(e);return t({input:l(e)}).output}const C=(P=e=>{if("string"!=typeof e)return{};try{return JSON.parse(e)}catch(e){return{}}},q=o.UI(JSON.stringify),e=>t=>{var{previousState:n}=t,r=(0,i._T)(t,["previousState"]);const o=e(Object.assign({previousState:P(n)},r));return Object.assign(Object.assign({},o),{state:q(o.state)})});var P,q;function S(e){return({previousState:t,input:n})=>{const i=(0,r.zG)(n,o.UI((e=>e.consent))),s=i.current?t:void 0,a=e({previousState:s,input:n});return Object.assign(Object.assign({},a),{state:(0,r.zG)(o.vP(i,a.state),o.UI((([e,t])=>e?t:void 0)))})}}},6146:(e,t,n)=>{n.d(t,{NY:()=>f,vk:()=>l,qA:()=>u});var i=n(655),r=n(3735),o=n(503),s=n(3195),a=n(4438);var c=n(1728);const u=()=>({opt_in:!0,token:a.L}),l=()=>({opt_in:!1,token:""}),d=e=>{return(0,r.ls)((t=e,e=>(0,r.zG)((0,c.J)(t.consentRequired,e),(({consentData:e,isValid:n})=>(t.consentDatabase.put(e,a.L),n)))),(({logger:e,messages:t})=>n=>{const i=n?"given":"revoked";return e.log("Consent has been",i),t.emit(`permutive:consent:${i}`),n})(e));var t},g=e=>(t,n)=>{e.on("permutive:consent:revoked",t),e.on("permutive:consent:given",n)},f=(e,t,n,{consentRequired:u})=>(0,i.mG)(void 0,void 0,void 0,(function*(){const i={consentRef:o.a9(!0),isGiven:()=>!0,isRevoked:()=>!1,listenForConsent:r.Q1},l=(0,s.S)(n,t,i),{consentRef:f,giveConsent:p,revokeConsent:m,isRevoked:h,isGiven:w}=(()=>{const[e,t]=o.Ue(!0),n=()=>!0===e.current;return{consentRef:e,revokeConsent:()=>(t(!1),e.current),giveConsent:()=>(t(!0),e.current),isRevoked:()=>!n(),isGiven:n}})(),_=yield l.get(a.L);(0,c.J)(u,_).isValid?p():m();const y={consentRef:f,isGiven:w,isRevoked:h,listenForConsent:g(e)};y.listenForConsent(m,p);return{consentTracking:y,consentValidation:d({consentDatabase:l,consentRequired:u,logger:t,messages:e}),consentDatabase:l}}))},4438:(e,t,n)=>{n.d(t,{L:()=>i});const i="permutive-consent"},9658:(e,t,n)=>{n.d(t,{D:()=>d});var i=n(5846),r=n(8198),o=n(3735),s=n(6567),a=n(5151),c=n(6992),u=n(4438),l=n(1728);const d=e=>{const{partialTagWithKey:t}=e,n=t.key;var d;window[n].consent=(d=e,(0,o.ls)(d.consentModule.consentValidation,(e=>e?(0,c.H)(d)():null)));const g=(0,s.EQ)((()=>{return t={consentDatabase:e.consentModule.consentDatabase,consentRequired:e.tag.config.consentRequired},(0,o.zG)((0,o.a9)(t.consentDatabase.get(u.L)),(0,a.UI)((e=>(0,l.J)(t.consentRequired,e).isValid)));var t}),a.of);return(0,o.zG)((0,o.zG)((({consentModule:e,tag:t})=>{const n=(0,i.Ew)((function(e){return"consent"===e.functionName}))(t.q);return(0,s.UI)((t=>e.consentValidation(t.arguments[0])))(n)})(e),g),(0,a.UI)((e=>e?(0,r.F2)(!0):(0,r.t$)("No consent to run on the page"))))}},5097:(e,t,n)=>{n.d(t,{v:()=>i});const i=(e,t,n)=>(...i)=>(n()?t:e)(...i)},1728:(e,t,n)=>{n.d(t,{J:()=>s});var i=n(3735),r=n(6567),o=n(6146);const s=(e,t)=>(0,i.zG)((0,r.ij)(t),(t=>!1===e&&(0,r.Wi)(t)?{isValid:!0,consentData:(0,o.qA)()}:(e=>(0,r.pC)(e)&&(e=>null!==e&&"object"==typeof e)(e.value)&&(e=>{var t;return!0===e.opt_in&&"string"==typeof e.token&&(null===(t=e.token)||void 0===t?void 0:t.length)>0})(e.value))(t)?{isValid:!0,consentData:t.value}:{isValid:!1,consentData:(0,o.vk)()}))},4910:(e,t,n)=>{n.d(t,{S:()=>G});var i=n(3735),r=n(655),o=n(6567),s=n(503),a=n(8206),c=n(4011),u=n(5857),l=n(64),d=n(550);const g=(e,t)=>{switch(f(e.event,e.isEventFullyEnriched,t)){case"immediate":return m(e);case"memoryOnly":return h(e);case"response":return w(e);case"deferred":return _(e);case"never":return y(e)}},f=(e,t,n)=>n?"deferred":p(e.name,t),p=(e,t)=>q.has(e)?"memoryOnly":P.has(e)?"never":t?"immediate":"response",m=({event:e,requestData:t,requestOptions:n,queryManager:o,eventsBatch:s,stateSync:a,metrics:l,logger:d})=>(0,r.mG)(void 0,void 0,void 0,(function*(){const[r,{segmentsEntered:g,segmentsExited:f}]=yield k(e,l,o,d),p=(0,u.e5)(c.Eq)((0,u.G0)(c.Eq)(new Set(t.segments),g),f);return d.log(`Adding ${e.name} to batch, with segments`,p),Promise.all([s.add(Object.assign(Object.assign({},t),{segments:[...p],cohorts:[...(()=>{let e=new Set;for(const t of p)e.add(t.toString());return t.cohorts.forEach((t=>e.add(t))),e})()]}),n,"immediate"),a.sync(r)]).then(i.Q1)})),h=({event:e,metrics:t,queryManager:n,logger:r})=>k(e,t,n,r).then(i.Q1),w=({requestData:e,requestOptions:t,queryManager:n,eventsCache:i,eventHandler:r,api:o,metrics:s,logger:a})=>o.track(s,e,!1).then((r=>v(r,e,t,i,s,n,a))).then((({event:e,error:t})=>C(r,e,t))),_=({event:e,isEventFullyEnriched:t,requestData:n,api:r,eventHandler:s})=>Promise.all([r.trackBeacon(n,t),C(s,e,o.YP)]).then(i.Q1),y=({requestData:e,requestOptions:t,eventsBatch:n})=>n.add(e,t,"never"),v=(e,t,n,i,r,o,s)=>(0,d.bk)(e)?b(e,t,n):E(e,t,n,i,r,o,s),b=(e,t,n)=>{const r={name:t.name,session_id:t.session_id,view_id:t.view_id,properties:t.properties,id:null,time:new Date};return(0,i.zG)(n.error(e.error.message),(t=>Promise.resolve({event:r,error:(0,o.G)(e)})))},E=(e,t,n,r,s,a,c)=>{const u=(0,d.sv)(e)?(0,d.kJ)(Object.assign(Object.assign({},e),{session_id:t.session_id,view_id:t.view_id})):(0,d.mh)(e,t);return k(u,s,a,c).then((e=>(0,i.zG)(n.success(u),(e=>r.add(u,{persistOnDisk:!0})),(e=>({event:u,error:o.YP})))))},k=(e,t,n,r)=>L.has(e.name)?(0,i.zG)(t.startTimer("sdk_events_querylanguage_seconds",{}),(o=>n.process(e,!0).then((n=>(0,i.zG)(t.stopTimer("sdk_events_querylanguage_seconds",o),(t=>r.log("Processing event",e,"caused the following update",n)),(e=>n)))))):Promise.resolve([{},{segmentsEntered:new Set,segmentsExited:new Set}]),C=(e,t,n)=>{A.has(t.name)||e.newEvent((0,d.XO)(t),(0,o.fS)((()=>null))(n))},P=new Set(["ThirdPartySegments","SlotRendered"]),q=new Set([...l.D0?["PageviewEngagement"]:[],...l.ED?["SegmentEntry","SegmentExit"]:[]]),S=new Set(["PageviewComplete"]),A=new Set(["PrebidAuctions"]),L=new Set(["!UpdateSecondPartyData","AdImpressionTracker","FormSubmission","LinkClick","Pageview","PageviewComplete","PageviewEngagement","SegmentEntry","SlotClicked","SlotViewable","VideoEngagement"]);var I=n(1057),M=n(3351);var D=n(6013);class x{constructor(e,t={}){this.wait_prev=t.wait_prev||!1,this.block_next=t.block_next||!1,this.started=!1,this.complete=!1,this.task=e}waits(){return this.wait_prev}blocks(){return this.block_next}execute(e){this.started=!0,this.task((()=>{this.complete=!0,e()}))}}var O=n(8941);class T{constructor(e,t,n,i,r,o,s,a,c,u,l,d,g,f,p,m,h,w,_,y,v,b,E,k,C,P,q,S,A,L,I,M,D,x,O){this.namespace=e,this.logger=t,this.api=n,this.eventHandler=i,this.activationManager=r,this.sessionManager=o,this.metrics=s,this.viewId=a,this.userId=c,this.network=u,this.enrichers=l,this.clientContext=d,this.unprocessedEvents=g,this.eventsBatch=f,this.queryManager=p,this.stateSync=m,this.eventsCache=h,this.taskQueue=w,this.identities=_,this.permutiveReset=y,this.messages=v,this.addons=b,this.trace=E,this.permutiveRealtime=k,this.state=C,this.customProperties=P,this.config=q,this.permutiveData=S,this.externalData=A,this.cookies=L,this.thirdParty=I,this.models=M,this.identitiesIngestor=D,this.global=x,this.nextGenOutput=O,this.initialisedAddons=[],this.triggerListeners=[],this.cloudCohorts=this.setupCloudCohortRef()}identify(e){this.logger.debug("<call> identify",e);const t=(0,D.b2)(),n=this.identities.parseCustomerDefinedIdentities(e),i=Object.assign(Object.assign({},this.identities.getIdentitiesMap()),n.reduce(((e,{tag:t,id:n,priority:i,expiry:r})=>Object.assign(Object.assign({},e),{[t]:Object.assign(Object.assign({id:n},void 0!==i?{priority:i}:{}),void 0!==r?{expiry:r}:{})})),{})),o=Object.values(i).map((e=>e.id)),s=this.identities.getPrioritizedIdentities(i);if("string"==typeof e&&(0,a.Bt)("e1c3fd73-dd41-4abd-b80b-4278d52bf7aa","e1c3fd73-dd41-4abd-b80b-4278d52bf7aa",o,window.location.hostname,this.userId.get()))return t.resolve(),t.promise;const c=()=>(0,r.mG)(this,void 0,void 0,(function*(){yield(0,O.WI)({logger:this.logger,queryManager:this.queryManager,thirdParty:this.thirdParty,trace:this.trace})})),u=e=>(0,r.mG)(this,void 0,void 0,(function*(){yield(0,O.Yj)({clientContext:this.clientContext,eventsCache:this.eventsCache,global:this.global,identities:this.identities,logger:this.logger,metrics:this.metrics,models:this.models,queryManager:this.queryManager,reset:this.permutiveReset,stateSync:this.stateSync,thirdParty:this.thirdParty,trace:this.trace,userId:this.userId},e.user_id)}));return this.taskQueue.add(new x((e=>(0,r.mG)(this,void 0,void 0,(function*(){this.logger.debug("<task> identify ",n);const i=yield this.api.identify(this.metrics,this.userId,s);this.identities.setIdentities(n),this.userId.isEqual(i.user_id)?yield c():yield u(i),this.logger.debug("<done> identify",n),e(),t.resolve(),yield this.identitiesIngestor.ingestIfEligible(n).catch((e=>this.network.error(`Couldn't ingest identities, got ${e}`,this.userId.get())))}))),{wait_prev:!0,block_next:!0})),t.promise}on(e,t){return this.eventHandler.addListener({name:e,callback:t,once:!1})}once(e,t){return this.eventHandler.addListener({name:e,callback:t,once:!0})}track(...e){var t,n,r;const[o,s,a]=[e[0],e[1]||{},e[2]||{}],c=this.trace.startSpan("track_event");this.logger.log("<call> track",o);const u=(0,D.b2)();if(!this.api)return this.network.error("The API hasn't been loaded."),u.reject(),u.promise;const l=null!==(t=a.unprocessedData)&&void 0!==t?t:{},d=null!==(n=l.sessionId)&&void 0!==n?n:this.sessionManager.getSessionId(),f=null!==(r=l.viewId)&&void 0!==r?r:this.viewId.get(),p={success:a.success||(e=>{}),error:a.error||((e,t)=>{})};return this.taskQueue.add(new x((e=>{this.logger.log("<task> track",o);const{output:t,isFullyEnriched:n}=this.enrichers.enrich(s,q.has(o));this.metrics.track({name:n?"sdk_event_enrichment_success_count":"sdk_event_enrichment_fail_count",value:1,labels:{}});return(l.client?Promise.resolve(l.client):this.clientContext.getClient()).then((r=>{var l;const m=Object.assign(Object.assign({},t),{client:s.client?(0,D.PM)(r,s.client):r}),h={user_id:this.userId.get(),name:o,cohorts:Array.from(this.cloudCohorts.current).concat(this.queryManager.userSegments.getAllAsList().map(String)),segments:this.queryManager.userSegments.getAllAsList(),properties:m,session_id:d,view_id:f},w={name:o,properties:m,session_id:d,view_id:f,time:new Date};return((e,t)=>g(e,t).then((t=>S.has(e.event.name)?e.unprocessedPVC.reset():(0,i.Q1)())))({event:w,requestData:h,isEventFullyEnriched:n,requestOptions:p,logger:this.logger,queryManager:this.queryManager,stateSync:this.stateSync,eventsCache:this.eventsCache,eventHandler:this.eventHandler,metrics:this.metrics,eventsBatch:this.eventsBatch,api:this.api,unprocessedPVC:this.unprocessedEvents.PageviewComplete},null!==(l=a.useBeacon)&&void 0!==l&&l).then((t=>{this.logger.log("<done> track",w.name),u.resolve(w),e(),c.finish()})).catch((e=>{p.error(e),this.network.error(e,this.userId.get())}))}))}))),u.promise}trigger(e,t,n){const i=(0,D.b2)();this.logger.log("<call> trigger",e),this.triggerListeners=this.triggerListeners||[];return this.taskQueue.add(new x((t=>{this.logger.log("<task> trigger",e);const r=this.messages.on("permutive:query:changed",(function(t){t.queryCode===e&&(n(t.result),i.resolve(t.result))}));this.triggerListeners.push(r),this.logger.log("<done> trigger",e),t()}))),i.promise}query(){return Promise.resolve({result:!1})}segment(e,t){const n=(0,D.b2)();this.logger.log("<call> segment",e);return this.taskQueue.add(new x((i=>{var r;this.logger.log("<task> segment",e);const o=this.queryManager.stateMap.value[e];o&&(t((null===(r=null==o?void 0:o.result)||void 0===r?void 0:r.result)||!1),n.resolve()),this.logger.log("<done> segment",e),i()}))),n.promise}segments(e,t="all"){const n=(0,D.b2)();this.logger.log("<call> segments");return this.taskQueue.add(new x((i=>{this.logger.log("<task> segments ("+t+")");const r=r=>{e(r),n.resolve(r),this.logger.log("<done> segments ("+t+")"),i()};"dfp"===t?this.messages.once("permutive:dfp:ready",(()=>{r([...this.addons.dfp.segments.liveSegments])})):r(this.queryManager.userSegments.getAllAsList())}))),n.promise}reset(){return Promise.all([this.api.reset(this.metrics),this.identities.reset(),this.permutiveReset.reset(),this.stateSync.reset(),this.unprocessedEvents.PageviewComplete.reset(),this.queryManager.bootstrap([])]).then((([e])=>(this.userId.set(e.id),this.eventsCache.reset()))).then((()=>{this.messages.emit("permutive:reset")})).catch((e=>{this.network.error(`Error resetting internals. Got ${e}`)}))}addon(e,t){const i=Object.assign(Object.assign({},t),{permutive:this,api:this.api,activationManager:this.activationManager,network:this.network,clientContext:this.clientContext,logger:this.logger,unprocessedEvents:this.unprocessedEvents,metrics:this.metrics,namespace:this.namespace,state:this.state,queryManager:this.queryManager,messages:this.messages,userId:this.userId,viewId:this.viewId,customProperties:this.customProperties,config:this.config,permutiveData:this.permutiveData,sessionManager:this.sessionManager,userSegments:this.queryManager.userSegments,addons:this.addons,enrichers:this.enrichers,externalData:this.externalData,cookies:this.cookies,nextGenOutput:this.nextGenOutput});if(-1===this.initialisedAddons.indexOf(e))switch(this.initialisedAddons.push(e),this.messages.emit("permutive:addon:preinit",e),e){case"web":Promise.resolve().then(n.bind(n,8482)).then((e=>this.addons.web=new e.WebAddon(i))).then((()=>this.messages.emit("permutive:web:ready")));break;case"publishers":case"nativo":case"freewheel":case"facebook_pixel_v2":case"eyeota_pixel":case"rubicon":case"rubicon_ssp":case"twitter_pixel":case"pinterest_pixel":case"local_storage":case"appnexus_adserver":case"prebid":case"gam_log":case"socio_demo_cohorts":case"smart":case"tradedesk":case"appnexus":case"pubmatic":case"ctv":0;break;case"overlays":Promise.resolve().then(n.bind(n,718)).then((e=>this.addons.overlays=new e.OverlaysAddon(i)));break;case"scriptrunner":Promise.resolve().then(n.bind(n,7926)).then((e=>this.addons.scriptrunner=new e.ScriptRunnerAddon(i)));break;case"dfp":Promise.resolve().then(n.bind(n,957)).then((e=>this.addons.dfp=e.createAddon(i)));break;case"tracking_pixel":Promise.resolve().then(n.bind(n,2586)).then((e=>this.addons.tracking_pixel=new e.PixelAddon(i)));break;case"classification_models":Promise.resolve().then(n.bind(n,6172)).then((e=>this.addons.classification_models=new e.ClassificationModelsAddon(i)));break;case"clean_room":Promise.resolve().then(n.bind(n,6584)).then((e=>this.addons.clean_room=new e.CleanRoomAddon(i)));break;case"ddp":case"dbm":Promise.resolve().then(n.bind(n,208)).then((e=>this.addonIfTCFConsent({Addon:e.DDPPixel,key:"ddp"},i)))}else"web"===e&&!0!==t.auto_init?((e,t,n,i)=>new Promise(((r,s)=>{var a;const c=(0,o.Y3)(e);if((0,o.pC)(c))return r(c.value);n.once(t,(()=>(0,o.g_)((()=>s(new Error(`Error after waiting for event ${t}`))),r)((0,o.Y3)(e))));const u=null!==(a=null==i?void 0:i.timeout)&&void 0!==a?a:1e4;setTimeout((()=>s(new Error(`Event ${t} was not received within the timeout period ${u}ms`))),u)})))((()=>this.addons.web.reset(t)),"permutive:web:ready",this.messages).catch((e=>{this.network.error(`Got error while trying to reset web. Got ${e.message}`,this.state.userId.get())})):"ctv"===e&&(null==t||t.auto_init)}addonIfTCFConsent(e,t){const n=()=>{switch(e.key){case"tradedesk":this.addons.tradedesk=new e.Addon(t);break;case"ddp":this.addons.ddp=new e.Addon(t);break;case"appnexus":this.addons.appnexus=new e.Addon(t);break;case"pubmatic":this.addons.pubmatic=new e.Addon(t)}},r=t=>t[M.D[e.key]]?n():(0,i.Q1)();return(0,I._8)(window).then((e=>{switch(e.type){case"missing":return n();case"aborted":return(0,i.Q1)();case"loaded":return(0,i.zG)((0,I.Ec)(e.data),(0,o.g_)(n,r))}}))}ready(e,t="initialised"){const n=(0,D.b2)(),i=()=>{e(),n.resolve()};switch(t){case"initialised":this.permutiveRealtime.isReady()?i():this.messages.on("permutive:ready",i);break;case"realtime":this.permutiveRealtime.isRealtime()?i():this.messages.once("permutive:realtime",i)}return n.promise}setupCloudCohortRef(){const[e,t]=s.Ue(new Set),n=n=>{t(new Set([...e.current,...n]))};return this.messages.on("permutive:cleanroom:db:updated",n),(0,i.zG)(this.nextGenOutput,s.UI((e=>e.cloudCohorts.all)),s.YP(n)),e}}var U=n(5097);const R=e=>{const{logger:t,consentTracking:n}=e,o=(...e)=>(t.debug("Methods[track]: Cannot track as consent is revoked"),Promise.resolve(null));return e=>class extends e{constructor(...e){super(...e),this.track=(0,U.v)(super.track.bind(this),o,n.isRevoked),n.listenForConsent((()=>this.consentRevoked()),i.Q1)}consentRevoked(){return(0,r.mG)(this,void 0,void 0,(function*(){return yield this.sessionManager.reset(),this.reset()}))}}},G=(e,t,n,r,o,s,a,c,u,l,d,g,f,p,m,h,w,_,y,v,b,E,k,C,P,q,S,A,L,I,M,D,x,O,U,G)=>new((0,i.zG)(T,R({consentTracking:U,logger:t})))(e,t,n,r,o,s,a,c,u,l,d,g,f,p,m,h,w,_,y,v,b,E,k,C,P,q,S,A,L,I,M,D,x,O,G)},7281:(e,t,n)=>{n.d(t,{Oc:()=>l,l9:()=>d});var i=n(1828),r=n(8198),o=n(3735);class s{constructor(){}setItem(e,t){return(0,o.zG)(JSON.stringify(t),(t=>window.sessionStorage.setItem(e,t)))}getItem(e){return(0,o.zG)(window.sessionStorage.getItem(e),JSON.parse)}}class a{constructor(){}setItem(){}getItem(){return null}}const c=e=>(0,r.tS)((e=>1===e.size?(0,r.F2)(null):(0,r.t$)("Iterable Maps not supported")))((e=>"function"==typeof e.Map?(0,r.F2)(new e.Map([["a",1]])):(0,r.t$)("Maps not supported"))(e)),u=e=>(0,r.tS)((e=>2===e.size?(0,r.F2)(null):(0,r.t$)("Iterable Sets not supported")))((e=>"function"==typeof e.Set?(0,r.F2)(new e.Set([1,2])):(0,r.t$)("Sets not supported"))(e)),l=e=>(0,o.zG)((0,i.gz)(r.G5)(c(e),u(e),(e=>{const t=["QuotaExceededError","QUOTA_EXCEEDED_ERR","NS_ERROR_DOM_QUOTA_REACHED"];return(0,r.Y3)((()=>{const t="_permutive_ls_test";e.localStorage.setItem(t,t),e.localStorage.removeItem(t)}),(n=>e.localStorage&&0===e.localStorage.remainingSpace||t.some((e=>-1!==String(n).indexOf(e)))?"localStorage quota exceeded":"localStorage not supported"))})(e),(e=>e.Worker&&e.Blob?(0,r.F2)(null):(0,r.t$)("WebWorkers not supported"))(e)),(e=>(0,r.UI)(o.Q1)(e))),d=e=>{const t=(0,r.Y3)((()=>{const t="_permutive_ls_test";e.sessionStorage.setItem(t,t),e.sessionStorage.getItem(t),e.sessionStorage.removeItem(t)}),(e=>"sessionStorage not supported"));return(0,o.zG)(t,(0,r.g_)((()=>new a),(()=>new s)))}},8941:(e,t,n)=>{n.d(t,{Yj:()=>d,TZ:()=>l,MA:()=>f,WI:()=>p});var i=n(655),r=n(2688),o=n(3735),s=n(6567);var a=n(8206),c=n(449);const u=e=>(0,i.mG)(void 0,void 0,void 0,(function*(){yield e.identityPromise,yield function(e,t){return(0,a.Bt)("e1c3fd73-dd41-4abd-b80b-4278d52bf7aa","e1c3fd73-dd41-4abd-b80b-4278d52bf7aa",e.identities.getPrioritizedIdentities(e.identities.getIdentitiesMap()).map((e=>e.id)),window.location.hostname,e.userId.get())?t.reset():Promise.resolve()}(e,e.permutiveMethods);const t=yield function(e){const t=e.trace.startSpan("identify");0;return(e=>(0,i.mG)(void 0,void 0,void 0,(function*(){const{logger:t,network:n,api:r,userId:o,identities:s,metrics:a,identitiesIngestor:c,messages:u}=e,l=s.extractIdentifyFromQueue(e),d=s.getIdentitiesMap(),g=l.reduce(((e,{tag:t,id:n,priority:i,expiry:r})=>Object.assign(Object.assign({},e),{[t]:Object.assign(Object.assign({id:n},r?{expiry:r}:{}),void 0!==i?{priority:i}:{})})),{}),f=Object.assign(Object.assign({},d),g);t.log("Starting identification... Identities are:",f);const p=s.getPrioritizedIdentities(f),m=yield r.identify(a,o,p).then((e=>(0,i.mG)(void 0,void 0,void 0,(function*(){const n=e.user_id;return o.isEqual(n)?{identityChanged:!1}:(t.log(`Got different user id from API: ${n}`),{identityChanged:!0,userId:n})})))).catch((e=>(0,i.mG)(void 0,void 0,void 0,(function*(){const t=o.get();return n.error(`Couldn't set identity for user ${t}. Got ${e}`,t),{identityChanged:!1}}))));return s.setIdentities(Object.entries(f).map((([e,{id:t,priority:n,expiry:i}])=>Object.assign(Object.assign({tag:e,id:t},i?{expiry:i}:{}),void 0!==n?{priority:n}:{})))),c.ingestIfEligible(p).catch((e=>n.error(`Couldn't ingest identities, got ${e}`,m.identityChanged?m.userId:o.get()))),u.emit("permutive:user:ready"),t.debug("<done> init identity ",m),m})))(e).catch((t=>(e.network.error(`Failed to identify. Got ${(0,r.w)(t)}`),{identityChanged:!1}))).then((e=>(t.finish(),e)))}(e);return t.identityChanged?(e.metrics.track({name:"sdk_identity_changed_total",value:1,labels:{}}),yield d(e,t.userId)):(e.metrics.track({name:"sdk_identity_remained_total",value:1,labels:{}}),e.logger.log("Identity has not changed"),yield p(e)),t})),l=e=>(0,i.mG)(void 0,void 0,void 0,(function*(){u(e),yield function(e,t,n,r,a,c,u){e.log("Assuming identity hasn't changed");const l=a.hasNewOrModifiedQueries,d=t.startSpan(`qm_bootstrap_${l}`),g=()=>l?c.all().then((e=>a.bootstrap(e))):a.bootstrap([]);return c.resetIfNeeded().then((e=>e?(u.track({name:"sdk_reset_hearst_count",value:1,labels:{}}),n.reset()):Promise.resolve())).then(g).then((()=>r.PageviewComplete.getIfPresent())).then((0,s.g_)((()=>e.log("No unprocessed PVC data detected")),(t=>(0,o.zG)(e.log("Unprocessed PVC data detected",t),(e=>{const{props:n}=t;return{props:n,unprocessedData:(0,i._T)(t,["props"])}}),(({props:e,unprocessedData:t})=>n.track("PageviewComplete",e,{unprocessedData:t}).finally((()=>r.PageviewComplete.reset()))))))).then((()=>d.finish()))}(e.logger,e.trace,e.permutiveMethods,e.unprocessedEvents,e.queryManager,e.eventsCache,e.metrics),g(e.global,e.clientContext)}));function d(e,t){return(0,i.mG)(this,void 0,void 0,(function*(){e.logger.log("Identity has changed"),yield e.reset.reset(),e.userId.set(t),g(e.global,e.clientContext),e.identities.setIdentities([]);const n=yield e.eventsCache.reset(c.m),i=e.trace.startSpan("ss_reset_sync");e.thirdParty.reset(),yield h(e,n),i.finish()}))}function g(e,t){return e.context=t.getContext()}function f({logger:e,queryManager:t,models:n,trace:r}){return(0,i.mG)(this,void 0,void 0,(function*(){const i=r.startSpan("lal_http"),o=yield n.getModels();i.finish(),e.debug("Updating lookalike models");const s=r.startSpan("update_env_lal");return yield t.updateLAL(o),s.finish(),o}))}function p({logger:e,queryManager:t,thirdParty:n,trace:r}){return(0,i.mG)(this,void 0,void 0,(function*(){const i=r.startSpan("tpd_http"),o=yield n.segments();i.finish(),e.log("Updating TPD segments");const s=r.startSpan("update_env_tpd");return yield t.updateTPD(o),s.finish(),o}))}function m(e){const t=e.trace.startSpan("tpd_models");return Promise.all([p(e),f(e)]).then((([n,i])=>{e.logger.debug("Loaded TPD segments and lookalike models",n,i),t.finish()}))}const h=(e,t)=>(0,i.mG)(void 0,void 0,void 0,(function*(){yield Promise.all([m(e),e.stateSync.resetSync(),e.queryManager.bootstrap(t)])}))},6785:(e,t,n)=>{function i(e,t,n,i,r){r.debug("set SDK as ready"),e.setAsReady(),t.emit("permutive:api:ready"),n.track({name:"sdk_local_storage_byte_total",value:i.getStateSizeInBytes(),labels:{}}),n.track({name:"sdk_query_states_byte_total",value:e.getStateSizeInBytes(),labels:{}})}n.d(t,{R:()=>i})},3368:(e,t,n)=>{n.d(t,{$o:()=>w,uU:()=>y,je:()=>_});var i=n(8198),r=n(3735),o=n(655),s=n(2688),a=n(6567),c=n(3629);class u{constructor(e,t,n){this.urls=e,this.config=t,this.logger=n}req(e){return this.reqImpl(e).then((e=>(0,r.MZ)(e)))}reqWithBeacon({url:e,payload:t}){return null===navigator||void 0===navigator?void 0:navigator.sendBeacon(e,JSON.stringify(t))}error(e,t,n){return(0,o.mG)(this,void 0,void 0,(function*(){this.logger.error((0,s.w)(e)),this.config.sendClientErrors&&(yield this.errorNetwork(e,t,n).catch((0,r.ls)(s.w,(e=>this.logger.error(e)))))}))}errorNetwork(e,t,n){var i,r,o,s,u,l,d,g;const f=e instanceof Error?e:new Error(JSON.stringify(e)),p={error_message:null!==(r=null===(i=null==f?void 0:f.message)||void 0===i?void 0:i.toString())&&void 0!==r?r:"",stack_trace:null===(o=null==f?void 0:f.stack)||void 0===o?void 0:o.split("\n")},m=t?{user_id:t}:{},h=Object.assign({platform:"web",sdk_version:"v19.38.0",ql_runtime_version:"v5.1.1",timestamp:null!=n?n:new Date,domain:null!==(u=null===(s=null===window||void 0===window?void 0:window.location)||void 0===s?void 0:s.hostname)&&void 0!==u?u:"",url:(0,c.bk)(null===(l=null===window||void 0===window?void 0:window.location)||void 0===l?void 0:l.href),referrer:(0,c.bk)(null===document||void 0===document?void 0:document.referrer),user_agent:null!==(d=null===navigator||void 0===navigator?void 0:navigator.userAgent)&&void 0!==d?d:"",error_message:null!==(g=p.error_message)&&void 0!==g?g:String(e),stack_trace:p.stack_trace},m);return this.req({url:this.urls.getSdkErrorsUrl("/errors",(0,a.G)(this.config.sdkErrorsApiVersion)),method:"POST",payload:[h],contentType:"text/plain",dataType:"text",withCredentials:!1})}reqImpl(e){const{url:t,dataType:n,contentType:r,method:o,withCredentials:s,timeout:a}=e;return new Promise(((c,u)=>{const l=new XMLHttpRequest,d="POST"===e.method?"string"==typeof(g=e.payload)?g:JSON.stringify(g):null;var g;l.onload=function(){if(this.status>=400){const e="text"===this.responseType||""===this.responseType?this.responseText:"Couldn't access response text";u(`Failed ajax request. Status code was ${this.status}. ${e}`)}else if("json"===n){const e=this.responseText?(0,i.Y3)((()=>JSON.parse(this.responseText)),(e=>`Failed to parse response as JSON. Response was ${JSON.stringify(this.responseText)}. Got ${e}`)):(0,i.F2)(null);(0,i.g_)(u,c)(e)}else c("text"===n?this.responseText:this.response)},l.onerror=()=>u(new Error("Network request failed")),l.ontimeout=()=>u(new Error("Network request timed out")),l.open(o,t,!0),r&&l.setRequestHeader("content-type",r),l.timeout=a||l.timeout,l.withCredentials=s||l.withCredentials,l.responseType="binary"===n?"arraybuffer":l.responseType,l.send(d)}))}}var l=n(6013);const d="__permutive.",g="__permutiveConfigQueryParams";const f={default:{windowKey:"permutive",environment:"default",apiHost:"api.permutive.com",apiKey:"",cdnBaseUrl:"cdn.permutive.com",pxidHost:"prmutv.co",apiVersion:"v2.0",sdkErrorsApiVersion:"v2",advertiserApiVersion:"v2",classificationModelsApiVersion:"v1",apiProtocol:"https",loggingEnabled:!1,tracingEnabled:!1,requestTimeout:5e3,cookieDomain:"."+(0,c._Y)(window.location.hostname),cookieName:"permutive-id",cookieExpiry:function(){const e=new Date;return e.setMonth(e.getMonth()+6),e.toUTCString()}(),eventsTTLInDays:null,permutiveDataMiscKey:"permutive-data-misc",permutiveDataModelsKey:"permutive-data-models",permutiveDataQueriesKey:"permutive-data-queries",permutiveDataTPDKey:"permutive-data-tpd",permutiveDataEnrichersKey:"permutive-data-enrichers",stateNamespace:"",sendClientErrors:!0,metricsSamplingPercentage:20,eventsCacheLimitBytes:25e5,segmentSyncApiHost:"e1c3fd73-dd41-4abd-b80b-4278d52bf7aa.partner.permutive.app",consentRequired:!1,sdkType:"stable",viewId:null,localStorageDebouncedKeys:["internal_query_states"],localStorageWriteDelay:1e3,localStorageWriteMaxDelay:1500,watson:{enabled:!0}},production:{},development:{apiProtocol:"http",loggingEnabled:!0,tracingEnabled:!0,sendClientErrors:!1}},p=e=>{const t={consentRequired:!0,loggingEnabled:!0,sendClientErrors:!0,tracingEnabled:!0},n={eventsTTLInDays:!0,eventsCacheLimitBytes:!0,metricsSamplingPercentage:!0,requestTimeout:!0,localStorageWriteDelay:!0,localStorageWriteMaxDelay:!0};return Object.keys(e).reduce(((i,r)=>{if(t.hasOwnProperty(r)){const t="true"===e[r];return Object.assign(Object.assign({},i),{[r]:t})}if(n.hasOwnProperty(r)){const t=Number(e[r]);return isNaN(t)?i:Object.assign(Object.assign({},i),{[r]:t})}return Object.assign(Object.assign({},i),{[r]:e[r]})}),{})},m=e=>Object.entries(e).reduce(((e,[t,n])=>{if(!(0===t.indexOf(d)))return e;const i=t.replace(d,"");return[...e,[i,n]]}),[]),h=(e,t,n)=>{var i;const o=(0,r.zG)(t,m,(e=>(0,l.m8)(...e)),p),s=null!==(i=f[e.environment])&&void 0!==i?i:{};return(0,l.PM)(f.default,s,e,((e,t)=>{const n=t.getItem(g),i=(0,l.PM)(n,e);return t.setItem(g,i),i})(o,n))},w=e=>{var t,n;const o="e1c3fd73-dd41-4abd-b80b-4278d52bf7aa",s=void 0!==(null===(t=e[o])||void 0===t?void 0:t.q)&&void 0!==(null===(n=e[o])||void 0===n?void 0:n.config)?o:"permutive";return(0,r.zG)(e[s],(0,i.ij)("Can't find permutive tag on the page"),(0,i.UI)((e=>({tag:e,key:s}))))},_=({tag:e,key:t},n,i)=>Object.assign(Object.assign({},e),{config:h(Object.assign(Object.assign({},e.config),{windowKey:t}),n,i)}),y=(e,t,n)=>new u(e,t,n)},6112:(e,t,n)=>{n.d(t,{F:()=>o});var i=n(9705),r=n(4938);const o=(0,i.Y3)((()=>{const e=(0,r.e)();return e.postMessage({type:"noop",userId:null}),Promise.resolve(e)}),(e=>`Failed to start QueryWorker. Got ${e}`))},9848:(e,t,n)=>{n.d(t,{LA:()=>a});var i=n(5846),r=n(7209),o=n(6013);const s=(e,t,{network:n,state:i})=>{n.error(`Function "permutive.${t.functionName}" caused an error: ${e.message}`,i.userId.get())};function a(e,t,n,a,g,f,p=l){const m=function(e){const t=(0,i.uK)((e=>-1!==u.indexOf(e.functionName)))(e),n=t.right,s=t.left.filter((e=>"consent"!==e.functionName)),a=(0,r.Zt)(((e,t)=>c(e)&&c(t)?(0,o.lW)(d).compare(e.arguments[0],t.arguments[0]):(0,o.lW)(u).compare(e.functionName,t.functionName))),l=(0,i.DY)(a)(n);return l.concat(s)}(e),h=f.startSpan("queued_methods"),w={network:g,state:t.state};m.forEach((e=>{try{t=e.functionName,p.includes(t)||(e=>{e.functionName in n?n[e.functionName].apply(a,e.arguments):s(new Error("Does not exist."),e,w)})(e)}catch(t){const n=t instanceof Error?t:new Error("Unknown error.");s(n,e,w)}var t})),h.finish()}const c=e=>"addon"===e.functionName,u=["identify","trigger","addon","track"],l=["identify"],d=["dfp","appnexus_adserver","web"]},5791:(e,t,n)=>{n.d(t,{y:()=>_});var i=n(655),r=n(2688),o=n(5846),s=n(3735),a=(n(7341),n(9384)),c=function(e,t){return function(){return t(e())}},u=function(e){return function(t){return c(t,e)}},l=s.a9,d=(s.yR,s.yR,a.F4,a.Xl,function(){return Math.random()});function g(e,t){return(0,s.zG)(d,u((function(n){return Math.floor((t-e+1)*n+e)})))}u((function(e){return e<.5}));var f=n(356),p=n(274),m=n(6013);class h{constructor(e,t,n,r,o){this.sdkInitTimestamp=e,this.api=t,this.messages=n,this.logger=r,this.enrichers=o,this.environment="web",this.pendingMetrics=[],this.pendingTimers={},this.messages.on("permutive:ready",(()=>{const e=g(3e4,9e4),t=n=>window.setTimeout((()=>(0,i.mG)(this,void 0,void 0,(function*(){const n=(yield this.processPending())?5e3:e();t(n)}))),n);t(5e3),(0,m.aq)((()=>{this.processPending.bind(this)}))})),this.track({name:"sdk_initialisation_start_time_seconds",value:e/1e3,labels:{}})}track(e){this.pendingMetrics.push(e)}trackTimeSinceInit(e,t){const n=(performance.now()-this.sdkInitTimestamp)/1e3;this.logger.debug("metrics: timer stopped",e,n),this.track({name:e,value:n,labels:t})}startTimer(e,t){const n=performance.now(),i=this.generateRandomKey(e);return this.pendingTimers[i]={startTime:n,labels:t},i}stopTimer(e,t){const n=this.pendingTimers[t];if(n){const i=(performance.now()-n.startTime)/1e3;this.logger.debug("metrics: timer stopped",e,i),this.track({name:e,value:i,labels:n.labels}),delete this.pendingTimers[t]}}processPending(){return(0,i.mG)(this,void 0,void 0,(function*(){if((0,o.xb)(this.pendingMetrics))return!0;const e=this.pendingMetrics;this.pendingMetrics=[];const t=()=>(0,s.zG)({},(e=>(0,f.dx)("continent",p.U.$ip_geo_info_continent)(e)),(e=>this.enrichers.enrich(e,!0).output));try{return yield this.api.metrics({context:Object.assign(Object.assign({},t()),{environment:this.environment,events_count:0,segments_count:0}),items:e}),!0}catch(t){return this.logger.error(`Metrics: Request failed from error ${(0,r.w)(t).message}`,e),this.pendingMetrics=[...this.pendingMetrics,...e],!1}}))}generateRandomKey(e){return`${e}-${[...Array(24)].map((()=>Math.random().toString(36)[2])).join("")}`}}class w{track(e){}trackTimeSinceInit(e,t){}startTimer(e,t){return""}stopTimer(e,t){}}function _(e,t,n,i,r,o,s){return(null!==(a=i.getData("metricsEnabled"))&&void 0!==a?a:(()=>{const e=Math.random()<=n.metricsSamplingPercentage/100;return i.setData("metricsEnabled",e),e})())?new h(e,t,r,o,s):new w;var a}},6992:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{H:()=>initialiseWebSDK,f:()=>initialisationSequence});var tslib__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(655),fp_ts_Either__WEBPACK_IMPORTED_MODULE_47__=__webpack_require__(8198),fp_ts_function__WEBPACK_IMPORTED_MODULE_50__=__webpack_require__(3735),fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(9705),_identity_legacy_NeustarFabrickIdentitiesIngestor__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(9417),_identity_legacy_PermutiveIdentities__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(8206),_identity_legacy_PermutiveIdentitiesIngestorNoOp__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__(6815),_publisher_cohorts_legacy_models_PermutiveModelsNoOp__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__(933),_core_activations_PermutiveActivationManagerWeb__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8764),_core_activations_PermutiveAddons__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(5506),_core_context_PermutiveClientContextWeb__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(427),_core_crypto_HashcodeDigest__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(4572),_core_events_EventsCacheWeb__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(8231),_core_events_PermutiveEventCustomProps__WEBPACK_IMPORTED_MODULE_43__=__webpack_require__(2923),_core_events_PermutiveEventsBatch__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(4314),_core_events_unprocessed_UnprocessedPageviewComplete__WEBPACK_IMPORTED_MODULE_41__=__webpack_require__(6515),_core_events_unprocessed_UnprocessedPrebidAuctions__WEBPACK_IMPORTED_MODULE_42__=__webpack_require__(3937),_core_internals_CookiesWeb__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(9175),_core_internals_ExternalDataWeb__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(3319),_core_internals_PermutiveInternals__WEBPACK_IMPORTED_MODULE_40__=__webpack_require__(6715),_core_internals_PermutiveLogger__WEBPACK_IMPORTED_MODULE_52__=__webpack_require__(4828),_core_internals_SDKMessages__WEBPACK_IMPORTED_MODULE_55__=__webpack_require__(8167),_core_queries_query_manager_QueryManagerWeb__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(4938),_core_session_SessionManager__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(3253),_core_state_PermutiveDataStoreWeb__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(2747),_core_state_PermutiveEventSourceId__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(1823),_core_state_PermutiveNamespace__WEBPACK_IMPORTED_MODULE_54__=__webpack_require__(7738),_core_state_PermutiveRealtime__WEBPACK_IMPORTED_MODULE_39__=__webpack_require__(4528),_core_state_PermutiveReset__WEBPACK_IMPORTED_MODULE_44__=__webpack_require__(2472),_core_state_PermutiveStateSyncWeb__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(1714),_core_state_PermutiveStateWeb__WEBPACK_IMPORTED_MODULE_46__=__webpack_require__(7258),_core_state_PermutiveUserId__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(7846),_core_state_PermutiveViewId__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(6919),_core_store_LocalStorageWeb__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(3195),_core_tcf_TCF__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(1057),_core_third_party_ThirdPartyBase__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(2520),_dynamic_addons_LoadAddons__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(2223),_dynamic_enrichment_Enrichers_GlobalEnricher__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__(275),_dynamic_enrichment_RegisterEnrichers__WEBPACK_IMPORTED_MODULE_48__=__webpack_require__(3760),_http_PermutiveApi__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__(4762),_http_PermutiveUrls__WEBPACK_IMPORTED_MODULE_53__=__webpack_require__(8110),_next_gen__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(7703),_utils_event_handler_PermutiveEventHandler__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(9409),_utils_PermutiveUtils__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(6013),_utils_task_queue_PermutiveTaskQueue__WEBPACK_IMPORTED_MODULE_45__=__webpack_require__(7749),_utils_Trace__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(998),_utils_urls_UrlHelpers__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(3629),_Consent_Consent__WEBPACK_IMPORTED_MODULE_56__=__webpack_require__(6146),_Consent_InitialisationCheckWeb__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(9658),_initialisation_browserFeatures__WEBPACK_IMPORTED_MODULE_51__=__webpack_require__(7281),_initialisation_identity__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(8941),_initialisation_initialisationLifecycle__WEBPACK_IMPORTED_MODULE_49__=__webpack_require__(6785),_initialisation_permutiveTag__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(3368),_initialisation_queryWorkerInit__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(6112),_initialisation_queuedMethods__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(9848),_initialisation_setupMetrics__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(5791),_PermutiveMethodsWeb__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(4910);const sdkInitTimestamp=window.performance.now(),initialiseWebSDK=({queryWorker,tag,partialTagWithKey,urls,network,namespace,messages,logger,consentModule})=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_27__.Y3)((()=>(0,tslib__WEBPACK_IMPORTED_MODULE_28__.mG)(void 0,void 0,void 0,(function*(){const windowKey=partialTagWithKey.key,permutiveGlobal=window[windowKey],config=tag.config,trace=new _utils_Trace__WEBPACK_IMPORTED_MODULE_29__.l(config),sdkReadySpan=trace.startSpan("sdk_ready"),{consentTracking,consentValidation}=consentModule;window[windowKey].consent=consentValidation;const context=(0,_utils_PermutiveUtils__WEBPACK_IMPORTED_MODULE_19__.PM)(tag.context||{},{path:window.location.pathname,url:(0,_utils_urls_UrlHelpers__WEBPACK_IMPORTED_MODULE_30__.bk)(window.location.href),referrer:(0,_utils_urls_UrlHelpers__WEBPACK_IMPORTED_MODULE_30__.bk)(document.referrer)}),createInternalsSpan=trace.startSpan("internals"),eventHandler=new _utils_event_handler_PermutiveEventHandler__WEBPACK_IMPORTED_MODULE_31__.b,cookieStore=(0,_core_internals_CookiesWeb__WEBPACK_IMPORTED_MODULE_7__.S)(namespace,config,logger,consentTracking),localStorage=(0,_core_store_LocalStorageWeb__WEBPACK_IMPORTED_MODULE_32__.S)(namespace,logger,consentTracking),externalData=(0,_core_internals_ExternalDataWeb__WEBPACK_IMPORTED_MODULE_33__.S)(namespace,logger,consentTracking),clientContext=new _core_context_PermutiveClientContextWeb__WEBPACK_IMPORTED_MODULE_34__.z(context),viewId=new _core_state_PermutiveViewId__WEBPACK_IMPORTED_MODULE_14__.W(clientContext,config),userId=new _core_state_PermutiveUserId__WEBPACK_IMPORTED_MODULE_13__.M(config,clientContext,cookieStore,externalData),permutiveData=(0,_core_state_PermutiveDataStoreWeb__WEBPACK_IMPORTED_MODULE_10__.S)(config,namespace,logger,network,userId,consentTracking),eventSourceId=new _core_state_PermutiveEventSourceId__WEBPACK_IMPORTED_MODULE_11__.$(permutiveData),enrichers=new _dynamic_enrichment_Enrichers_GlobalEnricher__WEBPACK_IMPORTED_MODULE_35__.J,api=new _http_PermutiveApi__WEBPACK_IMPORTED_MODULE_36__.F(urls,config,network),metrics=(0,_initialisation_setupMetrics__WEBPACK_IMPORTED_MODULE_25__.y)(sdkInitTimestamp,api,config,permutiveData,messages,logger,enrichers),identityProviderEnv={permutive:permutiveGlobal,network,api,userId,metrics,permutiveData,messages,config,cookies:cookieStore,logger},identities=new _identity_legacy_PermutiveIdentities__WEBPACK_IMPORTED_MODULE_1__.lg(metrics,trace,permutiveData,identityProviderEnv,logger),identityPromise=identities.prepareThirdPartyIdentities(),models=new _publisher_cohorts_legacy_models_PermutiveModelsNoOp__WEBPACK_IMPORTED_MODULE_37__.p,identitiesIngestor=new _identity_legacy_PermutiveIdentitiesIngestorNoOp__WEBPACK_IMPORTED_MODULE_38__.z,permutiveRealtime=new _core_state_PermutiveRealtime__WEBPACK_IMPORTED_MODULE_39__.u(metrics,messages),sessionManager=yield _core_session_SessionManager__WEBPACK_IMPORTED_MODULE_9__.S.initialise(cookieStore,localStorage),_internals=new _core_internals_PermutiveInternals__WEBPACK_IMPORTED_MODULE_40__.P(logger,network,userId,viewId,messages,sessionManager,cookieStore,externalData);_internals.metrics=metrics,_internals.identities=identities;const eventsCache=new _core_events_EventsCacheWeb__WEBPACK_IMPORTED_MODULE_5__.K(config,namespace,logger,network,trace,metrics,userId,consentTracking),eventsBatch=new _core_events_PermutiveEventsBatch__WEBPACK_IMPORTED_MODULE_6__.c(eventHandler,api,metrics,userId,network,eventsCache),unprocessedArgs={consentTracking,logger,namespace},unprocessedEvents={PageviewComplete:new _core_events_unprocessed_UnprocessedPageviewComplete__WEBPACK_IMPORTED_MODULE_41__.p(unprocessedArgs),PrebidAuctions:new _core_events_unprocessed_UnprocessedPrebidAuctions__WEBPACK_IMPORTED_MODULE_42__.J(unprocessedArgs)},customProperties=new _core_events_PermutiveEventCustomProps__WEBPACK_IMPORTED_MODULE_43__.X,queryManagerTransitionDebounceTime=1e3,queryManagerTransitionMaxDebounceTime=1e4,queryManager=new _core_queries_query_manager_QueryManagerWeb__WEBPACK_IMPORTED_MODULE_8__.c({customProperties,externalData,logger,messages,network,permutive:permutiveGlobal,permutiveData,queryWorker,realtime:permutiveRealtime,sessionManager,transitionDebounceMaxTime:queryManagerTransitionMaxDebounceTime,transitionDebounceTime:queryManagerTransitionDebounceTime,userId,viewId});_internals.queryManager=queryManager;const permutiveReset=new _core_state_PermutiveReset__WEBPACK_IMPORTED_MODULE_44__.a(config,localStorage,logger,queryManager,permutiveData,eventSourceId,cookieStore,externalData),taskQueue=new _utils_task_queue_PermutiveTaskQueue__WEBPACK_IMPORTED_MODULE_45__.i(messages),stateSync=new _core_state_PermutiveStateSyncWeb__WEBPACK_IMPORTED_MODULE_12__.N(api,network,sessionManager,permutiveData,queryManager,metrics,userId,eventSourceId,(0,_core_state_PermutiveStateSyncWeb__WEBPACK_IMPORTED_MODULE_12__.e)()),thirdParty=new _core_third_party_ThirdPartyBase__WEBPACK_IMPORTED_MODULE_16__.U(network,logger,api,permutiveData,messages,sessionManager,metrics,identities,queryManager,permutiveGlobal,userId),activationManager=new _core_activations_PermutiveActivationManagerWeb__WEBPACK_IMPORTED_MODULE_2__.v(logger,permutiveGlobal,clientContext),state=new _core_state_PermutiveStateWeb__WEBPACK_IMPORTED_MODULE_46__.u(permutiveData,permutiveReset,userId,viewId,eventsCache);_internals.state=state;const nextGenOutput=(0,_next_gen__WEBPACK_IMPORTED_MODULE_18__.v)({config,consent:consentTracking.consentRef,logger,messages,metrics,namespace,network,realtime:permutiveRealtime,urls,userId,userSegments:queryManager.userSegments}),permutiveMethods=(0,_PermutiveMethodsWeb__WEBPACK_IMPORTED_MODULE_26__.S)(namespace,logger,api,eventHandler,activationManager,sessionManager,metrics,viewId,userId,network,enrichers,clientContext,unprocessedEvents,eventsBatch,queryManager,stateSync,eventsCache,taskQueue,identities,permutiveReset,messages,_internals.addons,trace,permutiveRealtime,state,customProperties,config,permutiveData,externalData,cookieStore,thirdParty,models,identitiesIngestor,permutiveGlobal,consentTracking,nextGenOutput);createInternalsSpan.finish(),[].forEach((s=>{(0,fp_ts_Either__WEBPACK_IMPORTED_MODULE_47__.Y3)((()=>eval(s)),(e=>{network.error(Object.assign(Object.assign({},e),{message:`Error running custom script ${s}`}),userId.get())}))})),_internals.addBlocker("permutive:queries:initialised"),messages.on("permutive:user:ready",(()=>{permutiveGlobal.identify=permutiveMethods.identify.bind(permutiveMethods);const e=identities.extractIdentifyFromQueue({global:permutiveGlobal});e.length>0&&permutiveGlobal.identify(e)})),_internals.messages.on("permutive:blockers:empty",(()=>{permutiveGlobal.on=permutiveMethods.on.bind(permutiveMethods),permutiveGlobal.once=permutiveMethods.once.bind(permutiveMethods),permutiveGlobal.track=permutiveMethods.track.bind(permutiveMethods),permutiveGlobal.trigger=permutiveMethods.trigger.bind(permutiveMethods),permutiveGlobal.query=permutiveMethods.query.bind(permutiveMethods),permutiveGlobal.segment=permutiveMethods.segment.bind(permutiveMethods),permutiveGlobal.segments=permutiveMethods.segments.bind(permutiveMethods),permutiveGlobal.reset=permutiveMethods.reset.bind(permutiveMethods),permutiveGlobal.ready=permutiveMethods.ready.bind(permutiveMethods),permutiveGlobal.addon=permutiveMethods.addon.bind(permutiveMethods),permutiveGlobal.context=clientContext.getContext(),permutiveGlobal.addons=_internals.addons,permutiveGlobal.config=config,permutiveRealtime.setAsReady(),(0,_initialisation_queuedMethods__WEBPACK_IMPORTED_MODULE_24__.LA)(permutiveGlobal.q,_internals,permutiveGlobal,permutiveMethods,network,trace)}));const loadAddonsSpan=trace.startSpan("load_addons");(0,_dynamic_addons_LoadAddons__WEBPACK_IMPORTED_MODULE_17__.C)({_internals,logger,network,permutiveMethods,q:permutiveGlobal.q,clientContext}),loadAddonsSpan.finish();const loadEnrichersSpan=trace.startSpan("load_enrichers"),enricherEnv={api,config,clientContext,logger,permutiveData,metrics,sessionManager:_internals.sessionManager,enrichers,network},loadEnrichersPromise=(0,_dynamic_enrichment_RegisterEnrichers__WEBPACK_IMPORTED_MODULE_48__.H)(enricherEnv)();loadEnrichersPromise.then((()=>{loadEnrichersSpan.finish()})),yield(0,_initialisation_identity__WEBPACK_IMPORTED_MODULE_21__.TZ)({api,clientContext,eventsCache,externalData,global:permutiveGlobal,identities,identitiesIngestor,identityPromise,logger,messages,metrics,models,network,permutiveMethods,queryManager,reset:permutiveReset,stateSync,thirdParty,trace,unprocessedEvents,userId}),(0,_initialisation_identity__WEBPACK_IMPORTED_MODULE_21__.MA)({logger,queryManager,models,trace}),yield loadEnrichersPromise,(0,_initialisation_initialisationLifecycle__WEBPACK_IMPORTED_MODULE_49__.R)(queryManager,messages,metrics,state,logger),sdkReadySpan.finish()}))),(e=>`Exception during initialisation. Got ${e}`)),initialisationSequence=(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_50__.zG)(fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_27__.Do,(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_27__.ak)("support",(()=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_27__.Uo)((0,_initialisation_browserFeatures__WEBPACK_IMPORTED_MODULE_51__.Oc)(window)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_27__.ak)("queryWorker",(()=>_initialisation_queryWorkerInit__WEBPACK_IMPORTED_MODULE_23__.F)),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_27__.ak)("sessionStorage",(()=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_27__.F2)((0,_initialisation_browserFeatures__WEBPACK_IMPORTED_MODULE_51__.l9)(window)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_27__.ak)("partialTagWithKey",(()=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_27__.Uo)((0,_initialisation_permutiveTag__WEBPACK_IMPORTED_MODULE_22__.$o)(window)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_27__.ak)("queryParams",(()=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_27__.F2)((0,_utils_urls_UrlHelpers__WEBPACK_IMPORTED_MODULE_30__.zM)()))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_27__.ak)("tag",(({partialTagWithKey:e,queryParams:t,sessionStorage:n})=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_27__.F2)((0,_initialisation_permutiveTag__WEBPACK_IMPORTED_MODULE_22__.je)(e,t,n)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_27__.ak)("logger",(({tag:e})=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_27__.F2)((0,_core_internals_PermutiveLogger__WEBPACK_IMPORTED_MODULE_52__.SX)(e.config)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_27__.ak)("urls",(({tag:e})=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_27__.F2)(new _http_PermutiveUrls__WEBPACK_IMPORTED_MODULE_53__.s(e.config)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_27__.ak)("network",(({tag:e,urls:t,logger:n})=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_27__.F2)((0,_initialisation_permutiveTag__WEBPACK_IMPORTED_MODULE_22__.uU)(t,e.config,n)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_27__.ak)("namespace",(({tag:e})=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_27__.F2)(new _core_state_PermutiveNamespace__WEBPACK_IMPORTED_MODULE_54__.L(e.config)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_27__.ak)("messages",(()=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_27__.F2)(new _core_internals_SDKMessages__WEBPACK_IMPORTED_MODULE_55__.Q))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_27__.ak)("consentModule",(({tag:e,namespace:t,logger:n,messages:i})=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_27__.fF)((()=>(0,_Consent_Consent__WEBPACK_IMPORTED_MODULE_56__.NY)(i,n,t,e.config))))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_27__.ak)("consent",(e=>(0,_Consent_InitialisationCheckWeb__WEBPACK_IMPORTED_MODULE_20__.D)(e))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_27__.tS)((e=>initialiseWebSDK(e))))},6013:(e,t,n)=>{n.d(t,{Fi:()=>S,G6:()=>q,Gz:()=>E,PM:()=>f,PQ:()=>A,Z_:()=>D,a4:()=>h,aq:()=>v,b0:()=>k,b2:()=>m,cO:()=>L,eu:()=>_,fl:()=>P,hk:()=>d,j5:()=>M,k$:()=>b,ke:()=>y,lW:()=>I,m8:()=>C,qh:()=>g,rB:()=>w,vp:()=>p});var i=n(4268),r=n(3735),o=n(6567),s=n(7209),a=n(6017),c=n(356),u=n(5857),l=n(2751);const d=(0,c.hX)((0,a.ff)(c.xb)),g=e=>Object.entries(e);function f(...e){return e.reduce(((e,t)=>Object.assign(Object.assign({},e),t)),{})}function p(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t}(0,a.ff)(l.xb);function m(){let e,t;return{promise:new Promise(((n,i)=>{e=n,t=i})),reject:t,resolve:e}}function h(e,t,n={}){const{waitTimeInMs:i,exponentialBackOff:s,maxAttempts:a}=f({waitTimeInMs:50,exponentialBackOff:!1,maxAttempts:20},n);let c=0;const u=n=>new Promise((i=>Promise.resolve(t()).then((t=>t?Promise.resolve(e()).then((e=>i((0,o.G)(e)))):(0,r.zG)(c++,(e=>e<a?setTimeout((()=>i(u(n*(s?2:1)))),n):i(o.YP)))))));return u(i)}function w(e){const t={equals:(t,n)=>t[0]===n[0]&&e.equals(t[1],n[1])},n=(0,u.Eh)(t);return(0,i.Uz)((e=>new Set(Object.entries(e))))(n)}function _(e,t){const n=Object.create(null);for(const i of t)n[i]=e[i];return n}function y(e){if("string"==typeof e){const t=+e;if(!isNaN(t))return t}return e}function v(e,t=navigator.userAgent){const n=["beforeunload","pagehide"],i=n.concat(["visibilitychange"]),r=t=>{if(!o&&t)return o=!0,e()};let o=!1;i.forEach((e=>{window.addEventListener(e,(()=>{const n=("visibilitychange"!==e||document.hidden)&&function(e){return/Mobi|Android/i.test(e)}(t);r(n)}))})),n.forEach((e=>{window.addEventListener(e,(()=>r(!0)))}))}function b(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(e=>(e^(window.crypto||window.msCrypto).getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))}function E(e){return 36===e.length&&/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i.test(e)}function k(e,t){const n=Object.keys(e),i=n.length,r={};for(let s=0;s<i;s++){const i=n[s],a=t(i,e[i]);(0,o.pC)(a)&&(r[i]=a.value)}return r}function C(...e){const t={},n=e.length;for(let i=0;i<n;i++){const[n,r]=e[i];t[n]=r}return t}function P(e,t){return k(e,((e,n)=>t(e)?(0,o.G)(n):o.YP))}function q(e){return/^((?!chrome|android).)*safari/i.test(e)}function S(e){}function A(e,t){return new Promise((n=>{var i;setTimeout((()=>{Promise.resolve(e()).then(n)}),null!==(i=null==t?void 0:t.timeout)&&void 0!==i?i:0)}))}function L(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}function I(e){return(0,s.Zt)(((t,n)=>{const i=e.indexOf(t),r=e.indexOf(n);switch(!0){case-1===i&&-1===r:return 0;case-1!==i&&-1===r:return-1;case-1===i&&-1!==r:return 1;default:return i<=r?-1:1}}))}function M(e){return e.reduce(((e,t)=>(e[t]=!0,e)),{})}function D(e,t,n){return(...i)=>{try{return n(...i)}catch(n){e.error(n,t.get())}}}},998:(e,t,n)=>{n.d(t,{l:()=>i});class i{constructor(e){var t;this.config=e,this.shouldUsePerformanceMark=!1,this.placeholderSpan={spanId:null,finish:()=>({})},this.shouldUsePerformanceMark=(null===(t=null===window||void 0===window?void 0:window.performance)||void 0===t?void 0:t.mark)&&this.config.tracingEnabled}startSpan(e){var t;if(this.shouldUsePerformanceMark){const n=this.generateId(),i=`permutive_${e}`,r=`${i}${n}_start`;return null===(t=null===window||void 0===window?void 0:window.performance)||void 0===t||t.mark(r),{spanId:r,finish:()=>{var e,t;null===(t=null===(e=null===window||void 0===window?void 0:window.performance)||void 0===e?void 0:e.measure)||void 0===t||t.call(e,i,r)}}}return this.placeholderSpan}generateId(){return"_"+Math.random().toString(36).substr(2,9)}}},9409:(e,t,n)=>{n.d(t,{b:()=>i});class i{constructor(){this.events=[],this.listeners=[]}newEvent(e,t){this.events.push([e,t]),[...this.listeners].forEach((n=>{this.handle(e,t,n)}))}addListener(e){this.listeners.push(e);const t={replay:()=>(this.replay(e),t),remove:()=>(this.remove(e),t)};return t}handle(e,t,n){const i="string"==typeof n.name&&e.name===n.name,r=n.name.test&&n.name.test(e.name),o=i||r;if(o)try{n.callback(e,t)}catch(e){window.console&&window.console.error&&window.console.error("callback error: ",e)}o&&n.once&&this.remove(n)}replay(e){let t=-1!==this.listeners.indexOf(e);for(let n=0;n<this.events.length&&t;n++)this.handle(this.events[n][0],this.events[n][1],e),t=-1!==this.listeners.indexOf(e)}remove(e){const t=this.listeners.indexOf(e);-1!==t&&this.listeners.splice(t,1)}}},7545:(e,t,n)=>{n.d(t,{b:()=>r});var i=n(6013);class r{constructor(e,t){this.timeoutDurationInMilliseconds=e,this.maxTimeOutDurationInMilliseconds=t}schedule(e,t=this.timeoutDurationInMilliseconds,n=this.maxTimeOutDurationInMilliseconds){return this.debounce(e,t,n)}scheduleAccumulated(e,t,n=this.timeoutDurationInMilliseconds,i=this.maxTimeOutDurationInMilliseconds){return this.debounce(e,n,i,t)}scheduleForPageUnload(e){return(0,i.aq)(e)}debounce(e,t,n,r){let o,s,a=null==r?void 0:r.empty,c=[];return u=>{r&&(a=r.concat(a,u));const l=(0,i.b2)();c.push(l);return o&&window.clearTimeout(o),o=window.setTimeout((()=>{window.clearTimeout(s),s=null;const t=e(r?a:u);c.forEach((e=>e.resolve(t))),a=null==r?void 0:r.empty,c=[]}),t),s||(s=window.setTimeout((()=>{window.clearTimeout(o),s=null;const t=e(r?a:u);c.forEach((e=>e.resolve(t))),a=null==r?void 0:r.empty,c=[]}),n)),l.promise}}}},7749:(e,t,n)=>{n.d(t,{i:()=>i});class i{constructor(e){this.messages=e,this.queue=[],this.nextNotify=null,e.on("permutive:taskQueue:update",(()=>{this.execute()}))}add(e){this.queue.push(e),this.notify()}notify(){const e=()=>{this.messages.emit("permutive:taskQueue:update")},t=(new Date).getTime();null===this.nextNotify||this.nextNotify<t-50?(this.nextNotify=t,e()):this.nextNotify<=t&&(this.nextNotify=t+50,window.setTimeout(e,50))}execute(){if(0===this.queue.length)return;let e=!1,t=!1,n=0;for(let i=0;i<this.queue.length;i++){const r=this.queue[i];if(r.complete)n+=1;else if(r.started)t=!0,e=e||r.blocks();else{if(r.waits()&&t)break;e||(t=!0,e=e||r.blocks(),r.execute((()=>{this.notify()})))}}this.queue.splice(0,n)}size(){return this.queue.length}}},3629:(e,t,n)=>{n.d(t,{_Y:()=>s,bk:()=>o,zM:()=>r});var i=n(3735);const r=()=>{var e,t;const n=null===(t=null===(e=window.location.href.split("?")[1])||void 0===e?void 0:e.split("#")[0])||void 0===t?void 0:t.split("&");return void 0===n?{}:n.reduce(((e,t)=>{const[n,i]=t.split("=");return Object.assign(Object.assign({},e),{[n]:i})}),{})},o=e=>{if(!e)return"";return(0,i.zG)(e,(e=>{const t=e.length-1;return"/"===e[t]?e.slice(0,t):e}))};function s(e){const t=e.match(/\b(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b/),n=e.match(/[a-z0-9][a-z0-9-]+\.[a-z.]{2,24}$/i),i=e.match(/localhost/);if((null==n?void 0:n.length)>0){const t=e.split(".").reverse();return t.length>=3&&t[1].match(/^(com|edu|gov|net|mil|org|nom|co|ac|name|info|biz)$/i)?t[2]+"."+t[1]+"."+t[0]:t[1]+"."+t[0]}return(null==t?void 0:t.length)>0?t[0]:(null==i?void 0:i.length)>0?"localhost":""}},6172:(e,t,n)=>{n.r(t),n.d(t,{ClassificationModelsAddon:()=>r,addonName:()=>i,load:()=>o});const i="classification_models";class r{constructor(e){}}const o=(e,t,n)=>{({overlays:{auto_init:!0,activationConfigs:[]},web:{auto_init:!1,add_alchemy_taxonomy:!1,add_alchemy_entities:!1,engagement_edge_only:!0,segment_transition_edge_only:!0,activationConfigs:[]},scriptrunner:{auto_init:!0,activationConfigs:[]},clean_room:{auto_init:!0,publisher_permissions:{"89a805cd-dd0e-4976-93bc-d1ec7bfa4363":["allow_custom_insights","allow_targeting_known_audiences","allow_targeting_modelled_audiences","allow_insights"]},activationConfigs:[]},classification_models:{auto_init:!0,activationConfigs:[]},dfp:{auto_init:!0,networks:[{network_code:"5887",name:"Default"}],track_slot_rendered:!0,track_slot_viewable:!0,track_slot_clicked:!0,track_targeting_keys:!1,activationConfigs:[]},tracking_pixel:{auto_init:!0,activationConfigs:[]},dbm:{auto_init:!0,entity_id:926898717,product_type:"INVITE_PARTNER",activationConfigs:[]}})[i].auto_init&&e.push({functionName:"addon",arguments:[i,{}]})}},933:(e,t,n)=>{n.d(t,{p:()=>i});class i{getModels(){return Promise.resolve({})}}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{var e=__webpack_require__(8198),t=__webpack_require__(3735),n=__webpack_require__(3760),i=__webpack_require__(6567),r=__webpack_require__(274);__webpack_require__(6013);class o extends class{constructor(e,t){this.config=e,this.logger=t,this.defaultReplacementMap=this.filterReplacementMap(this.config.defaultMap),this.replacementMap=this.setReplacementMap(this.config.replacementMap)}get getReplacementMap(){return this.replacementMap}setReplacementMap(e){return this.replacementMap=Object.assign(Object.assign({},this.defaultReplacementMap),this.filterReplacementMap(e)),this.logger.debug(`enrichers[${this.config.name}]: replacement map updated`,this.getReplacementMap),this.getReplacementMap}}{filterReplacementMap(e){return e}}const s="geoip",a="enricher:geoip",c={},u={include_geo:(null==c?void 0:c.include_geo)||!0,include_isp:(null==c?void 0:c.include_isp)||!0,include_ip_hash:(null==c?void 0:c.include_ip_hash)||!0,include_ip:(null==c?void 0:c.include_ip)||!1},l=(e,n)=>{const{$ip_geo_info_continent:a,$ip_address:c,$ip_address_hash:u}=r.U,l={$ip_geo_info_continent:a,$ip_address:c,$ip_geo_info:{city:r.U.$ip_geo_info_city,continent:r.U.$ip_geo_info_continent,country:r.U.$ip_geo_info_country,postal_code:r.U.$ip_geo_info_postal_code,province:r.U.$ip_geo_info_province},$ip_address_hash:u,$ip_isp_info:{autonomous_system_number:0,isp:r.U.$ip_isp_info_isp,autonomous_system_organization:r.U.$ip_isp_info_autonomous_system_organization,organization:r.U.$ip_isp_info_organization}},d=(0,t.zG)((0,i.Y3)((()=>({$ip_geo_info:e.geo_info,$ip_geo_info_continent:e.geo_info.continent,$ip_isp_info:e.isp_info,$ip_address:e.ip,$ip_address_hash:e.ip_hash}))),(0,i.fS)((()=>({}))));return new o({name:s,defaultMap:l,replacementMap:d},n)},d=({clientContext:e,api:t,permutiveData:n,metrics:i,sessionManager:r,enrichers:o,network:s,logger:c,config:d})=>{const f=t=>{t.isp_info&&e.updateContext(["isp",t.isp_info.isp],["organization",t.isp_info.organization],["autonomous_system_number",t.isp_info.autonomous_system_number],["autonomous_system_organization",t.isp_info.autonomous_system_organization]),t.geo_info&&e.updateContext(["continent",t.geo_info.continent],["country",t.geo_info.country],["city",t.geo_info.city],["province",t.geo_info.province],["postal_code",t.geo_info.postal_code])},p=n.getData(a);return p&&p.session_id===r.getSessionId()?(f(p.data),o.register(l(p.data,c)),Promise.resolve()):(c.debug("enrichers[geoip]: start HTTP request"),g(t,i,d,u).then((e=>(c.debug("enrichers[geoip]: end HTTP request"),f(e),n.setData(a,{session_id:r.getSessionId(),data:e}),e))).catch((e=>(s.error(`Error while registering the geoip enricher: got ${e}`),null))).then((e=>{o.register(l(e,c))})))},g=(e,t,n,r)=>{const o=[];return r.include_geo&&o.push(["include","geo"]),r.include_isp&&o.push(["include","isp"]),r.include_ip&&o.push(["include","ip"]),r.include_ip_hash&&o.push(["include","ip_hash"]),e.reqWithMetrics(t,"sdk_http_geoip_seconds",{url:e.urls.getEndpointUrl("/geoip",(0,i.G)(n.apiVersion),o),method:"GET",contentType:"text/plain",dataType:"json",withCredentials:!1})},f=()=>(0,n.B)({load:d});const p=()=>{};var m,h=__webpack_require__(6992);m=h.f,f(),p(),m().then((0,e.g_)((e=>console.warn(`Permutive was not initialized. ${e}`)),t.Q1))})()})();