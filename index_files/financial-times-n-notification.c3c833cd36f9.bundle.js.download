(window.webpackJsonp=window.webpackJsonp||[]).push([["financial-times-n-notification"],{e1cd7912:function(t,e,n){"use strict";n.r(e);const o=["error","success"],i=function(t){const e=[].slice.call(this.rootEl.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')).filter(t=>function(t){return!!t.offsetHeight}(t)&&!t.disabled);if(e.length&&9===t.keyCode){const n=e[e.length-1];t.target===n?(e[0].focus(),t.preventDefault()):t.shiftKey&&t.target===e[0]&&(n.focus(),t.preventDefault())}};class c{constructor(t,e){return this.clearToast=e,t.trackable=t.trackable||"notification-"+t.type,t.type&&o.includes(t.type)&&(t.modifier=t.type),t.returnFocusSelector=t.returnFocusSelector instanceof Element?t.returnFocusSelector:document.querySelector(t.returnFocusSelector),this.options=t,this.rootEl=document.createElement("div"),this.rootEl.appendChild((t=>{const e=document.createElement("div");e.classList.add("n-notification__item"),t.modifier&&e.classList.add("n-notification--"+t.modifier),e.setAttribute("data-trackable",t.trackable);const n=document.createElement("div");if(n.className="n-notification__content-wrapper",t.title){const e=document.createElement("h3");e.className="n-notification__title",e.innerHTML=t.title,n.appendChild(e)}if(t.content){const e=document.createElement("span");e.className="n-notification__content",e.innerHTML=t.content,e.setAttribute("role","alert"),n.appendChild(e)}const o=document.createElement("button");return o.className="n-notification__close",o.setAttribute("data-trackable","close"),o.innerHTML="Close",e.appendChild(n),e.appendChild(o),e})(t)),this.rootEl.querySelector("button").onclick=this.hide.bind(this),0!==t.duration&&(this.timeout=setTimeout(this.hide.bind(this),t.duration)),this.optionsContent=t.content,document.addEventListener("keydown",i.bind(this)),this}static dispatchNotificationCloseEvent(){document.dispatchEvent(new CustomEvent("nNotification.close"))}hide(){clearTimeout(this.timeout),this.clearToast(this),c.dispatchNotificationCloseEvent(),document.removeEventListener("keydown",i),this.options.returnFocusSelector&&this.options.returnFocusSelector.focus()}}var s=c;const r={duration:5e3},a=[],d=t=>h(t.detail);let l,u=!1;function f(){u||(l=document.createElement("div"),l.className="n-notification",document.body.appendChild(l),document.addEventListener("nNotification.show",d,!1),u=!0)}function h(t){if(t=Object.assign({},r,t),u||f(),a.length>0&&a[a.length-1].optionsContent===t.content){let e=a[a.length-1];clearTimeout(e.timeout),e.timeout=setTimeout(e.hide.bind(e),t.duration)}else{const e=new s(t,m.bind(this)),n=l.firstChild;l.insertBefore(e.rootEl,n),a.push(e)}if(t.focusSelector){const e=t.focusSelector instanceof Element?t.focusSelector:document.querySelector(t.focusSelector);e&&e.focus()}}function m(t){l.removeChild(t.rootEl);const e=a.indexOf(t);e>-1&&a.splice(e,1)}var p={init:f,show:h,destroy:function(){a.forEach(t=>t.hide()),a.length=0,l.parentNode.removeChild(l),document.removeEventListener("nNotification.show",d,!1),u=!1}};const E=function(){p.init(),document.removeEventListener("o.DOMContentLoaded",E)};"undefined"!=typeof document&&document.addEventListener("o.DOMContentLoaded",E);e.default=p}}]);
//# sourceMappingURL=financial-times-n-notification.c3c833cd36f9.bundle.js.map