(window.webpackJsonp=window.webpackJsonp||[]).push([["financial-times-o-table"],{"498fa644":function(t,e,o){"use strict";o.r(e);var r=o("d8ac1740"),i=o.n(r);class n{constructor(t,e){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._listeners=[],this._sorter=e,this.rootEl=t,this._opts=Object.assign({sortable:"false"!==this.rootEl.getAttribute("data-o-table-sortable"),preferredSortOrder:this.rootEl.getAttribute("data-o-table-preferred-sort-order")},o),this.thead=this.rootEl.querySelector("thead"),this.tbody=this.rootEl.querySelector("tbody"),this.tableCaption=this.rootEl.querySelector("caption"),this.tableHeaders=this.thead?Array.from(this.thead.querySelectorAll("tr:last-of-type > th")):[],this.tableRows=this.tbody?Array.from(this.tbody.getElementsByTagName("tr")):[],this._filteredTableRows=[],this.wrapper=this.rootEl.closest(".o-table-scroll-wrapper"),this.container=this.rootEl.closest(".o-table-container"),this.overlayWrapper=this.rootEl.closest(".o-table-overlay-wrapper"),this.filterContainer=this.wrapper||this.container,this._updateTableHeightListenerSet=!1,this._currentSort=null,this._currentFilter=null,window.setTimeout(this._setupFilters.bind(this),0)}_setupFilters(){const t=this.rootEl.getAttribute("id");if(!t)return;const e=window.document.querySelector(`[data-o-table-filter-id="${t}"]`);if(!e)return;if(!this.filterContainer)return void console.warn(`Could not setup the filter for the table "${t}" as markup is missing. A filterable table must be within a div with class "o-table-container".`);const o=parseInt(e.getAttribute("data-o-table-filter-column"),10);if(isNaN(o))return void console.warn(`Could not setup the filter for the table "${t}" as no column index was given to filter on. Add a \`data-o-table-filter-column="{columnIndex}"\` attribute to the filter.`,e);let r;e.value&&this.filter(o,e.value);const i=function(t){r&&clearTimeout(r),r=setTimeout(function(){this.filter(o,t.target.value||""),r=null}.bind(this),33)}.bind(this);e.addEventListener("input",i),e.addEventListener("change",i),this._listeners.push({element:e,debouncedFilterHandler:i,type:"input"}),this._listeners.push({element:e,debouncedFilterHandler:i,type:"change"})}updateRows(){const t=this._getLatestRowNodes();if(this.tableRows=t,this._currentSort){const{columnIndex:t,sortOrder:e}=this._currentSort;this.sortRowsByColumn(t,e)}if(this._currentFilter){const{columnIndex:t,filter:e}=this._currentFilter;this._filterRowsByColumn(t,e)}this.renderRowUpdates()}_getLatestRowNodes(){return this.tbody?Array.from(this.tbody.getElementsByTagName("tr")):[]}renderRowUpdates(){this._updateRowAriaHidden(),this._hideFilteredRows(),this._updateTableHeight(),this._updateRowOrder()}_updateTableHeight(){if(!this.filterContainer)return void console.warn('The table has missing markup. A responsive or filterable table must be within a div with class "o-table-container".',this.rootEl);this._updateTableHeightScheduled&&window.cancelAnimationFrame(this._updateTableHeightScheduled);const t=this._getTableHeight();if(this._updateTableHeightScheduled=window.requestAnimationFrame(function(){this.filterContainer.style.height=isNaN(t)?"":t+"px"}.bind(this)),!this._updateTableHeightListenerSet){let t;const e=function(){t&&clearTimeout(t),t=setTimeout(function(){this._updateTableHeight()}.bind(this),33)}.bind(this);window.addEventListener("resize",e),this._listeners.push({element:window,updateTableHeightDebounced:e,type:"resize"}),this._updateTableHeightListenerSet=!0}}_getTableHeight(){return this.rootEl.getBoundingClientRect().height-this._rowsToHide.reduce((t,e)=>t+e.getBoundingClientRect().height,0)}_updateRowAriaHidden(){this._updateRowAriaHiddenScheduled&&window.cancelAnimationFrame(this._updateRowAriaHiddenScheduled);const t=this._rowsToHide||[];this._updateRowAriaHiddenScheduled=window.requestAnimationFrame(function(){this.tableRows.forEach(e=>{e.setAttribute("aria-hidden",-1!==t.indexOf(e))})}.bind(this))}_hideFilteredRows(){this._hideFilteredRowsScheduled&&window.cancelAnimationFrame(this._hideFilteredRowsScheduled);const t=this._filteredTableRows||[];this._hideFilteredRowsScheduled=window.requestAnimationFrame(function(){this.tableRows.forEach(e=>{e.setAttribute("data-o-table-filtered",-1!==t.indexOf(e))})}.bind(this))}_updateRowOrder(){if(this._updateRowOrderScheduled&&window.cancelAnimationFrame(this._updateRowOrderScheduled),this._updateRowOrderFilrtedBatchScheduled&&window.cancelAnimationFrame(this._updateRowOrderFilrtedBatchScheduled),!this._currentSort&&!this._currentFilter)return;const t=this.tableRows.filter(t=>-1===this._filteredTableRows.indexOf(t));this._updateRowOrderScheduled=window.requestAnimationFrame(function(){var e,o;e=this.tbody,o=t,e.prepend?e.prepend(...o):o.reverse().forEach(t=>{e.insertBefore(t,e.firstChild)}),this._updateRowOrderFilrtedBatchScheduled=window.requestAnimationFrame(function(){!function(t,e){t.append?t.append(...e):e.forEach(e=>t.appendChild(e))}(this.tbody,this._filteredTableRows)}.bind(this))}.bind(this))}filter(t,e){this._filterRowsByColumn(t,e),this.renderRowUpdates()}_filterRowsByColumn(t,e){if(this._currentFilter={columnIndex:t,filter:e},"string"!=typeof e&&"function"!=typeof e)throw new Error(`Could not filter table column "${t}". Expected the filter to a string or function.`,this);this._filteredTableRows=[],this.tableRows.forEach(o=>{const r=o.querySelector(`td:nth-of-type(${t+1})`);if(r){n._filterMatch(r,e)&&this._filteredTableRows.push(o)}})}static _filterMatch(t,e){if("string"==typeof e){const t=e.replace(/[^\w\.]+/g,"").toLowerCase();e=e=>{const o=e.textContent.replace(/[^\w\.]+/g,"").toLowerCase();return!t||o.indexOf(t)>-1}}return!0!==e(t)}get _rowsToHide(){return this._filteredTableRows}getTableHeader(t){const e=this.tableHeaders[t];if(!e)throw new Error(`Could not find header for column index "${t}".`);return e}sortRowsByColumn(t,e){this._dispatchEvent("sorting",{sort:e,columnIndex:t},{cancelable:!0})&&this._sorter.sortRowsByColumn(this,t,e)}addSortButtons(){if(!this._opts.sortable)return;const t=this.tableHeaders.map(t=>{if(t.hasAttribute("data-o-table-heading-disable-sort"))return null;if(!t.hasChildNodes())return null;const e=Array.from(t.childNodes).reduce((e,o)=>o.nodeType===Node.ELEMENT_NODE&&-1!==["ABBR","B","BDI","BDO","BR","CODE","CITE","DATA","DFN","DEL","EM","I","S","SMALL","SPAN","STRONG","SUB","SUP","TIME","U","VAR","WBR"].indexOf(o.nodeName)?e+o.outerHTML:(o.nodeType===Node.ELEMENT_NODE&&console.warn(`o-table has removed the element "${o.nodeName}" from the table heading to add a sort button on the column. Please remove this element from your table heading, disable sort on this column, or contact the Origami team for help.`,t),e+o.textContent),""),o=document.createElement("button");o.innerHTML=e,o.classList.add("o-table__sort");const r=this._getNextSortOrder(t);return o.setAttribute("title",`sort table by "${t.textContent}" ${r}`),o});window.requestAnimationFrame(function(){this.rootEl.classList.add("o-table--sortable"),this.tableHeaders.forEach((e,o)=>{t[o]&&(e.innerHTML="",e.appendChild(t[o]))})}.bind(this));const e=this._sortButtonHandler.bind(this);this._rootElDomDelegate=this._rootElDomDelegate||new i.a(this.rootEl),this._rootElDomDelegate.on("click",".o-table__sort",e)}sorted(t){let{columnIndex:e,sortOrder:o}=t;if(isNaN(e))throw new Error(`Expected a numerical column index but received "${e}".`);if(!o)throw new Error('Expected a sort order e.g. "ascending" or "descending".');this._currentSort={sortOrder:o,columnIndex:e};const r=this.getTableHeader(e).querySelector("button");if(r){let t=r.getAttribute("title");t="ascending"===o?t.replace("ascending","descending"):t.replace("descending","ascending"),r.setAttribute("title",t)}this._dispatchEvent("sorted",this._currentSort)}destroy(){this._rootElDomDelegate&&this._rootElDomDelegate.destroy(),this._listeners.forEach(t=>{let{type:e,listener:o,element:r}=t;r.removeEventListener(e,o)}),delete this.thead,delete this.tbody,delete this.tableHeaders,delete this.tableRows,delete this._filteredTableRows,delete this.wrapper,delete this.container,delete this.overlayWrapper,delete this.filterContainer}_ready(){this._dispatchEvent("ready")}_getNextSortOrder(t){const e=t.getAttribute("aria-sort");return-1!==[null,"none"].indexOf(e)&&"descending"===this._opts.preferredSortOrder?"descending":"ascending"!==e?"ascending":"descending"}_sortButtonHandler(t){const e=t.target.closest("th"),o=this.tableHeaders.indexOf(e);if(e&&!isNaN(o)){const t=this._getNextSortOrder(e);this.sortRowsByColumn(o,t)}}_dispatchEvent(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object.assign(e,{instance:this}),this.rootEl.dispatchEvent(new CustomEvent("oTable."+t,Object.assign({detail:e,bubbles:!0},o)))}}var s=n;var a=class extends s{constructor(t,e){return super(t,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),this._tableHeadersWithoutSort=this.tableHeaders.map(t=>t.cloneNode(!0)),this.tableHeaders.length<=0?(console.warn('Could not create a "flat" table as no headers were found. Ensure table headers are placed within "<thead>". Removing class "o-table--responsive-flat".',t),t.classList.remove("o-table--responsive-flat")):this._createFlatTableStructure(),window.setTimeout(this.addSortButtons.bind(this),0),window.setTimeout(this._ready.bind(this),0),this}updateRows(){const t=this._getLatestRowNodes();this._createFlatTableStructure(t),super.updateRows()}_getLatestRowNodes(){return this.tbody?Array.from(this.tbody.querySelectorAll("tr:not(.o-table__duplicate-row)")):[]}_createFlatTableStructure(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.tableRows).filter(t=>!t.hasAttribute("data-o-table-flat-headings")).forEach(t=>{const e=Array.from(t.getElementsByTagName("td"));t.setAttribute("data-o-table-flat-headings",!0),window.requestAnimationFrame(()=>{const t=document.createElement("tbody");t.classList.add("o-table__responsive-body"),this._tableHeadersWithoutSort.forEach((o,r)=>{const i=document.createElement("tr");i.classList.add("o-table__duplicate-row");const n=o.cloneNode(!0);n.classList.add("o-table__duplicate-heading"),n.setAttribute("scope","row"),n.setAttribute("role","rowheader");const s=e[r].cloneNode(!0);i.appendChild(n),i.appendChild(s),t.appendChild(i)}),this.rootEl.appendChild(t)})})}};var l=class extends s{constructor(t,e){return super(t,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),this._tableHeadersWithoutSort=this.tableHeaders.map(t=>t.cloneNode(!0)),this._createScrollTableStructure(),window.setTimeout(this.addSortButtons.bind(this),0),window.setTimeout(this._ready.bind(this),0),this}filter(t,e){this._filterRowsByColumn(t,e),this.renderRowUpdates(),this._createScrollTableStructure()}updateRows(){super.updateRows(),this._createScrollTableStructure()}_getLatestRowNodes(){return this.tbody?Array.from(this.tbody.querySelectorAll("tr:not(.o-table__duplicate-row)")):[]}_createScrollTableStructure(){const t=this._tableHeadersWithoutSort.map((t,e)=>{const o=document.createElement("tr");o.classList.add("o-table__duplicate-row");const r=t.cloneNode(!0);return r.setAttribute("scope","row"),r.setAttribute("role","rowheader"),o.appendChild(r),this.tableRows.forEach(t=>{const r=t.querySelectorAll("td")[e];if(r){const e=r.cloneNode(!0),i=-1!==this._filteredTableRows.indexOf(t);e.setAttribute("data-o-table-filtered",i),e.setAttribute("aria-hidden",i),o.appendChild(e)}}),o});window.requestAnimationFrame(function(){Array.from(this.tbody.querySelectorAll(".o-table__duplicate-row")).forEach(t=>this.tbody.removeChild(t)),this.tbody.prepend?this.tbody.prepend(...t):t.reverse().forEach(t=>{this.tbody.insertBefore(t,this.tbody.firstChild)}),this._updateTableHeight()}.bind(this))}};class d extends s{constructor(t,e){return super(t,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),this._opts=Object.assign({expanded:this.rootEl.hasAttribute("data-o-table-expanded")?"false"!==this.rootEl.getAttribute("data-o-table-expanded"):null,minimumRowCount:this.rootEl.getAttribute("data-o-table-minimum-row-count")},this._opts),this._addControlsToDom(),window.setTimeout(this.addSortButtons.bind(this),0),window.setTimeout(this._setupScroll.bind(this),0),window.setTimeout(this._setupExpander.bind(this),0),this._ready(),this}filter(t,e){this._filterRowsByColumn(t,e),this.renderRowUpdates()}isExpanded(){const t=void 0===this._expand?Boolean(this._opts.expanded):Boolean(this._expand);return this.canExpand()&&t}isContracted(){const t=void 0===this._expand?Boolean(this._opts.expanded):Boolean(this._expand);return this.canExpand()&&!t}canExpand(){return"boolean"==typeof this._opts.expanded&&this._minimumRowCount<this.tableRows.length-this._filteredTableRows.length}renderRowUpdates(){this._updateExpander(),this._updateRowAriaHidden(),this._hideFilteredRows(),this._updateTableHeight(),this._updateRowOrder()}_updateExpander(){if("boolean"!=typeof this._opts.expanded||!this.controls)return;this._expanderUpdateScheduled&&window.cancelAnimationFrame(this._expanderUpdateScheduled);const t=this.isExpanded(),e=this.isContracted(),o=t||e,r=this.controls.expanderButton.querySelector("button");this._updateTableHeight(),this._updateRowAriaHidden(),this._updateControls(),this._expanderUpdateScheduled=window.requestAnimationFrame(function(){this.rootEl.setAttribute("data-o-table-expanded",Boolean(t)),this.container.classList.toggle("o-table-container--expanded",t),this.container.classList.toggle("o-table-container--contracted",e),r.style.display=o?"":"none",o||this.rootEl.removeAttribute("aria-expanded"),t&&(r.textContent="Show fewer",this.rootEl.setAttribute("aria-expanded",!0)),e&&(r.textContent="Show more",this.rootEl.setAttribute("aria-expanded",!1))}.bind(this))}contractTable(){this.canExpand()&&(this._expand=!1,this._updateExpander())}expandTable(){this.canExpand()&&(this._expand=!0,this._updateExpander())}_getTableHeight(){if(this.isContracted()){const t=super._getTableHeight();if(!this._contractedWrapperHeight||this._contractedWrapperHeight>t){const e=this._rowsToHide,o=this.controls.expanderButton.getBoundingClientRect().height,r=e?e[0].getBoundingClientRect().height/2:0;this._contractedWrapperHeight=t+o+r}return this._contractedWrapperHeight}if(this.isExpanded()){const t=this.controls.expanderButton.getBoundingClientRect().height;return super._getTableHeight()+t}return super._getTableHeight()}_addControlsToDom(){if(this.overlayWrapper&&!this.controls){const t=d._supportsArrows(),e=`\n\t\t\t\t${this.wrapper?'\n\t\t\t\t\t<div class="o-table-overflow-fade-overlay"></div>\n\t\t\t\t':""}\n\t\t\t\t<div class="o-table-overflow-control-overlay">\n\t\t\t\t\t${this.wrapper&&t?'\n\t\t\t\t\t\t<div class="o-table-control o-table-control--back o-table-control--hide">\n\t\t\t\t\t\t\t<button aria-label="visually scroll table back" disabled="true" class="o-buttons o-buttons--primary o-buttons--big o-buttons-icon o-buttons-icon--icon-only o-buttons-icon--arrow-left"></button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t':""}\n\n\t\t\t\t\t${this.wrapper&&t?'\n\t\t\t\t\t\t<div class="o-table-control o-table-control--forward o-table-control--hide">\n\t\t\t\t\t\t\t<button aria-label="visually scroll table forward" disabled="true" class="o-buttons o-buttons--primary o-buttons--big o-buttons-icon o-buttons-icon--icon-only o-buttons-icon--arrow-right"></button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t':""}\n\n\t\t\t\t\t${"boolean"==typeof this._opts.expanded?'\n\t\t\t\t\t\t<div class="o-table-control o-table-control--expander">\n\t\t\t\t\t\t\t<button class="o-buttons o-buttons--primary o-buttons--big">Show fewer</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t':""}\n\t\t\t\t</div>\n\t\t\t`,o=document.createRange();o.selectNode(this.overlayWrapper);const r=o.createContextualFragment(e);this.controls={controlsOverlay:r.querySelector(".o-table-overflow-control-overlay"),fadeOverlay:r.querySelector(".o-table-overflow-fade-overlay"),expanderButton:r.querySelector(".o-table-control--expander"),forwardButton:r.querySelector(".o-table-control--forward"),backButton:r.querySelector(".o-table-control--back")},this._updateControlOverlayPosition(),window.requestAnimationFrame(function(){this.overlayWrapper.appendChild(r)}.bind(this))}}_updateControlOverlayPosition(){const t=this.thead?this.thead.getBoundingClientRect().height:0,e=this.tableCaption?this.tableCaption.getBoundingClientRect().height:0;window.requestAnimationFrame(function(){this.controls.controlsOverlay.style.top=t+e+"px"}.bind(this))}_setupScroll(){if(this.container&&this.overlayWrapper&&!this.wrapper&&console.warn('Controls to scroll table left/right could not be added to "o-table" as it is missing markup. Please add the container and wrapper elements according to the documentation https://registry.origami.ft.com/components/o-table.',{table:this.rootEl}),!this.container||!this.overlayWrapper||!this.wrapper)return;if(this.controls||this._addControlsToDom(),this.controls.forwardButton){const t=function(){this.wrapper.scrollBy({left:document.body.clientWidth/2,behavior:"smooth"})}.bind(this);this.controls.forwardButton.addEventListener("click",t),this._listeners.push({element:this.controls.forwardButton,scrollForward:t,type:"click"})}if(this.controls.backButton){const t=function(){this.wrapper.scrollBy({left:-document.body.clientWidth/2,behavior:"smooth"})}.bind(this);this.controls.backButton.addEventListener("click",t),this._listeners.push({element:this.controls.backButton,scrollBackward:t,type:"click"})}const t=function(){this._controlUpdateScheduled||(this._controlUpdateScheduled=!0,window.setTimeout(function(){this._controlUpdateScheduled=!1,this._fromEnd=this.wrapper.scrollWidth-this.wrapper.clientWidth-this.wrapper.scrollLeft,this._fromStart=this.wrapper.scrollLeft,this._updateControls()}.bind(this),33))}.bind(this);if(t(),this.controls.controlsOverlay&&window.IntersectionObserver){const e={root:this.controls.controlsOverlay,threshold:1,rootMargin:`-20px 0px ${this.canExpand()?"0px":"-20px"} 0px`},o=new IntersectionObserver((function(e){e.forEach((function(e){e.target.setAttribute("data-o-table-intersection",1!==e.intersectionRatio),t()}))}),e);this.controls.backButton&&o.observe(this.controls.backButton),this.controls.forwardButton&&o.observe(this.controls.forwardButton)}this.wrapper.addEventListener("scroll",t),window.addEventListener("resize",t),window.addEventListener("load",t),this._listeners.push({element:this.wrapper,updateScroll:t,type:"scroll"}),this._listeners.push({element:window,updateScroll:t,type:"resize"}),this._listeners.push({element:window,updateScroll:t,type:"load"})}_setupExpander(){if("boolean"==typeof this._opts.expanded){if(!this.container||!this.overlayWrapper||!this.wrapper)throw new Error('Controls to expand/contract the table could not be added to "o-table" as it is missing markup.Please add the container and wrapper element according to the documentation https://registry.origami.ft.com/components/o-table.');if(this.controls||this._addControlsToDom(),this.controls.expanderButton){const t=function(){if(this.isExpanded()){const t=this.controls.expanderButton,e=t.getBoundingClientRect().top;this.contractTable(),window.requestAnimationFrame(()=>{const o=window.pageYOffset+t.getBoundingClientRect().top-e;window.scroll(null,o)})}else this.expandTable()}.bind(this);this.controls.expanderButton.addEventListener("click",t),this._listeners.push({element:this.controls.expanderButton,toggleExpanded:t,type:"click"})}this._updateExpander()}}_updateControls(){if(!this.controls)return;const t=this._canScrollTable;window.requestAnimationFrame(function(){this.controls.fadeOverlay.classList.toggle("o-table-overflow-fade-overlay--scroll",t),this.controls.fadeOverlay.style.setProperty("--o-table-fade-from-end",Math.min(this._fromEnd,10)+"px"),this.controls.fadeOverlay.style.setProperty("--o-table-fade-from-start",Math.min(this._fromStart,10)+"px")}.bind(this));const e=this._showArrowDock;window.requestAnimationFrame(function(){this.controls.controlsOverlay.classList.toggle("o-table-overflow-control-overlay--arrow-dock",e)}.bind(this)),d._supportsArrows()&&(this._updateScrollControl(this.controls.forwardButton),this._updateScrollControl(this.controls.backButton)),this._updateControlOverlayPosition()}_updateScrollControl(t){const e=this._stickyArrows,o=this._canScrollTable,r=this._showArrowDock&&!e,i=this._fromEnd<=0&&t===this.controls.forwardButton||this._fromStart<=0&&t===this.controls.backButton,n=!r&&(!this._stickyArrows||this._stickyArrows&&!this._canScrollPastTable),s="true"===t.getAttribute("data-o-table-intersection"),a=t.querySelector("button");window.requestAnimationFrame(()=>{t.style.display=o?"":"none",t.classList.toggle("o-table-control--sticky",e),t.classList.toggle("o-table-control--dock",r),s&&(a.setAttribute("disabled",!0),t.classList.add("o-table-control--hide")),i||s||(a.removeAttribute("disabled"),t.classList.remove("o-table-control--hide")),i&&!s&&(a.setAttribute("disabled",!0),t.classList.toggle("o-table-control--hide",n))})}get _minimumRowCount(){const t=this._opts.minimumRowCount;return isNaN(parseInt(t,10))?20:parseInt(t,10)}get _rowsToHide(){return[...this._filteredTableRows,...this._rowsHiddenByExpander]}get _rowsHiddenByExpander(){const t=Math.min(this.tableRows.length,this._minimumRowCount),e=this.tableRows.filter(t=>-1===this._filteredTableRows.indexOf(t));return this.isContracted()?e.slice(t,e.length):[]}get _canScrollTable(){return this._fromEnd>0||this._fromStart>0}get _tableTallerThanViewport(){return this.container.getBoundingClientRect().height>document.documentElement.clientHeight}get _canScrollPastTable(){return this.container.getBoundingClientRect().bottom+document.documentElement.clientHeight/2<document.documentElement.getBoundingClientRect().bottom}get _showArrowDock(){return d._supportsArrows()&&this._canScrollTable&&this._canScrollPastTable&&this.canExpand()}get _stickyArrows(){return d._supportsArrows()&&this._tableTallerThanViewport}static _supportsArrows(){return"undefined"!=typeof CSS&&(CSS.supports("position","sticky")||CSS.supports("position","-webkit-sticky"))}}var c=d;var h=class extends s{constructor(t,e){return super(t,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),window.setTimeout(this.addSortButtons.bind(this),0),this._ready(),this}};function u(t){return Array.from(t.getElementsByTagName("img")).forEach(t=>{const e=t.getAttribute("alt");t.insertAdjacentHTML("beforebegin",e),t.remove()}),t}function p(t){const e=t.querySelector("time");if(e&&e.dateTime){const t=new Date(e.dateTime);if(!isNaN(t.getTime()))return String(t.getTime())}let o=t.textContent.trim();if(""===o){const e=t.querySelectorAll("a, span, i");o=Array.from(e).reduce((t,e)=>{const o=e.getAttribute("aria-label")||e.getAttribute("title");return o?`${t} ${o}`:t},"")}return o.trim()}function b(t){return t=t.replace(/([\d,.]+)([a-zA-Z]+)/g,(t,e,o)=>""+e*Math.pow(10,{m:6,bn:9,tn:12}[o]||0))}function w(t){return t.replace(/,/g,"")}function f(t){const e=t.replace(/([^\d.,\-\â€“]+)/g,"");return""===e?t:e}function m(t){const e=parseFloat(t);return isNaN(e)?t:e}function _(t){const e=["January","February","March","April","May","June","July","August","September","October","November","December"],o=t.match(/^([A-Za-z]{3,})(?:[\s])(?=[\d])((?:\d{1,2})?(?![\d]))?(?:\s)?(\d{4})?/),r=t.match(/(?:\s|^)(\d{1,2}(?:[.](\d{2}))?)(pm|am)$/),i=o&&o[1]?o[1]:null;let n=null;if(i)for(let t=0;t<e.length;t++){if(e[t].startsWith(i)){n=t;break}}const s=o&&o[2]?parseInt(o[2],10):null;let a=o&&o[3]?parseInt(o[3],10):null;i&&!a&&(a=(new Date).getFullYear());const l=r&&r[1]?parseInt(r[1],10):null,d=r&&r[2]?parseInt(r[2],10):null,c=r?r[3]:null,h=l&&"pm"===c?l+12:l;if(l&&(!a||!n))return parseFloat(`${h}.${d}`);if(null!==a||null!==n||null!==s||null!==h||null!==d){const e=new Date(Date.UTC(a,n,s,h,d));return isNaN(e.getTime())?t:e.getTime()}return t}function g(t){return t.replace(/\*+$/,"")}function y(t){return"-"===(t=t.replace(/^n[./]a[.]?$/i,""))?"":t}function E(t){let e=t;return[u,p,g,y].forEach(t=>{e=t(e)}),"string"==typeof e?e:""}function v(t){return[w,b,f,m].forEach(e=>{t=e(t)}),t}var S=class{constructor(){this.filters={text:[E],number:[E,v],percent:[E,v],currency:[E,v],numeric:[E,v],date:[E,_]}}setFormatter(t,e){this.filters[t]=[e]}formatCell(t){let{cell:e,type:o="text"}=t;o=o||"text";let r=e.getAttribute("data-o-table-sort-value");if(null===r){if(this.filters[o]){const t=e.cloneNode({deep:!0});r=t,this.filters[o].forEach(t=>{r=t(r)})}e.setAttribute("data-o-table-sort-value",r)}return""!==r&&!isNaN(r)?parseFloat(r):r}};function A(t,e,o){return("string"==typeof t||t instanceof String)&&("string"==typeof e||e instanceof String)?o?o.compare(t,e):t.localeCompare(e):!isNaN(e)&&isNaN(t)||t<e?-1:!isNaN(t)&&isNaN(e)||e<t?1:0}const T=new class{constructor(){this._cellFormatter=new S}sortRowsByColumn(t,e,o,r){const i=t.getTableHeader(e);if(r&&console.warn('o-table: The "batch" argument is deprecated and no longer used.'),-1===["ascending","descending"].indexOf(o))throw new Error(`Sort order "${o}" is not supported. Must be "ascending" or "descending".`);const n=function(){if("undefined"!=typeof Intl&&{}.hasOwnProperty.call(Intl,"Collator"))return new Intl.Collator}(),s=this._cellFormatter,a=i.getAttribute("data-o-table-data-type")||void 0;t.tableRows.sort((t,r)=>{let i=t.querySelectorAll("td,th:not(.o-table__duplicate-heading)")[e],l=r.querySelectorAll("td,th:not(.o-table__duplicate-heading)")[e];return i=s.formatCell({cell:i,type:a}),l=s.formatCell({cell:l,type:a}),"ascending"===o?A(i,l,n):function(t,e,o){return 0-A.apply(this,[t,e,o])}(i,l,n)}),t.sorted({columnIndex:e,sortOrder:o}),t.renderRowUpdates(),window.requestAnimationFrame(()=>{t.tableHeaders.forEach(t=>{const e=t===i?o:"none";t.setAttribute("aria-sort",e)})})}setCellFormatterForType(t,e){this._cellFormatter.setFormatter(t,e)}};class x{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};let o;switch(t.getAttribute("data-o-table-responsive")){case"flat":o=a;break;case"scroll":o=l;break;case"overflow":o=c;break;default:o=h}return new o(t,T,e)}static init(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t instanceof HTMLElement||(t=document.querySelector(t)),/\bo-table\b/.test(t.getAttribute("data-o-component")))return new x(t,e);return Array.from(t.querySelectorAll('[data-o-component~="o-table"]')).map(t=>new x(t,e))}static setSortFormatterForType(t,e){T.setCellFormatterForType(t,e)}}var R=x;const C=function(){R.init(),document.removeEventListener("o.DOMContentLoaded",C)};"undefined"!=typeof document&&document.addEventListener("o.DOMContentLoaded",C);e.default=R}}]);
//# sourceMappingURL=financial-times-o-table.c827a6fdadd5.bundle.js.map