(window.webpackJsonp=window.webpackJsonp||[]).push([["financial-times-o-header"],{abceab11:function(e,t,n){"use strict";n.r(t);var o=n("21867433");var r={init:function(e){const t=e.querySelector("[data-o-header-search]"),n=t&&e.querySelectorAll(`[aria-controls="${t.id}"]`);if(null===n||0===n.length)return;const r=[],a=function(e,n){"open"===e?(r.push(n.currentTarget),t.querySelector('[name="q"]').focus()):r.length&&r.pop().focus()};for(let e=0,r=n.length;e<r;e++)new o.default(n[e],{target:t,callback:a})}};const a=[];function i(e){return-1!==a.indexOf(e)}function s(e,t){t&&e.classList.add("o-header__mega--animation"),e.setAttribute("aria-hidden","false"),e.setAttribute("aria-expanded","true"),e.dispatchEvent(new CustomEvent("oHeader.MegaMenuShow",{bubbles:!0})),a.push(e)}function c(e){e.classList.remove("o-header__mega--animation"),e.setAttribute("aria-hidden","true"),e.setAttribute("aria-expanded","false"),e.dispatchEvent(new CustomEvent("oHeader.MegaMenuHide",{bubbles:!0})),a.splice(a.indexOf(e),1)}var d={init:function(e){const t=Array.from(e.querySelectorAll("[data-o-header-mega]")),n=t.map(e=>e.parentNode);t.forEach(e=>{e.setAttribute("aria-hidden","true"),e.setAttribute("aria-expanded","false")}),n.forEach((e,n)=>function(e,t){let n;e.addEventListener("mouseenter",()=>{clearTimeout(n),i(t)||(n=setTimeout(()=>{a.length?(c(a[0]),s(t,!1)):s(t,!0)},300))}),document.addEventListener("keydown",e=>{const n=e.key||e.keyCode;"Escape"!==n&&"Esc"!==n&&27!==n||i(t)&&c(t)}),e.addEventListener("mouseleave",()=>{clearTimeout(n),n=setTimeout(()=>i(t)&&c(t),400)})}(e,t[n]))},show:s,hide:c};function l(e,t,n){let o;const r=e=>{27===e.keyCode&&t()},a=n=>{e.contains(n.target)||t()},i=()=>{clearTimeout(o)},s=()=>{window.innerWidth>=e.offsetWidth&&(o=setTimeout(t,1e3))},c=t=>{const n=t.relatedTarget||t.target;e.contains(n)||e.focus()},d=e=>{if(9===e.keyCode){const t=n[0],o=n[n.length-1];e.shiftKey||e.target!==o?e.shiftKey&&e.target===t&&(o.focus(),e.preventDefault()):(t.focus(),e.preventDefault())}};return{addEvents:()=>{e.addEventListener("mouseenter",i),e.addEventListener("mouseleave",s),document.addEventListener("click",a),document.addEventListener("touchstart",a),document.addEventListener("keydown",r),document.addEventListener("focusin",c),document.addEventListener("focusout",c),e.addEventListener("keydown",d)},removeEvents:()=>{clearTimeout(o),e.removeEventListener("mouseenter",i),e.removeEventListener("mouseleave",s),document.removeEventListener("click",a),document.removeEventListener("touchstart",a),document.removeEventListener("keydown",r),document.removeEventListener("focusin",c),document.removeEventListener("focusout",c),e.removeEventListener("keydown",d)},handleMouseleave:s}}function u(e,t,n){t?n.forEach(e=>{e.removeAttribute("tabindex")}):n.forEach(e=>{e.setAttribute("tabindex","-1")})}var f={init:function(){const e=document.body.querySelector("[data-o-header-drawer]");if(!e)return;const t=Array.from(e.querySelectorAll("a, button, input, select"));u(0,!1,t),function(e){const t=e.querySelectorAll('[id^="o-header-drawer-child-"]');Array.from(t).forEach(t=>{const n=e.querySelector(`[aria-controls="${t.id}"]`);t.setAttribute("aria-hidden","true"),new o.default(n,{target:t,callback:e=>{n.textContent=n.textContent.replace(/fewer|more/,"open"===e?"fewer":"more")}})})}(e),function(e,t){let n,r;function a(o,a){"close"===o?(u(e,!1,t),n.removeEvents(),r.focus()):(u(e,!0,t),setTimeout(n.addEvents,300),r=a.currentTarget,setTimeout(()=>{const t=e.querySelector("a, button, input, select");t?t.focus():e.focus()})),e.classList.toggle("o-header__drawer--closing","close"===o),e.classList.toggle("o-header__drawer--opening","open"===o)}Array.from(document.body.querySelectorAll(`[aria-controls="${e.id}"]`)).forEach(r=>{const i=new o.default(r,{target:e,callback:a});n||(n=l(e,i.toggle,t))}),e.tabIndex=-1}(e,t),setTimeout(()=>{e.removeAttribute("data-o-header-drawer--no-js"),e.setAttribute("data-o-header-drawer--js","true")})},handleCloseEvents:l},h=n("6d36580f");var m={init:function(e){const t=e.querySelector("[data-o-header-subnav]");if(null===t)return;const n=Array.from(t.getElementsByTagName("button")),o=t.querySelector("[data-o-header-subnav-wrapper]");let r;const a=o.clientWidth;function i(e){return e.className.match(/left|right/).pop()}function s(){r=o.scrollWidth,n.forEach(e=>{if("left"===i(e))e.disabled=0===o.scrollLeft;else{const t=r-a-o.scrollLeft;e.disabled=t<=1}})}function c(e){let t=100;if("left"===i(e.currentTarget))t=-1*(o.scrollLeft>t?t:o.scrollLeft);else{const e=r-a-o.scrollLeft;t=e>t?t:e}o.scrollLeft=o.scrollLeft+t,s()}o.addEventListener("scroll",h.throttle(s,100)),window.addEventListener("oViewport.resize",s),n.forEach(e=>{e.onclick=c}),function(){const e=o.querySelector("[aria-current]");if(e){const t=e.getBoundingClientRect().right;if(t>a){let e=t-a;e=e>a/2?t:a/2,o.scrollTo(e,0)}}s()}()}};var v={init:function(e){if(!e.hasAttribute("data-o-header--sticky"))return;let t,n,o,r;function a(){const o=window.pageYOffset||window.scrollY,a=o>t;if(e.classList.toggle("o-header--sticky-active",a),a!==r&&(r=a,e.dispatchEvent(new CustomEvent("oHeader.Sticky",{bubbles:!0,detail:{isActive:a}}))),Math.abs(o-n)>20){const t=n<o;e.classList.toggle("o-header--sticky-scroll-down",a&&t),e.classList.toggle("o-header--sticky-scroll-up",a&&!t)}n=o}function i(){window.removeEventListener("scroll",i),window.addEventListener("scroll",s),function e(){t=window.innerHeight/2,o=window.requestAnimationFrame(()=>{a(),e()})}()}const s=Object(h.debounce)((function(){o&&window.cancelAnimationFrame(o),window.removeEventListener("scroll",s),window.addEventListener("scroll",i)}),300);window.addEventListener("scroll",i),a()}};class E{constructor(e){e?"string"==typeof e&&(e=document.querySelector(e)):e=document.querySelector('[data-o-component="o-header"]'),e.hasAttribute("data-o-header--js")||(this.headerEl=e,r.init(this.headerEl),d.init(this.headerEl),f.init(this.headerEl),m.init(this.headerEl),v.init(this.headerEl),this.headerEl.removeAttribute("data-o-header--no-js"),this.headerEl.setAttribute("data-o-header--js",""))}static init(e){return e||(e=document.body),e instanceof HTMLElement||(e=document.querySelector(e)),/\bo-header\b/.test(e.getAttribute("data-o-component"))?new E(e):[].map.call(e.querySelectorAll('[data-o-component="o-header"]'),e=>{if(!e.hasAttribute("data-o-header--js"))return new E(e)}).filter(e=>void 0!==e)}}var w=E;const b=()=>{w.init(),document.removeEventListener("o.DOMContentLoaded",b)};"undefined"!=typeof document&&document.addEventListener("o.DOMContentLoaded",b);t.default=w}}]);
//# sourceMappingURL=financial-times-o-header.5bd2d74b41f4.bundle.js.map