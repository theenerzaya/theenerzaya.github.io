(window.webpackJsonp=window.webpackJsonp||[]).push([["financial-times-n-myft-ui"],{"09b85b5c":function(t,e,n){"use strict";n.r(e);var a=n("1a4b61f3"),o=n.n(a);e.default=()=>{const t=o.a.get("FTSession_s")||o.a.get("FTSession");return t?t.slice(-36):""}},"0db59313":function(t,e,n){var a=n("051e1e09");t.exports=(a.default||a).template({1:function(t,e,n,a,o){var r,i=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return t.escapeExpression(t.lambda((r=o&&i(o,"root"))&&i(r,"csrfToken"),e))},compiler:[8,">= 4.3.0"],main:function(t,e,n,a,o){var r,i=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<input\n\tdata-myft-csrf-token\n\tvalue="'+(null!=(r=i(n,"if").call(null!=e?e:t.nullContext||{},(r=o&&i(o,"root"))&&i(r,"cacheablePersonalisedUrl"),{name:"if",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o,loc:{start:{line:3,column:8},end:{line:3,column:72}}}))?r:"")+'"\n\ttype="hidden"\n\tname="token">\n'},useData:!0})},"4642d46e":function(t,e){t.exports={toggleState:function(t,e){const n=t.getAttribute("aria-label"),a=t.getAttribute("data-alternate-label");n&&(t.setAttribute("aria-label",a),t.setAttribute("title",a),t.setAttribute("data-alternate-label",n));const o=t.textContent||t.innerText;if(o){const e=t.getAttribute("data-text-variant"),n=t.querySelector("[data-variant-label]"),r=e&&n?n:t,i=t.getAttribute("data-alternate-text")||a;if(r.textContent=i,e){const e=i.includes("Saved")?"Save ":"Saved ";t.setAttribute("data-alternate-text",e)}else t.setAttribute("data-alternate-text",o)}const r="true"===t.getAttribute("aria-pressed");return e||t.setAttribute("aria-pressed",!r),t.dispatchEvent(new CustomEvent("nButtons.stateChange",{detail:{state:r},bubbles:!0})),t}}},b6014bf9:function(t,e,n){"use strict";n.r(e),n.d(e,"client",(function(){return o.a})),n.d(e,"ui",(function(){return a}));var a={};n.r(a),n.d(a,"init",(function(){return ut})),n.d(a,"personaliseLinks",(function(){return A})),n.d(a,"updateUi",(function(){return lt}));var o=n("7fe8ac7b");var r={saved:{actorType:"user",idProperty:"data-content-id",subjectType:"content",uiSelector:'[data-myft-ui="saved"]'},followed:{actorType:"user",idProperty:"data-concept-id",subjectType:"concept",uiSelector:'[data-myft-ui="follow"]'}};const i={};function c(t){return i[t]||[]}function s(t,e){if(i[t]){-1===u(t,e.uuid)&&i[t].push(e)}else i[t]=[e]}function l(t,e){const n=u(t,e);-1!==n&&i[t].splice(n,1)}const u=(t,e)=>i[t].findIndex(t=>t.uuid===e);var d=n("4642d46e"),m=n("09b85b5c"),f=function(){let{token:t=Object(m.default)(),container:e=document.body,inputs:n=e.querySelectorAll("[data-myft-csrf-token]")}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Array.from(n).forEach(e=>{e.value=t})};function b(t,e){e!==("true"===t.getAttribute("aria-pressed"))&&d.toggleState(t),t.removeAttribute("disabled")}function p(t,e,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:document,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(!r[t])return;const c=r[t].uiSelector,s=r[t].idProperty,l=Array.from(a.querySelectorAll(c)).map(t=>t.closest("form"));l.forEach(a=>{if(e.includes(a.getAttribute(s))){if(v(t,e[0],n,o),b(a.querySelector("button"),n),i){const t=a.querySelector(".n-myft-ui__announcement");t&&(t.innerHTML=t.dataset[n?"pressedText":"unpressedText"])}f({container:a})}})}function y(t,e,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:document,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},r=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return p(t,[e],n,a,o,r)}function v(t,e,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};"followed"===t&&!0===n&&a.subject&&a.subject.properties&&s(t,a.subject.properties),"followed"===t&&!1===n&&l(t,e)}const h={concept:{idLabel:"concept_id",add:"follow",remove:"unfollow"},content:{idLabel:"article_id",add:"save",remove:"unsave"}},g=(t,e,n)=>{if("update"===e&&"concept"===t){return"instant-alert-"+(n&&n._rel&&n._rel.instant&&"true"===n._rel.instant?"on":"off")}return h[t][e]};function w(t){if(-1!==Object.keys(h).indexOf(t.subjectType)){const e=Object.assign({action:g(t.subjectType,t.action,t.postedData)},t.trackingInfo),n=((t,e)=>{const n={};return n[h[t].idLabel]=e,n})(t.subjectType,t.subjectId);Object.assign(e,n),(t=>{const e=Object.assign({},t,{category:"myFT"});document.body.dispatchEvent(new CustomEvent("oTracking.event",{detail:e,bubbles:!0}))})(e)}}var E=n("e1cd7912"),k=n("d8ac1740"),x=n.n(k),S=n("1ae02a0f"),A=function(t){const e=t&&"A"===t.nodeName?[t]:Object(S.$$)('a[href^="/myft"]',t);return Promise.all(e.map(t=>o.a.personaliseUrl(t.getAttribute("href")).then(e=>t.setAttribute("href",e))))};const{idProperty:T}=r.followed;function _(t,e){const n=t.getAttribute(T).split(","),a=e.name.split(","),o=e.directType?e.directType.split(","):[],r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){const e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}));return n.map((t,n)=>{delete e.name,delete e.type;const i=Object.assign({name:a[n],_rel:{eventId:r,eventType:"coll-add-all"}},e);return o[n]&&(i.directType=o[n]),{id:t,formData:i}})}var j=function(t,e){if(function(t){return t.querySelector("button").hasAttribute("disabled")}(e))return;e.querySelector("button").setAttribute("disabled","");const n=function(t){return"true"===t.querySelector("button").getAttribute("aria-pressed")?"remove":"add"}(e),a=e.getAttribute("data-actor-id"),i=function(t){return function(t){const e={};return t.forEach(t=>{if(t.name)if(t.name.startsWith("_rel.")){const n=t.name.slice("_rel.".length);e._rel=e._rel||{},e._rel[n]=t.value}else e[t.name]=t.value}),e}([t.querySelector("button"),...t.querySelectorAll('input[type="hidden"]')])}(e),c=function(t){return(t.getAttribute("data-myft-tracking")||"").split(",").map(t=>t.split("=")).reduce((t,e)=>{let[n,a]=e;const o=n&&n.trim(),r=a&&a.trim()||!0;return o&&r&&(t[o]=r),t},{})}(e);if(function(t,e){return"followed"===t&&e.getAttribute(T).includes(",")}(t,e))return function(t,e,n,a,r){return Promise.all(_(n,a).map(n=>o.a[t]("user",e,"followed","concept",n.id,n.formData,r))).then(()=>b(n.querySelector("button"),"add"===t))}(n,a,e,i,c);if("followPlusDigestEmail"===e.getAttribute("data-myft-ui-variant")&&"add"===n)return o.a.followPlusDigestEmail(e.getAttribute("data-concept-id"),i);{const s=r[t],l=e.getAttribute(s.idProperty),{actorType:u,subjectType:d}=s;return e.elements.token&&e.elements.token.value||document.body.dispatchEvent(new CustomEvent("oErrors.log",{bubbles:!0,detail:{error:Error("myFT form submitted without a CSRF token"),info:{action:n,actorType:u,actorId:a,relationshipName:t,subjectType:d,subjectId:l,formData:i}}})),o.a[n](u,a,t,d,l,i,c).catch(t=>{throw setTimeout(()=>e.querySelector("button").removeAttribute("disabled"),1e3),t})}};const q=new x.a(document.body);let L;function C(){Object.keys(r).forEach(t=>{const e=r[t].uiSelector;e&&(function(t){return new Promise(e=>{const n=r[t].subjectType,a=`${t}.${n}`;if(o.a.loaded[a])return i[t]=o.a.loaded[a],e();{function c(){i[t]=o.a.loaded[a].items,e()}const r=`myft.user.${t}.${n}.load`;document.body.addEventListener(r,c),setTimeout(()=>{document.body.removeEventListener(r,c),e()},5e3)}})}(t).then(()=>{const e=c(t);if(e.length>0){const n=e.map(t=>t.uuid);p(t,n,!0)}}),["add","remove","update"].forEach(e=>{const n=r[t].actorType,a=r[t].subjectType,o=`myft.${n}.${t}.${a}.${e}`;document.body.addEventListener(o,n=>{const o=n.detail.results&&n.detail.results[0],r=!!n.detail.results;y(t,n.detail.subject,r,void 0,o,!0),w({subjectType:a,action:e,subjectId:n.detail.subject,postedData:n.detail.data,resultData:o,trackingInfo:n.detail.trackingInfo})})}),q.on("submit",e,function(t){return(e,n)=>(e.preventDefault(),j(t,n))}(t)))})}var P=function(t){t.anonymous||f(),L||(L=!0,function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;[r.followed.uiSelector,r.saved.uiSelector,'[data-myft-ui="instant"]'].forEach(e=>{Array.from(t.querySelectorAll(e)).forEach(t=>{t.dataset.jsAction&&(t.setAttribute("method","POST"),t.setAttribute("action",t.dataset.jsAction),delete t.dataset.jsAction)})})}(),t&&t.anonymous?function(){const t=window.location.pathname,e="/products?segID=400863&segmentID=190b4443-dc03-bd53-e79b-b4b6fbd04e64",n="/login"+(t.length?"?location="+t:""),a={followed:`Please <a href="${e}" class="myft-ui-subscribe" data-trackable="Subscribe">subscribe</a> or <a href="${n}" data-trackable="Sign In">sign in</a> to add this topic to myFT.`,saved:`Please <a href="${e}" class="myft-ui-subscribe" data-trackable="Subscribe">subscribe</a> or <a href="${n}" data-trackable="Sign In">sign in</a> to save this article.`};["followed","saved"].forEach(t=>{q.on("submit",r[t].uiSelector,e=>{e.preventDefault(),E.default.show({content:a[t],trackable:"myft-anon",focusSelector:".myft-ui-subscribe",returnFocusSelector:document.activeElement,duration:0})})})}():(C(),A()))},O=n("15baad73");function $(){return Math.max(document.documentElement.clientWidth||0,window.innerWidth||0)<=980}var I=n("68726ee1");function D(t){const e=document.createElement("template");return e.innerHTML=t.trim(),e.content.firstChild}const N=Object(m.default)();let F,R,B,H=[],M=!1;function U(t){return function(t,e){return function(){const n=window.scrollY;Math.abs(n-t)<120||(n&&(t=n),G(e))}}(window.scrollY,t)}function z(t){return function(){G(t)}}function V(t,e,n,a,o){const r=D(`\n\t<form class="myft-ui-create-list-variant-form">\n\t\t<label class="myft-ui-create-list-variant-form-name o-forms-field">\n\t\t\t<span class="o-forms-input o-forms-input--text">\n\t\t\t\t<input class="myft-ui-create-list-variant-text" type="text" name="list-name" aria-label="List name">\n\t\t\t</span>\n\t\t</label>\n\n\t\t${e?'<div class="myft-ui-create-list-variant-form-public o-forms-field" role="group">\n\t\t\t\t<span class="o-forms-input o-forms-input--toggle">\n\t\t\t\t\t<label>\n\t\t\t\t\t\t<input class="myft-ui-create-list-variant-form-toggle" type="checkbox" name="is-public" value="public" checked data-trackable="private-link" text="private">\n\t\t\t\t\t\t<span class="myft-ui-create-list-variant-form-toggle-label o-forms-input__label">\n\t\t\t\t\t\t\t<span class="o-forms-input__label__main">\n\t\t\t\t\t\t\t\tPublic\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span id="myft-ui-create-list-variant-form-public-description" class="o-forms-input__label__prompt">\n\t\t\t\t\t\t\t\tYour profession & list will be visible to others\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</label>\n\t\t\t\t</span>\n\t\t\t</div>':""}\n\n\t\t<div class="myft-ui-create-list-variant-form-buttons">\n\t\t\t<button class="o-buttons o-buttons--primary o-buttons--inverse o-buttons--big" type="button" data-trackable="cancel-link" text="cancel">\n\t\t\tCancel\n\t\t\t</button>\n\t\t\t<button class="o-buttons o-buttons--big o-buttons--secondary" type="submit">\n\t\t\tAdd\n\t\t\t</button>\n\t\t</div>\n\t</form>\n\t`);return r.querySelector('button[type="submit"]').addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation();const n=r.querySelector('input[name="list-name"]'),o=r.querySelector('input[name="is-public"]'),i={name:n.value,isPublic:!!o&&o.checked};t(i,(t,e)=>{!function(t,e){document.body.dispatchEvent(new CustomEvent("oTracking.event",{detail:{category:"list",action:"create-success",article_id:t,list_id:e,teamName:"customer-products-us-growth",amplitudeExploratory:!0},bubbles:!0}))}(t,e.uuid),Q(t,e.uuid),G(F.wrapper),a()}),r.remove()})),r.querySelector('button[type="button"]').addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation(),document.body.dispatchEvent(new CustomEvent("oTracking.event",{detail:{category:"publicToggle",action:"cancel ",teamName:"customer-products-us-growth",amplitudeExploratory:!0},bubbles:!0})),r.remove(),H.length||n(),o()})),e&&function(t){t.querySelector('input[name="is-public"]').addEventListener("click",(function(t){var e;t.target.setAttribute("data-trackable",t.target.checked?"private-link":"public-link"),t.target.setAttribute("text",t.target.checked?"private":"public"),e=t.target.checked,document.body.dispatchEvent(new CustomEvent("oTracking.event",{detail:{category:"publicToggle",action:e?"setPublic":"setPrivate",teamName:"customer-products-us-growth",amplitudeExploratory:!0},bubbles:!0}))}))}(r),r}function W(t,e){const n='<p class="myft-ui-create-list-variant-add-description">Lists are a simple way to curate your content</p>',a=D(`\n\t\t<div class="myft-ui-create-list-variant-footer">\n\t\t\t<button class="myft-ui-create-list-variant-add myft-ui-create-list-variant-add-collapsed" data-trackable="add-to-new-list" text="add to new list">Add to a new list</button>\n\t\t\t${t?`\n\t\t\t${n}\n\t\t`:""}\n\t\t</div>\n\t`);function o(t){a.querySelector(".myft-ui-create-list-variant-add").classList.remove("myft-ui-create-list-variant-add-collapsed"),e(t)}return a.querySelector(".myft-ui-create-list-variant-add").addEventListener("click",tt),a.querySelector(".myft-ui-create-list-variant-add").addEventListener("click",Z),[a,function(){const t=a.querySelector(".myft-ui-create-list-variant-add-description");t&&t.remove()},function(){const t=D(n);a.insertAdjacentElement("beforeend",t)},function(){return a.querySelector(".myft-ui-create-list-variant-add").classList.add("myft-ui-create-list-variant-add-collapsed"),a.addEventListener("click",o,{once:!0})}]}function Y(){return D('\n\t\t<span class="myft-ui-create-list-variant-heading">Added to <a href="https://www.ft.com/myft/saved-articles" data-trackable="saved-articles">saved articles</a> in <span class="myft-ui-create-list-variant-icon"><span class="myft-ui-create-list-variant-icon-visually-hidden">my FT</span></span></span>\n\t\t')}function J(t,e,n){const a=document.querySelector(".myft-ui-create-list-variant-lists");a&&a.remove();const o=function(t,e){return function(n){const a=D(`<label>\n\t\t<input type="checkbox" name="default" value="${n.uuid}" ${n.checked?"checked":""}>\n\t\t<span class="o-forms-input__label">\n\t\t\t<span class="o-normalise-visually-hidden">\n\t\t\t${n.checked?"Remove article from ":"Add article to "}\n\t\t\t</span>\n\t\t\t${n.name}\n\t\t</span>\n\t</label>\n\t`),[o]=a.children;return o.addEventListener("click",(function(o){o.preventDefault();const r=o.target.checked;function i(){const t=H.indexOf(n);H[t]={...H[t],checked:r},a.querySelector("input").checked=r}return r?t(n,i):e(n,i)})),a}}(e,n),r=D('\n\t<div class="myft-ui-create-list-variant-lists o-forms-field o-forms-field--optional" role="group">\n\t\t<span class="myft-ui-create-list-variant-lists-text">Add to list</span>\n\t\t<span class="myft-ui-create-list-variant-lists-container o-forms-input o-forms-input--checkbox">\n\t\t</span>\n\t</div>\n\t'),i=r.querySelector(".myft-ui-create-list-variant-lists-container");function c(){i.replaceChildren(...t.map(t=>o(t)))}return c(),[r,c,function(){r.style.display="none"},function(){r.style.display="flex"}]}function G(t){if(t.style["min-width"]="340px",t.style.width="100%",t.style["margin-top"]=0,t.style.left=0,t.style.top=0,$()){const e=document.querySelector(".share-nav__horizontal"),n=t.clientHeight+10;t.style.position="absolute",t.style["margin-left"]=0,t.style.top="ABOVE"===function(t){if(!t)return"BELOW";const e=Math.min(document.documentElement.clientHeight||0,window.innerHeight||0),n=t.getBoundingClientRect(),a=n.top;return e-n.bottom<a?"ABOVE":"BELOW"}(e)?`-${n}px`:"50px"}else t.style.position="absolute",t.style["margin-left"]="45px"}async function K(t){return o.a.getListsContent().then(e=>e.items.map(e=>{const n=Array.isArray(e.content)&&e.content.some(e=>e.uuid===t);return{name:e.name,uuid:e.uuid,checked:n,content:e.content,isPublic:e.isPublic}}))}function Q(t,e){return document.body.dispatchEvent(new CustomEvent("oTracking.event",{detail:{category:"list",action:"add-success",article_id:t,list_id:e,teamName:"customer-products-us-growth",amplitudeExploratory:!0},bubbles:!0}))}function X(t,e){return document.body.dispatchEvent(new CustomEvent("oTracking.event",{detail:{category:"list",action:"remove-success",article_id:t,list_id:e,teamName:"customer-products-us-growth",amplitudeExploratory:!0},bubbles:!0}))}function Z(){document.body.dispatchEvent(new CustomEvent("oTracking.event",{detail:{category:"publicToggle",action:"addToNewList",teamName:"customer-products-us-growth",amplitudeExploratory:!0},bubbles:!0}))}function tt(){B>window.innerHeight&&window.scrollY>R&&document.body.dispatchEvent(new CustomEvent("oTracking.event",{detail:{category:"publicToggle",action:"scrollToAdd",teamName:"customer-products-us-growth",amplitudeExploratory:!0},bubbles:!0}))}const et=new x.a(document.body),nt=Object(m.default)();function at(t,e,n){return y("contained",e,n),o.a.personaliseUrl("/myft/list/"+t).then(a=>{const o=`\n\t\t\t\t<a href="/myft" class="myft-ui__logo" data-trackable="myft-logo"><abbr title="myFT" class="myft-ui__icon"></abbr></a>\n\t\t\t\t\t${n?`Article added to your list.\n\t\t\t\t<a href="${a}" data-trackable="alerts">View list</a>`:"Article removed from your list"}\n\t\t\t`;o&&(E.default.show({content:o,trackable:"myft-feedback-notification"}),document.body.dispatchEvent(new CustomEvent("oTracking.event",{detail:{category:"list",action:"copy-success",article_id:e,list_id:t,content:{uuid:e},teamName:"customer-products-us-growth",amplitudeExploratory:!0},bubbles:!0})))})}function ot(t,e,n){o.a.personaliseUrl(e).then(t=>fetch(t,{credentials:"same-origin"})).then(t=>{if(t.ok)return t.text();throw new Error("Unexpected response: "+t.statusText)}).then(e=>function(t,e){let{name:n="myft-ui",title:a="&nbsp;",shaded:o=!1}=e;const r=O.default.getOverlays()[n];r&&r.destroy();const i=new O.default(n,{heading:{title:a,shaded:o},html:t});return i.open(),new Promise(t=>{document.body.addEventListener("oOverlay.ready",()=>t(i))})}(e,{name:"myft-lists",title:t})).then(t=>{I.default.init(t.content),function(t,e){const n=t.content.querySelector(".js-save-to-existing-list"),a=t.content.querySelector(".js-list-select");n&&n.addEventListener("click",n=>{if(n.preventDefault(),!a.value)return;const r=a.options[a.selectedIndex].value;o.a.add("list",r,"contained","content",e,{token:nt}).then(e=>{at(e.actorId,e.subject,!!e.results),t.close()})})}(t,n),function(t,e){const n=t.content.querySelector(".js-create-list"),a=t.content.querySelector(".js-name");n&&n.addEventListener("click",n=>{if(n.preventDefault(),!a.value)return;const r={token:nt,name:a.value};o.a.add("user",null,"created","list",Object(S.uuid)(),r).then(t=>e?o.a.add("list",t.subject,"contained","content",e,{token:nt}):t).then(n=>{e&&at(n.actorId,e,!!n.results),t.close()}).catch(t=>{throw E.default.show({content:e?"Error adding article to new list":"Error creating new list",type:"error"}),t})})}(t,n)}).catch(t=>{throw E.default.show({content:"Sorry, something went wrong",type:"error"}),t})}function rt(t,e){return async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{name:n,showPublicToggle:a=!1}=e;function r(e,n){if(!e||!e.name)return s();o.a.add("user",null,"created","list",Object(S.uuid)(),{name:e.name,token:N,isPublic:e.isPublic}).then(a=>{o.a.add("list",a.subject,"contained","content",t,{token:N}).then(a=>{const o={name:e.name,uuid:a.actorId,checked:!0,isPublic:!!e.isPublic};H.unshift(o);document.querySelector(".myft-ui-create-list-variant-announcement").textContent=e.name+" created",n(t,o)})}).catch(()=>s())}function i(e,n){e&&o.a.add("list",e.uuid,"contained","content",t,{token:N}).then(e=>{n(),Q(t,e.actorId)})}function c(e,n){e&&o.a.remove("list",e.uuid,"contained","content",t,{token:N}).then(e=>{n(),X(t,e.actorId)})}function s(){return H.length||b(),v(),g(),p()}M||(H=await K(t),M=!0);const l=O.default.getOverlays(),u=l[n];u&&u.destroy();const d=Y();let[m,f,b,p]=W(!H.length,x);const[y,v,h,g]=J(H,i,c);function w(t){const e=document.querySelector(".o-overlay__content"),n=document.querySelector(".o-overlay").contains(t.target)&&!t.target.classList.contains("o-overlay__close");!F.visible||e&&n||F.close()}function E(){g(),p()}function k(){v(),g(),p()}function x(){h();const t=V(r,a,b,k,E),e=document.querySelector(".o-overlay__content");f(),e.insertAdjacentElement("beforeend",t),t.elements[0].focus()}F=new O.default(n,{html:m,heading:{title:d.outerHTML},modal:!1,parentnode:$()?".o-share--horizontal":".o-share--vertical",class:"myft-ui-create-list-variant"}),F.open(),R=window.scrollY;const A=U(F.wrapper),T=z(F.wrapper);F.wrapper.addEventListener("oOverlay.ready",t=>{if(H.length){document.querySelector(".o-overlay__content").insertAdjacentElement("afterbegin",y)}G(t.currentTarget),B=document.querySelector(".myft-ui-create-list-variant").getBoundingClientRect().bottom,p(),document.querySelector(".article-content").addEventListener("click",w),window.addEventListener("scroll",A),window.addEventListener("oViewport.resize",T)}),F.wrapper.addEventListener("oOverlay.destroy",()=>{window.removeEventListener("scroll",A),window.removeEventListener("oViewport.resize",T),document.querySelector(".article-content").removeEventListener("click",w)})}(t,{name:"myft-ui-create-list-variant",...e})}function it(t){return o.a.getAll("created","list").then(t=>t.filter(t=>!t.isRedirect)).then(e=>{e.length&&function(t){ot("Article saved","/myft/list?fragment=true&fromArticleSaved=true&contentId="+t,t)}(t)})}function ct(t){t.preventDefault();const e=t.target,n=e.querySelector('button[type="submit"]');if(n.hasAttribute("disabled"))return;const a="true"===n.getAttribute("aria-pressed"),r=a?"remove":"add",i=e.dataset.contentId,c=e.dataset.actorId,s=e.elements.token;s&&s.value||document.body.dispatchEvent(new CustomEvent("oErrors.log",{bubbles:!0,detail:{error:new Error("myFT form submitted without a CSRF token"),info:{action:r,actorType:"list",actorId:c,relationshipName:"contained",subjectType:"content",subjectId:i}}})),n.setAttribute("disabled",""),o.a[r]("list",c,"contained","content",i,{token:s.value}).then(()=>{b(n,!a),document.body.dispatchEvent(new CustomEvent("oTracking.event",{detail:{category:"list",action:"add"===r?"add-success":"remove-success",article_id:i,list_id:c,content:{uuid:i},teamName:"customer-products-us-growth",amplitudeExploratory:!0},bubbles:!0}))}).catch(t=>{throw setTimeout(()=>n.removeAttribute("disabled")),t})}function st(){document.body.addEventListener("myft.user.saved.content.add",t=>{const e=t.detail.subject,n=t.currentTarget.querySelector('[data-myft-ui-save-new="manageArticleLists"]');if(n){const t=n.dataset.myftUiSaveNewConfig.split(",").reduce((t,e)=>e?{...t,[e]:!0}:t,{});return document.body.dispatchEvent(new CustomEvent("oTracking.event",{detail:{category:"publicToggle",action:"savedArticle",article_id:e,teamName:"customer-products-us-growth",amplitudeExploratory:!0},bubbles:!0})),function(t,e){return o.a.getAll("created","list").then(t=>t.filter(t=>!t.isRedirect)).then(()=>rt(t,e))}(e,t)}it(e)}),document.body.addEventListener("myft.user.saved.content.remove",t=>{t.detail.subject;if(t.currentTarget.querySelector('[data-myft-ui-save-new="manageArticleLists"]'))return function(){const t=$()?".o-share--horizontal":".o-share--vertical",e=document.querySelector(t);if(document.querySelector(".myft-notification")||!e)return;const n=D('\n\t\t<p role="alert">Removed from <a href="https://www.ft.com/myft/saved-articles">saved articles</a> in myFT</p>\n\t'),a=document.createElement("div");a.className="myft-notification",a.appendChild(n),e.appendChild(a),setTimeout(()=>e.removeChild(a),5e3)}()}),et.on("click",'[data-myft-ui="copy-to-list"]',t=>{var e,n;t.preventDefault(),e=t.target.getAttribute("data-content-id"),n=t.target.getAttribute("data-actor-id"),ot("Copy to list",`/myft/list?fragment=true&copy=true&contentId=${e}&excludeList=${n}`,e)}),et.on("click",'[data-myft-ui="create-list"]',t=>{t.preventDefault(),ot("Create list","/myft/list?fragment=true")}),et.on("submit",'[data-myft-ui="contained"]',ct)}var lt=function(t){A(t),Object.keys(r).forEach(e=>{const n=c(e);if(n.length>0){p(e,n.map(t=>t.uuid),!0,t)}}),f({container:t})};function ut(t){P(t),st()}}}]);
//# sourceMappingURL=financial-times-n-myft-ui.3ab9115ecd5f.bundle.js.map